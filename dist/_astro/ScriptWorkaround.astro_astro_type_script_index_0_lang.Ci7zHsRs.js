var Zf=(S,x)=>()=>(x||S((x={exports:{}}).exports,x),x.exports);var tm=Zf((wa,Ea)=>{/*! For license information please see cld-video-player.js.LICENSE.txt */var Fs,Xr,jh={3314:(S,x)=>{function u(b,m){return m===void 0&&(m=Object),m&&typeof m.freeze=="function"?m.freeze(b):b}var y=u({HTML:"text/html",isHTML:function(b){return b===y.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),p=u({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(b){return b===p.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});x.assign=function(b,m){if(b===null||typeof b!="object")throw new TypeError("target is not an object");for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(b[E]=m[E]);return b},x.find=function(b,m,E){if(E===void 0&&(E=Array.prototype),b&&typeof E.find=="function")return E.find.call(b,m);for(var P=0;P<b.length;P++)if(Object.prototype.hasOwnProperty.call(b,P)){var $=b[P];if(m.call(void 0,$,P,b))return $}},x.freeze=u,x.MIME_TYPE=y,x.NAMESPACE=p},6404:(S,x,u)=>{var y=u(3314),p=u(6278),b=u(251),m=u(8654),E=p.DOMImplementation,P=y.NAMESPACE,$=m.ParseError,j=m.XMLReader;function G(B){return B.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function M(B){this.options=B||{locator:{}}}function nt(){this.cdata=!1}function pt(B,it){it.lineNumber=B.lineNumber,it.columnNumber=B.columnNumber}function Mt(B){if(B)return`
@`+(B.systemId||"")+"#[line:"+B.lineNumber+",col:"+B.columnNumber+"]"}function rt(B,it,Q){return typeof B=="string"?B.substr(it,Q):B.length>=it+Q||it?new java.lang.String(B,it,Q)+"":B}function ft(B,it){B.currentElement?B.currentElement.appendChild(it):B.doc.appendChild(it)}M.prototype.parseFromString=function(B,it){var Q=this.options,ut=new j,tt=Q.domBuilder||new nt,Dt=Q.errorHandler,q=Q.locator,Y=Q.xmlns||{},st=/\/x?html?$/.test(it),It=st?b.HTML_ENTITIES:b.XML_ENTITIES;q&&tt.setDocumentLocator(q),ut.errorHandler=function(Tt,Et,Lt){if(!Tt){if(Et instanceof nt)return Et;Tt=Et}var wt={},qt=Tt instanceof Function;function Kt(be){var ee=Tt[be];!ee&&qt&&(ee=Tt.length==2?function(Ee){Tt(be,Ee)}:Tt),wt[be]=ee&&function(Ee){ee("[xmldom "+be+"]	"+Ee+Mt(Lt))}||function(){}}return Lt=Lt||{},Kt("warning"),Kt("error"),Kt("fatalError"),wt}(Dt,tt,q),ut.domBuilder=Q.domBuilder||tt,st&&(Y[""]=P.HTML),Y.xml=Y.xml||P.XML;var Ot=Q.normalizeLineEndings||G;return B&&typeof B=="string"?ut.parse(Ot(B),Y,It):ut.errorHandler.error("invalid doc source"),tt.doc},nt.prototype={startDocument:function(){this.doc=new E().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(B,it,Q,ut){var tt=this.doc,Dt=tt.createElementNS(B,Q||it),q=ut.length;ft(this,Dt),this.currentElement=Dt,this.locator&&pt(this.locator,Dt);for(var Y=0;Y<q;Y++){B=ut.getURI(Y);var st=ut.getValue(Y),It=(Q=ut.getQName(Y),tt.createAttributeNS(B,Q));this.locator&&pt(ut.getLocator(Y),It),It.value=It.nodeValue=st,Dt.setAttributeNode(It)}},endElement:function(B,it,Q){var ut=this.currentElement;ut.tagName,this.currentElement=ut.parentNode},startPrefixMapping:function(B,it){},endPrefixMapping:function(B){},processingInstruction:function(B,it){var Q=this.doc.createProcessingInstruction(B,it);this.locator&&pt(this.locator,Q),ft(this,Q)},ignorableWhitespace:function(B,it,Q){},characters:function(B,it,Q){if(B=rt.apply(this,arguments)){if(this.cdata)var ut=this.doc.createCDATASection(B);else ut=this.doc.createTextNode(B);this.currentElement?this.currentElement.appendChild(ut):/^\s*$/.test(B)&&this.doc.appendChild(ut),this.locator&&pt(this.locator,ut)}},skippedEntity:function(B){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(B){(this.locator=B)&&(B.lineNumber=0)},comment:function(B,it,Q){B=rt.apply(this,arguments);var ut=this.doc.createComment(B);this.locator&&pt(this.locator,ut),ft(this,ut)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(B,it,Q){var ut=this.doc.implementation;if(ut&&ut.createDocumentType){var tt=ut.createDocumentType(B,it,Q);this.locator&&pt(this.locator,tt),ft(this,tt),this.doc.doctype=tt}},warning:function(B){console.warn("[xmldom warning]	"+B,Mt(this.locator))},error:function(B){console.error("[xmldom error]	"+B,Mt(this.locator))},fatalError:function(B){throw new $(B,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(B){nt.prototype[B]=function(){return null}}),x.DOMParser=M},6278:(S,x,u)=>{var y=u(3314),p=y.find,b=y.NAMESPACE;function m(L){return L!==""}function E(L,U){return L.hasOwnProperty(U)||(L[U]=!0),L}function P(L){if(!L)return[];var U=function(J){return J?J.split(/[\t\n\f\r ]+/).filter(m):[]}(L);return Object.keys(U.reduce(E,{}))}function $(L,U){for(var J in L)Object.prototype.hasOwnProperty.call(L,J)&&(U[J]=L[J])}function j(L,U){var J=L.prototype;if(!(J instanceof U)){let Xt=function(){};var bt=Xt;Xt.prototype=U.prototype,$(J,Xt=new Xt),L.prototype=J=Xt}J.constructor!=L&&(typeof L!="function"&&console.error("unknown Class:"+L),J.constructor=L)}var G={},M=G.ELEMENT_NODE=1,nt=G.ATTRIBUTE_NODE=2,pt=G.TEXT_NODE=3,Mt=G.CDATA_SECTION_NODE=4,rt=G.ENTITY_REFERENCE_NODE=5,ft=G.ENTITY_NODE=6,B=G.PROCESSING_INSTRUCTION_NODE=7,it=G.COMMENT_NODE=8,Q=G.DOCUMENT_NODE=9,ut=G.DOCUMENT_TYPE_NODE=10,tt=G.DOCUMENT_FRAGMENT_NODE=11,Dt=G.NOTATION_NODE=12,q={},Y={},st=(q.INDEX_SIZE_ERR=(Y[1]="Index size error",1),q.DOMSTRING_SIZE_ERR=(Y[2]="DOMString size error",2),q.HIERARCHY_REQUEST_ERR=(Y[3]="Hierarchy request error",3)),It=(q.WRONG_DOCUMENT_ERR=(Y[4]="Wrong document",4),q.INVALID_CHARACTER_ERR=(Y[5]="Invalid character",5),q.NO_DATA_ALLOWED_ERR=(Y[6]="No data allowed",6),q.NO_MODIFICATION_ALLOWED_ERR=(Y[7]="No modification allowed",7),q.NOT_FOUND_ERR=(Y[8]="Not found",8)),Ot=(q.NOT_SUPPORTED_ERR=(Y[9]="Not supported",9),q.INUSE_ATTRIBUTE_ERR=(Y[10]="Attribute in use",10));function Tt(L,U){if(U instanceof Error)var J=U;else J=this,Error.call(this,Y[L]),this.message=Y[L],Error.captureStackTrace&&Error.captureStackTrace(this,Tt);return J.code=L,U&&(this.message=this.message+": "+U),J}function Et(){}function Lt(L,U){this._node=L,this._refresh=U,wt(this)}function wt(L){var U=L._node._inc||L._node.ownerDocument._inc;if(L._inc!==U){var J=L._refresh(L._node);if(hi(L,"length",J.length),!L.$$length||J.length<L.$$length)for(var bt=J.length;bt in L;bt++)Object.prototype.hasOwnProperty.call(L,bt)&&delete L[bt];$(J,L),L._inc=U}}function qt(){}function Kt(L,U){for(var J=L.length;J--;)if(L[J]===U)return J}function be(L,U,J,bt){if(bt?U[Kt(U,bt)]=J:U[U.length++]=J,L){J.ownerElement=L;var Xt=L.ownerDocument;Xt&&(bt&&Qe(Xt,L,bt),function(Se,Ie,ei){Se&&Se._inc++,ei.namespaceURI===b.XMLNS&&(Ie._nsMap[ei.prefix?ei.localName:""]=ei.value)}(Xt,L,J))}}function ee(L,U,J){var bt=Kt(U,J);if(!(bt>=0))throw new Tt(It,new Error(L.tagName+"@"+J));for(var Xt=U.length-1;bt<Xt;)U[bt]=U[++bt];if(U.length=Xt,L){var Se=L.ownerDocument;Se&&(Qe(Se,L,J),J.ownerElement=null)}}function Ee(){}function de(){}function xe(L){return(L=="<"?"&lt;":L==">"&&"&gt;")||L=="&"&&"&amp;"||L=='"'&&"&quot;"||"&#"+L.charCodeAt()+";"}function Bt(L,U){if(U(L))return!0;if(L=L.firstChild)do if(Bt(L,U))return!0;while(L=L.nextSibling)}function le(){this.ownerDocument=this}function Qe(L,U,J,bt){L&&L._inc++,J.namespaceURI===b.XMLNS&&delete U._nsMap[J.prefix?J.localName:""]}function di(L,U,J){if(L&&L._inc){L._inc++;var bt=U.childNodes;if(J)bt[bt.length++]=J;else{for(var Xt=U.firstChild,Se=0;Xt;)bt[Se++]=Xt,Xt=Xt.nextSibling;bt.length=Se,delete bt[bt.length]}}}function $t(L,U){var J=U.previousSibling,bt=U.nextSibling;return J?J.nextSibling=bt:L.firstChild=bt,bt?bt.previousSibling=J:L.lastChild=J,U.parentNode=null,U.previousSibling=null,U.nextSibling=null,di(L.ownerDocument,L),U}function Ce(L){return L&&L.nodeType===de.DOCUMENT_TYPE_NODE}function Xe(L){return L&&L.nodeType===de.ELEMENT_NODE}function Ni(L){return L&&L.nodeType===de.TEXT_NODE}function li(L,U){var J=L.childNodes||[];if(p(J,Xe)||Ce(U))return!1;var bt=p(J,Ce);return!(U&&bt&&J.indexOf(bt)>J.indexOf(U))}function Pt(L,U){var J=L.childNodes||[];if(p(J,function(Xt){return Xe(Xt)&&Xt!==U}))return!1;var bt=p(J,Ce);return!(U&&bt&&J.indexOf(bt)>J.indexOf(U))}function xt(L,U,J){var bt=L.childNodes||[],Xt=U.childNodes||[];if(U.nodeType===de.DOCUMENT_FRAGMENT_NODE){var Se=Xt.filter(Xe);if(Se.length>1||p(Xt,Ni))throw new Tt(st,"More than one element or text in fragment");if(Se.length===1&&!li(L,J))throw new Tt(st,"Element in fragment can not be inserted before doctype")}if(Xe(U)&&!li(L,J))throw new Tt(st,"Only one element can be added and only after doctype");if(Ce(U)){if(p(bt,Ce))throw new Tt(st,"Only one doctype is allowed");var Ie=p(bt,Xe);if(J&&bt.indexOf(Ie)<bt.indexOf(J))throw new Tt(st,"Doctype can only be inserted before an element");if(!J&&Ie)throw new Tt(st,"Doctype can not be appended since element is present")}}function Wt(L,U,J){var bt=L.childNodes||[],Xt=U.childNodes||[];if(U.nodeType===de.DOCUMENT_FRAGMENT_NODE){var Se=Xt.filter(Xe);if(Se.length>1||p(Xt,Ni))throw new Tt(st,"More than one element or text in fragment");if(Se.length===1&&!Pt(L,J))throw new Tt(st,"Element in fragment can not be inserted before doctype")}if(Xe(U)&&!Pt(L,J))throw new Tt(st,"Only one element can be added and only after doctype");if(Ce(U)){let bi=function(xi){return Ce(xi)&&xi!==J};var ei=bi;if(p(bt,bi))throw new Tt(st,"Only one doctype is allowed");var Ie=p(bt,Xe);if(J&&bt.indexOf(Ie)<bt.indexOf(J))throw new Tt(st,"Doctype can only be inserted before an element")}}function Ut(L,U,J,bt){(function(bi,xi,ii){if(!function(Oi){return Oi&&(Oi.nodeType===de.DOCUMENT_NODE||Oi.nodeType===de.DOCUMENT_FRAGMENT_NODE||Oi.nodeType===de.ELEMENT_NODE)}(bi))throw new Tt(st,"Unexpected parent node type "+bi.nodeType);if(ii&&ii.parentNode!==bi)throw new Tt(It,"child not in parent");if(!function(Oi){return Oi&&(Xe(Oi)||Ni(Oi)||Ce(Oi)||Oi.nodeType===de.DOCUMENT_FRAGMENT_NODE||Oi.nodeType===de.COMMENT_NODE||Oi.nodeType===de.PROCESSING_INSTRUCTION_NODE)}(xi)||Ce(xi)&&bi.nodeType!==de.DOCUMENT_NODE)throw new Tt(st,"Unexpected node type "+xi.nodeType+" for parent node type "+bi.nodeType)})(L,U,J),L.nodeType===de.DOCUMENT_NODE&&(bt||xt)(L,U,J);var Xt=U.parentNode;if(Xt&&Xt.removeChild(U),U.nodeType===tt){var Se=U.firstChild;if(Se==null)return U;var Ie=U.lastChild}else Se=Ie=U;var ei=J?J.previousSibling:L.lastChild;Se.previousSibling=ei,Ie.nextSibling=J,ei?ei.nextSibling=Se:L.firstChild=Se,J==null?L.lastChild=Ie:J.previousSibling=Ie;do Se.parentNode=L;while(Se!==Ie&&(Se=Se.nextSibling));return di(L.ownerDocument||L,L),U.nodeType==tt&&(U.firstChild=U.lastChild=null),U}function Jt(){this._nsMap={}}function ge(){}function ui(){}function oi(){}function Ze(){}function vi(){}function Je(){}function Pe(){}function Ue(){}function K(){}function at(){}function Nt(){}function Vt(){}function Ht(L,U){var J=[],bt=this.nodeType==9&&this.documentElement||this,Xt=bt.prefix,Se=bt.namespaceURI;if(Se&&Xt==null&&(Xt=bt.lookupPrefix(Se))==null)var Ie=[{namespace:Se,prefix:null}];return ve(this,J,L,U,Ie),J.join("")}function Oe(L,U,J){var bt=L.prefix||"",Xt=L.namespaceURI;if(!Xt||bt==="xml"&&Xt===b.XML||Xt===b.XMLNS)return!1;for(var Se=J.length;Se--;){var Ie=J[Se];if(Ie.prefix===bt)return Ie.namespace!==Xt}return!0}function ye(L,U,J){L.push(" ",U,'="',J.replace(/[<>&"\t\n\r]/g,xe),'"')}function ve(L,U,J,bt,Xt){if(Xt||(Xt=[]),bt){if(!(L=bt(L)))return;if(typeof L=="string")return void U.push(L)}switch(L.nodeType){case M:var Se=L.attributes,Ie=Se.length,ei=L.firstChild,bi=L.tagName,xi=bi;if(!(J=b.isHTML(L.namespaceURI)||J)&&!L.prefix&&L.namespaceURI){for(var ii,Oi=0;Oi<Se.length;Oi++)if(Se.item(Oi).name==="xmlns"){ii=Se.item(Oi).value;break}if(!ii){for(var sn=Xt.length-1;sn>=0;sn--)if(($i=Xt[sn]).prefix===""&&$i.namespace===L.namespaceURI){ii=$i.namespace;break}}if(ii!==L.namespaceURI)for(sn=Xt.length-1;sn>=0;sn--){var $i;if(($i=Xt[sn]).namespace===L.namespaceURI){$i.prefix&&(xi=$i.prefix+":"+bi);break}}}U.push("<",xi);for(var un=0;un<Ie;un++)(_n=Se.item(un)).prefix=="xmlns"?Xt.push({prefix:_n.localName,namespace:_n.value}):_n.nodeName=="xmlns"&&Xt.push({prefix:"",namespace:_n.value});for(un=0;un<Ie;un++){var _n,Pn,qn;Oe(_n=Se.item(un),0,Xt)&&(ye(U,(Pn=_n.prefix||"")?"xmlns:"+Pn:"xmlns",qn=_n.namespaceURI),Xt.push({prefix:Pn,namespace:qn})),ve(_n,U,J,bt,Xt)}if(bi===xi&&Oe(L,0,Xt)&&(ye(U,(Pn=L.prefix||"")?"xmlns:"+Pn:"xmlns",qn=L.namespaceURI),Xt.push({prefix:Pn,namespace:qn})),ei||J&&!/^(?:meta|link|img|br|hr|input)$/i.test(bi)){if(U.push(">"),J&&/^script$/i.test(bi))for(;ei;)ei.data?U.push(ei.data):ve(ei,U,J,bt,Xt.slice()),ei=ei.nextSibling;else for(;ei;)ve(ei,U,J,bt,Xt.slice()),ei=ei.nextSibling;U.push("</",xi,">")}else U.push("/>");return;case Q:case tt:for(ei=L.firstChild;ei;)ve(ei,U,J,bt,Xt.slice()),ei=ei.nextSibling;return;case nt:return ye(U,L.name,L.value);case pt:return U.push(L.data.replace(/[<&>]/g,xe));case Mt:return U.push("<![CDATA[",L.data,"]]>");case it:return U.push("<!--",L.data,"-->");case ut:var Sn=L.publicId,On=L.systemId;if(U.push("<!DOCTYPE ",L.name),Sn)U.push(" PUBLIC ",Sn),On&&On!="."&&U.push(" ",On),U.push(">");else if(On&&On!=".")U.push(" SYSTEM ",On,">");else{var qs=L.internalSubset;qs&&U.push(" [",qs,"]"),U.push(">")}return;case B:return U.push("<?",L.target," ",L.data,"?>");case rt:return U.push("&",L.nodeName,";");default:U.push("??",L.nodeName)}}function Ne(L,U,J){var bt;switch(U.nodeType){case M:(bt=U.cloneNode(!1)).ownerDocument=L;case tt:break;case nt:J=!0}if(bt||(bt=U.cloneNode(!1)),bt.ownerDocument=L,bt.parentNode=null,J)for(var Xt=U.firstChild;Xt;)bt.appendChild(Ne(L,Xt,J)),Xt=Xt.nextSibling;return bt}function Te(L,U,J){var bt=new U.constructor;for(var Xt in U)if(Object.prototype.hasOwnProperty.call(U,Xt)){var Se=U[Xt];typeof Se!="object"&&Se!=bt[Xt]&&(bt[Xt]=Se)}switch(U.childNodes&&(bt.childNodes=new Et),bt.ownerDocument=L,bt.nodeType){case M:var Ie=U.attributes,ei=bt.attributes=new qt,bi=Ie.length;ei._ownerElement=bt;for(var xi=0;xi<bi;xi++)bt.setAttributeNode(Te(L,Ie.item(xi),!0));break;case nt:J=!0}if(J)for(var ii=U.firstChild;ii;)bt.appendChild(Te(L,ii,J)),ii=ii.nextSibling;return bt}function hi(L,U,J){L[U]=J}q.INVALID_STATE_ERR=(Y[11]="Invalid state",11),q.SYNTAX_ERR=(Y[12]="Syntax error",12),q.INVALID_MODIFICATION_ERR=(Y[13]="Invalid modification",13),q.NAMESPACE_ERR=(Y[14]="Invalid namespace",14),q.INVALID_ACCESS_ERR=(Y[15]="Invalid access",15),Tt.prototype=Error.prototype,$(q,Tt),Et.prototype={length:0,item:function(L){return L>=0&&L<this.length?this[L]:null},toString:function(L,U){for(var J=[],bt=0;bt<this.length;bt++)ve(this[bt],J,L,U);return J.join("")},filter:function(L){return Array.prototype.filter.call(this,L)},indexOf:function(L){return Array.prototype.indexOf.call(this,L)}},Lt.prototype.item=function(L){return wt(this),this[L]||null},j(Lt,Et),qt.prototype={length:0,item:Et.prototype.item,getNamedItem:function(L){for(var U=this.length;U--;){var J=this[U];if(J.nodeName==L)return J}},setNamedItem:function(L){var U=L.ownerElement;if(U&&U!=this._ownerElement)throw new Tt(Ot);var J=this.getNamedItem(L.nodeName);return be(this._ownerElement,this,L,J),J},setNamedItemNS:function(L){var U,J=L.ownerElement;if(J&&J!=this._ownerElement)throw new Tt(Ot);return U=this.getNamedItemNS(L.namespaceURI,L.localName),be(this._ownerElement,this,L,U),U},removeNamedItem:function(L){var U=this.getNamedItem(L);return ee(this._ownerElement,this,U),U},removeNamedItemNS:function(L,U){var J=this.getNamedItemNS(L,U);return ee(this._ownerElement,this,J),J},getNamedItemNS:function(L,U){for(var J=this.length;J--;){var bt=this[J];if(bt.localName==U&&bt.namespaceURI==L)return bt}return null}},Ee.prototype={hasFeature:function(L,U){return!0},createDocument:function(L,U,J){var bt=new le;if(bt.implementation=this,bt.childNodes=new Et,bt.doctype=J||null,J&&bt.appendChild(J),U){var Xt=bt.createElementNS(L,U);bt.appendChild(Xt)}return bt},createDocumentType:function(L,U,J){var bt=new Je;return bt.name=L,bt.nodeName=L,bt.publicId=U||"",bt.systemId=J||"",bt}},de.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(L,U){return Ut(this,L,U)},replaceChild:function(L,U){Ut(this,L,U,Wt),U&&this.removeChild(U)},removeChild:function(L){return $t(this,L)},appendChild:function(L){return this.insertBefore(L,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(L){return Te(this.ownerDocument||this,this,L)},normalize:function(){for(var L=this.firstChild;L;){var U=L.nextSibling;U&&U.nodeType==pt&&L.nodeType==pt?(this.removeChild(U),L.appendData(U.data)):(L.normalize(),L=U)}},isSupported:function(L,U){return this.ownerDocument.implementation.hasFeature(L,U)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(L){for(var U=this;U;){var J=U._nsMap;if(J){for(var bt in J)if(Object.prototype.hasOwnProperty.call(J,bt)&&J[bt]===L)return bt}U=U.nodeType==nt?U.ownerDocument:U.parentNode}return null},lookupNamespaceURI:function(L){for(var U=this;U;){var J=U._nsMap;if(J&&Object.prototype.hasOwnProperty.call(J,L))return J[L];U=U.nodeType==nt?U.ownerDocument:U.parentNode}return null},isDefaultNamespace:function(L){return this.lookupPrefix(L)==null}},$(G,de),$(G,de.prototype),le.prototype={nodeName:"#document",nodeType:Q,doctype:null,documentElement:null,_inc:1,insertBefore:function(L,U){if(L.nodeType==tt){for(var J=L.firstChild;J;){var bt=J.nextSibling;this.insertBefore(J,U),J=bt}return L}return Ut(this,L,U),L.ownerDocument=this,this.documentElement===null&&L.nodeType===M&&(this.documentElement=L),L},removeChild:function(L){return this.documentElement==L&&(this.documentElement=null),$t(this,L)},replaceChild:function(L,U){Ut(this,L,U,Wt),L.ownerDocument=this,U&&this.removeChild(U),Xe(L)&&(this.documentElement=L)},importNode:function(L,U){return Ne(this,L,U)},getElementById:function(L){var U=null;return Bt(this.documentElement,function(J){if(J.nodeType==M&&J.getAttribute("id")==L)return U=J,!0}),U},getElementsByClassName:function(L){var U=P(L);return new Lt(this,function(J){var bt=[];return U.length>0&&Bt(J.documentElement,function(Xt){if(Xt!==J&&Xt.nodeType===M){var Se=Xt.getAttribute("class");if(Se){var Ie=L===Se;if(!Ie){var ei=P(Se);Ie=U.every((bi=ei,function(xi){return bi&&bi.indexOf(xi)!==-1}))}Ie&&bt.push(Xt)}}var bi}),bt})},createElement:function(L){var U=new Jt;return U.ownerDocument=this,U.nodeName=L,U.tagName=L,U.localName=L,U.childNodes=new Et,(U.attributes=new qt)._ownerElement=U,U},createDocumentFragment:function(){var L=new at;return L.ownerDocument=this,L.childNodes=new Et,L},createTextNode:function(L){var U=new oi;return U.ownerDocument=this,U.appendData(L),U},createComment:function(L){var U=new Ze;return U.ownerDocument=this,U.appendData(L),U},createCDATASection:function(L){var U=new vi;return U.ownerDocument=this,U.appendData(L),U},createProcessingInstruction:function(L,U){var J=new Nt;return J.ownerDocument=this,J.tagName=J.nodeName=J.target=L,J.nodeValue=J.data=U,J},createAttribute:function(L){var U=new ge;return U.ownerDocument=this,U.name=L,U.nodeName=L,U.localName=L,U.specified=!0,U},createEntityReference:function(L){var U=new K;return U.ownerDocument=this,U.nodeName=L,U},createElementNS:function(L,U){var J=new Jt,bt=U.split(":"),Xt=J.attributes=new qt;return J.childNodes=new Et,J.ownerDocument=this,J.nodeName=U,J.tagName=U,J.namespaceURI=L,bt.length==2?(J.prefix=bt[0],J.localName=bt[1]):J.localName=U,Xt._ownerElement=J,J},createAttributeNS:function(L,U){var J=new ge,bt=U.split(":");return J.ownerDocument=this,J.nodeName=U,J.name=U,J.namespaceURI=L,J.specified=!0,bt.length==2?(J.prefix=bt[0],J.localName=bt[1]):J.localName=U,J}},j(le,de),Jt.prototype={nodeType:M,hasAttribute:function(L){return this.getAttributeNode(L)!=null},getAttribute:function(L){var U=this.getAttributeNode(L);return U&&U.value||""},getAttributeNode:function(L){return this.attributes.getNamedItem(L)},setAttribute:function(L,U){var J=this.ownerDocument.createAttribute(L);J.value=J.nodeValue=""+U,this.setAttributeNode(J)},removeAttribute:function(L){var U=this.getAttributeNode(L);U&&this.removeAttributeNode(U)},appendChild:function(L){return L.nodeType===tt?this.insertBefore(L,null):function(U,J){return J.parentNode&&J.parentNode.removeChild(J),J.parentNode=U,J.previousSibling=U.lastChild,J.nextSibling=null,J.previousSibling?J.previousSibling.nextSibling=J:U.firstChild=J,U.lastChild=J,di(U.ownerDocument,U,J),J}(this,L)},setAttributeNode:function(L){return this.attributes.setNamedItem(L)},setAttributeNodeNS:function(L){return this.attributes.setNamedItemNS(L)},removeAttributeNode:function(L){return this.attributes.removeNamedItem(L.nodeName)},removeAttributeNS:function(L,U){var J=this.getAttributeNodeNS(L,U);J&&this.removeAttributeNode(J)},hasAttributeNS:function(L,U){return this.getAttributeNodeNS(L,U)!=null},getAttributeNS:function(L,U){var J=this.getAttributeNodeNS(L,U);return J&&J.value||""},setAttributeNS:function(L,U,J){var bt=this.ownerDocument.createAttributeNS(L,U);bt.value=bt.nodeValue=""+J,this.setAttributeNode(bt)},getAttributeNodeNS:function(L,U){return this.attributes.getNamedItemNS(L,U)},getElementsByTagName:function(L){return new Lt(this,function(U){var J=[];return Bt(U,function(bt){bt===U||bt.nodeType!=M||L!=="*"&&bt.tagName!=L||J.push(bt)}),J})},getElementsByTagNameNS:function(L,U){return new Lt(this,function(J){var bt=[];return Bt(J,function(Xt){Xt===J||Xt.nodeType!==M||L!=="*"&&Xt.namespaceURI!==L||U!=="*"&&Xt.localName!=U||bt.push(Xt)}),bt})}},le.prototype.getElementsByTagName=Jt.prototype.getElementsByTagName,le.prototype.getElementsByTagNameNS=Jt.prototype.getElementsByTagNameNS,j(Jt,de),ge.prototype.nodeType=nt,j(ge,de),ui.prototype={data:"",substringData:function(L,U){return this.data.substring(L,L+U)},appendData:function(L){L=this.data+L,this.nodeValue=this.data=L,this.length=L.length},insertData:function(L,U){this.replaceData(L,0,U)},appendChild:function(L){throw new Error(Y[st])},deleteData:function(L,U){this.replaceData(L,U,"")},replaceData:function(L,U,J){J=this.data.substring(0,L)+J+this.data.substring(L+U),this.nodeValue=this.data=J,this.length=J.length}},j(ui,de),oi.prototype={nodeName:"#text",nodeType:pt,splitText:function(L){var U=this.data,J=U.substring(L);U=U.substring(0,L),this.data=this.nodeValue=U,this.length=U.length;var bt=this.ownerDocument.createTextNode(J);return this.parentNode&&this.parentNode.insertBefore(bt,this.nextSibling),bt}},j(oi,ui),Ze.prototype={nodeName:"#comment",nodeType:it},j(Ze,ui),vi.prototype={nodeName:"#cdata-section",nodeType:Mt},j(vi,ui),Je.prototype.nodeType=ut,j(Je,de),Pe.prototype.nodeType=Dt,j(Pe,de),Ue.prototype.nodeType=ft,j(Ue,de),K.prototype.nodeType=rt,j(K,de),at.prototype.nodeName="#document-fragment",at.prototype.nodeType=tt,j(at,de),Nt.prototype.nodeType=B,j(Nt,de),Vt.prototype.serializeToString=function(L,U,J){return Ht.call(L,U,J)},de.prototype.toString=Ht;try{if(Object.defineProperty){let L=function(U){switch(U.nodeType){case M:case tt:var J=[];for(U=U.firstChild;U;)U.nodeType!==7&&U.nodeType!==8&&J.push(L(U)),U=U.nextSibling;return J.join("");default:return U.nodeValue}};var Zi=L;Object.defineProperty(Lt.prototype,"length",{get:function(){return wt(this),this.$$length}}),Object.defineProperty(de.prototype,"textContent",{get:function(){return L(this)},set:function(U){switch(this.nodeType){case M:case tt:for(;this.firstChild;)this.removeChild(this.firstChild);(U||String(U))&&this.appendChild(this.ownerDocument.createTextNode(U));break;default:this.data=U,this.value=U,this.nodeValue=U}}}),hi=function(U,J,bt){U["$$"+J]=bt}}}catch{}x.DocumentType=Je,x.DOMException=Tt,x.DOMImplementation=Ee,x.Element=Jt,x.Node=de,x.NodeList=Et,x.XMLSerializer=Vt},251:(S,x,u)=>{var y=u(3314).freeze;x.XML_ENTITIES=y({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),x.HTML_ENTITIES=y({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),x.entityMap=x.HTML_ENTITIES},2854:(S,x,u)=>{var y=u(6278);y.DOMImplementation,y.XMLSerializer,x.DOMParser=u(6404).DOMParser},8654:(S,x,u)=>{var y=u(3314).NAMESPACE,p=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=new RegExp("[\\-\\.0-9"+p.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),m=new RegExp("^"+p.source+b.source+"*(?::"+p.source+b.source+"*)?$");function E(B,it){this.message=B,this.locator=it,Error.captureStackTrace&&Error.captureStackTrace(this,E)}function P(){}function $(B,it){return it.lineNumber=B.lineNumber,it.columnNumber=B.columnNumber,it}function j(B,it,Q,ut,tt,Dt){function q(Et,Lt,wt){Q.attributeNames.hasOwnProperty(Et)&&Dt.fatalError("Attribute "+Et+" redefined"),Q.addValue(Et,Lt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,tt),wt)}for(var Y,st=++it,It=0;;){var Ot=B.charAt(st);switch(Ot){case"=":if(It===1)Y=B.slice(it,st),It=3;else{if(It!==2)throw new Error("attribute equal must after attrName");It=3}break;case"'":case'"':if(It===3||It===1){if(It===1&&(Dt.warning('attribute value must after "="'),Y=B.slice(it,st)),it=st+1,!((st=B.indexOf(Ot,it))>0))throw new Error("attribute value no end '"+Ot+"' match");q(Y,Tt=B.slice(it,st),it-1),It=5}else{if(It!=4)throw new Error('attribute value must after "="');q(Y,Tt=B.slice(it,st),it),Dt.warning('attribute "'+Y+'" missed start quot('+Ot+")!!"),it=st+1,It=5}break;case"/":switch(It){case 0:Q.setTagName(B.slice(it,st));case 5:case 6:case 7:It=7,Q.closed=!0;case 4:case 1:break;case 2:Q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Dt.error("unexpected end of input"),It==0&&Q.setTagName(B.slice(it,st)),st;case">":switch(It){case 0:Q.setTagName(B.slice(it,st));case 5:case 6:case 7:break;case 4:case 1:(Tt=B.slice(it,st)).slice(-1)==="/"&&(Q.closed=!0,Tt=Tt.slice(0,-1));case 2:It===2&&(Tt=Y),It==4?(Dt.warning('attribute "'+Tt+'" missed quot(")!'),q(Y,Tt,it)):(y.isHTML(ut[""])&&Tt.match(/^(?:disabled|checked|selected)$/i)||Dt.warning('attribute "'+Tt+'" missed value!! "'+Tt+'" instead!!'),q(Tt,Tt,it));break;case 3:throw new Error("attribute value missed!!")}return st;case"":Ot=" ";default:if(Ot<=" ")switch(It){case 0:Q.setTagName(B.slice(it,st)),It=6;break;case 1:Y=B.slice(it,st),It=2;break;case 4:var Tt=B.slice(it,st);Dt.warning('attribute "'+Tt+'" missed quot(")!!'),q(Y,Tt,it);case 5:It=6}else switch(It){case 2:Q.tagName,y.isHTML(ut[""])&&Y.match(/^(?:disabled|checked|selected)$/i)||Dt.warning('attribute "'+Y+'" missed value!! "'+Y+'" instead2!!'),q(Y,Y,it),it=st,It=1;break;case 5:Dt.warning('attribute space is required"'+Y+'"!!');case 6:It=1,it=st;break;case 3:It=4,it=st;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}st++}}function G(B,it,Q){for(var ut=B.tagName,tt=null,Dt=B.length;Dt--;){var q=B[Dt],Y=q.qName,st=q.value;if((Et=Y.indexOf(":"))>0)var It=q.prefix=Y.slice(0,Et),Ot=Y.slice(Et+1),Tt=It==="xmlns"&&Ot;else Ot=Y,It=null,Tt=Y==="xmlns"&&"";q.localName=Ot,Tt!==!1&&(tt==null&&(tt={},pt(Q,Q={})),Q[Tt]=tt[Tt]=st,q.uri=y.XMLNS,it.startPrefixMapping(Tt,st))}for(Dt=B.length;Dt--;)(It=(q=B[Dt]).prefix)&&(It==="xml"&&(q.uri=y.XML),It!=="xmlns"&&(q.uri=Q[It||""]));var Et;(Et=ut.indexOf(":"))>0?(It=B.prefix=ut.slice(0,Et),Ot=B.localName=ut.slice(Et+1)):(It=null,Ot=B.localName=ut);var Lt=B.uri=Q[It||""];if(it.startElement(Lt,Ot,ut,B),!B.closed)return B.currentNSMap=Q,B.localNSMap=tt,!0;if(it.endElement(Lt,Ot,ut),tt)for(It in tt)Object.prototype.hasOwnProperty.call(tt,It)&&it.endPrefixMapping(It)}function M(B,it,Q,ut,tt){if(/^(?:script|textarea)$/i.test(Q)){var Dt=B.indexOf("</"+Q+">",it),q=B.substring(it+1,Dt);if(/[&<]/.test(q))return/^script$/i.test(Q)?(tt.characters(q,0,q.length),Dt):(q=q.replace(/&#?\w+;/g,ut),tt.characters(q,0,q.length),Dt)}return it+1}function nt(B,it,Q,ut){var tt=ut[Q];return tt==null&&((tt=B.lastIndexOf("</"+Q+">"))<it&&(tt=B.lastIndexOf("</"+Q)),ut[Q]=tt),tt<it}function pt(B,it){for(var Q in B)Object.prototype.hasOwnProperty.call(B,Q)&&(it[Q]=B[Q])}function Mt(B,it,Q,ut){if(B.charAt(it+2)==="-")return B.charAt(it+3)==="-"?(tt=B.indexOf("-->",it+4))>it?(Q.comment(B,it+4,tt-it-4),tt+3):(ut.error("Unclosed comment"),-1):-1;if(B.substr(it+3,6)=="CDATA["){var tt=B.indexOf("]]>",it+9);return Q.startCDATA(),Q.characters(B,it+9,tt-it-9),Q.endCDATA(),tt+3}var Dt=function(Tt,Et){var Lt,wt=[],qt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(qt.lastIndex=Et,qt.exec(Tt);Lt=qt.exec(Tt);)if(wt.push(Lt),Lt[1])return wt}(B,it),q=Dt.length;if(q>1&&/!doctype/i.test(Dt[0][0])){var Y=Dt[1][0],st=!1,It=!1;q>3&&(/^public$/i.test(Dt[2][0])?(st=Dt[3][0],It=q>4&&Dt[4][0]):/^system$/i.test(Dt[2][0])&&(It=Dt[3][0]));var Ot=Dt[q-1];return Q.startDTD(Y,st,It),Q.endDTD(),Ot.index+Ot[0].length}return-1}function rt(B,it,Q){var ut=B.indexOf("?>",it);if(ut){var tt=B.substring(it,ut).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return tt?(tt[0].length,Q.processingInstruction(tt[1],tt[2]),ut+2):-1}return-1}function ft(){this.attributeNames={}}E.prototype=new Error,E.prototype.name=E.name,P.prototype={parse:function(B,it,Q){var ut=this.domBuilder;ut.startDocument(),pt(it,it={}),function(tt,Dt,q,Y,st){function It(Ut){var Jt=Ut.slice(1,-1);return Object.hasOwnProperty.call(q,Jt)?q[Jt]:Jt.charAt(0)==="#"?function(ge){if(ge>65535){var ui=55296+((ge-=65536)>>10),oi=56320+(1023&ge);return String.fromCharCode(ui,oi)}return String.fromCharCode(ge)}(parseInt(Jt.substr(1).replace("x","0x"))):(st.error("entity not found:"+Ut),Ut)}function Ot(Ut){if(Ut>ee){var Jt=tt.substring(ee,Ut).replace(/&#?\w+;/g,It);qt&&Tt(ee),Y.characters(Jt,0,Ut-ee),ee=Ut}}function Tt(Ut,Jt){for(;Ut>=Lt&&(Jt=wt.exec(tt));)Et=Jt.index,Lt=Et+Jt[0].length,qt.lineNumber++;qt.columnNumber=Ut-Et+1}for(var Et=0,Lt=0,wt=/.*(?:\r\n?|\n)|.*$/g,qt=Y.locator,Kt=[{currentNSMap:Dt}],be={},ee=0;;){try{var Ee=tt.indexOf("<",ee);if(Ee<0){if(!tt.substr(ee).match(/^\s*$/)){var de=Y.doc,xe=de.createTextNode(tt.substr(ee));de.appendChild(xe),Y.currentElement=xe}return}switch(Ee>ee&&Ot(Ee),tt.charAt(Ee+1)){case"/":var Bt=tt.indexOf(">",Ee+3),le=tt.substring(Ee+2,Bt).replace(/[ \t\n\r]+$/g,""),Qe=Kt.pop();Bt<0?(le=tt.substring(Ee+2).replace(/[\s<].*/,""),st.error("end tag name: "+le+" is not complete:"+Qe.tagName),Bt=Ee+1+le.length):le.match(/\s</)&&(le=le.replace(/[\s<].*/,""),st.error("end tag name: "+le+" maybe not complete"),Bt=Ee+1+le.length);var di=Qe.localNSMap,$t=Qe.tagName==le;if($t||Qe.tagName&&Qe.tagName.toLowerCase()==le.toLowerCase()){if(Y.endElement(Qe.uri,Qe.localName,le),di)for(var Ce in di)Object.prototype.hasOwnProperty.call(di,Ce)&&Y.endPrefixMapping(Ce);$t||st.fatalError("end tag name: "+le+" is not match the current start tagName:"+Qe.tagName)}else Kt.push(Qe);Bt++;break;case"?":qt&&Tt(Ee),Bt=rt(tt,Ee,Y);break;case"!":qt&&Tt(Ee),Bt=Mt(tt,Ee,Y,st);break;default:qt&&Tt(Ee);var Xe=new ft,Ni=Kt[Kt.length-1].currentNSMap,li=(Bt=j(tt,Ee,Xe,Ni,It,st),Xe.length);if(!Xe.closed&&nt(tt,Bt,Xe.tagName,be)&&(Xe.closed=!0,q.nbsp||st.warning("unclosed xml attribute")),qt&&li){for(var Pt=$(qt,{}),xt=0;xt<li;xt++){var Wt=Xe[xt];Tt(Wt.offset),Wt.locator=$(qt,{})}Y.locator=Pt,G(Xe,Y,Ni)&&Kt.push(Xe),Y.locator=qt}else G(Xe,Y,Ni)&&Kt.push(Xe);y.isHTML(Xe.uri)&&!Xe.closed?Bt=M(tt,Bt,Xe.tagName,It,Y):Bt++}}catch(Ut){if(Ut instanceof E)throw Ut;st.error("element parse error: "+Ut),Bt=-1}Bt>ee?ee=Bt:Ot(Math.max(Ee,ee)+1)}}(B,it,Q,ut,this.errorHandler),ut.endDocument()}},ft.prototype={setTagName:function(B){if(!m.test(B))throw new Error("invalid tagName:"+B);this.tagName=B},addValue:function(B,it,Q){if(!m.test(B))throw new Error("invalid attribute:"+B);this.attributeNames[B]=this.length,this[this.length++]={qName:B,value:it,offset:Q}},length:0,getLocalName:function(B){return this[B].localName},getLocator:function(B){return this[B].locator},getQName:function(B){return this[B].qName},getURI:function(B){return this[B].uri},getValue:function(B){return this[B].value}},x.XMLReader=P,x.ParseError=E},7878:S=>{const x=y=>{y.style.display="none"},u=y=>{y.style.display=""};S.exports={hide:x,show:u,setText:(y,p)=>{if(!p||p.length<=0)return y.innerText="",void x(y);y.innerText=p,u(y)}}},7668:(S,x,u)=>{u.d(x,{A:()=>m});var y=u(7938),p=u.n(y),b=u(608);const m={logoOnclickUrl:"https://cloudinary.com/",showLogo:!0,showJumpControls:!1,playsinline:p().browser.IS_IOS,skin:"dark",controls:!1,chaptersButton:!1,pictureInPictureToggle:!1,seekThumbnails:!0,aiHighlightsGraph:!1,preload:b.Am.AUTO,textTrackSettings:!1,loop:!1,muted:!1,posterOptions:{},sourceTypes:["auto"],contextMenu:{content:E=>{const P=E.loop(),$=E.paused(),j=E.muted(),G=E.isFullscreen(),M={class:"player-version",label:"Cloudinary Player v2.3.1"};return E.controls()?[{label:P?"Unloop":"Loop",listener:()=>{E.loop(!P)}},{label:$?"Play":"Pause",listener:()=>{$?E.play():E.pause()}},{label:j?"Unmute":"Mute",listener:()=>{E.muted(!j)}},{label:G?"Exit Fullscreen":"Fullscreen",listener:()=>{G?E.exitFullscreen():E.requestFullscreen()}},M]:[M]}},floatingWhenNotVisible:b.rT.NONE,hideContextMenu:!1,analytics:!1,cloudinaryAnalytics:!0,allowUsageReport:!0,playedEventPercents:[25,50,75,100],html5:{nativeTextTracks:!1},disableSeekWhileScrubbingOnMobile:!0}},2962:(S,x,u)=>{u.d(x,{Ay:()=>vn,OC:()=>En,xY:()=>Xn,Iy:()=>Rn});var y=u(7171),p=u.n(y),b=u(7938),m=u.n(b);const E={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let P;const $=new Uint8Array(16);function j(){if(!P){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");P=crypto.getRandomValues.bind(crypto)}return P($)}const G=[];for(let N=0;N<256;++N)G.push((N+256).toString(16).slice(1));const M=function(N,k,D){if(E.randomUUID&&!N)return E.randomUUID();const F=(N=N||{}).random||(N.rng||j)();return F[6]=15&F[6]|64,F[8]=63&F[8]|128,function(ot,mt=0){return(G[ot[mt+0]]+G[ot[mt+1]]+G[ot[mt+2]]+G[ot[mt+3]]+"-"+G[ot[mt+4]]+G[ot[mt+5]]+"-"+G[ot[mt+6]]+G[ot[mt+7]]+"-"+G[ot[mt+8]]+G[ot[mt+9]]+"-"+G[ot[mt+10]]+G[ot[mt+11]]+G[ot[mt+12]]+G[ot[mt+13]]+G[ot[mt+14]]+G[ot[mt+15]]).toLowerCase()}(F)};var nt=u(5685),pt=u.n(nt),Mt=u(2832),rt=u.n(Mt),ft=u(8446),B=u.n(ft),it=u(8953),Q=u.n(it),ut=u(7571),tt=u.n(ut);const Dt=m().getComponent("ClickableComponent");m().registerComponent("JumpForwardButton",class extends Dt{handleClick(N){super.handleClick(N),this.player().currentTime(this.player().currentTime()+10)}createEl(){return m().dom.createEl("button",{className:"vjs-control vjs-icon-skip-10-plus vjs-icon-forward-10 vjs-button",ariaLabel:"Jump forward 10 seconds"})}});const q=m().getComponent("ClickableComponent");m().registerComponent("JumpBackButton",class extends q{handleClick(N){super.handleClick(N),this.player().currentTime(this.player().currentTime()-10)}createEl(){return m().dom.createEl("button",{className:"vjs-control vjs-icon-skip-10-min vjs-icon-replay-10 vjs-button",ariaLabel:"Jump back 10 seconds"})}});const Y=m().getComponent("ClickableComponent");m().registerComponent("logoButton",class extends Y{createEl(){const N=this.options_.playerOptions,k=N.showLogo?"block":"none",D=N.logoImageUrl?`background-image: url(${N.logoImageUrl})`:"";return m().dom.createEl("a",{},{class:"vjs-control vjs-cloudinary-button vjs-button",href:N.logoOnclickUrl,target:"_blank",style:`display: ${k}; ${D}`,"aria-label":"Logo link"})}});const st=m().getComponent("Component");m().registerComponent("progressControlEventsBlocker",class extends st{constructor(N){super(N,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{})}createEl(){return super.createEl("div",{className:"vjs-progress-control-events-blocker"})}});var It=u(7878),Ot=u.n(It);const Tt=m().dom||m(),Et=m().getComponent("Component");m().registerComponent("titleBar",class extends Et{constructor(N){super(N,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),this.on(N,"cldsourcechanged",(k,D)=>{let{source:F}=D;return this.setItem(F)})}setItem(N){if(!N)return this.setTitle(""),void this.setSubtitle("");const k=N.info();this.setTitle(k.title),this.setSubtitle(k.subtitle)}setTitle(N){return Ot().setText(this.titleEl,N),this.refresh(),N}setSubtitle(N){return Ot().setText(this.subtitleEl,N),this.refresh(),N}refresh(){this.titleEl.innerText||this.subtitleEl.innerText?this.show():this.hide()}createEl(){this.titleEl=Tt.createEl("div",{className:"vjs-title-bar-title"}),this.subtitleEl=Tt.createEl("div",{className:"vjs-title-bar-subtitle"});const N=super.createEl("div",{append:this.titleEl,className:"vjs-title-bar"});return N.appendChild(this.titleEl),N.appendChild(this.subtitleEl),N}});var Lt="3.0.1";const wt=m().getTech("Html5"),qt=m().registerPlugin||m().plugin,Kt=["abort","emptied","loadstart","play"],be=["abort","emptied"],ee=["ad-playback","ads-ready?","postroll?","preroll?"];let Ee=0;const de=function(){const N=[];let k,D,F=!1,ot=!0;const mt=Gt=>function(jt,he){if(this.perSourceBehaviors.disabled())return;const Yt=arguments.length===2,ue=this.currentSrc(),te=[jt],pe=arguments[arguments.length-1],De=Yt?this:jt,We=pe.bind(De),qe=(...ni)=>{const Be=this.currentSrc()!==ue;this.perSourceBehaviors.disabled()||((Be||Gt)&&this.off(...te),Be||We(...ni))};return qe.guid=We.guid=pe.guid="psb-"+ ++Ee,Yt||te.push(he),te.push(qe),N.push(te),this.on(...te)};this.perSourceBehaviors={disable:function(){return this.clearTimeout(D),D=null,F=!0,F}.bind(this),disabled:()=>F,enable:()=>(F=!1,F),enabled:()=>!F,isSrcStable:()=>ot,VERSION:Lt},this.onPerSrc=mt(),this.onePerSrc=mt(!0),this.on("dispose",()=>{N.length=0}),this.on(Kt,Gt=>{if(this.perSourceBehaviors.disabled()||D||((Yt,ue)=>{return!!Yt.usingPlugin("ads")&&((pe=>pe.usingPlugin("ads")&&typeof pe.ads.inAdBreak=="function")(Yt)?Yt.ads.isInAdMode()&&ue.type!=="loadstart":(te=Yt.ads.state,ee.indexOf(te)>-1));var te})(this,Gt))return;ot&&be.indexOf(Gt.type)>-1&&(ot=!1,this.trigger("sourceunstable"));const jt=[],he=Yt=>jt.push({time:Date.now(),event:Yt});he(Gt),this.on(wt.Events,he),D=this.setTimeout(()=>{const Yt=this.currentSrc();ot=!0,D=null,this.off(wt.Events,he),Yt&&Yt!==k&&(N.forEach(ue=>this.off(...ue)),N.length=0,this.trigger("sourcechanged",{interimEvents:jt,from:k,to:Yt}),k=Yt)},1)})};de.VERSION=Lt,qt("perSourceBehaviors",de);let xe={};const Bt=function(){function N(k,D){return this.player=k,this.options=D,this.initializeHighlightsGraph(),this}return N.prototype.src=function(k){this.resetPlugin(),this.options.src=k,this.initializeHighlightsGraph()},N.prototype.detach=function(){this.resetPlugin()},N.prototype.resetPlugin=function(){this.graphHolder&&this.graphHolder.parentNode.removeChild(this.graphHolder),delete this.progressBar,delete this.graphHolder,delete this.lastStyle},N.prototype.initializeHighlightsGraph=function(){this.options.src&&fetch(this.options.src,{credentials:this.player.cloudinary.source?.().withCredentials?"include":"omit"}).then(k=>k.json()).then(k=>{this.setupHighlightsGraphElement(),this.graphHolder&&this.createHighlightsGraph(k)})},N.prototype.setupHighlightsGraphElement=function(){if(this.progressBar=this.player.$(".vjs-progress-control"),!this.progressBar)return;const k=this.player.$(".vjs-highlights-graph-display")||document.createElement("div");k.setAttribute("class","vjs-highlights-graph-display"),this.progressBar.appendChild(k),this.graphHolder=k},N.prototype.createPath=function(k,D,F){const ot=D/(k.length-1),mt=k.map((he,Yt)=>({x:Yt*ot,y:F-he*F})),Gt=document.createElementNS("http://www.w3.org/2000/svg","path");Gt.setAttribute("fill","lightblue");let jt=`M ${mt[0].x},${mt[0].y}`;for(let he=0;he<mt.length-1;he++){const Yt=(mt[he].x+mt[he+1].x)/2,ue=(mt[he].y+mt[he+1].y)/2;jt+=` Q ${mt[he].x},${mt[he].y} ${Yt},${ue}`}return jt+=` Q ${mt[mt.length-1].x},${mt[mt.length-1].y} ${mt[mt.length-1].x},${mt[mt.length-1].y}`,jt+=` L ${mt[mt.length-1].x},${F} L ${mt[0].x},${F} Z`,Gt.setAttribute("d",jt),Gt},N.prototype.createHighlightsGraph=function(k){const D=k.data,F=this.player.$(".vjs-highlights-graph-display > svg")||document.createElementNS("http://www.w3.org/2000/svg","svg");F.setAttribute("viewBox","0 0 600 20"),F.setAttribute("preserveAspectRatio","none"),F.setAttribute("width",600),F.setAttribute("height",20),F.innerHTML="";const ot=this.createPath(D,600,20);F.appendChild(ot),this.graphHolder.appendChild(F)},N}();var le=u(5871),Qe=u(6827),di=u.n(Qe),$t=u(1104);const Ce={percentsplayed:{percents:[25,50,75,100]}},Xe={events:[$t.f.PERCENTS_PLAYED,$t.f.PAUSE_NO_SEEK,$t.f.SEEK,$t.f.MUTE,$t.f.UNMUTE,$t.f.QUALITY_CHANGED]};class Ni extends di(){constructor(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this.player=k;const F=m().obj.merge(Xe,D);let ot={lastState:void 0},mt=0,Gt=0,jt=!1,he=[],Yt=[],ue=null,te=!1;const pe=()=>{he=[],Yt=[]};this.events=li(F.events,Ce),ot={lastState:void 0},mt=Gt=0,jt=!1,pe(),this.player.on($t.f.PLAY,(()=>{te&&(this.player.trigger("replay"),te=!1)}).bind(this)),this.player.on($t.f.ENDED,(()=>{te=!0}).bind(this)),(this.events.percentsplayed||this.events.timeplayed||this.events.seek||this.events.totaltimeplayed)&&this.player.on($t.f.TIME_UPDATE,(De=>{const We=this.player.currentTime(),qe=this.player.duration(),ni=(Be,gi)=>{gi.originalType="timeupdate",this.emit(Be,De,gi)};if(this.events.percentsplayed&&this.events.percentsplayed.percents.forEach(Be=>{Pt(We,qe,Be)&&he.indexOf(Be)===-1&&(he.push(Be),ni($t.f.PERCENTS_PLAYED,{percent:Be}))}),this.events.timeplayed){const Be=this.events.timeplayed;(Be.interval?[Math.floor(We/Be.interval)*Be.interval]:Be.times).forEach(gi=>{xt(We,gi)&&Yt.indexOf(gi)===-1&&(Yt.push(gi),ni($t.f.TIME_PLAYED,{time:gi}))})}this.events.seek&&(mt=Gt,Gt=We,Math.abs(mt-Gt)>1&&(jt=!0,pe(),ni($t.f.SEEK,{seekStart:mt,seekEnd:Gt})))}).bind(this)),(this.events.mute||this.events.unmute)&&this.player.on($t.f.VOLUME_CHANGE,(De=>{this.player.muted()&&ot.lastState!=="muted"?(ot.lastState="muted",this.emit($t.f.MUTE,De)):this.player.muted()||ot.lastState==="unmuted"||(ot.lastState="unmuted",this.emit($t.f.UNMUTE,De))}).bind(this)),this.events.pausenoseek&&(this.player.on($t.f.PAUSE,(De=>{Math.round(this.player.currentTime())===Math.round(this.player.duration())||jt||this.emit($t.f.PAUSE_NO_SEEK,De)}).bind(this)),this.player.on($t.f.PLAY,(()=>{jt=!1}).bind(this))),this.player.on($t.f.LOADED_METADATA,(()=>{this.player.currentSource().src!==ue&&(pe(),ue=this.player.currentSource().src)}).bind(this)),this.player.on($t.f.LOADED_DATA,(De=>{let We=this,qe=this.player.textTracks(),ni=null;for(let gi=0;gi<qe.length;gi++)qe[gi].label==="segment-metadata"&&(ni=qe[gi]);let Be=null;ni&&ni.on("cuechange",function(){let gi=ni.activeCues[0];if(gi){let cn=gi.value.resolution;if(Be!==cn){let Ae={from:Be,to:cn};We.emit($t.f.QUALITY_CHANGED,De,Ae)}Be=cn}})}).bind(this))}}const li=(N,k)=>{let D=N;return N.constructor.name==="Array"&&(D=N.reduce((F,ot)=>{const mt=k[ot]||{};return Q()(ot)?F[ot.type]=Object.assign({},mt,ot):F[ot]=mt,F},{})),D},Pt=function(N,k,D){return xt(N,k*D/100,arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5)},xt=function(N,k){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5;return N<=k+D&&N>=k-D},Wt=Ni,Ut=[$t.f.PLAY,$t.f.PAUSE,$t.f.ENDED,$t.f.VOLUME_CHANGE,$t.f.RESIZE,$t.f.ERROR,$t.f.FULL_SCREEN_CHANGE,$t.f.START,$t.f.VIDEO_LOAD,$t.f.PERCENTS_PLAYED,$t.f.SEEK,$t.f.PLAYER_LOAD],Jt={percentsplayed:{percents:[25,50,75,100]}},ge={events:Ut,category:"Video",defaultLabel:N=>N.cloudinary&&N.cloudinary.currentPublicId()||N.currentSource().src};class ui{constructor(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.player=k,this.options=m().obj.merge(ge,D),this.events=li(this.options.events,Jt);const F=(0,le.sliceProperties)(this.events,$t.f.PERCENTS_PLAYED,$t.f.TIME_PLAYED,$t.f.PAUSE,$t.f.SEEK);F.pause&&(delete F.pause,F.pausenoseek={}),this._extendedEvents=new Wt(k,{events:F}),this._currentSource=null,this._startTracked=null,this._endTracked=null,this.resetState()}init(){this.events.shoppable&&(this.player.on("productHover",((k,D)=>{this.track({action:"productHover",label:D.productName})}).bind(this)),this.player.on("productClick",((k,D)=>{this.track({action:"productClick",label:D.productName})}).bind(this)),this.player.on("productHoverPost",((k,D)=>{this.track({action:"productHoverPostPlay",label:D.productName})}).bind(this)),this.player.on("productClickPost",((k,D)=>{this.track({action:"productClickPostPlay",label:D.productName})}).bind(this)),this.player.on("productBarMin",(()=>{this.track({action:"shoppableBar",label:"closed"})}).bind(this)),this.player.on("productBarMax",(()=>{this.track({action:"shoppableBar",label:"opened"})}).bind(this)),this.player.on("replay",(()=>{this.track({action:"replay"})}).bind(this))),this.events.play&&this.player.on($t.f.PLAY,(()=>{this.track({action:"Play"})}).bind(this)),this.events.ended&&this.player.on($t.f.ENDED,(()=>{this._endTracked||(this.track({action:"Ended",nonInteraction:!0}),this._endTracked=!0)}).bind(this)),this.events.volumechange&&this.player.on($t.f.VOLUME_CHANGE,(()=>{const k=this.player.muted()?0:this.player.volume();this.track({action:"Volume Change",value:k})}).bind(this)),this.events.resize&&this.player.on($t.f.RESIZE,(()=>{const k=`Resize - ${this.player.width()}x${this.player.height()}}`;this.track({action:k})}).bind(this)),this.events.error&&this.player.on($t.f.ERROR,(()=>{this.track({action:"Error",nonInteraction:!0})}).bind(this)),this.events.start&&this.player.on($t.f.PLAYING,(()=>{this._startTracked&&(this.track({action:"Start"}),this._startTracked=!0)}).bind(this)),this.events.fullscreenchange&&this.player.on($t.f.FULL_SCREEN_CHANGE,(()=>{const k=this.player.isFullscreen()?"Enter Fullscreen":"Exit Fullscreen";this.track({action:k})}).bind(this)),this.events.percentsplayed&&this._extendedEvents.on($t.f.PERCENTS_PLAYED,((k,D)=>{const{percent:F}=D;this.track({action:`${F} Percents Played`,nonInteraction:!0})}).bind(this)),this.events.timeplayed&&this._extendedEvents.on($t.f.TIME_PLAYED,((k,D)=>{const{time:F}=D;this.track({action:`${F} Seconds Played`,value:F,nonInteraction:!0})}).bind(this)),this.events.pause&&this._extendedEvents.on($t.f.PAUSE_NO_SEEK,(()=>{this.track({action:"Pause"})}).bind(this)),this.events.seek&&this._extendedEvents.on($t.f.SEEK,((k,D)=>{const{seekStart:F,seekEnd:ot}=D;this.track({action:"Seek Start",value:F}),this.track({action:"Seek End",value:ot})}).bind(this)),this.events.playerload&&this.track({action:"Player Load",label:window.location.href,nonInteraction:!0}),this.player.on($t.f.LOADED_METADATA,this.loadedmetadata.bind(this))}track(k){let{action:D,label:F,value:ot=null,nonInteraction:mt=!1}=k;const Gt={eventCategory:this.options.category,eventAction:D,eventLabel:F||this.options.defaultLabel(this.player),eventValue:ot||Math.round(this.player.currentTime()),nonInteraction:mt};window.ga("send","event",Gt)}videoload(){this.track({action:"Video Load",nonInteraction:!0})}resetState(){this._currentSource="",this._startTracked=!1,this._endTracked=!1}loadedmetadata(){const k=this.player.currentSource().src;k!==this._currentSource&&(this.resetState(),this._currentSource=k,this.events.videoload&&this.videoload())}}var oi=u(3171);const Ze={fraction:.5,isMuted:!0};class vi{constructor(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};D=Object.assign({},Ze,D),this.player=k;let F=(0,le.sliceProperties)(D,"fraction"),ot=!1,mt=!1,Gt=null,jt=null;this.init=()=>{pe(),te()};const he=()=>{window.removeEventListener("DOMContentLoaded",te,!1),window.removeEventListener("load",te,!1),window.removeEventListener("scroll",te,!1),window.removeEventListener("resize",te,!1),this.player.off("pause",Gt),this.player.off("play",jt)},Yt=()=>{ot=!0,mt=!1,this.player.pause()},ue=()=>{ot=!1,mt=!0,this.player.play()},te=()=>{(0,oi.isElementInViewport)(this.player.el(),{fraction:F.fraction})?this.player.paused()&&ue():this.player.paused()||this.player.activePlugins_.floatingPlayer||Yt()},pe=()=>{Gt=()=>{this.player.waiting||ot||he()},jt=()=>{mt||he()},window.addEventListener("DOMContentLoaded",te,!1),window.addEventListener("load",te,!1),window.addEventListener("scroll",te,!1),window.addEventListener("resize",te,!1),this.player.on("pause",Gt),this.player.on("play",jt)}}}var Je=u(5004),Pe=u(9388),Ue=u(5381);const K=class{constructor(N){this._emitter=N,this._eventHandlers=[]}on(N,k){this._eventHandlers.push({type:N,handler:k}),this._emitter.on(N,k)}one(N,k){var D=this;this._eventHandlers.push({type:N,handler:k,wrapper:function(){k(...arguments),D.off(N,k)}}),this._emitter.one(N,k)}off(N,k){const D=this._eventHandlers?.findIndex(ot=>ot.type===N&&ot.handler===k);if(D===-1)return;const F=this._eventHandlers[D];this._emitter.off(N,F.wrapper||F.handler),this._eventHandlers.splice(D,1)}removeAllListeners(){this._eventHandlers.forEach(N=>{this.off(N)})}};var at=u(4650),Nt=u(7311);const Vt={format:"jpg",resource_type:"video",transformation:{flags:"waveform"}},Ht=RegExp(`\\.(${["mp3","ogg","wav","mp4"].join("|")})$$`),Oe={resource_type:"video",type:"upload",transformation:[]};class ye extends Ue.A{constructor(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};({publicId:k,options:D}=(0,Pe.a5)(k,D)),k=k.replace(Ht,""),D=Object.assign({},Oe,D);const{poster:F}=(0,le.sliceAndUnsetProperties)(D,"poster");super(k,D),this._poster=null,this._type=$t.x.AUDIO,this.poster(F)}getPoster(){return this._poster}poster(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k?k instanceof at.A?(this._poster=k,this):({publicId:k,options:D}=(0,Pe.a5)(k,D,{tolerateMissingId:!0}),k||(k=this.publicId(),D=Object.assign({},D,Vt)),D.cloudinaryConfig=D.cloudinaryConfig||this.cloudinaryConfig(),this._poster=new at.A(k,D),this):this._poster}generateSources(){return this.sourceTypes().map(k=>{if(k==="audio"){const D="mp3",F={},ot=this.sourceTransformation()[k]||[this.transformation()];F.transformation=ot,Object.assign(F,{resource_type:"video",format:D});const mt=this.queryParams()?(0,Nt.y)(this.queryParams()):"";return{type:"video/mp4",src:`${this.config().url(this.publicId(),F)}${mt}`,cldSrc:this,poster:this.getPoster().url()}}return null},this)}}const ve=ye,Ne={transformation:{},sourceTypes:[],sourceTransformation:[],posterOptions:{}},Te=["cloudinaryConfig","transformation","sourceTypes","sourceTransformation","posterOptions","autoShowRecommendations"];class hi{constructor(k){var D=this;let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,Pe.M6)(),this.player=k,F=Object.assign({},Ne,F);let ot=null,mt=null,Gt=null,jt=null,he=null,Yt=null,ue=null,te=null,pe=null,De=F.chainTarget,We=null,qe=null,ni=!1;this.source=function(_e){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Me=Object.assign({},Me),!_e)return ot;let ki=null;if(_e instanceof Ue.A)ki=_e;else{let{publicId:Hi,options:an}=(0,Pe.a5)(_e,Me);ki=D.buildSource(Hi,an)}const yi=ki.recommendations();if(yi&&yi.length){let Hi=null,an=!1;Me.recommendationOptions&&({disableAutoShow:an,itemBuilder:Hi}=(0,le.sliceAndUnsetProperties)(Me.recommendationOptions,"disableAutoShow","itemBuilder")),async function(Jn){try{return Jn.getChild("recommendationsOverlay")||(await Promise.all([u.e(869),u.e(410)]).then(u.bind(u,7604)),Jn.addChild("recommendationsOverlay")),Jn}catch(w){console.error("Failed to load plugin:",w)}}(k).then(()=>{Be(yi,{disableAutoShow:an,itemBuilder:Hi})})}else gi();return ot=ki,Me.sourceTypes&&Me.sourceTypes.some(Hi=>Hi.includes("dash"))?u.e(367).then(u.bind(u,6604)).then(()=>{cn()}):Me.skipRefresh||cn(),D.player.trigger("cldsourcechanged",{source:ki,sourceOptions:Me}),De},this.buildSource=function(_e){let Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ki=null;return{publicId:_e,options:Me}=(0,Pe.a5)(_e,Me),Me.cloudinaryConfig=(0,Pe.lP)(D.cloudinaryConfig(),Me.cloudinaryConfig||{}),Me.transformation=(0,Pe.N7)(D.transformation(),Me.transformation||{}),Me.sourceTransformation=Me.sourceTransformation||D.sourceTransformation(),Me.sourceTypes=Me.sourceTypes||D.sourceTypes(),Me.poster=Me.poster||Yn(),Me.queryParams=Object.assign(Me.queryParams||{},Me.usageReport?{_s:"vp-2.3.1"}:{}),ki=Me.sourceTypes.indexOf("audio")>-1?new ve(_e,Me):new Ue.A(_e,Me),ki},this.posterOptions=_e=>_e?(he=_e,De):he,this.disablePoster=_e=>{this.player.poster(" "),this.player.posterImage.el().style.backgroundColor=_e},this.cloudinaryConfig=_e=>_e?(Yt=_e,De):Yt,this.transformation=_e=>_e?(ue=_e,De):ue,this.sourceTypes=_e=>_e?(te=_e,De):te,this.getCurrentSources=()=>mt,this.sourceTransformation=_e=>_e?(pe=_e,De):pe,this.on=function(){return We.on(...arguments)},this.one=function(){return We.one(...arguments)},this.off=function(){return We.off(...arguments)},this.autoShowRecommendations=_e=>_e===void 0?ni:(ni=_e,De),this.dispose=()=>{this.playlist&&this.playlist()&&this.disposePlaylist(),gi(),ot=void 0,We.removeAllListeners()};const Be=(_e,Me)=>{let{disableAutoShow:ki=!1,itemBuilder:yi=null}=Me;if(gi(),!Array.isArray(_e)&&typeof _e!="function"&&!_e.then)throw new Error('"recommendations" must be either an array or a function');qe={},yi=yi||(Hi=>({source:Hi instanceof Ue.A?Hi:this.buildSource(Hi),action:()=>this.source(Hi)})),qe.sourceChangedHandler=()=>{const Hi=an=>{if(an!==void 0&&an.length>0){const Jn=an.map(w=>yi(w));this.player.trigger("recommendationschanged",{items:Jn})}else this.player.trigger("recommendationsnoshow");qe.sources=an};B()(_e)?Hi(_e()):_e.then?_e.then(Hi):Hi(_e)},qe.sourceChangedHandler(),qe.endedHandler=()=>{!ki&&this.autoShowRecommendations()&&this.player.trigger("recommendationsshow")},this.on("ended",qe.endedHandler)},gi=()=>{qe&&(this.off("cldsourcechanged",qe.sourceChangedHandler),this.off("ended",qe.endedHandler),delete qe.endedHandler,delete qe.sourceChangedHandler),qe=null},cn=()=>{const _e=this.source(),Me=Object.assign({},this.player.cloudinary.posterOptions(),_e.getInitOptions().poster);Me.posterColor?this.disablePoster(Me.posterColor):_e.poster()&&this.player.poster(_e.poster().url()),mt=_e.generateSources().reduce((ki,yi)=>{if(yi.isAdaptive)if(yi.type.split("; ")[1]&&"MediaSource"in window){let Hi=`video/mp4; ${yi.type.split("; ")[1]||""}`;Ae(Hi)&&ki.push(yi)}else ki.push(yi);else ki.push(yi);return ki},[]),this.player.src(mt),Gt=_e,this.playlist&&(jt=this.playlist())},Ae=_e=>document.createElement("video").canPlayType(_e)||"MediaSource"in window&&MediaSource.isTypeSupported(_e),Yn=()=>{const _e=Object.assign({},this.posterOptions());_e.transformation=_e.transformation||{},!_e.transformation.width&&!_e.transformation.height||_e.transformation.crop||(_e.transformation.crop="scale");const Me=this.player.el();if(Me&&Me.clientWidth&&Me.clientHeight&&!(0,Je.isKeyInTransformation)(_e.transformation,"width")&&!(0,Je.isKeyInTransformation)(_e.transformation,"height")){const ki=yi=>100*Math.ceil(yi/100);_e.transformation=(0,Pe.N7)(_e.transformation,{width:ki(Me.clientWidth),height:ki(Me.clientHeight),crop:"limit"})}return _e};We=new K(this.player);const or=(0,le.sliceAndUnsetProperties)(F,...Te);var Kn,Qn;Kn=this,Qn=or,Object.entries(Qn).forEach(_e=>{let[Me,ki]=_e;Kn[Me]&&typeof Kn[Me]=="function"&&Kn[Me](ki)}),this.on("sourcechanged",(_e,Me)=>{let ki=Me.to;Gt&&Gt.contains(ki)?this.source()||(this.playlist&&jt&&this.playlist(jt),this.source(Gt,{skipRefresh:!0})):(this.player.trigger("cldsourcechanged",{}),this.dispose())})}currentSourceType(){return this.source().getType()}currentPublicId(){return this.source()&&this.source().publicId()}currentPoster(){return this.source()&&this.source().poster()}}var Zi=u(4679),L=u.n(Zi),U=u(4138);class J{constructor(k,D){this.player=k,this.shouldUseCustomEvents=m().browser.IS_IOS,this.cloudinaryAnalytics=(0,U.connectCloudinaryAnalytics)(this.player.videoElement,{customEvents:this.shouldUseCustomEvents}),this.currentVideMetadata={cloudName:null,publicId:null},this.analyticsOptions=D}getMetadata=()=>({cloudName:this.player.cloudinary.cloudinaryConfig().cloud_name,publicId:this.player.cloudinary.currentPublicId()});sourceChanged=()=>{const k=this.getMetadata();k.cloudName&&k.publicId?(this.currentVideMetadata=k,this.cloudinaryAnalytics.startManualTracking(k,{...L()(this.analyticsOptions)?this.analyticsOptions:{},videoPlayerType:"cloudinary video player",videoPlayerVersion:"2.3.1"})):this.currentVideMetadata.cloudName===k.cloudName&&this.currentVideMetadata.publicId===k.publicId||this.cloudinaryAnalytics.stopManualTracking()};dispatchCustomEventOnVideoPlayer=(()=>{var k=this;return function(D){const F=new CustomEvent(`cld-custom-${D}`,{detail:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}});k.player.videoElement.dispatchEvent(F)}})();connectCustomEvents=()=>{this.player.on($t.f.PLAY,()=>this.dispatchCustomEventOnVideoPlayer("play")),this.player.on($t.f.PAUSE,()=>this.dispatchCustomEventOnVideoPlayer("pause")),this.player.on($t.f.EMPTIED,()=>this.dispatchCustomEventOnVideoPlayer("emptied")),this.player.on($t.f.LOADED_METADATA,()=>{const k=this.player.videoElement.duration||null;this.dispatchCustomEventOnVideoPlayer("loadedmetadata",{videoDuration:k})})};init(){this.shouldUseCustomEvents&&this.connectCustomEvents(),this.player.on($t.f.CLD_SOURCE_CHANGED,this.sourceChanged)}}var bt=u(4500),Xt=u(7134);const Se=m().getComponent("MenuItem"),Ie=class extends Se{handleClick(){super.handleClick(),this.options_.listener()}createEl(){const N=(0,Xt.n)("span",{class:"vjs-menu-item-text"+(this.options_.class?` ${this.options_.class}`:"")});return N.appendChild(document.createTextNode(this.localize(this.options_.label))),(0,Xt.n)("li",{class:"vjs-menu-item",tabIndex:-1},N)}},ei=m().getComponent("Menu"),bi=class extends ei{constructor(N,k){var D;super(N,k),D=this,k.content.forEach(F=>{let ot=null;ot=B()(F.listener)?F.listener:typeof F.href=="string"?()=>window.open(F.href):()=>!0,this.addItem(new Ie(N,{label:F.label,class:F.class,listener:function(){ot(...arguments),D.dispose()}}))})}setPosition(N,k){(0,oi.setPosition)(this.el(),N,k)}createEl(){const N=super.createEl();if(m().dom.addClass(N,"vjs-context-menu-ui"),this.options_.position){const{left:k,top:D}=this.options_.position;this.setPosition(k,D)}return N}},xi={cancel:!0,sensitivity:10,wait:500,disabled:!1},ii="vjs-contextmenu";function Oi(N,k){if(N.contextmenu.options.disabled)return N;const D={target:N,type:ii};return["clientX","clientY","pageX","pageY","screenX","screenY"].forEach(F=>{D[F]=k[F]}),N.trigger(D)}function sn(N){const k=this.contextmenu.current;if(!k)return;const D=this.contextmenu.options.wait;N.type==="touchend"&&new Date().getTime()-k.time>=D&&Oi(this,N),this.contextmenu.current=null}function $i(N){const k=this.contextmenu.current;if(!k)return;const D=N.touches[0],F=this.contextmenu.options.sensitivity;(D.screenX-k.screenX>F||D.screenY-k.screenY>F)&&(this.contextmenu.current=null)}function un(N){if(this.contextmenu.current)return;const k=N.touches[0];this.contextmenu.current={screenX:k.screenX,screenY:k.screenY,time:new Date().getTime()}}function _n(N){this.contextmenu.options.cancel&&!this.contextmenu.options.disabled&&N.preventDefault(),Oi(this,N),this.off(["touchcancel","touchend"],sn),this.off("touchmove",$i),this.off("touchstart",un)}m().registerPlugin("contextmenu",function(N){this.contextmenu.options=m().obj.merge(xi,N),this.on("contextmenu",_n),this.on(["touchcancel","touchend"],sn),this.on("touchmove",$i),this.on("touchstart",un),this.ready(()=>this.addClass(ii))});const Pn={showNativeOnRecurringEvent:!1};class qn{constructor(k,D){if(!Array.isArray(D.content)&&!B()(D.content))throw new Error('"content" required');const F=Object.assign({},Pn,D);this.player=k;const ot=(0,le.sliceProperties)(F,"content","showNativeOnRecurringEvent");this.init=()=>{this.player.contextmenu(),this.player.on("vjs-contextmenu",Gt),this.player.ready(()=>this.player.addClass("vjs-context-menu"))};const mt=jt=>{const he=this.menu.el();he.style.visibility="hidden",this.player.el().appendChild(he);const Yt=he.getBoundingClientRect();this.player.el().removeChild(he),he.style.visibility="visible";const ue=(0,oi.getPointerPosition)(this.player.el(),jt),te=this.player.el().getBoundingClientRect();let pe=te.height-te.height*ue.y+1,De=Math.round(te.width*ue.x)+1,We=pe,qe=De;return pe+Yt.height>te.height&&(We=pe+Yt.height-te.height>Yt.height/2?pe-Yt.height-1:te.height-Yt.height),De+Yt.width>te.width&&(qe=De+Yt.width-te.width>Yt.width/2?De-Yt.width-1:te.width-Yt.width),We<pe&&qe<De&&(We=pe-Yt.height-1,qe=De-Yt.width-1),We=Math.max(0,We),qe=Math.max(0,qe),{left:qe,top:We}},Gt=jt=>{if(this.menu&&(this.menu.dispose(),ot.showNativeOnRecurringEvent))return;ot.showNativeOnRecurringEvent&&(this.player.contextmenu.options.cancel=!1),jt.preventDefault();let he=ot.content;B()(he)&&(he=he(this.player)),this.menu=new bi(this.player,{content:he});const{left:Yt,top:ue}=mt(jt);this.menu.setPosition(Yt,ue);const te=pe=>{(pe.type!=="click"||pe.which!==3&&pe.button!==2)&&this.menu.dispose()};this.menu.on("dispose",()=>{this.player.contextmenu.options.cancel=!0,this.player.removeChild(this.menu),m().off(document,["click","tap"],te),delete this.menu}),this.player.addChild(this.menu),m().on(document,["click","tap"],te)}}}var Sn=u(608);const On={fraction:.5,collapsedWidth:300,floatTo:"right"};class qs{constructor(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};D=Object.assign({},On,D),D.floatTo&&D.floatTo!==Sn.rT.LEFT&&D.floatTo!==Sn.rT.RIGHT&&(D.floatTo=On.floatTo),this.player=k;const F=this.player.el();let ot=(0,le.sliceProperties)(D,"fraction"),mt=null,Gt=!1,jt=!1;this.init=()=>{te(),typeof this.player.ima=="object"&&pe()};const he=Be=>{const gi=document.createElement("div");for(Be.appendChild(gi);Be.firstChild!==gi;)gi.appendChild(Be.firstChild);return gi},Yt=()=>{window.removeEventListener("DOMContentLoaded",ni,!1),window.removeEventListener("load",ni,!1),window.removeEventListener("scroll",ni,!1),window.removeEventListener("resize",ni,!1)},ue=()=>{window.addEventListener("DOMContentLoaded",ni,!1),window.addEventListener("load",ni,!1),window.addEventListener("scroll",ni,!1),window.addEventListener("resize",ni,!1)},te=()=>{this.player.on("play",ni),this.player.on("play",ue),this.player.on("dispose",Yt)},pe=()=>{const Be=F.getBoundingClientRect();mt=he(F);const gi=he(mt);gi.setAttribute("class","cld-video-player-floater-inner"),gi.setAttribute("style","padding-bottom: "+100*Be.height/Be.width+"%;");const cn=document.createElement("button");cn.setAttribute("class","cld-video-player-floater-close"),cn.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><polygon fill-rule="evenodd" points="370 7.41 368.59 6 364 10.59 359.41 6 358 7.41 362.59 12 358 16.59 359.41 18 364 13.41 368.59 18 370 16.59 365.41 12" transform="translate(-358 -6)"/></svg>',cn.onclick=()=>{We(),qe()},mt.appendChild(cn)},De=()=>{const{ima:Be}=this.player;Be&&Be.adsActive&&Be.getAdsManager().resize(Gt?mt.clientWidth:F.clientWidth,Gt?mt.clientHeight:F.clientHeight)},We=()=>{mt.classList.remove("cld-video-player-floating"),Gt=!1,De()},qe=()=>{Yt(),this.player.off("play",ni),this.player.off("play",ue)},ni=()=>{(0,oi.isElementInViewport)(this.player.el(),{fraction:ot.fraction})?Gt&&We():Gt||(mt||pe(),jt||(()=>{const Be=F.getBoundingClientRect();mt.setAttribute("class",`cld-video-player-floater cld-video-player-floater-bottom-${D.floatTo}`),mt.setAttribute("style",["width: "+D.collapsedWidth+"px;","top: "+Be.top+"px;","left: "+Be.left+"px;","right: "+(document.documentElement.clientWidth-Be.right)+"px;","bottom: "+(document.documentElement.clientHeight-Be.bottom)+"px;"].join("")),jt=!0})(),Gt=!0,setTimeout(()=>{mt.classList.add("cld-video-player-floating"),De()}))}}}const $n=async(N,k)=>{try{const D=await fetch(N);if(!D.ok)throw new Error(`Failed fetching from ${N} with status code ${D.status}`);return D}catch(D){if(console.error(D),k)return $n(k)}},br=class{seperator=",";timestampToSeconds(N){const[k,D]=N.split(","),F=parseInt(D),[ot,mt,Gt]=k.split(":").map(he=>parseInt(he)),jt=.001*F+Gt+60*mt+3600*ot;return Math.round(1e3*jt)/1e3}correctFormat(N){let k=N.replace(".",",");var D,[F,ot]=k.split(",");D=this.fixed_str_digit(3,ot);var[mt,Gt,jt]=F.split(":");return`${this.fixed_str_digit(2,mt,!1)}:${this.fixed_str_digit(2,Gt,!1)}:${this.fixed_str_digit(2,jt,!1)},${D}`}fixed_str_digit(N,k,D=!0){return k.length==N?k:k.length>N?k.slice(0,N):k.length<N?D?k.padEnd(N,"0"):k.padStart(N,"0"):void 0}tryComma(N){let k=(N=N.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return k.shift(),k}tryDot(N){let k=(N=N.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g);return k.shift(),this.seperator=".",k}fromSrt(N){var k=N,D=this.tryComma(k);D.length==0&&(D=this.tryDot(k));for(var F=[],ot=0;ot<D.length;ot+=4){const Gt=this.correctFormat(D[ot+1].trim()),jt=this.correctFormat(D[ot+2].trim());var mt={id:D[ot].trim(),startTime:Gt,startSeconds:this.timestampToSeconds(Gt),endTime:jt,endSeconds:this.timestampToSeconds(jt),text:D[ot+3].trim()};F.push(mt)}return F}toSrt(N){var k="";const D=`\r
`;for(var F=0;F<N.length;F++){var ot=N[F];k+=ot.id+D,k+=ot.startTime+" --> "+ot.endTime+D,k+=ot.text.replace(`
`,D)+D+D}return k}},Tr=function(N,k){k.one("loadedmetadata",()=>{(async()=>{let D;if(N.src)try{if(D=await fetch(N.src),!D.ok)throw new Error(`Failed fetching from ${N.src} with status code ${D.status}`)}catch(jt){console.error(jt)}if(!D.ok)return;const F=await D.text(),ot=(Gt=F,new br().fromSrt(Gt).map(jt=>({startTime:jt.startSeconds,endTime:jt.endSeconds,text:jt.text}))),mt=k.addRemoteTextTrack({kind:N.kind||"subtitles",label:N.label||"Subtitles",srclang:N.srclang,default:N.default,mode:N.default?"showing":"disabled"});var Gt;ot.forEach(jt=>{jt&&mt.track.addCue(new VTTCue(jt.startTime,jt.endTime,jt.text))})})()})};var $s=u(7588),as=u(3066);let fs={},os={};const sr=function(){function N(k,D){return this.player=k,this.options=D,this.initializeThumbnails(),this}return N.prototype.src=function(k){this.resetPlugin(),this.options.src=k,this.initializeThumbnails()},N.prototype.detach=function(){this.resetPlugin()},N.prototype.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},N.prototype.initializeThumbnails=function(){this.options.src&&fetch(this.options.src,{credentials:this.player.cloudinary.source?.().withCredentials?"include":"omit"}).then(k=>k.text()).then(k=>{this.vttData=this.processVtt(k),this.setupThumbnailElement()})},N.prototype.setupThumbnailElement=function(){if(!this.vttData[0])return;const k=this.player.$(".vjs-progress-holder .vjs-mouse-display");this.thumbnailHolder=this.player.$(".vjs-vtt-thumbnail-display")||m().dom.createEl("div",void 0,{class:"vjs-vtt-thumbnail-display",style:`width: ${this.vttData[0].css.width}`}),this.thumbnailHolder.innerHTML="",this.thumbnailHolder.setAttribute("class","vjs-vtt-thumbnail-display"),k.appendChild(this.thumbnailHolder);const D=parseInt(this.vttData[0].css.width,10)/2,F=this.updateThumbnailStyle.bind(this);this.player.getDescendant(["controlBar","progressControl","seekBar","mouseTimeDisplay"]).update=function(ot,mt){const Gt=mt*this.player_.duration(),jt=ot.width;F(Gt),this.getChild("timeTooltip").updateTime(ot,mt,Gt,()=>{ot.width*mt<D?this.el_.style.left=`${D}px`:ot.width*mt+D>jt?this.el_.style.left=ot.width-D+"px":this.el_.style.left=ot.width*mt+"px"}),this.getChild("timeTooltip").write(m().time.formatTime(Gt))}},N.prototype.getStyleForTime=function(k){for(let D=0;D<this.vttData.length;++D){let F=this.vttData[D];if(k>=F.start&&k<F.end){if(F.css.url&&!os[F.css.url]){let ot=new Image;ot.src=F.css.url,os[F.css.url]=ot}return F.css}}},N.prototype.updateThumbnailStyle=function(k){let D=this.getStyleForTime(k);if(D){if(this.thumbnailHolder.style.opacity="1",!this.lastStyle||this.lastStyle!==D){this.lastStyle=D;for(let F in D)Object.prototype.hasOwnProperty.call(D,F)&&(this.thumbnailHolder.style[F]=D[F])}}else this.thumbnailHolder.style.opacity="0"},N.prototype.processVtt=function(k){let D=[];return k.split(/[\r\n][\r\n]/i).forEach(F=>{if(F.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)){let ot=F.split(/[\r\n]/i),mt=ot[0].split(/ ?--> ?/i),Gt=mt[0],jt=mt[1],he=ot[1].split("/").pop(),Yt=this.getVttCss(he);D.push({start:this.getSecondsFromTimestamp(Gt),end:this.getSecondsFromTimestamp(jt),css:Yt})}}),D},N.prototype.getPropsFromDef=function(k){let D=k.split(/#xywh=/i),F=D[0],ot=D[1].match(/[0-9]+/gi);return{x:ot[0],y:ot[1],w:ot[2],h:ot[3],image:F}},N.prototype.getVttCss=function(k){let D={};k=[this.options.src.split(/([^\/]*)$/gi).shift().trim(),k.trim()].join("/");let F=this.getPropsFromDef(k);return D.background='url("'+F.image+'") no-repeat -'+F.x+"px -"+F.y+"px",D.width=F.w+"px",D.height=F.h+"px",D.url=F.image,D},N.prototype.getSecondsFromTimestamp=function(k){const[D,F,ot]=k.split(":").map(parseFloat);return 60*D*60+60*F+ot},N}(),Vs={aiHighlightsGraph:function(N){this.ready(()=>{(function(k,D){k.addClass("vjs-ai-highlights-graph"),k.aiHighlightsGraph=new Bt(k,D)})(this,m().obj.merge(xe,N))})},analytics:function(){new ui(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},autoplayOnScroll:function(){new vi(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},cloudinary:function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};N.chainTarget=N.chainTarget||this,this.cloudinary=new hi(this,N)},cloudinaryAnalytics:function(){new J(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},colors:bt.A,contextMenu:function(){new qn(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},floatingPlayer:function(){new qs(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},pacedTranscript:function(N){const k=this,D={kind:N.kind||"captions",label:N.label||"Captions",default:N.default,srclang:N.srclang,src:N.src,maxWords:N.maxWords,wordHighlight:N.wordHighlight,timeOffset:N.timeOffset||0};k.textTrackDisplay.el().classList.add("cld-paced-text-tracks"),k.one("loadedmetadata",()=>{(async()=>{let F;if(D.src)F=await $n(D.src);else{const Gt=k.cloudinary.source(),jt=(0,Pe.KA)(Gt.publicId(),(0,Pe.lP)(k.cloudinary.cloudinaryConfig(),{resource_type:"raw"}));F=D.srclang?await $n(`${jt}.${D.srclang}.transcript`,`${jt}.transcript`):await $n(`${jt}.transcript`)}if(!F?.ok)return;const ot=(Gt=>{const jt=[],he=Yt=>{let{startTime:ue,endTime:te,text:pe}=Yt;jt.push({startTime:ue+D.timeOffset,endTime:te+D.timeOffset,text:pe})};return Gt.forEach(Yt=>{const ue=Yt.words;if(ue){const te=D.maxWords||ue.length;for(let pe=0;pe<ue.length;pe+=te)D.wordHighlight?ue.slice(pe,Math.min(pe+te,ue.length)).forEach((De,We)=>{he({startTime:De.start_time,endTime:De.end_time,text:ue.slice(pe,pe+te).map(qe=>qe===De?`<b>${qe.word}</b>`:qe.word).join(" ")}),ue[We+1]&&De.end_time<ue[We+1].start_time&&he({startTime:De.end_time,endTime:ue[We+1].start_time,text:ue.slice(pe,pe+te).map(qe=>qe.word).join(" ")})}):jt.push({startTime:ue[pe].start_time,endTime:ue[Math.min(pe+te-1,ue.length-1)].end_time,text:ue.slice(pe,pe+te).map(De=>De.word).join(" ")})}else he({startTime:Yt.start_time,endTime:Yt.end_time,text:Yt.transcript})}),jt})(await F.json()),mt=k.addRemoteTextTrack({kind:D.kind,label:D.label,srclang:D.srclang,default:D.default,mode:D.default?"showing":"disabled"});ot.forEach(Gt=>{mt.track.addCue(new VTTCue(Gt.startTime,Gt.endTime,Gt.text))})})()})},vttThumbnails:function(N){this.ready(()=>{(function(k,D){k.addClass("vjs-vtt-thumbnails"),k.vttThumbnails=new sr(k,D)})(this,m().obj.merge(fs,N))})},chapters:async function(N){const k=this;try{const{default:D}=await Promise.all([u.e(869),u.e(625)]).then(u.bind(u,9234));k.ready(()=>D(N,k))}catch(D){console.error("Failed to load plugin:",D)}},imaPlugin:async function(N,k){await Promise.all([u.e(869),u.e(330)]).then(u.bind(u,2650));const D=B()(N.ads),F=typeof google=="object"&&typeof google.ima=="object";if(k.ads&&(!D||!F))return D||console.warn("contribAds is not loaded"),F||console.warn("imaSdk is not loaded"),!1;N.ima({id:N.el().id,adTagUrl:k.ads.adTagUrl,disableFlashAds:!0,prerollTimeout:k.ads.prerollTimeout||5e3,postrollTimeout:k.ads.postrollTimeout||5e3,showCountdown:k.ads.showCountdown!==!1,adLabel:k.ads.adLabel||"Advertisement",locale:k.ads.locale||"en",autoPlayAdBreaks:k.ads.autoPlayAdBreaks!==!1,debug:k.ads.denug}),Object.keys(k.ads).length>0&&typeof N.ima=="object"&&(k.ads.adsInPlaylist==="first-video"?N.one($t.f.SOURCE_CHANGED,()=>{N.ima.playAdBreak()}):N.on($t.f.SOURCE_CHANGED,()=>{N.ima.playAdBreak()}))},playlist:async function(N){const k=this;try{const{default:D}=await Promise.all([u.e(869),u.e(33)]).then(u.bind(u,5826)),F=D(k,N);return k.cloudinary.playlist=F,F}catch(D){console.error("Failed to load plugin:",D)}},shoppable:async function(N,k){const{default:D}=await Promise.all([u.e(869),u.e(525)]).then(u.bind(u,9987));new D(N,k.shoppable).init()},srtTextTracks:async function(N){const k=this;try{k.ready(()=>Tr(N,k))}catch(D){console.error("Failed to load plugin:",D)}},styledTextTracks:async function(N){const k=this;try{k.ready(()=>((D,F)=>{const ot={theme:D.theme||"default",fontFace:D.fontFace,fontSize:D.fontSize,gravity:D.gravity||"bottom",box:D.box,style:D.style,wordHighlightStyle:D.wordHighlightStyle},mt=document.createElement("style");F.el_.appendChild(mt);const Gt=F.textTrackDisplay.el().classList;Gt.forEach(Yt=>{Yt.startsWith("cld-styled-text-tracks")&&Gt.remove(Yt)}),Gt.add("cld-styled-text-tracks"),Gt.add(`cld-styled-text-tracks-theme-${ot.theme}`),ot.gravity.split("-").forEach(Yt=>{Gt.add(`cld-styled-text-tracks-gravity-${Yt}`)});const jt=(Yt,ue)=>{if(Object.entries(Yt)){const te=Object.entries(Yt).reduce((pe,De)=>{let[We,qe]=De;return pe+`${We}: ${qe} !important; `},"");mt.innerHTML+=`${ue} { ${te} } `}},he=Yt=>{const ue=`
      .${(0,as.playerClassPrefix)(F)} .vjs-text-track-cue > div,
      .${(0,as.playerClassPrefix)(F)} ::cue
    `;jt(Yt,ue)};if(ot.fontFace&&((0,$s.fontFace)(F.textTrackDisplay.el(),ot.fontFace),he({"font-family":ot.fontFace})),ot.box){const{x:Yt,y:ue,width:te,height:pe}=ot.box;(De=>{const We=`
      .${(0,as.playerClassPrefix)(F)} .vjs-text-track-display.cld-styled-text-tracks,
      .${(0,as.playerClassPrefix)(F)} ::-webkit-media-text-track-display
    `;jt(De,We)})({translate:`${Yt||0} ${ue||0}`,...te?{width:te}:void 0,...pe?{height:pe}:void 0})}ot.fontSize&&he({"font-size":ot.fontSize}),ot.style&&he(ot.style),ot.wordHighlightStyle&&(jt(ot.wordHighlightStyle,`.${(0,as.playerClassPrefix)(F)} .cld-paced-text-tracks .vjs-text-track-cue b`),jt(ot.wordHighlightStyle,"video::cue(b)"))})(N,k))}catch(D){console.error("Failed to load plugin:",D)}},interactionAreas:async function(N,k,D){try{const{interactionAreasService:F}=await Promise.all([u.e(869),u.e(404)]).then(u.bind(u,1066));F(N,k,D)}catch(F){console.error("Failed to load plugin:",F)}}},xs=Vs;var tn=u(5104),rr=u(7668);const Yr=N=>class extends N{constructor(){var k;super(),k=this;const D={data:{},handlers:{}};this.on=function(){for(var F=arguments.length,ot=new Array(F),mt=0;mt<F;mt++)ot[mt]=arguments[mt];const Gt=ot.length-1,jt=ot[Gt];return D.handlers[jt]=function(he){he.Player=k;for(var Yt=arguments.length,ue=new Array(Yt>1?Yt-1:0),te=1;te<Yt;te++)ue[te-1]=arguments[te];jt(he,...ue)},ot[Gt]=D.handlers[jt],k.videojs.on(...ot)},this.one=function(){for(var F=arguments.length,ot=new Array(F),mt=0;mt<F;mt++)ot[mt]=arguments[mt];const Gt=ot.length-1,jt=ot[Gt];return D.handlers[jt]=function(he){he.Player=k;for(var Yt=arguments.length,ue=new Array(Yt>1?Yt-1:0),te=1;te<Yt;te++)ue[te-1]=arguments[te];jt(he,...ue),delete D.handlers[jt]},ot[Gt]=D.handlers[jt],k.videojs.one(...ot)},this.off=function(){for(var F=arguments.length,ot=new Array(F),mt=0;mt<F;mt++)ot[mt]=arguments[mt];const Gt=ot.length-1,jt=ot[Gt];ot[Gt]=D.handlers[jt];const he=k.videojs.off(...ot);return delete D.handlers[jt],he},this.trigger=function(){k.videojs.trigger(...arguments)}}};var Hs=u(8838),Yi=u(5779);const Vi=N=>!pt()(N)||null,zs=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{sourceTypes:N.sourceTypes,autoShowRecommendations:N.autoShowRecommendations,fontFace:N.fontFace,posterOptions:Vi(N.posterOptions),posterOptionsPublicId:N.posterOptions&&Vi(N.posterOptions.publicId)}},Sr=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const k=[N.captions,...N.subtitles||[]];return{textTracks:Vi(N),textTracksLength:k.length,textTracksOptions:Vi(N.options)&&Object.keys(N.options).join(","),pacedTextTracks:Vi(N)&&JSON.stringify(N||{}).includes('"maxWords":')||null,wordHighlight:Vi(N)&&JSON.stringify(N||{}).includes('"wordHighlight":')||null,transcriptLanguages:k.filter(D=>!D.url).map(D=>D.language||"").join(",")||null,transcriptAutoLoaded:k.some(D=>!D.url)||null,transcriptFromURl:k.some(D=>D.url?.endsWith(".transcript"))||null,vttFromUrl:k.some(D=>D.url?.endsWith(".vtt"))||null,srtFromUrl:k.some(D=>D.url?.endsWith(".srt"))||null}},Ln=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{chapters:N.chapters&&(N.chapters.url?"url":"inline-chapters"),recommendations:N.recommendations&&N.recommendations.length,shoppable:Vi(N.shoppable),shoppableProductsLength:N.shoppable&&N.shoppable.products&&N.shoppable.products.length,...N.info?{sourceInfoTitle:N.info.title,sourceInfoSubtitle:N.info.subtitle,sourceInfoDescription:N.info.description}:{},...N.textTracks?{...Vi(N.textTracks)&&Sr(N.textTracks),...N.textTracks.options?{styledTextTracksTheme:N.textTracks.options.theme,styledTextTracksFont:N.textTracks.options.fontFace,styledTextTracksFontSize:N.textTracks.options.fontSize,styledTextTracksGravity:N.textTracks.options.gravity,styledTextTracksBox:Vi(N.textTracks.options.box),styledTextTracksStyle:Vi(N.textTracks.options.style),styledTextTracksWordHighlightStyle:Vi(N.textTracks.options.wordHighlightStyle)}:{}}:{}}},en=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{adsAdTagUrl:N.adTagUrl,adsShowCountdown:N.showCountdown,adsAdLabel:N.adLabel,adsLocale:N.locale,adsPrerollTimeout:N.prerollTimeout,adsPostrollTimeout:N.postrollTimeout,adsAdsInPlaylist:N.adsInPlaylist}},Vn=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{playlistWidgetDirection:N.direction,playlistWidgetTotal:N.total}},rn=m().getComponent("MenuItem"),Dn=m().getComponent("Component");class ms extends rn{constructor(k,D){D.selectable=!0,D.multiSelectable=!1,super(k,D)}handleClick(){const k=this.options_;super.handleClick();const D=[...this.player_.qualityLevels().levels_];for(const[F,ot]of D.entries())ot.enabled=k.index===D.length||k.index===F}update(){const k=this.player_.qualityLevels().selectedIndex;this.selected(this.options_.index===k)}}Dn.registerComponent("SourceMenuItem",ms);const Hn=ms,zn=m().getComponent("MenuButton"),ar=class extends zn{constructor(N,k){super(N,k);const D=this.player_.qualityLevels();if(k&&k.default){if(k.default==="low")for(const[F,ot]of D.entries())ot.enabled=F===0;else if(k.default==="high")for(let F=0;F<D.length;F++)D[F].enabled=F===D.length-1}this.player_.qualityLevels().on(["change","addqualitylevel","removequalitylevel"],this.update.bind(this))}createEl(){return m().dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})}buildCSSClass(){return zn.prototype.buildCSSClass.call(this)}update(){return zn.prototype.update.call(this)}createItems(){const N=[],k=this.player_.qualityLevels(),D=[];for(let F=k.length-1;F>=0;F--){const ot=F===k.selectedIndex;let mt=`${F}`,Gt=F;const jt=k[F];jt.height?(mt=`${jt.height}p`,Gt=Number.parseInt(jt.height,10)):jt.bitrate&&(mt=`${Math.floor(jt.bitrate/1e3)} kbps`,Gt=Number.parseInt(jt.bitrate,10)),D.includes(mt)||(D.push(mt),N.push(new Hn(this.player_,{label:mt,index:F,selected:ot,sortValue:Gt})))}return k.length>1&&N.push(new Hn(this.player_,{label:"Auto",index:k.length,selected:!1,sortValue:999999})),N.sort(function(F,ot){return ot.options_.sortValue-F.options_.sortValue}),N}},Wn={},ji=m().getPlugin("plugin");(0,m().registerPlugin)("httpSourceSelector",class extends ji{constructor(N,k){m().registerComponent("SourceMenuButton",ar),m().registerComponent("SourceMenuItem",Hn);const D=(m().obj&&m().obj.merge||m().mergeOptions)(Wn,k);super(N,D),this.options_=D,this.player_=N,this.on(N,"ready",()=>{this.reset(),this.init()})}init(){this.player_.addClass("vjs-http-source-selector"),this.player_.videojsHTTPSouceSelectorInitialized=!0,this.player_.techName_==="Html5"?this.on(this.player_,"loadedmetadata",()=>{this.metadataLoaded()}):(console.error(this.player_.techName_+" tech is not supported"),this.reset())}reset(){this.player_.removeClass("vjs-http-source-selector"),this.player_.videojsHTTPSouceSelectorInitialized===!0&&(this.player_.controlBar.getChild("SourceMenuButton")||this.player_.controlBar.removeChild("SourceMenuButton",{}),this.player_.videojsHTTPSouceSelectorInitialized=!1)}metadataLoaded(){const N=this.player_.controlBar,k=N.getChild("fullscreenToggle");N.getChild("SourceMenuButton")||(k?N.el().insertBefore(N.addChild("SourceMenuButton").el(),k.el()):N.el().append(N.addChild("SourceMenuButton").el()))}});const ze={init:N=>{if(window.dashjs&&N&&N.qualityLevels&&N.dash&&N.dash.mediaPlayer){const k=dashjs.MediaPlayer;N.dash.qualityLevels=N.qualityLevels(),N.dash.mediaPlayer.getAutoSwitchQualityFor=D=>{const F=N.dash.mediaPlayer.getSettings();return!F||F.streaming.abr.autoSwitchBitrate[D]},N.dash.mediaPlayer.setAutoSwitchQualityFor=(D,F)=>{const ot=N.dash.mediaPlayer,mt={streaming:{abr:{autoSwitchBitrate:{}}}};mt.streaming.abr.autoSwitchBitrate[D]=F,ot.updateSettings(mt)},N.dash.mediaPlayer.on(k.events.PLAYBACK_METADATA_LOADED,()=>{const D=N.dash.mediaPlayer.getBitrateInfoListFor("video"),F=N.dash.mediaPlayer.getBitrateInfoListFor("audio");if(D.length>0){const ot=D[D.length-1].bitrate;N.dash.audioMapper=D.map(mt=>Math.round(mt.bitrate/ot*(F.length-1))),D.forEach(mt=>{N.dash.qualityLevels.addQualityLevel({id:mt.bitrate,width:mt.width,height:mt.height,bandwidth:mt.bitrate,selected:!0,enabled:function(Gt){if(Gt===void 0)return this.selected===void 0||this.selected;if(this.selected=Gt,Gt===!0){const jt=N.qualityLevels().levels_?.findIndex(he=>he.id===this.id);N.qualityLevels().selectedIndex_=jt,N.qualityLevels().trigger({type:"change",selectedIndex:jt})}}})})}}),N.qualityLevels().on("change",D=>{N.dash.qualityLevels.levels_.filter(F=>F.enabled).length===1?(N.dash.mediaPlayer.setQualityFor("video",D.selectedIndex),N.dash.mediaPlayer.setQualityFor("audio",N.dash.audioMapper[D.selectedIndex])):N.dash.mediaPlayer.getAutoSwitchQualityFor("video")||(N.dash.mediaPlayer.setAutoSwitchQualityFor("video",!0),N.dash.mediaPlayer.setAutoSwitchQualityFor("audio",!0))})}},setVisibility:N=>{const k=N.controlBar.getChild("sourceMenuButton");if(k){const D=N.qualityLevels();if(D&&D.length>1){const F=D.levels_.filter(ot=>ot.enabled);if(F.length===1){const ot=D.levels_.findIndex(mt=>mt.id===F[0].id);k.children()[1].children()[ot].selected(!0)}else k.children()[1].children()[0].selected(!0),k.children()[1].children().forEach((ot,mt)=>{mt>0&&ot.selected(!1)});k.show()}else k.hide()}}};Object.keys(xs).forEach(N=>{m().registerPlugin(N,xs[N])}),(0,Hs.go)();class wn extends tn.A.mixin(Yr){static all(k){for(var D=arguments.length,F=new Array(D>1?D-1:0),ot=1;ot<D;ot++)F[ot-1]=arguments[ot];return[...document.querySelectorAll(k)].map(mt=>new wn(mt,...F))}get playerOptions(){return this.options.playerOptions}constructor(k,D,F){super(),this.nbCalls=0,this.videoElement=(0,Hs.iG)(k),this.options=(0,Hs.Wi)(this.videoElement,D),this._videojsOptions=this.options.videojsOptions,this.videoElement.classList.add("video-js"),tn.A.fontFace(this.videoElement,this.playerOptions.cloudinary.fontFace),this._videojsOptions.bigPlayButton==="init"&&(this.videoElement.classList.add("vjs-big-play-button-init-only"),this._videojsOptions.bigPlayButton=!0),this.videojs=m()(this.videoElement,this._videojsOptions),this._isPlayerConfigValid=!0,this.playerOptions.debug&&(0,Yi.I6)(this.options).then(ot=>{if(!ot)return this._isPlayerConfigValid=!1,void this.videojs.error("invalid player configuration")}),this._videojsOptions.muted&&this.videojs.volume(.4),this.playerOptions.fluid&&this.fluid(this.playerOptions.fluid),this._setCssClasses(),this._initPlugins(),this._initJumpButtons(),this._initPictureInPicture(),this._setVideoJsListeners(F)}getVPInstanceId(){return this.vpInstanceId||(this.vpInstanceId=M()),this.vpInstanceId}_sendInternalAnalytics(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const D=Object.assign({},this.playerOptions,this.options.videojsOptions,k);if(D.allowUsageReport)try{const mt=D._internalAnalyticsMetadata??{},Gt=(ot={aiHighlightsGraph:(F=D).aiHighlightsGraph,analytics:Vi(F.analytics),autoplay:F.autoplay,autoplayMode:F.autoplayMode,bigPlayButton:F.bigPlayButton,className:F.class,cloudinaryAnalytics:!!F.cloudinaryAnalytics,cloudinaryAnalyticsOptions:Q()(F.cloudinaryAnalytics),controls:F.controls,floatingWhenNotVisible:F.floatingWhenNotVisible,fluid:F.fluid,height:F.height,hideContextMenu:F.hideContextMenu,logoImageUrl:F.logoImageUrl,logoOnclickUrl:F.logoOnclickUrl,loop:F.loop,maxTries:F.maxTries,muted:F.muted,playbackRates:F.playbackRates,playedEventPercents:F.playedEventPercents,playedEventTimes:F.playedEventTimes,playsinline:F.playsinline,preload:F.preload,videoTimeout:F.videoTimeout,seekThumbnails:F.seekThumbnails,showJumpControls:F.showJumpControls,chaptersButton:F.chaptersButton,pictureInPictureToggle:F.pictureInPictureToggle,showLogo:F.showLogo,skin:F.skin,videoJS:Vi(F.videoJS),width:F.width,withCredentials:F.withCredentials,debug:F.debug,colors:F.colors&&JSON.stringify(F.colors),controlBar:JSON.stringify(F.controlBar)!==JSON.stringify(rr.A.controlBar)&&JSON.stringify(F.controlBar),...zs(F.cloudinary),...Ln(F.sourceOptions),...en(F.ads),...Vn(F.playlistWidget)},Object.entries(ot).reduce((Yt,ue)=>{let[te,pe]=ue;return pe!==rr.A[te]&&pe!=null&&(Yt[te]=pe),Yt},{})),jt=new URLSearchParams(Gt).toString(),he=new URLSearchParams({vpVersion:"2.3.1",vpInstanceId:this.getVPInstanceId(),cloudName:D.cloudinary.cloudinaryConfig.cloud_name,...mt}).toString();fetch(`https://analytics-api-s.cloudinary.com/video_player_source?${jt}&${he}`)}catch(mt){console.warn(mt)}var F,ot}_clearTimeOut=()=>{this.videojs.clearTimeout(this.reTryId)};_setVideoJsListeners(k){this.videojs.on($t.f.ERROR,()=>{const D=this.videojs.error();if(D){const F=this._isPlayerConfigValid&&this.videojs.cloudinary.currentSourceType();[D.code===3&&m().browser.IS_SAFARI,D.code===4].includes(!0)&&[$t.x.AUDIO,$t.x.VIDEO].includes(F)?(this.videojs.error(null),tn.A.handleCldError(this,this.playerOptions)):this._clearTimeOut()}}),this.videojs.tech_.on($t.f.RETRY_PLAYLIST,()=>{rt()(this.videojs,"hls.stats.mediaRequestsErrored",0)>0&&(this._clearTimeOut(),tn.A.handleCldError(this,this.playerOptions))}),this.videojs.on($t.f.PLAY,this._clearTimeOut),this.videojs.on($t.f.CAN_PLAY_THROUGH,this._clearTimeOut),this.videojs.on($t.f.CLD_SOURCE_CHANGED,this._onSourceChange.bind(this)),this.videojs.ready(()=>{this._onReady(),k&&k(this)})}_initPlugins(){this._initIma(),this._initAutoplay(),this._initContextMenu(),this._initPerSrcBehaviors(),this._initCloudinary(),this._initAnalytics(),this._initCloudinaryAnalytics(),this._initFloatingPlayer(),this._initColors(),this._initTextTracks(),this._initHighlightsGraph(),this._initSeekThumbs(),this._initChapters(),this._initInteractionAreas()}_isFullScreen(){return this.videojs.player().isFullscreen()}_initIma(){this.playerOptions.ads&&Object.keys(this.playerOptions.ads).length!==0&&xs.imaPlugin(this.videojs,this.playerOptions)}setTextTracks(k){const D=this.videojs.remoteTextTracks();if(D)for(let F=D.tracks_.length-1;F>=0;F--)this.videojs.removeRemoteTextTrack(D.tracks_[F]);if(k){const F=Object.keys(k),ot=[];for(const mt of F)if(mt!=="options"){const Gt=Array.isArray(k[mt])?k[mt]:[k[mt]];for(const jt of Gt)ot.push({...jt,kind:mt,label:jt.label,srclang:jt.language,default:!!jt.default,src:jt.url})}tn.A.addTextTracks(ot,this.videojs),k.options&&this.videojs.styledTextTracks&&this.videojs.styledTextTracks(k.options)}}_initSeekThumbs(){this.playerOptions.seekThumbnails&&this.videojs.on($t.f.CLD_SOURCE_CHANGED,(k,D)=>{let{source:F}=D;if(!F||F.getType()===$t.x.AUDIO||F.resourceConfig().type==="live"||(0,Pe.iT)(F.publicId())||this.videojs.activePlugins_&&this.videojs.activePlugins_.vr)return;const ot=F.publicId(),mt=Object.assign({},F.transformation());mt&&(delete mt.streaming_profile,delete mt.video_codec),mt.flags=mt.flags||[],mt.flags.push("sprite");const Gt=F.config().url(`${ot}.vtt`,{transformation:mt}).replace(/\.json$/,"");B()(this.videojs.vttThumbnails)?this.videojs.vttThumbnails({src:Gt}):this.videojs.vttThumbnails.src(Gt)})}_initHighlightsGraph(){this.playerOptions.aiHighlightsGraph&&this.videojs.on($t.f.CLD_SOURCE_CHANGED,(k,D)=>{let{source:F}=D;if(!F||F.getType()===$t.x.AUDIO||(0,Pe.iT)(F.publicId()))return;const ot=F.publicId(),mt=p()(F.transformation(),["start_offset","end_offset","duration"]),Gt=Object.assign({},mt);Gt.effect="preview",Gt.flags=Gt.flags||[],Gt.flags.push("getinfo");const jt=F.config().url(`${ot}`,{transformation:Gt}).replace(/\.json$/,"");B()(this.videojs.aiHighlightsGraph)?this.videojs.aiHighlightsGraph({src:jt}):this.videojs.aiHighlightsGraph.src(jt)})}_initChapters(){!this.playerOptions.chaptersButton&&this.videojs.controlBar&&this.videojs.controlBar.removeChild("chaptersButton"),this.videojs.on($t.f.CLD_SOURCE_CHANGED,(k,D)=>{let{source:F}=D;pt()(F._chapters)&&F._chapters!==!0||!this.videojs.chapters||(B()(this.videojs.chapters)?this.videojs.chapters(F._chapters):this.videojs.chapters.src(F._chapters))})}_initInteractionAreas(){this.videojs.on($t.f.READY,async()=>{this.options.videojsOptions.interactionDisplay&&this.videojs.interactionAreas&&this.videojs.interactionAreas(this,this.playerOptions,this._videojsOptions)})}_initColors(){this.videojs.colors(this.playerOptions.colors?{colors:this.playerOptions.colors}:{})}_initQualitySelector(){this.videojs.controlBar&&this.playerOptions.qualitySelector!==!1&&(this.videojs.httpSourceSelector({default:"auto"}),this.videojs.on($t.f.LOADED_METADATA,()=>{ze.init(this.videojs)}),this.videojs.on($t.f.LOADED_DATA,()=>{ze.setVisibility(this.videojs)}))}_initTextTracks(){this.videojs.on($t.f.CLD_SOURCE_CHANGED,(k,D)=>{let{source:F}=D;this.setTextTracks(F._textTracks)})}_initPerSrcBehaviors(){this.videojs.perSourceBehaviors&&this.videojs.perSourceBehaviors()}_initJumpButtons(){!this.playerOptions.showJumpControls&&this.videojs.controlBar&&(this.videojs.controlBar.removeChild("JumpForwardButton"),this.videojs.controlBar.removeChild("JumpBackButton"))}_initPictureInPicture(){!this.playerOptions.pictureInPictureToggle&&this.videojs.controlBar&&this.videojs.controlBar.removeChild("pictureInPictureToggle")}_initCloudinary(){const{cloudinaryConfig:k}=this.playerOptions.cloudinary;k.chainTarget=this,k.secure!==!1&&(0,Pe.lP)(k,{secure:!0}),this.videojs.cloudinary(this.playerOptions.cloudinary)}_initAnalytics(){const k=this.playerOptions.analytics;if(!window.ga&&k&&this.playerOptions.debug)console.error("Google Analytics script is missing");else if(k){const D=typeof k=="object"?k:{};this.videojs.analytics(D)}}_initCloudinaryAnalytics(){if(this.playerOptions.cloudinaryAnalytics){this.videojs.videoElement=this.videoElement;const k=Q()(this.playerOptions.cloudinaryAnalytics)?this.playerOptions.cloudinaryAnalytics:{};this.videojs.cloudinaryAnalytics(k)}}reTryVideo(k,D){if(!this.isVideoReady())if(this.nbCalls<k)this.nbCalls++,this.reTryId=this.videojs.setTimeout(()=>this.reTryVideo(k,D),D);else{let F=new Error("Video is not ready please try later");this.videojs.trigger("error",F)}}isVideoReady(){return this.videojs.readyState()>=(/iPad|iPhone|iPod/.test(navigator.userAgent)?1:4)&&(this.nbCalls=0,!0)}_initAutoplay(){this.playerOptions.autoplayMode==="on-scroll"&&this.videojs.autoplayOnScroll()}_initContextMenu(){this.playerOptions.hideContextMenu||this.videojs.contextMenu(rr.A.contextMenu)}_initFloatingPlayer(){this.playerOptions.floatingWhenNotVisible!==Sn.rT.NONE&&this.videojs.floatingPlayer({floatTo:this.playerOptions.floatingWhenNotVisible})}_setCssClasses(){this.videojs.addClass(tn.A.CLASS_PREFIX),this.videojs.addClass(tn.A.playerClassPrefix(this.videojs)),tn.A.setSkinClassPrefix(this.videojs,tn.A.skinClassPrefix(this.videojs))}_onReady(){this._setExtendedEvents();const k=this.playerOptions.source||this.playerOptions.publicId;k&&this.source(k,this.playerOptions)}_onSourceChange(k,D){let{sourceOptions:F}=D;this._sendInternalAnalytics({...F&&{sourceOptions:F}}),this._initQualitySelector()}_setExtendedEvents(){const k=[];this.playerOptions.playedEventPercents&&k.push({type:$t.f.PERCENTS_PLAYED,percents:this.playerOptions.playedEventPercents}),this.playerOptions.playedEventTimes&&k.push({type:$t.f.TIME_PLAYED,times:this.playerOptions.playedEventTimes}),k.push($t.f.SEEK,$t.f.MUTE,$t.f.UNMUTE,$t.f.QUALITY_CHANGED);const D=new Wt(this.videojs,{events:k});Object.keys(D.events).forEach(F=>{D.on(F,(ot,mt)=>{this.videojs.trigger({type:F,eventData:mt})})})}cloudinaryConfig(k){return this.videojs.cloudinary.cloudinaryConfig(k)}currentPublicId(){return this.videojs.cloudinary.currentPublicId()}currentSourceUrl(){return this.videojs.currentSource().src}currentPoster(){return this.videojs.cloudinary.currentPoster()}source(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if({publicId:k,options:D}=(0,Pe.a5)(k,D),!this._isPlayerConfigValid)return;if(this.playerOptions.debug&&(0,Yi.Is)(D).then(mt=>{mt||this.videojs.error("invalid source configuration")}),k instanceof Ue.A)return this.videojs.cloudinary.source(k,D);D.shoppable&&this.videojs.shoppable&&this.videojs.shoppable(this.videojs,D),this.playerOptions.allowUsageReport&&(D.usageReport=!0),this.playerOptions.withCredentials&&(D.withCredentials=!0),clearTimeout(this.reTryId),this.nbCalls=0;const F=this.videojs.options_.maxTries||3,ot=this.videojs.options_.videoTimeout||55e3;return this.reTryVideo(F,ot),this.videojs.cloudinary.source(k,D)}posterOptions(k){return this.videojs.cloudinary.posterOptions(k)}skin(k){return k!==void 0&&tt()(k)&&tn.A.setSkinClassPrefix(this.videojs,k),tn.A.skinClassPrefix(this.videojs)}playlist(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D=Object.assign({},D,{playlistWidget:this.playerOptions.playlistWidget}),this.videojs.one($t.f.READY,async()=>{(await this.videojs.playlist(D))(k,D)}),this.videojs.cloudinary.playlist?this.videojs.cloudinary.playlist(k,D):this}playlistByTag(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D=Object.assign({},D,{playlistWidget:this.playerOptions.playlistWidget}),new Promise(F=>{this.videojs.one($t.f.READY,async()=>{(await this.videojs.playlist(D))(await this.sourcesByTag(k,D),D),F(this)})})}sourcesByTag(k){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.videojs.cloudinary.sourcesByTag(k,D)}fluid(k){return k===void 0?this.videojs.fluid():(k?this.videojs.addClass(Sn.gi):this.videojs.removeClass(Sn.gi),this.videojs.fluid(k),this.videojs.trigger($t.f.FLUID,k),this)}play(){return this.playWasCalled=!0,this.videojs.play(),this}stop(){return this.pause(),this.currentTime(0),this}playPrevious(){return this.playlist().playPrevious(),this}playNext(){return this.playlist().playNext(),this}transformation(k){return this.videojs.cloudinary.transformation(k)}sourceTypes(k){return this.videojs.cloudinary.sourceTypes(k)}sourceTransformation(k){return this.videojs.cloudinary.sourceTransformation(k)}autoShowRecommendations(k){return this.videojs.cloudinary.autoShowRecommendations(k)}duration(){return this.videojs.duration()}height(k){return k?(this.videojs.height(k),this):this.videojs.height()}width(k){return k?(this.videojs.width(k),this):this.videojs.width()}volume(k){return k?(this.videojs.volume(k),this):this.videojs.volume()}mute(){return this.isMuted()||this.videojs.muted(!0),this}unmute(){return this.isMuted()&&this.videojs.muted(!1),this}isMuted(){return this.videojs.muted()}pause(){return this.videojs.pause(),this}currentTime(k){return k||k===0?(this.videojs.currentTime(k),this):this.videojs.currentTime()}maximize(){return this.isMaximized()||this.videojs.requestFullscreen(),this}exitMaximize(){return this.isMaximized()&&this.videojs.exitFullscreen(),this}isMaximized(){return this.videojs.isFullscreen()}dispose(){this.videojs.dispose()}controls(k){return k===void 0?this.videojs.controls():(this.videojs.controls(k),this)}ima(){return{playAd:this.videojs.ima.playAd}}loop(k){return k===void 0?this.videojs.loop():(this.videojs.loop(k),this)}el(){return this.videojs.el()}}const Ws=wn;var Gs=u(6606),dn=u(4870);const ks=N=>!!Gs.defaultProfiles.find(k=>{let{name:D}=k;return N===D}),hn=async(N,k,D)=>{const{profile:F,...ot}=k;try{const mt=F?await(async(Yt,ue)=>{if(ks(Yt))return(De=>{const We=Gs.defaultProfiles.find(qe=>{let{name:ni}=qe;return De===ni});if(!We)throw new Error(`Default profile with name ${De} does not exist`);return We.config})(Yt);const te=(0,dn.D)(null,ue.cloudName??ue.cloud_name,ue.private_cdn,ue.cdn_subdomain,ue.secure_cdn_subdomain,ue.cname,ue.secure??!0,ue.secure_distribution),pe=(0,Pe.iT)(Yt)?Yt:`${te}/_applet_/video_service/video_player_profiles/${Yt.replaceAll(" ","+")}.json`;return fetch(pe,{method:"GET"}).then(De=>De.json())})(F,ot):{},Gt=Object.assign({},mt.playerOptions,ot,{_internalAnalyticsMetadata:{newPlayerMethod:!0,profile:ks(F)?F:!!F}}),jt=new Ws(N,Gt,D),he=jt.source;return jt.source=(Yt,ue)=>{const te=Object.assign({},mt.sourceOptions,ue);return he.call(jt,Yt,te)},jt}catch(mt){throw new Ws(N,ot).videojs.error("Invalid profile"),mt}};var Gn=u(5072),pi=u.n(Gn);const As=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=arguments.length>1?arguments[1]:void 0;const D=p()((F=>{let ot={};for(const mt of Object.keys(F))ot[pi()(mt)]=F[mt];return ot})(N),Sn._V);return Object.assign(N,{cloudinaryConfig:k||D})},gs=N=>(k,D,F)=>new Ws(k,As(D,N),F),Is=N=>(k,D,F)=>Ws.all(k,As(D,N),F),Xs=gs(),ys=Is(),Ys=(N,k,D)=>{const F=document.querySelectorAll(N),ot=As(k,void 0);return[...F].map(mt=>hn(mt,ot,D))},Ki={...window.cloudinary||{},videoPlayer:Xs,videoPlayers:ys,player:(N,k,D)=>hn(N,As(k,void 0),D),players:Ys,Cloudinary:{new:N=>(console.warn("Cloudinary.new() is deprecated and will be removed. Please use cloudinary.videoPlayer() instead."),{videoPlayer:gs(N),videoPlayers:Is(N)})}};window.cloudinary=Ki;const Ps=Ki,Xn=Ps.videoPlayer,Rn=Ps.videoPlayers,En=Ps.player,vn=Ps},9388:(S,x,u)=>{u.d(x,{bo:()=>yi,dC:()=>an,ww:()=>Hi,lP:()=>_e,KA:()=>Me,iT:()=>Kn,Nl:()=>Qn,N7:()=>ki,a5:()=>or,M6:()=>Jn});var y=u(7938),p=u.n(y),b=u(4319),m=u.n(b),E=u(5871),P=u(8953),$=u.n(P),j=u(7571),G=u.n(j),M=u(5226);function nt(w){return typeof w=="object"&&w!==null}function pt(w){let T="";return T=typeof window<"u"?btoa(encodeURI(decodeURI(w))):global.Buffer.from(w).toString("base64"),T.replace(/\+/g,"-").replace(/\//g,"_")}var Mt=u(4728);function rt(w,T=/([^a-zA-Z0-9_.\-\/:]+)/g){return w.replace(T,function(z){return z.split("").map(function(et){return"%"+et.charCodeAt(0).toString(16).toUpperCase()}).join("")})}const ft=w=>w.replace(/[A-Z]/g,T=>`_${T.toLowerCase()}`);class B{constructor(T){this.options={},T!=null&&["resourceType","type","publicId","format"].forEach(z=>{var et;return this.options[z]=(et=T[z])!=null?et:T[ft(z)]})}resourceType(T){return this.options.resourceType=T,this}type(T){return this.options.type=T,this}publicId(T){return this.options.publicId=T,this}getPublicId(){var T;return(T=this.options.publicId)!=null?T.replace(/\//g,":"):void 0}getFullPublicId(){return this.options.format!=null?this.getPublicId()+"."+this.options.format:this.getPublicId()}format(T){return this.options.format=T,this}toString(){let T=[];if(this.options.publicId==null)throw"Must supply publicId";return this.options.resourceType!=="image"&&T.push(this.options.resourceType),this.options.type!=="upload"&&T.push(this.options.type),T.push(this.getFullPublicId()),T.filter(z=>!!z).join(":")}clone(){return new B(this.options)}}const it=B;function Q(w){return w==null||typeof w=="object"&&Object.keys(w).length===0||typeof w=="string"&&w.trim().length===0}const ut=function(w){return w!=null&&!isNaN(parseFloat(w))},tt=class extends it{constructor(w){let T;super(w),T=["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","fontHinting","fontAntialiasing","text"],w!=null&&T.forEach(z=>{var et;return this.options[z]=(et=w[z])!=null?et:w[ft(z)]}),this.options.resourceType="text"}resourceType(w){throw"Cannot modify resourceType for text layers"}type(w){throw"Cannot modify type for text layers"}format(w){throw"Cannot modify format for text layers"}fontFamily(w){return this.options.fontFamily=w,this}fontSize(w){return this.options.fontSize=w,this}fontWeight(w){return this.options.fontWeight=w,this}fontStyle(w){return this.options.fontStyle=w,this}textDecoration(w){return this.options.textDecoration=w,this}textAlign(w){return this.options.textAlign=w,this}stroke(w){return this.options.stroke=w,this}letterSpacing(w){return this.options.letterSpacing=w,this}lineSpacing(w){return this.options.lineSpacing=w,this}fontHinting(w){return this.options.fontHinting=w,this}fontAntialiasing(w){return this.options.fontAntialiasing=w,this}text(w){return this.options.text=w,this}toString(){var w,T,z,et,St,zt,Zt,re,$e;if(Zt=this.textStyleIdentifier(),this.options.publicId!=null&&(z=this.getFullPublicId()),this.options.text!=null){if(w=!Q(z),T=!Q(Zt),w&&T||!w&&!T)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";for(et=/\$\([a-zA-Z]\w*\)/g,zt=0,$e=rt(this.options.text,/[,\/]/g),re="";St=et.exec($e);)re+=rt($e.slice(zt,St.index)),re+=St[0],zt=St.index+St[0].length;re+=rt($e.slice(zt))}return[this.options.resourceType,Zt,z,re].filter(Ve=>!!Ve).join(":")}textStyleIdentifier(){var w;if(w=[],this.options.fontWeight!=="normal"&&w.push(this.options.fontWeight),this.options.fontStyle!=="normal"&&w.push(this.options.fontStyle),this.options.textDecoration!=="none"&&w.push(this.options.textDecoration),w.push(this.options.textAlign),this.options.stroke!=="none"&&w.push(this.options.stroke),Q(this.options.letterSpacing)&&!ut(this.options.letterSpacing)||w.push("letter_spacing_"+this.options.letterSpacing),Q(this.options.lineSpacing)&&!ut(this.options.lineSpacing)||w.push("line_spacing_"+this.options.lineSpacing),Q(this.options.fontAntialiasing)||w.push("antialias_"+this.options.fontAntialiasing),Q(this.options.fontHinting)||w.push("hinting_"+this.options.fontHinting),!Q(w.filter(T=>!!T))){if(Q(this.options.fontFamily))throw`Must supply fontFamily. ${w}`;if(Q(this.options.fontSize)&&!ut(this.options.fontSize))throw"Must supply fontSize."}return w.unshift(this.options.fontFamily,this.options.fontSize),w.filter(T=>!!T).join("_")}};function Dt(w){const T=[];let z="";if(Object.keys(Mt.Bu).forEach(et=>{let St=Mt.Bu[et],zt=w[et]||St;zt!==St&&T.push(zt)}),Object.keys(w).forEach(et=>{et!=="letter_spacing"&&et!=="line_spacing"||T.push(`${et}_${w[et]}`),et==="font_hinting"&&T.push(`${et.split("_").pop()}_${w[et]}`),et==="font_antialiasing"&&T.push(`antialias_${w[et]}`)}),w.hasOwnProperty("font_size")||!T||T.length===0){if(!w.font_size)throw"Must supply font_size for text in overlay/underlay";if(!w.font_family)throw"Must supply font_family for text in overlay/underlay";T.unshift(w.font_size),T.unshift(w.font_family),z=T.filter(et=>et).join("_")}return z}function q(w){if(w instanceof tt||w instanceof it)return w.toString();let T="";if(nt(w))if(w.resource_type==="fetch"||w.url!=null)T=`fetch:${pt(w.url)}`;else{let z=w.public_id,et=w.format,St=w.resource_type||"image",zt=w.type||"upload",Zt=w.text,re=null,$e=[];const Ve=!z||z.length===0;if(Ve||(z=z.replace(new RegExp("/","g"),":"),et!=null&&(z=`${z}.${et}`)),Zt&&Zt.length!==0||St==="text"){if(St="text",zt=null,re=Dt(w),Zt&&Zt.length>=0){const Ai=!re;if(!Ve&&!Ai||Ve&&Ai)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay";let Bi=/\$\([a-zA-Z]\w*\)/g,Li=0,we=rt(decodeURIComponent(Zt),/[,\/]/g);Zt="";for(let je=Bi.exec(we);je;je=Bi.exec(we))Zt+=rt(we.slice(Li,je.index)),Zt+=je[0],Li=je.index+je[0].length;Zt+=encodeURIComponent(we.slice(Li))}}else{if(Ve)throw"Must supply public_id for resource_type layer_parameter";St==="subtitles"&&(re=Dt(w))}St!=="image"&&$e.push(St),zt!=="upload"&&$e.push(zt),$e.push(re),$e.push(z),$e.push(Zt),T=$e.filter(Ai=>Ai).join(":")}else T=/^fetch:.+/.test(w)?`fetch:${pt(w.substr(6))}`:w;return T}function Y(w){if(typeof w!="string"||w.length===0||w.match(/^!.+!$/))return w&&w.toString();w=String(w);const T=new RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g");w=w.replace(T,St=>Mt.vo[St]);const z="("+Object.keys(Mt.wL).join("|")+")",et=new RegExp(`(\\$_*[^_ ]+)|${z}`,"g");return(w=w.replace(et,St=>Mt.wL[St]||St)).replace(/[ _]+/g,"_")}function st(w){switch(!0){case w==null:return[];case Array.isArray(w):return w;default:return[w]}}function It(w){if(!nt(w))return w;if(w.function_type==="remote"){const T=pt(w.source).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return[w.function_type,T].join(":")}return[w.function_type,w.source].join(":")}function Ot(w){switch(w&&w.constructor){case String:return Mt.K9.test(w)?w.split(".."):w;case Array:return[[w],w[w.length-1]];default:return[null,null]}}function Tt(w){const T=String(w).match(Mt.qw);if(T){const z=T[5]?"p":"";return`${T[1]||T[4]}${z}`}return w}function Et(w){switch(w&&w.constructor){case Object:{let T="";return"codec"in w&&(T=w.codec,"profile"in w&&(T+=":"+w.profile,"level"in w&&(T+=":"+w.level))),T}case String:return w;default:return null}}class Lt{constructor(T){this.expressions=[],T!=null&&this.expressions.push(Lt.normalize(T))}static new(T){return new this(T)}static normalize(T){var z,et,St;return T==null?T:(T=String(T),z=new RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g"),T=T.replace(z,zt=>wt[zt]),et="("+Object.keys(qt).join("|")+")",St=new RegExp(et,"g"),(T=T.replace(St,(zt,Zt,re)=>T[re-1]==="$"?zt:qt[zt])).replace(/[ _]+/g,"_"))}serialize(){return Lt.normalize(this.expressions.join("_"))}toString(){return this.serialize()}getParent(){return this.parent}setParent(T){return this.parent=T,this}predicate(T,z,et){return wt[z]!=null&&(z=wt[z]),this.expressions.push(`${T}_${z}_${et}`),this}and(){return this.expressions.push("and"),this}or(){return this.expressions.push("or"),this}then(){return this.getParent().if(this.toString())}height(T,z){return this.predicate("h",T,z)}width(T,z){return this.predicate("w",T,z)}aspectRatio(T,z){return this.predicate("ar",T,z)}pageCount(T,z){return this.predicate("pc",T,z)}faceCount(T,z){return this.predicate("fc",T,z)}value(T){return this.expressions.push(T),this}static variable(T,z){return new this(T).value(z)}static width(){return new this("width")}static height(){return new this("height")}static initialWidth(){return new this("initialWidth")}static initialHeight(){return new this("initialHeight")}static aspectRatio(){return new this("aspectRatio")}static initialAspectRatio(){return new this("initialAspectRatio")}static pageCount(){return new this("pageCount")}static faceCount(){return new this("faceCount")}static currentPage(){return new this("currentPage")}static tags(){return new this("tags")}static pageX(){return new this("pageX")}static pageY(){return new this("pageY")}}const wt={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},qt={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp","preview:duration":"preview:duration",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_duration:"idu",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialDuration:"idu",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},Kt=Lt,be=class extends Kt{constructor(w){super(w)}height(w,T){return this.predicate("h",w,T)}width(w,T){return this.predicate("w",w,T)}aspectRatio(w,T){return this.predicate("ar",w,T)}pageCount(w,T){return this.predicate("pc",w,T)}faceCount(w,T){return this.predicate("fc",w,T)}duration(w,T){return this.predicate("du",w,T)}initialDuration(w,T){return this.predicate("idu",w,T)}};var ee="__lodash_hash_undefined__",Ee=9007199254740991,de="[object Arguments]",xe="[object Boolean]",Bt="[object Date]",le="[object Function]",Qe="[object GeneratorFunction]",di="[object Map]",$t="[object Number]",Ce="[object Object]",Xe="[object Promise]",Ni="[object RegExp]",li="[object Set]",Pt="[object String]",xt="[object Symbol]",Wt="[object WeakMap]",Ut="[object ArrayBuffer]",Jt="[object DataView]",ge="[object Float32Array]",ui="[object Float64Array]",oi="[object Int8Array]",Ze="[object Int16Array]",vi="[object Int32Array]",Je="[object Uint8Array]",Pe="[object Uint8ClampedArray]",Ue="[object Uint16Array]",K="[object Uint32Array]",at=/\w*$/,Nt=/^\[object .+?Constructor\]$/,Vt=/^(?:0|[1-9]\d*)$/,Ht={};Ht[de]=Ht["[object Array]"]=Ht[Ut]=Ht[Jt]=Ht[xe]=Ht[Bt]=Ht[ge]=Ht[ui]=Ht[oi]=Ht[Ze]=Ht[vi]=Ht[di]=Ht[$t]=Ht[Ce]=Ht[Ni]=Ht[li]=Ht[Pt]=Ht[xt]=Ht[Je]=Ht[Pe]=Ht[Ue]=Ht[K]=!0,Ht["[object Error]"]=Ht[le]=Ht[Wt]=!1;var Oe=typeof global=="object"&&global&&global.Object===Object&&global,ye=typeof self=="object"&&self&&self.Object===Object&&self,ve=Oe||ye||Function("return this")(),Ne=typeof wa=="object"&&wa&&!wa.nodeType&&wa,Te=Ne&&typeof Ea=="object"&&Ea&&!Ea.nodeType&&Ea,hi=Te&&Te.exports===Ne;function Zi(w,T){return w.set(T[0],T[1]),w}function L(w,T){return w.add(T),w}function U(w,T,z,et){var St=-1,zt=w?w.length:0;for(et;++St<zt;)z=T(z,w[St],St,w);return z}function J(w){var T=!1;if(w!=null&&typeof w.toString!="function")try{T=!!`${w}`}catch{}return T}function bt(w){var T=-1,z=Array(w.size);return w.forEach(function(et,St){z[++T]=[St,et]}),z}function Xt(w,T){return function(z){return w(T(z))}}function Se(w){var T=-1,z=Array(w.size);return w.forEach(function(et){z[++T]=et}),z}var Ie,ei=Array.prototype,bi=Function.prototype,xi=Object.prototype,ii=ve["__core-js_shared__"],Oi=(Ie=/[^.]+$/.exec(ii&&ii.keys&&ii.keys.IE_PROTO||""))?`Symbol(src)_1.${Ie}`:"",sn=bi.toString,$i=xi.hasOwnProperty,un=xi.toString,_n=RegExp(`^${sn.call($i).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")}$`),Pn=hi?ve.Buffer:void 0,qn=ve.Symbol,Sn=ve.Uint8Array,On=Xt(Object.getPrototypeOf,Object),qs=Object.create,$n=xi.propertyIsEnumerable,br=ei.splice,Tr=Object.getOwnPropertySymbols,$s=Pn?Pn.isBuffer:void 0,as=Xt(Object.keys,Object),fs=ji(ve,"DataView"),os=ji(ve,"Map"),sr=ji(ve,"Promise"),Vs=ji(ve,"Set"),xs=ji(ve,"WeakMap"),tn=ji(Object,"create"),rr=dn(fs),Yr=dn(os),Hs=dn(sr),Yi=dn(Vs),Vi=dn(xs),zs=qn?qn.prototype:void 0,Sr=zs?zs.valueOf:void 0;function Ln(w){var T=-1,z=w?w.length:0;for(this.clear();++T<z;){var et=w[T];this.set(et[0],et[1])}}function en(w){var T=-1,z=w?w.length:0;for(this.clear();++T<z;){var et=w[T];this.set(et[0],et[1])}}function Vn(w){var T=-1,z=w?w.length:0;for(this.clear();++T<z;){var et=w[T];this.set(et[0],et[1])}}function rn(w){this.__data__=new en(w)}function Dn(w,T,z){var et=w[T];$i.call(w,T)&&hn(et,z)&&(z!==void 0||T in w)||(w[T]=z)}function ms(w,T){for(var z=w.length;z--;)if(hn(w[z][0],T))return z;return-1}function Hn(w,T,z,et,St,zt,Zt){var re;if(et&&(re=zt?et(w,St,zt,Zt):et(w)),re!==void 0)return re;if(!Is(w))return w;var $e=Gn(w);if($e){if(re=function(we){var je=we.length,fi=we.constructor(je);return je&&typeof we[0]=="string"&&$i.call(we,"index")&&(fi.index=we.index,fi.input=we.input),fi}(w),!T)return function(we,je){var fi=-1,zi=we.length;for(je||(je=Array(zi));++fi<zi;)je[fi]=we[fi];return je}(w,re)}else{var Ve=wn(w),Ai=Ve==le||Ve==Qe;if(As(w))return function(we,je){if(je)return we.slice();var fi=new we.constructor(we.length);return we.copy(fi),fi}(w,T);if(Ve==Ce||Ve==de||Ai&&!zt){if(J(w))return zt?w:{};if(re=function(we){return typeof we.constructor!="function"||Gs(we)?{}:Is(je=On(we))?qs(je):{};var je}(Ai?{}:w),!T)return function(we,je){return ar(we,ze(we),je)}(w,function(we,je){return we&&ar(je,Xs(je),we)}(re,w))}else{if(!Ht[Ve])return zt?w:{};re=function(we,je,fi,zi){var nn,pn=we.constructor;switch(je){case Ut:return zn(we);case xe:case Bt:return new pn(+we);case Jt:return function(ke,ci){var Mi=ci?zn(ke.buffer):ke.buffer;return new ke.constructor(Mi,ke.byteOffset,ke.byteLength)}(we,zi);case ge:case ui:case oi:case Ze:case vi:case Je:case Pe:case Ue:case K:return function(ke,ci){var Mi=ci?zn(ke.buffer):ke.buffer;return new ke.constructor(Mi,ke.byteOffset,ke.length)}(we,zi);case di:return function(ke,ci,Mi){return U(ci?Mi(bt(ke),!0):bt(ke),Zi,new ke.constructor)}(we,zi,fi);case $t:case Pt:return new pn(we);case Ni:return function(ke){var ci=new ke.constructor(ke.source,at.exec(ke));return ci.lastIndex=ke.lastIndex,ci}(we);case li:return function(ke,ci,Mi){return U(ci?Mi(Se(ke),!0):Se(ke),L,new ke.constructor)}(we,zi,fi);case xt:return nn=we,Sr?Object(Sr.call(nn)):{}}}(w,Ve,Hn,T)}}Zt||(Zt=new rn);var Bi=Zt.get(w);if(Bi)return Bi;if(Zt.set(w,re),!$e)var Li=z?function(we){return function(je,fi,zi){var nn=fi(je);return Gn(je)?nn:function(pn,ke){for(var ci=-1,Mi=ke.length,Cn=pn.length;++ci<Mi;)pn[Cn+ci]=ke[ci];return pn}(nn,zi(je))}(we,Xs,ze)}(w):Xs(w);return function(we,je){for(var fi=-1,zi=we?we.length:0;++fi<zi&&je(we[fi],fi)!==!1;);}(Li||w,function(we,je){Li&&(we=w[je=we]),Dn(re,je,Hn(we,T,z,et,je,w,Zt))}),re}function zn(w){var T=new w.constructor(w.byteLength);return new Sn(T).set(new Sn(w)),T}function ar(w,T,z,et){z||(z={});for(var St=-1,zt=T.length;++St<zt;){var Zt=T[St],re=void 0;Dn(z,Zt,re===void 0?w[Zt]:re)}return z}function Wn(w,T){var z,et,St=w.__data__;return((et=typeof(z=T))=="string"||et=="number"||et=="symbol"||et=="boolean"?z!=="__proto__":z===null)?St[typeof T=="string"?"string":"hash"]:St.map}function ji(w,T){var z=function(et,St){return et?.[St]}(w,T);return function(et){return!(!Is(et)||(St=et,Oi&&Oi in St))&&(gs(et)||J(et)?_n:Nt).test(dn(et));var St}(z)?z:void 0}Ln.prototype.clear=function(){this.__data__=tn?tn(null):{}},Ln.prototype.delete=function(w){return this.has(w)&&delete this.__data__[w]},Ln.prototype.get=function(w){var T=this.__data__;if(tn){var z=T[w];return z===ee?void 0:z}return $i.call(T,w)?T[w]:void 0},Ln.prototype.has=function(w){var T=this.__data__;return tn?T[w]!==void 0:$i.call(T,w)},Ln.prototype.set=function(w,T){return this.__data__[w]=tn&&T===void 0?ee:T,this},en.prototype.clear=function(){this.__data__=[]},en.prototype.delete=function(w){var T=this.__data__,z=ms(T,w);return!(z<0||(z==T.length-1?T.pop():br.call(T,z,1),0))},en.prototype.get=function(w){var T=this.__data__,z=ms(T,w);return z<0?void 0:T[z][1]},en.prototype.has=function(w){return ms(this.__data__,w)>-1},en.prototype.set=function(w,T){var z=this.__data__,et=ms(z,w);return et<0?z.push([w,T]):z[et][1]=T,this},Vn.prototype.clear=function(){this.__data__={hash:new Ln,map:new(os||en),string:new Ln}},Vn.prototype.delete=function(w){return Wn(this,w).delete(w)},Vn.prototype.get=function(w){return Wn(this,w).get(w)},Vn.prototype.has=function(w){return Wn(this,w).has(w)},Vn.prototype.set=function(w,T){return Wn(this,w).set(w,T),this},rn.prototype.clear=function(){this.__data__=new en},rn.prototype.delete=function(w){return this.__data__.delete(w)},rn.prototype.get=function(w){return this.__data__.get(w)},rn.prototype.has=function(w){return this.__data__.has(w)},rn.prototype.set=function(w,T){var z=this.__data__;if(z instanceof en){var et=z.__data__;if(!os||et.length<199)return et.push([w,T]),this;z=this.__data__=new Vn(et)}return z.set(w,T),this};var ze=Tr?Xt(Tr,Object):function(){return[]},wn=function(w){return un.call(w)};function Ws(w,T){return!!(T=T??Ee)&&(typeof w=="number"||Vt.test(w))&&w>-1&&w%1==0&&w<T}function Gs(w){var T=w&&w.constructor;return w===(typeof T=="function"&&T.prototype||xi)}function dn(w){if(w!=null){try{return sn.call(w)}catch{}try{return`${w}`}catch{}}return""}function ks(w){return Hn(w,!0,!0)}function hn(w,T){return w===T||w!=w&&T!=T}(fs&&wn(new fs(new ArrayBuffer(1)))!=Jt||os&&wn(new os)!=di||sr&&wn(sr.resolve())!=Xe||Vs&&wn(new Vs)!=li||xs&&wn(new xs)!=Wt)&&(wn=function(w){var T=un.call(w),z=T==Ce?w.constructor:void 0,et=z?dn(z):void 0;if(et)switch(et){case rr:return Jt;case Yr:return di;case Hs:return Xe;case Yi:return li;case Vi:return Wt}return T});var Gn=Array.isArray;function pi(w){return w!=null&&function(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=Ee}(w.length)&&!gs(w)}var As=$s||function(){return!1};function gs(w){var T=Is(w)?un.call(w):"";return T==le||T==Qe}function Is(w){var T=typeof w;return!!w&&(T=="object"||T=="function")}function Xs(w){return pi(w)?function(T,z){var et=Gn(T)||function(re){return function($e){return function(Ve){return!!Ve&&typeof Ve=="object"}($e)&&pi($e)}(re)&&$i.call(re,"callee")&&(!$n.call(re,"callee")||un.call(re)==de)}(T)?function(re,$e){for(var Ve=-1,Ai=Array(re);++Ve<re;)Ai[Ve]=$e(Ve);return Ai}(T.length,String):[],St=et.length,zt=!!St;for(var Zt in T)!$i.call(T,Zt)||zt&&(Zt=="length"||Ws(Zt,St))||et.push(Zt);return et}(w):function(T){if(!Gs(T))return as(T);var z=[];for(var et in Object(T))$i.call(T,et)&&et!="constructor"&&z.push(et);return z}(w)}const ys=function(w){let T=w.match(Ps);return T=T.map(z=>z.charAt(0).toLocaleUpperCase()+z.slice(1).toLocaleLowerCase()),T[0]=T[0].toLocaleLowerCase(),T.join("")};var Ys,Ki,Ps=(Ki="[A-Z]",Ys="[a-z]+",RegExp(Ki+"+(?="+Ki+Ys+")|"+Ki+"?"+Ys+"|"+Ki+"+|[0-9]+","g"));function Xn(w){return w}function Rn(w,T){for(let z=0;z<w.length;z++)if(w[z]===T)return!0;return!1}const En=class extends tt{constructor(w){super(w),this.options.resourceType="subtitles"}};function vn(w){return typeof w=="string"||w instanceof String}const N=class extends it{constructor(w){super(w),vn(w)?this.options.url=w:w?.url&&(this.options.url=w.url)}url(w){return this.options.url=w,this}toString(){return`fetch:${pt(this.options.url)}`}};function k(w){return w instanceof Function}const D=["accessibility","api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","placeholder","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","signature","ssl_detected","type","url_suffix","use_root_path","version"];function F(w,...T){return T.forEach(z=>{Object.keys(z).forEach(et=>{z[et]!=null&&(w[et]=z[et])})}),w}class ot{constructor(T,z,et=Xn){this.name=T,this.shortName=z,this.process=et}set(T){return this.origValue=T,this}serialize(){var T,z;return T=this.value(),z=Array.isArray(T)||nt(T)||vn(T)?!Q(T):T!=null,this.shortName!=null&&z?`${this.shortName}_${T}`:""}value(){return this.process(this.origValue)}static norm_color(T){return T?.replace(/^#/,"rgb:")}static build_array(T){return T==null?[]:Array.isArray(T)?T:[T]}static process_video_params(T){var z;switch(T.constructor){case Object:return z="","codec"in T&&(z=T.codec,"profile"in T&&(z+=":"+T.profile,"level"in T&&(z+=":"+T.level))),z;case String:return T;default:return null}}}class mt extends ot{constructor(T,z,et=".",St=void 0){super(T,z,St),this.sep=et}serialize(){if(this.shortName!=null){let T=this.value();if(Q(T))return"";if(vn(T))return`${this.shortName}_${T}`;{let z=T.map(et=>k(et.serialize)?et.serialize():et).join(this.sep);return`${this.shortName}_${z}`}}return""}value(){return Array.isArray(this.origValue)?this.origValue.map(T=>this.process(T)):this.process(this.origValue)}set(T){return T==null||Array.isArray(T)?super.set(T):super.set([T])}}class Gt extends ot{constructor(T,z="t",et=".",St=void 0){super(T,z,St),this.sep=et}serialize(){let T="";const z=this.value();if(Q(z))return T;if((et=z).length&&et.every(vn)){const St=z.join(this.sep);Q(St)||(T=`${this.shortName}_${St}`)}else T=z.map(St=>vn(St)&&!Q(St)?`${this.shortName}_${St}`:k(St.serialize)?St.serialize():nt(St)&&!Q(St)?new ni(St).serialize():void 0).filter(St=>St);var et;return T}set(T){return this.origValue=T,Array.isArray(this.origValue)?super.set(this.origValue):super.set([this.origValue])}}class jt extends ot{constructor(T,z,et=jt.norm_range_value){super(T,z,et)}static norm_range_value(T){let z=String(T).match(new RegExp("^(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?$"));if(z){let et=z[5]!=null?"p":"";T=(z[1]||z[4])+et}return T}}class he extends ot{constructor(T,z,et=Xn){super(T,z,et)}serialize(){return this.value()}}class Yt extends ot{value(){if(this.origValue==null)return"";let T;if(this.origValue instanceof it)T=this.origValue;else if(nt(this.origValue)){let z=function(et,St){var zt,Zt;zt={};for(let re in et)Zt=et[re],re=St(re),Q(re)||(zt[re]=Zt);return zt}(this.origValue,ys);T=z.resourceType==="text"||z.text!=null?new tt(z):z.resourceType==="subtitles"?new En(z):z.resourceType==="fetch"||z.url!=null?new N(z):new it(z)}else T=vn(this.origValue)?/^fetch:.+/.test(this.origValue)?new N(this.origValue.substr(6)):this.origValue:"";return T.toString()}static textStyle(T){return new tt(T).textStyleIdentifier()}}class ue{constructor(T){let z,et;z=void 0,et={},this.toOptions=St=>{let zt={};if(St==null&&(St=!0),Object.keys(et).forEach(Zt=>zt[Zt]=et[Zt].origValue),F(zt,this.otherOptions),St&&!Q(this.chained)){let Zt=this.chained.map(re=>re.toOptions());Zt.push(zt),zt={},F(zt,this.otherOptions),zt.transformation=Zt}return zt},this.setParent=St=>(z=St,St!=null&&this.fromOptions(typeof St.toOptions=="function"?St.toOptions():void 0),this),this.getParent=()=>z,this.param=(St,zt,Zt,re,$e)=>($e==null&&($e=k(re)?re:Xn),et[zt]=new ot(zt,Zt,$e).set(St),this),this.rawParam=function(St,zt,Zt,re,$e){return $e=We(arguments),et[zt]=new he(zt,Zt,$e).set(St),this},this.rangeParam=function(St,zt,Zt,re,$e){return $e=We(arguments),et[zt]=new jt(zt,Zt,$e).set(St),this},this.arrayParam=function(St,zt,Zt,re=":",$e=[],Ve=void 0){return Ve=We(arguments),et[zt]=new mt(zt,Zt,re,Ve).set(St),this},this.transformationParam=function(St,zt,Zt,re=".",$e=void 0,Ve=void 0){return Ve=We(arguments),et[zt]=new Gt(zt,Zt,re,Ve).set(St),this},this.layerParam=function(St,zt,Zt){return et[zt]=new Yt(zt,Zt).set(St),this},this.getValue=function(St){let zt=et[St]&&et[St].value();return zt??this.otherOptions[St]},this.get=function(St){return et[St]},this.remove=function(St){var zt;switch(!1){case et[St]==null:return zt=et[St],delete et[St],zt.origValue;case this.otherOptions[St]==null:return zt=this.otherOptions[St],delete this.otherOptions[St],zt;default:return null}},this.keys=function(){var St;return function(){var zt;for(St in zt=[],et)St!=null&&zt.push(St.match(te)?St:ft(St));return zt}().sort()},this.toPlainObject=function(){var St,zt,Zt;for(zt in St={},et)St[zt]=et[zt].value(),nt(St[zt])&&(St[zt]=ks(St[zt]));return Q(this.chained)||((Zt=this.chained.map(re=>re.toPlainObject())).push(St),St={transformation:Zt}),St},this.chain=function(){var St;return Object.getOwnPropertyNames(et).length!==0&&(St=new this.constructor(this.toOptions(!1)),this.resetTransformations(),this.chained.push(St)),this},this.resetTransformations=function(){return et={},this},this.otherOptions={},this.chained=[],this.fromOptions(T)}fromOptions(T={}){if(T instanceof ue)this.fromTransformation(T);else{(vn(T)||Array.isArray(T))&&(T={transformation:T}),(T=ks(T)).if&&(this.set("if",T.if),delete T.if);for(let z in T){let et=T[z];et!=null&&(z.match(te)?z!=="$attr"&&this.set("variable",z,et):this.set(z,et))}}return this}fromTransformation(T){return T instanceof ue&&T.keys().forEach(z=>this.set(z,T.get(z).origValue)),this}set(T,...z){let et;return et=ys(T),Rn(Be,et)?this[et].apply(this,z):this.otherOptions[T]=z[0],this}hasLayer(){return this.getValue("overlay")||this.getValue("underlay")}serialize(){var T,z,et,St,zt,Zt,re,$e,Ve,Ai,Bi,Li,we,je,fi,zi,nn,pn;for(Ai=this.chained.map(ke=>ke.serialize()),St=this.keys(),je=(zt=this.get("transformation"))!=null?zt.serialize():void 0,T=(Zt=this.get("if"))!=null?Zt.serialize():void 0,zi=function(ke){var ci,Mi,Cn,mi,Zn;if(Array.isArray(ke)){for(mi=[],ci=0,Mi=ke.length;ci<Mi;ci++)[Cn,Zn]=ke[ci],mi.push(`${Cn}_${Kt.normalize(Zn)}`);return mi}return ke}((re=this.get("variables"))!=null?re.value():void 0),pn=["transformation","if","variables"],St=St.filter(ke=>!pn.includes(ke)),nn=[],Li=[],z=0,et=St.length;z<et;z++)(Bi=St[z]).match(te)?nn.push(Bi+"_"+Kt.normalize(($e=this.get(Bi))!=null?$e.value():void 0)):Li.push((Ve=this.get(Bi))!=null?Ve.serialize():void 0);switch(!1){case!vn(je):Li.push(je);break;case!Array.isArray(je):Ai=Ai.concat(je)}return Li=function(){var ke,ci,Mi;for(Mi=[],ke=0,ci=Li.length;ke<ci;ke++)fi=Li[ke],(Array.isArray(fi)&&!Q(fi)||!Array.isArray(fi)&&fi)&&Mi.push(fi);return Mi}(),Li=nn.sort().concat(zi).concat(Li.sort()),T==="if_end"?Li.push(T):Q(T)||Li.unshift(T),Q(we=Li.filter(ke=>!!ke).join(De))||Ai.push(we),Ai.filter(ke=>!!ke).join(pe)}static listNames(){return Be}toHtmlAttributes(){let T,z,et,St,zt,Zt,re,$e;return et={},Object.keys(this.otherOptions).forEach(Ve=>{Zt=this.otherOptions[Ve],$e=ft(Ve),Rn(gi,$e)||Rn(D,$e)||(T=/^html_/.test(Ve)?Ve.slice(5):Ve,et[T]=Zt)}),this.keys().forEach(Ve=>{/^html_/.test(Ve)&&(et[ys(Ve.slice(5))]=this.getValue(Ve))}),this.hasLayer()||this.getValue("angle")||Rn(["fit","limit","lfill"],this.getValue("crop"))||(re=(St=this.get("width"))!=null?St.origValue:void 0,z=(zt=this.get("height"))!=null?zt.origValue:void 0,parseFloat(re)>=1&&et.width==null&&(et.width=re),parseFloat(z)>=1&&et.height==null&&(et.height=z)),et}static isValidParamName(T){return Be.indexOf(ys(T))>=0}toHtml(){var T;return(T=this.getParent())!=null&&typeof T.toHtml=="function"?T.toHtml():void 0}toString(){return this.serialize()}clone(){return new ue(this.toOptions(!0))}}const te=/^\$[a-zA-Z0-9]+$/,pe="/",De=",";function We(w){var T;return k(T=w?.[w.length-1])?T:void 0}function qe({function_type:w,source:T}){return w==="remote"?[w,btoa(T)].join(":"):w==="wasm"?[w,T].join(":"):void 0}class ni extends ue{constructor(T){super(T)}static new(T){return new ni(T)}angle(T){return this.arrayParam(T,"angle","a",".",Kt.normalize),this}audioCodec(T){return this.param(T,"audio_codec","ac"),this}audioFrequency(T){return this.param(T,"audio_frequency","af"),this}aspectRatio(T){return this.param(T,"aspect_ratio","ar",Kt.normalize),this}background(T){return this.param(T,"background","b",ot.norm_color),this}bitRate(T){return this.param(T,"bit_rate","br"),this}border(T){return this.param(T,"border","bo",z=>nt(z)?`${(z=Object.assign({},{color:"black",width:2},z)).width}px_solid_${ot.norm_color(z.color)}`:z)}color(T){return this.param(T,"color","co",ot.norm_color),this}colorSpace(T){return this.param(T,"color_space","cs"),this}crop(T){return this.param(T,"crop","c"),this}customFunction(T){return this.param(T,"custom_function","fn",()=>qe(T))}customPreFunction(T){if(!this.get("custom_function"))return this.rawParam(T,"custom_function","",()=>(T=qe(T))?`fn_pre:${T}`:T)}defaultImage(T){return this.param(T,"default_image","d"),this}delay(T){return this.param(T,"delay","dl"),this}density(T){return this.param(T,"density","dn"),this}duration(T){return this.rangeParam(T,"duration","du"),this}dpr(T){return this.param(T,"dpr","dpr",z=>(z=z.toString())!=null&&z.match(/^\d+$/)?z+".0":Kt.normalize(z))}effect(T){return this.arrayParam(T,"effect","e",":",Kt.normalize),this}else(){return this.if("else")}endIf(){return this.if("end")}endOffset(T){return this.rangeParam(T,"end_offset","eo"),this}fallbackContent(T){return this.param(T,"fallback_content"),this}fetchFormat(T){return this.param(T,"fetch_format","f"),this}format(T){return this.param(T,"format"),this}flags(T){return this.arrayParam(T,"flags","fl","."),this}gravity(T){return this.param(T,"gravity","g"),this}fps(T){return this.param(T,"fps","fps",z=>vn(z)?z:Array.isArray(z)?z.join("-"):z)}height(T){return this.param(T,"height","h",()=>this.getValue("crop")||this.getValue("overlay")||this.getValue("underlay")?Kt.normalize(T):null)}htmlHeight(T){return this.param(T,"html_height"),this}htmlWidth(T){return this.param(T,"html_width"),this}if(T=""){var z,et,St,zt,Zt;switch(T){case"else":return this.chain(),this.param(T,"if","if");case"end":for(this.chain(),z=St=this.chained.length-1;St>=0&&(et=this.chained[z].getValue("if"))!=="end"&&(et==null||(zt=ni.new().if(et),this.chained[z].remove("if"),Zt=this.chained[z],this.chained[z]=ni.new().transformation([zt,Zt]),et==="else"));z=St+=-1);return this.param(T,"if","if");case"":return be.new().setParent(this);default:return this.param(T,"if","if",re=>be.new(re).toString())}}keyframeInterval(T){return this.param(T,"keyframe_interval","ki"),this}ocr(T){return this.param(T,"ocr","ocr"),this}offset(T){var z,et;if([et,z]=k(T?.split)?T.split(".."):Array.isArray(T)?T:[null,null],et!=null&&this.startOffset(et),z!=null)return this.endOffset(z)}opacity(T){return this.param(T,"opacity","o",Kt.normalize),this}overlay(T){return this.layerParam(T,"overlay","l"),this}page(T){return this.param(T,"page","pg"),this}poster(T){return this.param(T,"poster"),this}prefix(T){return this.param(T,"prefix","p"),this}quality(T){return this.param(T,"quality","q",Kt.normalize),this}radius(T){return this.arrayParam(T,"radius","r",":",Kt.normalize),this}rawTransformation(T){return this.rawParam(T,"raw_transformation"),this}size(T){let z,et;if(k(T?.split))return[et,z]=T.split("x"),this.width(et),this.height(z)}sourceTypes(T){return this.param(T,"source_types"),this}sourceTransformation(T){return this.param(T,"source_transformation")}startOffset(T){return this.rangeParam(T,"start_offset","so"),this}streamingProfile(T){return this.param(T,"streaming_profile","sp"),this}transformation(T){return this.transformationParam(T,"transformation","t"),this}underlay(T){return this.layerParam(T,"underlay","u"),this}variable(T,z){return this.param(z,T,T),this}variables(T){return this.arrayParam(T,"variables"),this}videoCodec(T){return this.param(T,"video_codec","vc",ot.process_video_params),this}videoSampling(T){return this.param(T,"video_sampling","vs"),this}width(T){return this.param(T,"width","w",()=>this.getValue("crop")||this.getValue("overlay")||this.getValue("underlay")?Kt.normalize(T):null),this}x(T){return this.param(T,"x","x",Kt.normalize),this}y(T){return this.param(T,"y","y",Kt.normalize),this}zoom(T){return this.param(T,"zoom","z",Kt.normalize),this}}const Be=["angle","audioCodec","audioFrequency","aspectRatio","background","bitRate","border","color","colorSpace","crop","customFunction","customPreFunction","defaultImage","delay","density","duration","dpr","effect","else","endIf","endOffset","fallbackContent","fetchFormat","format","flags","gravity","fps","height","htmlHeight","htmlWidth","if","keyframeInterval","ocr","offset","opacity","overlay","page","poster","prefix","quality","radius","rawTransformation","size","sourceTypes","sourceTransformation","startOffset","streamingProfile","transformation","underlay","variable","variables","videoCodec","videoSampling","width","x","y","zoom"],gi=Be.map(ft).concat(["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version","externalLibraries","max_timeout_ms"]),cn=ni;function Ae(w){if(typeof w=="string")return w;if(w instanceof cn)return w.toString();if(Array.isArray(w))return w.map(oe=>Ae(oe)).filter(oe=>oe).join("/");let T,z;const et=w.size,St=w.overlay||w.underlay,zt=w.crop,Zt=st(w.angle).join("."),re=(w.background||"").replace(/^#/,"rgb:"),$e=(w.color||"").replace(/^#/,"rgb:"),Ve=st(w.flags||[]).join("."),Ai=w.dpr===void 0?w.dpr:function(oe){let Ye=oe.toString();return Ye?.match(/^\d+$/)?Ye+".0":Kt.normalize(Ye)}(w.dpr),Bi=q(w.overlay),Li=function(oe){let Ye=oe;if(!Ye)return Ye;if(Array.isArray(Ye)||(Ye=[Ye]),Ye.length===0||Ye.length>4)throw new Error("Radius array should contain between 1 and 4 values");if(Ye.findIndex(Nn=>Nn===null)>=0)throw new Error("Corner: Cannot be null");return Ye.map(Y).join(":")}(w.radius),we=q(w.underlay),je=function(oe){return oe&&"if_"+Y(oe)}(w.if),fi=It(w.custom_function),zi=function(oe){const Ye=It(oe);return typeof Ye=="string"?`pre:${Ye}`:null}(w.custom_pre_function);let nn=w.fps,pn=[],ke=st(w.transformation||[]),ci=w.effect;const Mi=St||Zt||zt==="fit"||zt==="limit";if(et){const[oe,Ye]=et.split("x");T=oe,z=Ye}else T=w.width,z=w.height;T&&(T.toString().indexOf("auto")===0||Mi||parseFloat(T.toString())<1)&&delete w.width,z&&(Mi||parseFloat(z.toString())<1)&&delete w.height,ke.some(oe=>typeof oe=="object")?ke=ke.map(oe=>nt(oe)?Ae(oe):Ae({transformation:oe})).filter(oe=>oe):(pn=ke.join("."),ke=[]),Array.isArray(ci)?ci=ci.join(":"):nt(ci)&&(ci=Object.entries(ci).map(([oe,Ye])=>`${oe}:${Ye}`));let mi=w.border;nt(mi)?mi=`${mi.width!=null?mi.width:2}px_solid_${(mi.color!=null?mi.color:"black").replace(/^#/,"rgb:")}`:/^\d+$/.exec(mi)&&(w.border=mi,mi=void 0),Array.isArray(nn)&&(nn=nn.join("-"));const Zn={a:Y(Zt),ar:Y(w.aspect_ratio),b:re,bo:mi,c:zt,co:$e,dpr:Y(Ai),e:Y(ci),fl:Ve,fn:fi||zi,fps:nn,h:Y(z),ki:Y(w.keyframe_interval),l:Bi,o:Y(w.opacity),q:Y(w.quality),r:Li,t:pn,u:we,w:Y(T),x:Y(w.x),y:Y(w.y),z:Y(w.zoom),ac:w.audio_codec,af:w.audio_frequency,br:w.bit_rate,cs:w.color_space,d:w.default_image,dl:w.delay,dn:w.density,du:Tt(w.duration),eo:Tt(w.end_offset||ut(w.end_offset)?w.end_offset:Ot(w.offset)[1]),f:w.fetch_format,g:w.gravity,pg:w.page,p:w.prefix,so:Tt(w.start_offset||ut(w.start_offset)?w.start_offset:Ot(w.offset)[0]),sp:w.streaming_profile,vc:Et(w.video_codec),vs:w.video_sampling},ti=[je,Object.entries(w).filter(([oe,Ye])=>oe.startsWith("$")).map(([oe,Ye])=>`${oe}_${Y(Ye)}`).sort().concat((w.variables||[]).map(([oe,Ye])=>`${oe}_${Y(Ye)}`)).join(","),Object.entries(Zn).filter(([oe,Ye])=>!(Ye==null||typeof Ye=="string"&&Ye.length===0||Array.isArray(Ye)&&Ye.length===0)).map(([oe,Ye])=>`${oe}_${Ye}`).sort().join(","),w.raw_transformation].filter(oe=>oe).join(",");return ti&&ke.push(ti),ke.join("/")}var Yn=u(4870);const or=function(w,T){let{tolerateMissingId:z=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if($()(w)){const et=Object.assign({},w);if(w=(0,E.sliceAndUnsetProperties)(et,"publicId").publicId,!G()(w)&&!z)throw new Error("Source is missing 'publicId'.");T&&(T=Object.assign({},et,T))}return{publicId:w,options:T}},Kn=w=>M.P8.test(w),Qn=(w,T)=>{let z=w,et=T;return typeof w=="object"&&(z=w.src),typeof T=="object"&&(et=T.src),/^\/\//.test(z)&&(et=et.slice(et.indexOf("//"))),/^\/\//.test(et)&&(z=z.slice(z.indexOf("//"))),z===et},_e=(w,T)=>Object.assign(w,T),Me=(w,T)=>function(z,et){let St;et.type==="fetch"&&et.fetch_format==null&&(et.fetch_format=et.format);let zt=et.type,Zt=et.resource_type||"image",re=et.version;const $e=typeof et.force_version!="boolean"||et.force_version,Ve=(et.long_url_signature,et.format),Ai=et.cloud_name;if(!Ai)throw"cloud_name must be provided in the configuration";const Bi=et.private_cdn,Li=et.secure_distribution,we=et.secure,je=et.cdn_subdomain,fi=et.secure_cdn_subdomain,zi=et.cname,nn=et.shorten,pn=et.sign_url,ke=(et.api_secret,et.url_suffix),ci=et.use_root_path,Mi=et.auth_token,Cn=/^(image|raw)\/([a-z0-9_]+)\/v(\d+)\/([^#]+)$/.exec(z);Cn&&(Zt=Cn[1],zt=Cn[2],re=Cn[3],z=Cn[4]);const mi=z;if(z==null||(z=z.toString(),zt===null&&z.match(/^https?:\//i)))return mi;[Zt,zt]=function(ti,oe,Ye,Nn,wr){if(oe==null&&(oe="upload"),Ye!=null)if(ti==="image"&&oe==="upload")ti="images",oe=null;else if(ti==="image"&&oe==="private")ti="private_images",oe=null;else if(ti==="image"&&oe==="authenticated")ti="authenticated_images",oe=null;else if(ti==="raw"&&oe==="upload")ti="files",oe=null;else{if(ti!=="video"||oe!=="upload")throw new Error("URL Suffix only supported for image/upload, image/private, image/authenticated, video/upload and raw/upload");ti="videos",oe=null}if(Nn){if(!(ti==="image"&&oe==="upload"||ti==="images"&&oe==null))throw new Error("Root path only supported for image/upload");ti=null,oe=null}return wr&&ti==="image"&&oe==="upload"&&(ti="iu",oe=null),[ti,oe]}(Zt,zt,ke,ci,nn),[z,St]=function(ti,oe,Ye){let Nn;if((ti=ti.replace(/([^:])\/\//g,"$1/")).match(/^https?:\//i))Nn=ti=rt(ti);else{if(Nn=ti=encodeURIComponent(decodeURIComponent(ti)).replace(/%3A/g,":").replace(/%2F/g,"/"),Ye){if(Ye.match(/[\.\/]/))throw new Error("url_suffix should not include . or /");ti=ti+"/"+Ye}oe!=null&&(ti=ti+"."+oe,Nn=Nn+"."+oe)}return[ti,Nn]}(z,Ve,ke),re==null&&$e&&St.indexOf("/")>=0&&!St.match(/^v[0-9]+/)&&!St.match(/^https?:\//)&&(re=1),re=re!=null?`v${re}`:null;const Zn=Ae(ks(et)).replace(/([^:])\/\//g,"$1/");if(pn&&!Mi){let ti=[Zn,St].filter(function(oe){return oe!=null&&oe!==""}).join("/");try{for(let oe=0;ti!==decodeURIComponent(ti)&&oe<10;oe++)ti=decodeURIComponent(ti)}catch{}}return[(0,Yn.D)(z,Ai,Bi,je,fi,zi,we,Li),Zt,zt,Zn,re,z].filter(function(ti){return ti!=null&&ti!==""}).join("/").replace(" ","%20")}(w,m()(T,["chainTarget"])),ki=(w,T)=>{const z=(et=>et.constructor.name==="Transformation"&&et.toOptions)(w)?w.toOptions():w;return new cn(z).fromOptions(T).toOptions()},yi={NO_SUPPORTED_MEDIA:6,CUSTOM:10,UNKNOWN_CUSTOMER:11,RESOURCE_NOT_FOUND:12,PRIVATE_RESOURCE:13,UNAUTHENTICATED:14},Hi=w=>{let{errorMsg:T,publicId:z,cloudName:et,statusCode:St}=w;const zt="Video cannot be played";let Zt={code:yi.CUSTOM,message:`${zt}${T?"- "+T:""}`,statusCode:St},re=T.toLowerCase();return re.startsWith("unknown customer")&&(Zt.code=yi.UNKNOWN_CUSTOMER,Zt.message=`${zt} Unknown cloud-name ${et}`),re.startsWith("resource not found")&&(Zt.code=yi.RESOURCE_NOT_FOUND,Zt.message=`${zt} Public ID ${z} not found`),re.startsWith("private resource")&&(Zt.code=yi.PRIVATE_RESOURCE,Zt.message=`${zt} Private video`),re.startsWith("unauthenticated access")&&(Zt.message=`${zt} Requires authentication`,Zt.code=yi.UNAUTHENTICATED),Zt},an={AV1:"av1",VP9:"vp9",HEV1:"hev1",H265:"h265",H264:"h264"},Jn=()=>{p().use("video/auto",()=>({async setSource(w,T){const{headers:z}=await fetch(w.src,{method:"HEAD",credentials:w.withCredentials?"include":"omit"}),et=z.get("content-type").split(";")[0];return T(null,{src:w.src,type:et})}}))}},6770:(S,x,u)=>{u.d(x,{A:()=>m});var y=u(9388),p=u(5871),b=u(7311);const m=class{_transformation=null;constructor(E){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{publicId:$,options:j}=(0,y.a5)(E,P),{cloudinaryConfig:G}=(0,p.sliceAndUnsetProperties)(j,"cloudinaryConfig"),{transformation:M}=(0,p.sliceAndUnsetProperties)(j,"transformation"),{queryParams:nt}=(0,p.sliceAndUnsetProperties)(j,"queryParams");if(!G)throw new Error('Source is missing "cloudinaryConfig".');this.publicId=()=>$,this.cloudinaryConfig=()=>G,this.resourceConfig=()=>j,this.queryParams=()=>nt,this.getType=()=>this._type,this.transformation(M)}transformation(E){return E&&(this._transformation=E),this._transformation}config(){const E=this.cloudinaryConfig();return{cloud_name:E.cloudName,url:(P,$)=>{if((0,y.iT)(P))return P;const j=(0,y.N7)(this.resourceConfig(),$);return(0,y.KA)(P,{...E,...j})}}}url(){let{transformation:E}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return`${this.config().url(this.publicId(),{transformation:E||this.transformation()})}${this.queryParams()?(0,b.y)(this.queryParams()):""}`}}},4650:(S,x,u)=>{u.d(x,{A:()=>P});var y=u(6770),p=u(9388);const b=RegExp(`\\.(${["jpg","png","gif","webp"].join("|")})$$`),m={resource_type:"image",type:"upload",transformation:[]};class E extends y.A{constructor(j){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};({publicId:j,options:G}=(0,p.a5)(j,G)),j=j.replace(b,""),G=Object.assign({},m,G),super(j,G),this._type="ImageSource"}}const P=E},5226:(S,x,u)=>{u.d(x,{IH:()=>$,P8:()=>m,Tf:()=>p,XY:()=>E,cE:()=>b,uf:()=>P,vD:()=>y});const y={format:"jpg",resource_type:"video"},p={resource_type:"video",type:"upload",transformation:[],sourceTransformation:{},sourceTypes:["auto"],recommendations:null,info:{},interactionAreas:{},chapters:{}},b=RegExp(`\\.(${["3g2","3gp","avi","flv","m3u8","ts","m2ts","mts","mov","mkv","mp4","mpeg","mpd","mxf","ogv","webm","wmv"].join("|")})$$`),m=RegExp("https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)"),E={hls:"application/x-mpegURL",dash:"application/dash+xml",opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},P=["hls","dash","mpd","m3u8"],$={hls:"m3u8",dash:"mpd"}},5381:(S,x,u)=>{u.d(x,{A:()=>B});var y=u(5871),p=u(7311),b=u(2160),m=u.n(b),E=u(1104),P=u(5226),$=u(9388),j=u(7571),G=u.n(j),M=u(5004);const nt=it=>{return!!it&&(G()(it)?(Q=it)&&Object.values($.dC).some(ut=>Q.includes(ut)):!!(ut=>["video_codec","streaming_profile"].some(tt=>(0,M.isKeyInTransformation)(ut,tt)))(it)||!!it.some?.(ut=>nt(ut)));var Q};var pt=u(6770),Mt=u(4650);let rt=0;class ft extends pt.A{constructor(Q){let ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const tt=(0,$.iT)(Q);let{publicId:Dt,options:q}=(0,$.a5)(Q,ut);tt||(Dt=Dt.replace(P.cE,"")),q=Object.assign({},P.Tf,q),q.poster||(q.poster=Object.assign({publicId:Dt},P.vD));const{poster:Y,sourceTypes:st,sourceTransformation:It,info:Ot,recommendations:Tt,textTracks:Et,withCredentials:Lt,interactionAreas:wt,chapters:qt}=(0,y.sliceAndUnsetProperties)(q,"poster","sourceTypes","sourceTransformation","info","recommendations","textTracks","withCredentials","interactionAreas","chapters");super(Dt,q),this._sourceTypes=null,this._recommendations=null,this._textTracks=null,this._poster=null,this._info=null,this._sourceTransformation=null,this._interactionAreas=null,this._chapters=null,this._type=E.x.VIDEO,this.isRawUrl=tt,this.isLiveStream=q.type==="live",this._rawTransformation=q.raw_transformation,this.withCredentials=!!Lt,this.getInitOptions=()=>ut,this.poster(Y),this.sourceTypes(st),this.sourceTransformation(It),this.info(Ot),this.interactionAreas(wt),this.chapters(qt),this.recommendations(Tt),this.textTracks(Et),this.objectId=rt++}textTracks(Q){return Q===void 0?this._textTracks:(this._textTracks=Q,this)}recommendations(Q){return Q===void 0?this._recommendations:(this._recommendations=Q,this)}sourceTypes(Q){return Q?(this._sourceTypes=Q,this):this._sourceTypes}info(Q){return Q?(this._info=Q,this):this._info}interactionAreas(Q){return Q?(this._interactionAreas=Q,this):this._interactionAreas}chapters(Q){return Q?(this._chapters=Q,this):this._chapters}sourceTransformation(Q){return Q?(this._sourceTransformation=Q,this):this._sourceTransformation}poster(Q){let ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Q?Q instanceof Mt.A?(this._poster=Q,this):({publicId:Q,options:ut}=(0,$.a5)(Q,ut,{tolerateMissingId:!0}),!Q&&this.isRawUrl||this.isLiveStream?null:(Q||(Q=this.publicId(),ut=Object.assign({},ut,P.vD)),ut.cloudinaryConfig=ut.cloudinaryConfig||this.cloudinaryConfig(),this._poster=new Mt.A(Q,ut),this)):this._poster}contains(Q){return this.generateSources().some(ut=>(0,$.Nl)(ut,Q))}generateSources(){if(this.isRawUrl){const Q=this.sourceTypes()[0]==="auto"?null:this.sourceTypes()[0];return[this.generateRawSource(this.publicId(),Q)]}return this.sourceTypes().map(Q=>{const ut=this.sourceTransformation()[Q]||this.transformation(),tt=function(Et){Et=Et.toLowerCase().split("/").shift();let Lt=P.IH[Et];return Lt||(Lt=Et.split("/").shift()),Lt}(Q),Dt=P.uf.includes(tt),q={};ut&&(q.transformation=m()(ut)),Object.assign(q,{resource_type:"video",format:tt});const[Y,st]=function(Et){const[Lt,wt]=Et.toLowerCase().split("/"),qt=P.XY[Lt]||`video/${Lt}`;let Kt=[qt];return wt&&(Kt=[qt,{video_codec:wt}]),Kt}(Q);!st||nt(q.transformation)||nt(this._rawTransformation)||(q.transformation=(0,$.N7)(q.transformation,st)),q.format==="auto"&&(delete q.format,q.transformation=(0,$.N7)(q.transformation,{fetch_format:"auto:video"})),Dt&&(JSON.stringify(q.transformation||{}).includes('"streaming_profile":')||this.isLiveStream||(q.transformation=(0,$.N7)(q.transformation,{streaming_profile:"auto"})));const It=this.queryParams()?(0,p.y)(this.queryParams()):"",Ot=this.config().url(this.publicId(),q),Tt=Ot.indexOf("?")>-1?It.replace("?","&"):It;return{type:Y,src:Ot+Tt,cldSrc:this,isAdaptive:Dt,withCredentials:this.withCredentials}})}generateRawSource(Q,ut){ut=ut||Q.split(".").pop();const tt=P.uf.includes(ut);return{type:ut=P.XY[ut]?P.XY[ut]:ut?`video/${ut}`:null,src:Q,cldSrc:this,isAdaptive:tt,withCredentials:this.withCredentials}}getInteractionAreas(){return this._interactionAreas}}const B=ft},4500:(S,x,u)=>{u.d(x,{A:()=>P,w:()=>m});var y=u(3066),p=u(8838);const b={colorsDark:{base:"#000000",accent:"#0D9AFF",text:"#FFFFFF"},colorsLight:{base:"#FFFFFF",accent:"#0D9AFF",text:"#000000"}},m=$=>(0,p.T4)($)?b.colorsLight:b.colorsDark;class E{constructor(j){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.player=j;const M=m(this.player.options_);G.colors=Object.assign({},M,G.colors),this.init=()=>{nt(Mt(`
  .PLAYER-CLASS-PREFIX {
    --color-accent: --accent-color;
    --color-base: --base-color;
    --color-text: --text-color;

    color: --text-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-time-tooltip,
  .PLAYER-CLASS-PREFIX .vjs-mouse-display:after,
  .PLAYER-CLASS-PREFIX .vjs-play-progress:after {
    color: --text-color;
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-slider {
    background-color: rgba(--text-color, 0.2);
  }

  .PLAYER-CLASS-PREFIX .vjs-load-progress {
    background: rgba(--text-color, 0.3);
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-level {
    background: --text-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-play-progress {
    background: --accent-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-vertical {
    background-color: rgba(--base-color, 0.7);
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-panel-horizontal .vjs-control:before {
    border-color: transparent transparent rgba(--accent-color, 0.4) transparent;
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-panel-horizontal .vjs-volume-level:before {
    border-color: transparent transparent --accent-color transparent;
  }

  .PLAYER-CLASS-PREFIX .vjs-progress-control:before {
    color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-highlights-graph-display {
    color: rgba(--text-color, 0.3);
  }

  .PLAYER-CLASS-PREFIX .vjs-title-bar {
    color: --text-color;
    background-image: linear-gradient(rgba(--base-color, 0.4), rgba(255, 255, 255, 0) 100%);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay {
    color: --text-color;
    background-color: rgba(--base-color, 0.4);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item {
    box-shadow: 0 0.5em 1.2em 0px --base-color;
    color: --text-color;
    border: 1px solid --text-color !important;
    position: relative;
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item:active,
  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item:hover {
    border: 1px solid --accent-color !important;
  }

  .PLAYER-CLASS-PREFIX .vjs-menu-content .vjs-menu-item:active,
  .PLAYER-CLASS-PREFIX .vjs-menu-content .vjs-menu-item:focus,
  .PLAYER-CLASS-PREFIX .vjs-menu-content .vjs-menu-item:hover {
    color: --text-color;
    background-color: rgba(--text-color, 0.2);
  }

  .PLAYER-CLASS-PREFIX.vjs-ad-playing .vjs-progress-control .vjs-play-progress {
    background: --base-color;
  }

  .PLAYER-CLASS-PREFIX.cld-plw-layout {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .cld-plw-item-info-wrap {
    color: --text-color;
  }

  .PLAYER-CLASS-PREFIX .cld-video-player-floater-close polygon {
    fill: --base-color;
  }

  .PLAYER-CLASS-PREFIX .cld-spbl-product-hotspot:after {
    background: --base-color;
    box-shadow: 0 0 0 4px --accent-color, 0 0 0 8px rgba(--text-color, 0.24);
  }

  .PLAYER-CLASS-PREFIX .cld-spbl-product-tooltip {
    color: --base-color;
    background: --text-color;
  }

  .PLAYER-CLASS-PREFIX .base-color-semi-bg {
    background: rgba(--base-color, 0.7);
  }

  .PLAYER-CLASS-PREFIX .text-color-semi-bg {
    background: rgba(--text-color, 0.7);
  }

  .PLAYER-CLASS-PREFIX .text-color-text {
    color: --text-color;
  }

  .PLAYER-CLASS-PREFIX .base-color-text {
    color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .accent-color-text {
    color: --accent-color;
  }
`)),this.player.options_.skin==="light"?nt(Mt(`
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .base-color-bg,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-control-bar,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-big-play-button,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-menu-button .vjs-menu-content {
    background-color: rgba(--base-color, 0.8);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary .vjs-recommendations-overlay-item-primary-content {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary:active .vjs-recommendations-overlay-item-primary-content,
  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary:hover .vjs-recommendations-overlay-item-primary-content {
    color: --base-color;
    background-color: rgba(--accent-color, 0.8);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary:active div,
  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary:hover div {
    color: --base-color;
    background-color: rgba(--accent-color, 0.8);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary div {
    background: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video {
    border: 1px solid --text-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video .vjs-upcoming-video-bar {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .cld-plw-item-info-wrap {
    color: --text-color;
  }

  @media only screen and (max-width: 768px) {
    .PLAYER-CLASS-PREFIX.cld-plw-vertical .cld-plw-item-info-wrap {
      color: --accent-color;
    }
  }
`)):nt(Mt(`
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .base-color-bg,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-control-bar,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-big-play-button,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-menu-button .vjs-menu-content {
    background-color: rgba(--base-color, 0.6);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary .vjs-recommendations-overlay-item-primary-content {
    background-color: rgba(--base-color, 0.6);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary div {
    background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent 80%);
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video {
    border: 1px solid rgba(--text-color, 0.5);
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video .vjs-upcoming-video-bar {
    background-color: rgba(--base-color, 0.6);
  }

  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content {
    background-color: rgba(--base-color, 0.6);
  }
`))};const nt=rt=>{const ft=document.createElement("style");ft.innerHTML=rt,this.player.el_.appendChild(ft)},pt=rt=>{rt=rt.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(B,it,Q,ut){return it+it+Q+Q+ut+ut});const ft=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(rt);return ft?parseInt(ft[1],16)+", "+parseInt(ft[2],16)+", "+parseInt(ft[3],16):null},Mt=rt=>rt.replace(/PLAYER\-CLASS\-PREFIX/g,(0,y.playerClassPrefix)(this.player)).replace(/rgba\(\-\-base\-color/g,"rgba("+pt(G.colors.base)).replace(/rgba\(\-\-accent\-color/g,"rgba("+pt(G.colors.accent)).replace(/rgba\(\-\-text\-color/g,"rgba("+pt(G.colors.text)).replace(/\-\-base\-color/g,G.colors.base).replace(/\-\-accent\-color/g,G.colors.accent).replace(/\-\-text\-color/g,G.colors.text)}}function P(){new E(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()}},5004:(S,x,u)=>{u.r(x),u.d(x,{addTextTracks:()=>$,handleCldError:()=>E,isKeyInTransformation:()=>P});var y=u(9388),p=u(9339);const b={method:"head"},m={method:"get",credentials:"include",headers:{"Content-Range":"bytes=0-0"}},E=(j,G)=>{const M=j.videojs.cloudinary.getCurrentSources(),nt=G.fetchErrorUsingGet?m:b;nt.credentials=G.withCredentials?"include":"omit",M.length>0?Promise.all(M.map(pt=>fetch(pt.src,nt))).then(pt=>{const Mt=(ft=>ft.reduce((B,it)=>{if(it.status>=200&&it.status<399&&it.url!==""){const Q=new URL(it.url);B.push(Q.host+Q.pathname)}return B},[]))(pt),rt=pt[0];if(Mt.length){const ft=((B,it)=>B.filter(Q=>{const ut=new URL(Q.src);return it.indexOf(ut.host+ut.pathname)!==-1&&Q.try!==!0}))(M,Mt);ft&&ft.length?((B,it)=>{B.options.playerOptions.debug&&console.log("Trying sources: ",it),it.forEach(Q=>{Q.try=!0}),B.videojs.autoplay(B.videojs.autoplay()||B.playWasCalled),B.videojs.src(it)})(j,ft):j.videojs.error({code:y.bo.NO_SUPPORTED_MEDIA,message:"No supported media sources",statusCode:pt.status})}else((ft,B)=>{ft.videojs.error((0,y.ww)({errorMsg:B.headers.get("x-cld-error")||"",publicId:ft.currentPublicId(),cloudName:ft.cloudinaryConfig().cloud_name,error:B,statusCode:B.status}))})(j,rt)}).catch(pt=>{j.videojs.error({code:7,message:pt&&pt.message?pt.message:"Failed to test sources"})}):j.videojs.error({code:y.bo.NO_SUPPORTED_MEDIA,message:"No supported media sources"})},P=(j,G)=>!!(j&&G&&(Array.isArray(j)?(0,p.I)(j,M=>P(M,G)):j.getValue?j.getValue(G):j[G])),$=(j,G)=>{j.forEach(M=>{M.src&&M.src.endsWith(".vtt")?fetch(M.src,b).then(nt=>{nt.status>=200&&nt.status<=399&&G.addRemoteTextTrack(M,!0)}):M.src&&M.src.endsWith(".srt")?G.srtTextTracks(M):!G.pacedTranscript||M.src&&!M.src.endsWith(".transcript")||G.pacedTranscript(M)})}},1104:(S,x,u)=>{u.d(x,{f:()=>y,x:()=>p});const y={READY:"ready",PLAY:"play",PLAYING:"playing",PAUSE:"pause",SEEK:"seek",SEEKING:"seeking",MUTE:"mute",UNMUTE:"unmute",PAUSE_NO_SEEK:"pausenoseek",ERROR:"error",TIME_UPDATE:"timeupdate",EMPTIED:"emptied",RETRY_PLAYLIST:"retryplaylist",CAN_PLAY_THROUGH:"canplaythrough",CLD_SOURCE_CHANGED:"cldsourcechanged",SOURCE_CHANGED:"sourcechanged",LOADED_METADATA:"loadedmetadata",LOADED_DATA:"loadeddata",REFRESH_TEXT_TRACKS:"refreshTextTracks",PLAYLIST_CREATED:"playlistcreated",UP_COMING_VIDEO_SHOW:"upcomingvideoshow",UP_COMING_VIDEO_HIDE:"upcomingvideohide",PLAYLIST_ITEM_CHANGED:"playlistitemchanged",VOLUME_CHANGE:"volumechange",FLUID:"fluid",PLAYLIST_PANEL:"PlaylistPanel",ENDED:"ended",RESIZE:"resize",START:"start",VIDEO_LOAD:"videoload",PRODUCT_BAR_MIN:"productBarMin",SHOW_PRODUCTS_OVERLAY:"showProductsOverlay",SHOPPABLE_ITEM_CHANGED:"shoppableitemchanged",FULL_SCREEN_CHANGE:"fullscreenchange",PERCENTS_PLAYED:"percentsplayed",TIME_PLAYED:"timeplayed",PLAYER_LOAD:"playerload",DISPOSE:"dispose",QUALITY_CHANGED:"qualitychanged"},p={AUDIO:"AudioSource",VIDEO:"VideoSource"}},3066:(S,x,u)=>{u.r(x),u.d(x,{CLASS_PREFIX:()=>b,playerClassPrefix:()=>E,setSkinClassPrefix:()=>j,skinClass:()=>P,skinClassPrefix:()=>$});var y=u(7668),p=u(9339);const b="cld-video-player",m=`${b}-skin-`,E=G=>`${b}-${G.id_}`,P=G=>`${m}${G}`,$=G=>(0,p.I)(G.el().classList,M=>M.startsWith(m)),j=(G,M)=>{const nt=$(G),pt=!!M&&M.replace(m,"");let Mt="";Mt=pt?P(pt):G.options_.skin?P(G.options_.skin):P(y.A.skin),Mt!==nt&&(nt&&G.removeClass(nt),G.addClass(Mt)),pt&&G.options_.skin!==pt&&(G.options_.skin=pt)}},7134:(S,x,u)=>{u.d(x,{It:()=>j,cu:()=>$,n:()=>E,q2:()=>G});var y=u(2160),p=u.n(y),b=u(9040),m=u.n(b);const E=function(M){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pt=arguments.length>2?arguments[2]:void 0;const Mt=document.createElement(M);for(let rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&Mt.setAttribute(rt,nt[rt]);return p()(pt).forEach(rt=>P(rt,Mt)),Mt},P=(M,nt)=>{if(m()(M))nt.appendChild(M);else if(M&&typeof M!="object"){const pt=document.createTextNode(M);nt.appendChild(pt)}},$=(M,nt)=>{for(let pt in nt)Object.prototype.hasOwnProperty.call(nt,pt)&&(M.style[pt]=nt[pt]);return M},j=M=>{const nt=Array.isArray(M.children)?M.children.map(j):M.children,pt=m()(M)?M:E(M.tag,M.attr,nt);return M.onClick&&(M.event={name:"click",callback:M.onClick}),M.event&&pt.addEventListener(M.event.name,M.event.callback,!1),M.style&&$(pt,M.style),pt},G=(M,nt,pt)=>(M.addEventListener(nt,pt,!1),()=>{M.removeEventListener(nt,pt,!1)})},9339:(S,x,u)=>{function y(p,b){return Array.prototype.find&&Array.isArray(p)?p.find(b):function(m,E){for(let P=0;P<m.length;P++){const $=m[P];if(E($,P,m))return[$,P]}return[void 0,-1]}(p,b)[0]}u.d(x,{I:()=>y})},7588:(S,x,u)=>{u.r(x),u.d(x,{fontFace:()=>b});var y=u(5303),p=u.n(y);const b=(m,E)=>{E===void 0&&(E="Inter"),E&&E!=="inherit"?(p().load({google:{families:[E]}}),m.style.fontFamily=E):E==="inherit"&&(m.style.fontFamily="inherit")}},5104:(S,x,u)=>{u.d(x,{A:()=>ft});var y={};u.r(y),u.d(y,{mixin:()=>P});var p={};u.r(p),u.d(p,{normalizeAttributes:()=>rt});var b=u(5871),m=u(3171),E=u(5004);function P(){for(var B=arguments.length,it=new Array(B),Q=0;Q<B;Q++)it[Q]=arguments[Q];return it.reduce((ut,tt)=>tt(ut),class{})}var $=u(7588),j=u(3066),G=u(3686),M=u.n(G);const nt=/^(data-cld-)(\w+)/,pt={},Mt=B=>function(it){let Q=null;if(it==="")return!0;try{Q=JSON.parse(it)}catch{}return Q||(Q=Number(it),Q||it)}(B),rt=B=>{const it={};if(B&&B.attributes&&B.attributes.length>0){const Q=B.attributes;for(let ut=Q.length-1;ut>=0;ut--){let tt=Q[ut].name,Dt=Q[ut].value;tt.match(nt)&&(tt=M()(tt.replace(nt,"$2"))),Dt=typeof B[tt]=="boolean"?Dt!==null:(pt[tt]||Mt)(Dt),it[tt]=Dt}}return it},ft=Object.assign({},b,m,E,$,y,j,p)},3171:(S,x,u)=>{function y(E){const P=E.getBoundingClientRect(),$=document.body,j=document.documentElement,G=window.pageYOffset||j.scrollTop||$.scrollTop,M=window.pageXOffset||j.scrollLeft||$.scrollLeft,nt=j.clientTop||$.clientTop||0,pt=j.clientLeft||$.clientLeft||0,Mt=P.top+G-nt,rt=P.left+M-pt;return{top:Math.round(Mt),left:Math.round(rt)}}function p(E,P){const $={},j=y(E),G=E.offsetWidth,M=E.offsetHeight,nt=j.top,pt=j.left;let Mt=P.pageY,rt=P.pageX;return P.changedTouches&&(rt=P.changedTouches[0].pageX,Mt=P.changedTouches[0].pageY),$.y=Math.max(0,Math.min(1,(nt-Mt+M)/M)),$.x=Math.max(0,Math.min(1,(rt-pt)/G)),$}function b(E,P){let{fraction:$}=P;const j=y(E),G=j.left,M=j.top,nt=E.offsetHeight,pt=E.offsetWidth,Mt=G+pt,rt=M+nt;return Math.max(0,Math.min(pt,window.pageXOffset+window.innerWidth-G,Mt-window.pageXOffset))*Math.max(0,Math.min(pt,window.pageYOffset+window.innerHeight-M,rt-window.pageYOffset))/(pt*nt)>$}function m(E,P,$){E.style.left=`${P}px`,E.style.top=`${$}px`}u.r(x),u.d(x,{getPointerPosition:()=>p,isElementInViewport:()=>b,setPosition:()=>m})},7311:(S,x,u)=>{u.d(x,{y:()=>y});const y=p=>{const b=Object.keys(p);return b.length?`?${b.map(m=>`${m}=${p[m]}`).join("&")}`:""}},5871:(S,x,u)=>{function y(m,E){for(var P=arguments.length,$=new Array(P>2?P-2:0),j=2;j<P;j++)$[j-2]=arguments[j];return $.reduce((G,M)=>(Object.prototype.hasOwnProperty.call(m,M)&&(G[M]=m[M],E&&delete m[M]),G),{})}function p(m){for(var E=arguments.length,P=new Array(E>1?E-1:0),$=1;$<E;$++)P[$-1]=arguments[$];return y(m,!1,...P)}function b(m){for(var E=arguments.length,P=new Array(E>1?E-1:0),$=1;$<E;$++)P[$-1]=arguments[$];return y(m,!0,...P)}u.r(x),u.d(x,{sliceAndUnsetProperties:()=>b,sliceProperties:()=>p})},5779:(S,x,u)=>{u.d(x,{I6:()=>j,Is:()=>G,O6:()=>E,QF:()=>P});var y=u(8446),p=u.n(y),b=u(8953),m=u.n(b);const E=M=>p()(M)?M():M,P=(M,nt,pt)=>{const Mt=E(M),rt=Mt.value(nt);return rt||console.error(`cloudinary video player: ${Mt.message(pt)}`),rt},$=(M,nt)=>{if(m()(nt)){for(let pt in M)if(Object.prototype.hasOwnProperty.call(nt,pt)){const Mt=M[pt],rt=nt[pt],ft=m()(Mt);if(ft&&!$(Mt,rt)||!ft&&!P(rt,Mt,pt))return!1}}return!0},j=async M=>u.e(40).then(u.bind(u,9754)).then(nt=>{let{playerValidators:pt}=nt;return $(M,pt)}),G=M=>u.e(40).then(u.bind(u,9754)).then(nt=>{let{sourceValidators:pt}=nt;return $(M,pt)})},608:(S,x,u)=>{u.d(x,{Am:()=>nt,HJ:()=>j,KE:()=>M,_V:()=>E,gi:()=>$,jK:()=>m,jV:()=>P,rT:()=>G,uy:()=>b});var y=u(7938),p=u.n(y);const b=["cloudinaryConfig","transformation","sourceTypes","sourceTransformation","posterOptions","autoShowRecommendations","fontFace","secure"],m=b.concat(["_internalAnalyticsMetadata","debug","publicId","source","autoplayMode","playedEventPercents","playedEventTimes","analytics","cloudinaryAnalytics","allowUsageReport","fluid","ima","playlistWidget","hideContextMenu","colors","floatingWhenNotVisible","ads","showJumpControls","chaptersButton","pictureInPictureToggle","textTracks","qualitySelector","fetchErrorUsingGet","withCredentials","seekThumbnails","aiHighlightsGraph","chapters","queryParams"]),E=["cloud_name","secure","private_cdn","secure_distribution","cdn_subdomain","secure_cdn_subdomain","cname","shorten","sign_url","api_secret","url_suffix","use_root_path","auth_token"],P={html5:{handlePartialData:!1,vhs:{overrideNative:!p()||!p().browser||!p().browser.IS_IOS&&!p().browser.IS_SAFARI}}},$="cld-fluid",j={ALWAYS:"always",ON_SCROLL:"on-scroll",NEVER:"never"},G={LEFT:"left",RIGHT:"right",NONE:"none"},M={FIRST_VIDEO:"first-video",EVERY_VIDEO:"every-video"},nt={AUTO:"auto",METADATA:"metadata",NONE:"none"}},8838:(S,x,u)=>{u.d(x,{T4:()=>nt,Wi:()=>Mt,eo:()=>M,go:()=>rt,iG:()=>pt});var y=u(7938),p=u.n(y),b=u(5104),m=u(7668),E=u(608),P=u(7571),$=u.n(P),j=u(3337),G=u.n(j);const M=(ft,B)=>ft.addRemoteTextTrack({kind:"metadata",srclang:"en",src:B,default:!0},!0).track,nt=ft=>ft.class.indexOf("cld-video-player-skin-light")>-1||ft.skin==="light",pt=ft=>{if($()(ft)){let B=ft;B.indexOf("#")===0&&(B=B.slice(1));try{ft=document.querySelector(`#${G()(B)}`)||p().getPlayer(B)}catch{ft=null}if(!ft)throw new Error(`Could not find element with id ${B}`)}if(!ft.tagName)throw new Error("Must specify either an element or an element id.");if(ft.tagName!=="VIDEO")throw new Error("Element is not a video tag.");return ft},Mt=(ft,B)=>{const it=b.A.normalizeAttributes(ft);(p().dom.hasClass(ft,E.gi)||p().dom.hasClass(ft,"vjs-fluid"))&&(B.fluid=!0),(ut=>{const tt=ut.autoplayMode;if(tt)switch(tt){case E.HJ.ALWAYS:ut.autoplay=!0;break;case E.HJ.ON_SCROLL:case E.HJ.NEVER:default:ut.autoplay=!1}})(B=Object.assign({},E.jV,m.A,it,B));const Q=b.A.sliceAndUnsetProperties(B,...E.jK);return Q.cloudinary=b.A.sliceAndUnsetProperties(Q,...E.uy),B.videojs&&(Object.assign(B,B.videojs),delete B.videojs),{playerOptions:Q,videojsOptions:B}},rt=()=>{let ft=p().getComponent("Player").prototype.options_.children;ft.push("titleBar");const B=p().getComponent("ControlBar");B&&(ft=B.prototype.options_.children,ft.splice(ft.indexOf("progressControl"),0,"spacer","progressControlEventsBlocker"),ft.splice(ft.indexOf("playToggle"),1,"playToggle","JumpBackButton","JumpForwardButton"),ft.push("logoButton"),ft.splice(ft.indexOf("skipForward"),1),ft.splice(ft.indexOf("skipBackward"),1))}},4138:S=>{S.exports=(()=>{var x={805:b=>{b.exports=$,b.exports.isMobile=$,b.exports.default=$;const m=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,E=/CrOS/,P=/android|ipad|playbook|silk/i;function $(j){j||(j={});let G=j.ua;if(G||typeof navigator>"u"||(G=navigator.userAgent),G&&G.headers&&typeof G.headers["user-agent"]=="string"&&(G=G.headers["user-agent"]),typeof G!="string")return!1;let M=m.test(G)&&!E.test(G)||!!j.tablet&&P.test(G);return!M&&j.tablet&&j.featureDetect&&navigator&&navigator.maxTouchPoints>1&&G.indexOf("Macintosh")!==-1&&G.indexOf("Safari")!==-1&&(M=!0),M}}},u={};function y(b){var m=u[b];if(m!==void 0)return m.exports;var E=u[b]={exports:{}};return x[b](E,E.exports,y),E.exports}y.d=(b,m)=>{for(var E in m)y.o(m,E)&&!y.o(b,E)&&Object.defineProperty(b,E,{enumerable:!0,get:m[E]})},y.o=(b,m)=>Object.prototype.hasOwnProperty.call(b,m),y.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var p={};return(()=>{y.r(p),y.d(p,{connectCloudinaryAnalytics:()=>li});var b=y(805);function m(Pt){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},m(Pt)}var E="play",P="pause",$="loadMetadata",j="cld-custom-",G=function(Pt,xt){var Wt=function(){xt(E,{})};return Pt.addEventListener("play",Wt),function(){Pt.removeEventListener("play",Wt)}},M=function(Pt,xt){var Wt=function(){xt(E,{})};return Pt.addEventListener("".concat(j,"play"),Wt),function(){Pt.removeEventListener("".concat(j,"play"),Wt)}},nt=function(Pt,xt){var Wt=function(){xt(P,{})};Pt.addEventListener("pause",Wt);var Ut=function(){xt(P,{})};return Pt.addEventListener("emptied",Ut),function(){Pt.removeEventListener("pause",Wt),Pt.removeEventListener("emptied",Ut)}},pt=function(Pt,xt){var Wt=function(){xt(P,{})};Pt.addEventListener("".concat(j,"pause"),Wt);var Ut=function(){xt(P,{})};return Pt.addEventListener("".concat(j,"emptied"),Ut),function(){Pt.removeEventListener("".concat(j,"pause"),Wt),Pt.removeEventListener("".concat(j,"emptied"),Ut)}},Mt=function(Pt){var xt=Pt.duration,Wt=Number.isNaN(xt)?null:xt;return{videoDuration:Number.POSITIVE_INFINITY===Wt?"Infinity":Wt}},rt=function(Pt,xt){var Wt=function(){var Ut=Mt(Pt);xt($,{videoDuration:Ut.videoDuration})};return Pt.addEventListener("loadedmetadata",Wt),Pt.addEventListener("loadedmetadata_after_init",Wt),function(){Pt.removeEventListener("loadedmetadata",Wt),Pt.removeEventListener("loadedmetadata_after_init",Wt)}},ft=function(Pt,xt){var Wt=function(Jt){var ge=Mt(Pt),ui=Jt.detail.videoDuration||ge.videoDuration;xt($,{videoDuration:ui})};Pt.addEventListener("".concat(j,"loadedmetadata"),Wt);var Ut=function(Jt){xt($,{videoDuration:typeof Jt.detail.videoDuration!="number"&&Jt.detail.videoDuration>0?null:Jt.detail.videoDuration})};return Pt.addEventListener("".concat(j,"loadedmetadata_after_init"),Ut),function(){Pt.removeEventListener("".concat(j,"loadedmetadata"),Wt),Pt.removeEventListener("".concat(j,"loadedmetadata_after_init"),Ut)}},B=function(Pt,xt){return{eventName:Pt,eventTime:Date.now(),eventDetails:xt}};function it(Pt,xt){(xt==null||xt>Pt.length)&&(xt=Pt.length);for(var Wt=0,Ut=new Array(xt);Wt<xt;Wt++)Ut[Wt]=Pt[Wt];return Ut}var Q=function(Pt,xt){var Wt={},Ut={};return function(Jt,ge){Wt[Jt]=[],Ut[Jt]=[ge];var ui=Wt[Jt],oi=Ut[Jt],Ze=function(Je,Pe){return oi.push(B(Je,Pe))},vi=xt?[M(Pt,Ze),pt(Pt,Ze),ft(Pt,Ze)]:[G(Pt,Ze),nt(Pt,Ze),rt(Pt,Ze)];return function(Je,Pe){if(Je.readyState>0){var Ue=Pe?"".concat(j,"loadedmetadata_after_init"):"loadedmetadata_after_init",K=new CustomEvent(Ue);Je.dispatchEvent(K)}}(Pt,xt),{flushEvents:function(){var Je=oi.splice(0,oi.length);return ui.splice.apply(ui,[ui.length,0].concat(function(Pe){return function(Ue){if(Array.isArray(Ue))return it(Ue)}(Pe)||function(Ue){if(typeof Symbol<"u"&&Ue[Symbol.iterator]!=null||Ue["@@iterator"]!=null)return Array.from(Ue)}(Pe)||function(Ue,K){if(Ue){if(typeof Ue=="string")return it(Ue,K);var at=Object.prototype.toString.call(Ue).slice(8,-1);return at==="Object"&&Ue.constructor&&(at=Ue.constructor.name),at==="Map"||at==="Set"?Array.from(Ue):at==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(at)?it(Ue,K):void 0}}(Pe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(Je))),Je},getAllEvents:function(){return ui},destroy:function(){vi.forEach(function(Je){return Je()})}}}};const ut={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let tt;const Dt=new Uint8Array(16);function q(){if(!tt&&(tt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tt(Dt)}const Y=[];for(let Pt=0;Pt<256;++Pt)Y.push((Pt+256).toString(16).slice(1));const st=function(Pt,xt,Wt){if(ut.randomUUID&&!Pt)return ut.randomUUID();const Ut=(Pt=Pt||{}).random||(Pt.rng||q)();return Ut[6]=15&Ut[6]|64,Ut[8]=63&Ut[8]|128,function(Jt,ge=0){return(Y[Jt[ge+0]]+Y[Jt[ge+1]]+Y[Jt[ge+2]]+Y[Jt[ge+3]]+"-"+Y[Jt[ge+4]]+Y[Jt[ge+5]]+"-"+Y[Jt[ge+6]]+Y[Jt[ge+7]]+"-"+Y[Jt[ge+8]]+Y[Jt[ge+9]]+"-"+Y[Jt[ge+10]]+Y[Jt[ge+11]]+Y[Jt[ge+12]]+Y[Jt[ge+13]]+Y[Jt[ge+14]]+Y[Jt[ge+15]]).toLowerCase()}(Ut)};var It=function(){return st().replace(/-/g,"")},Ot="cld-analytics-user-id",Tt=function(){var Pt=window.localStorage.getItem(Ot);if(Pt)return Pt;var xt=st().replace(/-/g,"");return window.localStorage.setItem(Ot,xt),xt};function Et(Pt){return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},Et(Pt)}var Lt=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,wt="native",qt=[wt,"cloudinary video player"];function Kt(Pt){return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},Kt(Pt)}function be(Pt,xt){var Wt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(Pt);xt&&(Ut=Ut.filter(function(Jt){return Object.getOwnPropertyDescriptor(Pt,Jt).enumerable})),Wt.push.apply(Wt,Ut)}return Wt}function ee(Pt){for(var xt=1;xt<arguments.length;xt++){var Wt=arguments[xt]!=null?arguments[xt]:{};xt%2?be(Object(Wt),!0).forEach(function(Ut){Ee(Pt,Ut,Wt[Ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(Wt)):be(Object(Wt)).forEach(function(Ut){Object.defineProperty(Pt,Ut,Object.getOwnPropertyDescriptor(Wt,Ut))})}return Pt}function Ee(Pt,xt,Wt){return(xt=function(Ut){var Jt=function(ge,ui){if(Kt(ge)!=="object"||ge===null)return ge;var oi=ge[Symbol.toPrimitive];if(oi!==void 0){var Ze=oi.call(ge,"string");if(Kt(Ze)!=="object")return Ze;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ge)}(Ut);return Kt(Jt)==="symbol"?Jt:String(Jt)}(xt))in Pt?Object.defineProperty(Pt,xt,{value:Wt,enumerable:!0,configurable:!0,writable:!0}):Pt[xt]=Wt,Pt}var de=function(Pt,xt,Wt){var Ut,Jt,ge,ui=function(Je){var Pe=typeof Je=="function"?Je():Je;if(Et(Pe)==="object"&&Pe!==null&&!Array.isArray(Pe)){var Ue=function(K){return Array.from({length:5}).reduce(function(at,Nt,Vt){var Ht="customData".concat(Vt+1);return typeof K[Ht]=="string"&&(at[Ht]=K[Ht]),at},{})}(Pe);return Object.keys(Ue).length>0?Ue:null}return null}(Wt?.customData),oi=function(Je){return Je!==null&&JSON.stringify(Je).length<=1e3}(ui),Ze=Wt!=null&&Wt.customVideoUrlFallback?function(Je,Pe){try{var Ue=Pe(Je);return{cloudName:Ue.cloudName,publicId:Ue.publicId}}catch{return null}}(Pt,Wt.customVideoUrlFallback):null,vi=(Ut=Ze)!==null&&Et(Ut)==="object"&&typeof Ut.cloudName=="string"&&Ut.cloudName&&typeof Ut.publicId=="string"&&Ut.publicId?{cloudName:Ut.cloudName,publicId:Ut.publicId}:null;return B("viewStart",ee(ee({videoUrl:Pt,analyticsModuleVersion:"1.7.1",videoPlayer:{type:(ge=Wt?.videoPlayerType,qt.includes(ge)?ge:wt),version:(Jt=Wt?.videoPlayerVersion,typeof Jt=="string"&&Lt.test(Jt)?Jt:null)}},xt),{},{customerData:ee(ee({},oi?{providedData:ui}:{}),vi?{videoData:vi}:{})}))};function xe(Pt,xt){(xt==null||xt>Pt.length)&&(xt=Pt.length);for(var Wt=0,Ut=new Array(xt);Wt<xt;Wt++)Ut[Wt]=Pt[Wt];return Ut}var Bt=function(Pt){var xt=function(Wt){return function(Ut){if(Array.isArray(Ut))return xe(Ut)}(Wt)||function(Ut){if(typeof Symbol<"u"&&Ut[Symbol.iterator]!=null||Ut["@@iterator"]!=null)return Array.from(Ut)}(Wt)||function(Ut,Jt){if(Ut){if(typeof Ut=="string")return xe(Ut,Jt);var ge=Object.prototype.toString.call(Ut).slice(8,-1);return ge==="Object"&&Ut.constructor&&(ge=Ut.constructor.name),ge==="Map"||ge==="Set"?Array.from(Ut):ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge)?xe(Ut,Jt):void 0}}(Wt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(Pt);return xt.push(B("viewEnd",{})),JSON.stringify(xt)};function le(Pt){return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},le(Pt)}function Qe(Pt,xt){var Wt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(Pt);xt&&(Ut=Ut.filter(function(Jt){return Object.getOwnPropertyDescriptor(Pt,Jt).enumerable})),Wt.push.apply(Wt,Ut)}return Wt}function di(Pt){for(var xt=1;xt<arguments.length;xt++){var Wt=arguments[xt]!=null?arguments[xt]:{};xt%2?Qe(Object(Wt),!0).forEach(function(Ut){$t(Pt,Ut,Wt[Ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(Wt)):Qe(Object(Wt)).forEach(function(Ut){Object.defineProperty(Pt,Ut,Object.getOwnPropertyDescriptor(Wt,Ut))})}return Pt}function $t(Pt,xt,Wt){return(xt=function(Ut){var Jt=function(ge,ui){if(le(ge)!=="object"||ge===null)return ge;var oi=ge[Symbol.toPrimitive];if(oi!==void 0){var Ze=oi.call(ge,"string");if(le(Ze)!=="object")return Ze;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ge)}(Ut);return le(Jt)==="symbol"?Jt:String(Jt)}(xt))in Pt?Object.defineProperty(Pt,xt,{value:Wt,enumerable:!0,configurable:!0,writable:!0}):Pt[xt]=Wt,Pt}var Ce=function(Pt,xt,Wt,Ut){var Jt=function(){var Ze=xt();if(Ze.length>0){var vi=Bt(Ze);Wt(di(di({},Pt),{},{events:vi}))}},ge=function(){return Jt()},ui=function(){document.visibilityState==="hidden"&&Jt()},oi=function(){return Jt()};return window.addEventListener("beforeunload",ge,{once:!0}),Ut&&(window.addEventListener("pagehide",oi),document.addEventListener("visibilitychange",ui)),function(){window.removeEventListener("beforeunload",ge),window.removeEventListener("pagehide",oi),document.removeEventListener("visibilitychange",ui),Jt()}},Xe=function(Pt){return Pt.currentSrc};function Ni(Pt){return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},Ni(Pt)}var li=function(Pt){var xt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(xt&&Ni(xt)!=="object")throw"Options property must be an object";var Wt=null,Ut=xt.customEvents===!0,Jt=(0,b.isMobile)({tablet:!0,featureDetect:!0}),ge=Q(Pt,Ut),ui=function(Ze){return function(vi,Je){var Pe=Object.keys(Je).reduce(function(Ue,K){return Ue.append(K,Je[K]),Ue},new FormData);return typeof window.navigator.sendBeacon!="function"?window.fetch(vi,{method:"POST",mode:"no-cors",body:Pe,keepalive:!0}):window.navigator.sendBeacon(vi,Pe)}("https://video-analytics-api.cloudinary.com/v1/video-analytics",Ze)},oi=function(){Wt&&(Wt.clear(),Wt=null)};return{startManualTracking:function(Ze){var vi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Je=function(Vt){return m(Vt)!=="object"?{isValid:!1,errorMessage:"Metadata param needs to be an object"}:typeof Vt.cloudName!="string"?{isValid:!1,errorMessage:"You need to provide proper cloud name of your Cloudinary account [cloudName: string]"}:typeof Vt.publicId!="string"?{isValid:!1,errorMessage:"You need to provide proper video public ID of your video on your Cloudinary cloud [videoPublicId: string]"}:{isValid:!0}}(Ze);if(!Je.isValid)throw"Cloudinary video analytics tracking called without necessary data (".concat(Je.errorMessage,")");if(vi&&Ni(vi)!=="object")throw"Options property must be an object";vi.customVideoUrlFallback=function(){return Ze},oi();var Pe=It(),Ue=Xe(Pt),K=de(Ue,{trackingType:"manual"},vi),at=ge(Pe,K),Nt=Ce({userId:Tt(),viewId:Pe},at.flushEvents,ui,Jt);Wt={viewId:Pe,clear:function(){at.destroy(),Nt()}}},stopManualTracking:oi,startAutoTracking:function(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Wt)throw"Cloudinary video analytics tracking is already connected with this HTML Video Element";if(Ze&&Ni(Ze)!=="object")throw"Options property must be an object";var vi=function(){var Ue=Xe(Pt);if(Ue===window.location.href||!Ue)return null;var K=It(),at=de(Ue,{trackingType:"auto"},Ze),Nt=ge(K,at),Vt=Ce({userId:Tt(),viewId:K},Nt.flushEvents,ui,Jt);Wt={viewId:K,clear:function(){Nt.destroy(),Vt()}}},Je=Ut?"".concat(j,"loadstart"):"loadstart",Pe=Ut?"".concat(j,"emptied"):"emptied";Pt.addEventListener(Je,function(){Wt||vi()}),Pt.addEventListener(Pe,function(){oi()}),vi()}}}})(),p})()},3337:function(S,x,u){var y;y=u.g!==void 0?u.g:this,S.exports=function(p){if(p.CSS&&p.CSS.escape)return p.CSS.escape;var b=function(m){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var E,P=String(m),$=P.length,j=-1,G="",M=P.charCodeAt(0);++j<$;)(E=P.charCodeAt(j))!=0?G+=E>=1&&E<=31||E==127||j==0&&E>=48&&E<=57||j==1&&E>=48&&E<=57&&M==45?"\\"+E.toString(16)+" ":j==0&&$==1&&E==45||!(E>=128||E==45||E==95||E>=48&&E<=57||E>=65&&E<=90||E>=97&&E<=122)?"\\"+P.charAt(j):P.charAt(j):G+="�";return G};return p.CSS||(p.CSS={}),p.CSS.escape=b,b}(y)},6827:S=>{var x,u=typeof Reflect=="object"?Reflect:null,y=u&&typeof u.apply=="function"?u.apply:function(rt,ft,B){return Function.prototype.apply.call(rt,ft,B)};x=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(rt){return Object.getOwnPropertyNames(rt).concat(Object.getOwnPropertySymbols(rt))}:function(rt){return Object.getOwnPropertyNames(rt)};var p=Number.isNaN||function(rt){return rt!=rt};function b(){b.init.call(this)}S.exports=b,S.exports.once=function(rt,ft){return new Promise(function(B,it){function Q(tt){rt.removeListener(ft,ut),it(tt)}function ut(){typeof rt.removeListener=="function"&&rt.removeListener("error",Q),B([].slice.call(arguments))}Mt(rt,ft,ut,{once:!0}),ft!=="error"&&function(tt,Dt,q){typeof tt.on=="function"&&Mt(tt,"error",Dt,{once:!0})}(rt,Q)})},b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var m=10;function E(rt){if(typeof rt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof rt)}function P(rt){return rt._maxListeners===void 0?b.defaultMaxListeners:rt._maxListeners}function $(rt,ft,B,it){var Q,ut,tt,Dt;if(E(B),(ut=rt._events)===void 0?(ut=rt._events=Object.create(null),rt._eventsCount=0):(ut.newListener!==void 0&&(rt.emit("newListener",ft,B.listener?B.listener:B),ut=rt._events),tt=ut[ft]),tt===void 0)tt=ut[ft]=B,++rt._eventsCount;else if(typeof tt=="function"?tt=ut[ft]=it?[B,tt]:[tt,B]:it?tt.unshift(B):tt.push(B),(Q=P(rt))>0&&tt.length>Q&&!tt.warned){tt.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+tt.length+" "+String(ft)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=rt,q.type=ft,q.count=tt.length,Dt=q,console&&console.warn&&console.warn(Dt)}return rt}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G(rt,ft,B){var it={fired:!1,wrapFn:void 0,target:rt,type:ft,listener:B},Q=j.bind(it);return Q.listener=B,it.wrapFn=Q,Q}function M(rt,ft,B){var it=rt._events;if(it===void 0)return[];var Q=it[ft];return Q===void 0?[]:typeof Q=="function"?B?[Q.listener||Q]:[Q]:B?function(ut){for(var tt=new Array(ut.length),Dt=0;Dt<tt.length;++Dt)tt[Dt]=ut[Dt].listener||ut[Dt];return tt}(Q):pt(Q,Q.length)}function nt(rt){var ft=this._events;if(ft!==void 0){var B=ft[rt];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}function pt(rt,ft){for(var B=new Array(ft),it=0;it<ft;++it)B[it]=rt[it];return B}function Mt(rt,ft,B,it){if(typeof rt.on=="function")it.once?rt.once(ft,B):rt.on(ft,B);else{if(typeof rt.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof rt);rt.addEventListener(ft,function Q(ut){it.once&&rt.removeEventListener(ft,Q),B(ut)})}}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(rt){if(typeof rt!="number"||rt<0||p(rt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+rt+".");m=rt}}),b.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(rt){if(typeof rt!="number"||rt<0||p(rt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+rt+".");return this._maxListeners=rt,this},b.prototype.getMaxListeners=function(){return P(this)},b.prototype.emit=function(rt){for(var ft=[],B=1;B<arguments.length;B++)ft.push(arguments[B]);var it=rt==="error",Q=this._events;if(Q!==void 0)it=it&&Q.error===void 0;else if(!it)return!1;if(it){var ut;if(ft.length>0&&(ut=ft[0]),ut instanceof Error)throw ut;var tt=new Error("Unhandled error."+(ut?" ("+ut.message+")":""));throw tt.context=ut,tt}var Dt=Q[rt];if(Dt===void 0)return!1;if(typeof Dt=="function")y(Dt,this,ft);else{var q=Dt.length,Y=pt(Dt,q);for(B=0;B<q;++B)y(Y[B],this,ft)}return!0},b.prototype.addListener=function(rt,ft){return $(this,rt,ft,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(rt,ft){return $(this,rt,ft,!0)},b.prototype.once=function(rt,ft){return E(ft),this.on(rt,G(this,rt,ft)),this},b.prototype.prependOnceListener=function(rt,ft){return E(ft),this.prependListener(rt,G(this,rt,ft)),this},b.prototype.removeListener=function(rt,ft){var B,it,Q,ut,tt;if(E(ft),(it=this._events)===void 0)return this;if((B=it[rt])===void 0)return this;if(B===ft||B.listener===ft)--this._eventsCount==0?this._events=Object.create(null):(delete it[rt],it.removeListener&&this.emit("removeListener",rt,B.listener||ft));else if(typeof B!="function"){for(Q=-1,ut=B.length-1;ut>=0;ut--)if(B[ut]===ft||B[ut].listener===ft){tt=B[ut].listener,Q=ut;break}if(Q<0)return this;Q===0?B.shift():function(Dt,q){for(;q+1<Dt.length;q++)Dt[q]=Dt[q+1];Dt.pop()}(B,Q),B.length===1&&(it[rt]=B[0]),it.removeListener!==void 0&&this.emit("removeListener",rt,tt||ft)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(rt){var ft,B,it;if((B=this._events)===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[rt]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete B[rt]),this;if(arguments.length===0){var Q,ut=Object.keys(B);for(it=0;it<ut.length;++it)(Q=ut[it])!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(ft=B[rt])=="function")this.removeListener(rt,ft);else if(ft!==void 0)for(it=ft.length-1;it>=0;it--)this.removeListener(rt,ft[it]);return this},b.prototype.listeners=function(rt){return M(this,rt,!0)},b.prototype.rawListeners=function(rt){return M(this,rt,!1)},b.listenerCount=function(rt,ft){return typeof rt.listenerCount=="function"?rt.listenerCount(ft):nt.call(rt,ft)},b.prototype.listenerCount=nt,b.prototype.eventNames=function(){return this._eventsCount>0?x(this._events):[]}},7938:(S,x,u)=>{var y=u(6155);u(8364).videojs=y,S.exports=y},3432:(S,x,u)=>{var y=u(2579);u(8364).videojs=y,S.exports=y},1401:(S,x,u)=>{var y=u(8496);u(8364).videojs=y,S.exports=y},8677:(S,x,u)=>{var y=u(6342);u(8364).videojs=y,S.exports=y},6527:(S,x,u)=>{var y=u(4378);u(8364).videojs=y,S.exports=y},8364:(S,x,u)=>{S.exports=function(){if(typeof globalThis=="object")return globalThis;var y;try{y=this||new Function("return this")()}catch{if(typeof window=="object")return window;if(typeof self=="object")return self;if(u.g!==void 0)return u.g}return y}()},7509:(S,x,u)=>{var y,p=u.g!==void 0?u.g:typeof window<"u"?window:{},b=u(4626);typeof document<"u"?y=document:(y=p["__GLOBAL_DOCUMENT_CACHE@4"])||(y=p["__GLOBAL_DOCUMENT_CACHE@4"]=b),S.exports=y},5204:(S,x,u)=>{var y;y=typeof window<"u"?window:u.g!==void 0?u.g:typeof self<"u"?self:{},S.exports=y},8716:S=>{S.exports=function(u){if(!u)return!1;var y=x.call(u);return y==="[object Function]"||typeof u=="function"&&y!=="[object RegExp]"||typeof window<"u"&&(u===window.setTimeout||u===window.alert||u===window.confirm||u===window.prompt)};var x=Object.prototype.toString},1416:(S,x,u)=>{var y=u(9138)(u(1433),"DataView");S.exports=y},9073:(S,x,u)=>{var y=u(2316),p=u(6458),b=u(2149),m=u(4297),E=u(3121);function P($){var j=-1,G=$==null?0:$.length;for(this.clear();++j<G;){var M=$[j];this.set(M[0],M[1])}}P.prototype.clear=y,P.prototype.delete=p,P.prototype.get=b,P.prototype.has=m,P.prototype.set=E,S.exports=P},2707:(S,x,u)=>{var y=u(9714),p=u(3812),b=u(4727),m=u(8379),E=u(8291);function P($){var j=-1,G=$==null?0:$.length;for(this.clear();++j<G;){var M=$[j];this.set(M[0],M[1])}}P.prototype.clear=y,P.prototype.delete=p,P.prototype.get=b,P.prototype.has=m,P.prototype.set=E,S.exports=P},1955:(S,x,u)=>{var y=u(9138)(u(1433),"Map");S.exports=y},369:(S,x,u)=>{var y=u(2092),p=u(9626),b=u(9925),m=u(6809),E=u(4385);function P($){var j=-1,G=$==null?0:$.length;for(this.clear();++j<G;){var M=$[j];this.set(M[0],M[1])}}P.prototype.clear=y,P.prototype.delete=p,P.prototype.get=b,P.prototype.has=m,P.prototype.set=E,S.exports=P},2616:(S,x,u)=>{var y=u(9138)(u(1433),"Promise");S.exports=y},157:(S,x,u)=>{var y=u(9138)(u(1433),"Set");S.exports=y},6469:(S,x,u)=>{var y=u(2707),p=u(1848),b=u(7406),m=u(8569),E=u(3109),P=u(3389);function $(j){var G=this.__data__=new y(j);this.size=G.size}$.prototype.clear=p,$.prototype.delete=b,$.prototype.get=m,$.prototype.has=E,$.prototype.set=P,S.exports=$},2781:(S,x,u)=>{var y=u(1433).Symbol;S.exports=y},8944:(S,x,u)=>{var y=u(1433).Uint8Array;S.exports=y},8499:(S,x,u)=>{var y=u(9138)(u(1433),"WeakMap");S.exports=y},6701:S=>{S.exports=function(x,u,y){switch(y.length){case 0:return x.call(u);case 1:return x.call(u,y[0]);case 2:return x.call(u,y[0],y[1]);case 3:return x.call(u,y[0],y[1],y[2])}return x.apply(u,y)}},149:S=>{S.exports=function(x,u){for(var y=-1,p=x==null?0:x.length;++y<p&&u(x[y],y,x)!==!1;);return x}},1414:S=>{S.exports=function(x,u){for(var y=-1,p=x==null?0:x.length,b=0,m=[];++y<p;){var E=x[y];u(E,y,x)&&(m[b++]=E)}return m}},1163:(S,x,u)=>{var y=u(6204),p=u(1256),b=u(6397),m=u(492),E=u(2845),P=u(7995),$=Object.prototype.hasOwnProperty;S.exports=function(j,G){var M=b(j),nt=!M&&p(j),pt=!M&&!nt&&m(j),Mt=!M&&!nt&&!pt&&P(j),rt=M||nt||pt||Mt,ft=rt?y(j.length,String):[],B=ft.length;for(var it in j)!G&&!$.call(j,it)||rt&&(it=="length"||pt&&(it=="offset"||it=="parent")||Mt&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||E(it,B))||ft.push(it);return ft}},4272:S=>{S.exports=function(x,u){for(var y=-1,p=x==null?0:x.length,b=Array(p);++y<p;)b[y]=u(x[y],y,x);return b}},8740:S=>{S.exports=function(x,u){for(var y=-1,p=u.length,b=x.length;++y<p;)x[b+y]=u[y];return x}},2814:S=>{S.exports=function(x,u,y,p){var b=-1,m=x==null?0:x.length;for(p&&m&&(y=x[++b]);++b<m;)y=u(y,x[b],b,x);return y}},9174:S=>{S.exports=function(x){return x.split("")}},8273:S=>{var x=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;S.exports=function(u){return u.match(x)||[]}},2863:(S,x,u)=>{var y=u(4772),p=u(9316),b=Object.prototype.hasOwnProperty;S.exports=function(m,E,P){var $=m[E];b.call(m,E)&&p($,P)&&(P!==void 0||E in m)||y(m,E,P)}},8301:(S,x,u)=>{var y=u(9316);S.exports=function(p,b){for(var m=p.length;m--;)if(y(p[m][0],b))return m;return-1}},1145:(S,x,u)=>{var y=u(2083),p=u(1178);S.exports=function(b,m){return b&&y(m,p(m),b)}},4306:(S,x,u)=>{var y=u(2083),p=u(5405);S.exports=function(b,m){return b&&y(m,p(m),b)}},4772:(S,x,u)=>{var y=u(8559);S.exports=function(p,b,m){b=="__proto__"&&y?y(p,b,{configurable:!0,enumerable:!0,value:m,writable:!0}):p[b]=m}},2931:(S,x,u)=>{var y=u(6469),p=u(149),b=u(2863),m=u(1145),E=u(4306),P=u(7030),$=u(8835),j=u(859),G=u(6728),M=u(966),nt=u(9697),pt=u(1201),Mt=u(6785),rt=u(3283),ft=u(9181),B=u(6397),it=u(492),Q=u(422),ut=u(8953),tt=u(3764),Dt=u(1178),q=u(5405),Y="[object Arguments]",st="[object Function]",It="[object Object]",Ot={};Ot[Y]=Ot["[object Array]"]=Ot["[object ArrayBuffer]"]=Ot["[object DataView]"]=Ot["[object Boolean]"]=Ot["[object Date]"]=Ot["[object Float32Array]"]=Ot["[object Float64Array]"]=Ot["[object Int8Array]"]=Ot["[object Int16Array]"]=Ot["[object Int32Array]"]=Ot["[object Map]"]=Ot["[object Number]"]=Ot[It]=Ot["[object RegExp]"]=Ot["[object Set]"]=Ot["[object String]"]=Ot["[object Symbol]"]=Ot["[object Uint8Array]"]=Ot["[object Uint8ClampedArray]"]=Ot["[object Uint16Array]"]=Ot["[object Uint32Array]"]=!0,Ot["[object Error]"]=Ot[st]=Ot["[object WeakMap]"]=!1,S.exports=function Tt(Et,Lt,wt,qt,Kt,be){var ee,Ee=1&Lt,de=2&Lt,xe=4&Lt;if(wt&&(ee=Kt?wt(Et,qt,Kt,be):wt(Et)),ee!==void 0)return ee;if(!ut(Et))return Et;var Bt=B(Et);if(Bt){if(ee=Mt(Et),!Ee)return $(Et,ee)}else{var le=pt(Et),Qe=le==st||le=="[object GeneratorFunction]";if(it(Et))return P(Et,Ee);if(le==It||le==Y||Qe&&!Kt){if(ee=de||Qe?{}:ft(Et),!Ee)return de?G(Et,E(ee,Et)):j(Et,m(ee,Et))}else{if(!Ot[le])return Kt?Et:{};ee=rt(Et,le,Ee)}}be||(be=new y);var di=be.get(Et);if(di)return di;be.set(Et,ee),tt(Et)?Et.forEach(function(Ce){ee.add(Tt(Ce,Lt,wt,Ce,Et,be))}):Q(Et)&&Et.forEach(function(Ce,Xe){ee.set(Xe,Tt(Ce,Lt,wt,Xe,Et,be))});var $t=Bt?void 0:(xe?de?nt:M:de?q:Dt)(Et);return p($t||Et,function(Ce,Xe){$t&&(Ce=Et[Xe=Ce]),b(ee,Xe,Tt(Ce,Lt,wt,Xe,Et,be))}),ee}},3508:(S,x,u)=>{var y=u(8953),p=Object.create,b=function(){function m(){}return function(E){if(!y(E))return{};if(p)return p(E);m.prototype=E;var P=new m;return m.prototype=void 0,P}}();S.exports=b},1044:(S,x,u)=>{var y=u(8740),p=u(8031);S.exports=function b(m,E,P,$,j){var G=-1,M=m.length;for(P||(P=p),j||(j=[]);++G<M;){var nt=m[G];E>0&&P(nt)?E>1?b(nt,E-1,P,$,j):y(j,nt):$||(j[j.length]=nt)}return j}},7722:(S,x,u)=>{var y=u(7181),p=u(6729);S.exports=function(b,m){for(var E=0,P=(m=y(m,b)).length;b!=null&&E<P;)b=b[p(m[E++])];return E&&E==P?b:void 0}},4403:(S,x,u)=>{var y=u(8740),p=u(6397);S.exports=function(b,m,E){var P=m(b);return p(b)?P:y(P,E(b))}},7148:(S,x,u)=>{var y=u(2781),p=u(7903),b=u(1738),m=y?y.toStringTag:void 0;S.exports=function(E){return E==null?E===void 0?"[object Undefined]":"[object Null]":m&&m in Object(E)?p(E):b(E)}},809:S=>{S.exports=function(x,u){return x!=null&&u in Object(x)}},9250:(S,x,u)=>{var y=u(7148),p=u(2934);S.exports=function(b){return p(b)&&y(b)=="[object Arguments]"}},4800:(S,x,u)=>{var y=u(1201),p=u(2934);S.exports=function(b){return p(b)&&y(b)=="[object Map]"}},6567:(S,x,u)=>{var y=u(8446),p=u(8092),b=u(8953),m=u(1485),E=/^\[object .+?Constructor\]$/,P=Function.prototype,$=Object.prototype,j=P.toString,G=$.hasOwnProperty,M=RegExp("^"+j.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");S.exports=function(nt){return!(!b(nt)||p(nt))&&(y(nt)?M:E).test(m(nt))}},7866:(S,x,u)=>{var y=u(1201),p=u(2934);S.exports=function(b){return p(b)&&y(b)=="[object Set]"}},7129:(S,x,u)=>{var y=u(7148),p=u(3330),b=u(2934),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,S.exports=function(E){return b(E)&&p(E.length)&&!!m[y(E)]}},1452:(S,x,u)=>{var y=u(7499),p=u(9566),b=Object.prototype.hasOwnProperty;S.exports=function(m){if(!y(m))return p(m);var E=[];for(var P in Object(m))b.call(m,P)&&P!="constructor"&&E.push(P);return E}},1491:(S,x,u)=>{var y=u(8953),p=u(7499),b=u(8201),m=Object.prototype.hasOwnProperty;S.exports=function(E){if(!y(E))return b(E);var P=p(E),$=[];for(var j in E)(j!="constructor"||!P&&m.call(E,j))&&$.push(j);return $}},6733:(S,x,u)=>{var y=u(5576),p=u(8235);S.exports=function(b,m){return y(b,m,function(E,P){return p(b,P)})}},5576:(S,x,u)=>{var y=u(7722),p=u(8230),b=u(7181);S.exports=function(m,E,P){for(var $=-1,j=E.length,G={};++$<j;){var M=E[$],nt=y(m,M);P(nt,M)&&p(G,b(M,m),nt)}return G}},6764:S=>{S.exports=function(x){return function(u){return x?.[u]}}},8230:(S,x,u)=>{var y=u(2863),p=u(7181),b=u(2845),m=u(8953),E=u(6729);S.exports=function(P,$,j,G){if(!m(P))return P;for(var M=-1,nt=($=p($,P)).length,pt=nt-1,Mt=P;Mt!=null&&++M<nt;){var rt=E($[M]),ft=j;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return P;if(M!=pt){var B=Mt[rt];(ft=G?G(B,rt,Mt):void 0)===void 0&&(ft=m(B)?B:b($[M+1])?[]:{})}y(Mt,rt,ft),Mt=Mt[rt]}return P}},7310:(S,x,u)=>{var y=u(3122),p=u(8559),b=u(4796),m=p?function(E,P){return p(E,"toString",{configurable:!0,enumerable:!1,value:y(P),writable:!0})}:b;S.exports=m},9772:S=>{S.exports=function(x,u,y){var p=-1,b=x.length;u<0&&(u=-u>b?0:b+u),(y=y>b?b:y)<0&&(y+=b),b=u>y?0:y-u>>>0,u>>>=0;for(var m=Array(b);++p<b;)m[p]=x[p+u];return m}},6204:S=>{S.exports=function(x,u){for(var y=-1,p=Array(x);++y<x;)p[y]=u(y);return p}},6584:(S,x,u)=>{var y=u(2781),p=u(4272),b=u(6397),m=u(5414),E=y?y.prototype:void 0,P=E?E.toString:void 0;S.exports=function $(j){if(typeof j=="string")return j;if(b(j))return p(j,$)+"";if(m(j))return P?P.call(j):"";var G=j+"";return G=="0"&&1/j==-1/0?"-0":G}},41:S=>{S.exports=function(x){return function(u){return x(u)}}},5263:(S,x,u)=>{var y=u(7181),p=u(5342),b=u(8549),m=u(6729);S.exports=function(E,P){return P=y(P,E),(E=b(E,P))==null||delete E[m(p(P))]}},7181:(S,x,u)=>{var y=u(6397),p=u(3726),b=u(3614),m=u(3506);S.exports=function(E,P){return y(E)?E:p(E,P)?[E]:b(m(E))}},9270:(S,x,u)=>{var y=u(9772);S.exports=function(p,b,m){var E=p.length;return m=m===void 0?E:m,!b&&m>=E?p:y(p,b,m)}},7177:(S,x,u)=>{var y=u(8944);S.exports=function(p){var b=new p.constructor(p.byteLength);return new y(b).set(new y(p)),b}},7030:(S,x,u)=>{S=u.nmd(S);var y=u(1433),p=x&&!x.nodeType&&x,b=p&&S&&!S.nodeType&&S,m=b&&b.exports===p?y.Buffer:void 0,E=m?m.allocUnsafe:void 0;S.exports=function(P,$){if($)return P.slice();var j=P.length,G=E?E(j):new P.constructor(j);return P.copy(G),G}},4893:(S,x,u)=>{var y=u(7177);S.exports=function(p,b){var m=b?y(p.buffer):p.buffer;return new p.constructor(m,p.byteOffset,p.byteLength)}},4021:S=>{var x=/\w*$/;S.exports=function(u){var y=new u.constructor(u.source,x.exec(u));return y.lastIndex=u.lastIndex,y}},1548:(S,x,u)=>{var y=u(2781),p=y?y.prototype:void 0,b=p?p.valueOf:void 0;S.exports=function(m){return b?Object(b.call(m)):{}}},9114:(S,x,u)=>{var y=u(7177);S.exports=function(p,b){var m=b?y(p.buffer):p.buffer;return new p.constructor(m,p.byteOffset,p.length)}},8835:S=>{S.exports=function(x,u){var y=-1,p=x.length;for(u||(u=Array(p));++y<p;)u[y]=x[y];return u}},2083:(S,x,u)=>{var y=u(2863),p=u(4772);S.exports=function(b,m,E,P){var $=!E;E||(E={});for(var j=-1,G=m.length;++j<G;){var M=m[j],nt=P?P(E[M],b[M],M,E,b):void 0;nt===void 0&&(nt=b[M]),$?p(E,M,nt):y(E,M,nt)}return E}},859:(S,x,u)=>{var y=u(2083),p=u(8876);S.exports=function(b,m){return y(b,p(b),m)}},6728:(S,x,u)=>{var y=u(2083),p=u(8355);S.exports=function(b,m){return y(b,p(b),m)}},8109:(S,x,u)=>{var y=u(1433)["__core-js_shared__"];S.exports=y},7383:(S,x,u)=>{var y=u(9270),p=u(654),b=u(4092),m=u(3506);S.exports=function(E){return function(P){P=m(P);var $=p(P)?b(P):void 0,j=$?$[0]:P.charAt(0),G=$?y($,1).join(""):P.slice(1);return j[E]()+G}}},6983:(S,x,u)=>{var y=u(2814),p=u(3768),b=u(7385),m=RegExp("['’]","g");S.exports=function(E){return function(P){return y(b(p(P).replace(m,"")),E,"")}}},7222:(S,x,u)=>{var y=u(4679);S.exports=function(p){return y(p)?void 0:p}},8795:(S,x,u)=>{var y=u(6764)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});S.exports=y},8559:(S,x,u)=>{var y=u(9138),p=function(){try{var b=y(Object,"defineProperty");return b({},"",{}),b}catch{}}();S.exports=p},9820:(S,x,u)=>{var y=u(3406),p=u(5265),b=u(6805);S.exports=function(m){return b(p(m,void 0,y),m+"")}},5380:(S,x,u)=>{var y=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g;S.exports=y},966:(S,x,u)=>{var y=u(4403),p=u(8876),b=u(1178);S.exports=function(m){return y(m,b,p)}},9697:(S,x,u)=>{var y=u(4403),p=u(8355),b=u(5405);S.exports=function(m){return y(m,b,p)}},5535:(S,x,u)=>{var y=u(5662);S.exports=function(p,b){var m=p.__data__;return y(b)?m[typeof b=="string"?"string":"hash"]:m.map}},9138:(S,x,u)=>{var y=u(6567),p=u(6772);S.exports=function(b,m){var E=p(b,m);return y(E)?E:void 0}},3347:(S,x,u)=>{var y=u(1019)(Object.getPrototypeOf,Object);S.exports=y},7903:(S,x,u)=>{var y=u(2781),p=Object.prototype,b=p.hasOwnProperty,m=p.toString,E=y?y.toStringTag:void 0;S.exports=function(P){var $=b.call(P,E),j=P[E];try{P[E]=void 0;var G=!0}catch{}var M=m.call(P);return G&&($?P[E]=j:delete P[E]),M}},8876:(S,x,u)=>{var y=u(1414),p=u(3629),b=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols,E=m?function(P){return P==null?[]:(P=Object(P),y(m(P),function($){return b.call(P,$)}))}:p;S.exports=E},8355:(S,x,u)=>{var y=u(8740),p=u(3347),b=u(8876),m=u(3629),E=Object.getOwnPropertySymbols?function(P){for(var $=[];P;)y($,b(P)),P=p(P);return $}:m;S.exports=E},1201:(S,x,u)=>{var y=u(1416),p=u(1955),b=u(2616),m=u(157),E=u(8499),P=u(7148),$=u(1485),j="[object Map]",G="[object Promise]",M="[object Set]",nt="[object WeakMap]",pt="[object DataView]",Mt=$(y),rt=$(p),ft=$(b),B=$(m),it=$(E),Q=P;(y&&Q(new y(new ArrayBuffer(1)))!=pt||p&&Q(new p)!=j||b&&Q(b.resolve())!=G||m&&Q(new m)!=M||E&&Q(new E)!=nt)&&(Q=function(ut){var tt=P(ut),Dt=tt=="[object Object]"?ut.constructor:void 0,q=Dt?$(Dt):"";if(q)switch(q){case Mt:return pt;case rt:return j;case ft:return G;case B:return M;case it:return nt}return tt}),S.exports=Q},6772:S=>{S.exports=function(x,u){return x?.[u]}},6866:(S,x,u)=>{var y=u(7181),p=u(1256),b=u(6397),m=u(2845),E=u(3330),P=u(6729);S.exports=function($,j,G){for(var M=-1,nt=(j=y(j,$)).length,pt=!1;++M<nt;){var Mt=P(j[M]);if(!(pt=$!=null&&G($,Mt)))break;$=$[Mt]}return pt||++M!=nt?pt:!!(nt=$==null?0:$.length)&&E(nt)&&m(Mt,nt)&&(b($)||p($))}},654:S=>{var x=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");S.exports=function(u){return x.test(u)}},5854:S=>{var x=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;S.exports=function(u){return x.test(u)}},2316:(S,x,u)=>{var y=u(4558);S.exports=function(){this.__data__=y?y(null):{},this.size=0}},6458:S=>{S.exports=function(x){var u=this.has(x)&&delete this.__data__[x];return this.size-=u?1:0,u}},2149:(S,x,u)=>{var y=u(4558),p=Object.prototype.hasOwnProperty;S.exports=function(b){var m=this.__data__;if(y){var E=m[b];return E==="__lodash_hash_undefined__"?void 0:E}return p.call(m,b)?m[b]:void 0}},4297:(S,x,u)=>{var y=u(4558),p=Object.prototype.hasOwnProperty;S.exports=function(b){var m=this.__data__;return y?m[b]!==void 0:p.call(m,b)}},3121:(S,x,u)=>{var y=u(4558);S.exports=function(p,b){var m=this.__data__;return this.size+=this.has(p)?0:1,m[p]=y&&b===void 0?"__lodash_hash_undefined__":b,this}},6785:S=>{var x=Object.prototype.hasOwnProperty;S.exports=function(u){var y=u.length,p=new u.constructor(y);return y&&typeof u[0]=="string"&&x.call(u,"index")&&(p.index=u.index,p.input=u.input),p}},3283:(S,x,u)=>{var y=u(7177),p=u(4893),b=u(4021),m=u(1548),E=u(9114);S.exports=function(P,$,j){var G=P.constructor;switch($){case"[object ArrayBuffer]":return y(P);case"[object Boolean]":case"[object Date]":return new G(+P);case"[object DataView]":return p(P,j);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return E(P,j);case"[object Map]":case"[object Set]":return new G;case"[object Number]":case"[object String]":return new G(P);case"[object RegExp]":return b(P);case"[object Symbol]":return m(P)}}},9181:(S,x,u)=>{var y=u(3508),p=u(3347),b=u(7499);S.exports=function(m){return typeof m.constructor!="function"||b(m)?{}:y(p(m))}},8031:(S,x,u)=>{var y=u(2781),p=u(1256),b=u(6397),m=y?y.isConcatSpreadable:void 0;S.exports=function(E){return b(E)||p(E)||!!(m&&E&&E[m])}},2845:S=>{var x=/^(?:0|[1-9]\d*)$/;S.exports=function(u,y){var p=typeof u;return!!(y=y??9007199254740991)&&(p=="number"||p!="symbol"&&x.test(u))&&u>-1&&u%1==0&&u<y}},3726:(S,x,u)=>{var y=u(6397),p=u(5414),b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;S.exports=function(E,P){if(y(E))return!1;var $=typeof E;return!($!="number"&&$!="symbol"&&$!="boolean"&&E!=null&&!p(E))||m.test(E)||!b.test(E)||P!=null&&E in Object(P)}},5662:S=>{S.exports=function(x){var u=typeof x;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?x!=="__proto__":x===null}},8092:(S,x,u)=>{var y,p=u(8109),b=(y=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"";S.exports=function(m){return!!b&&b in m}},7499:S=>{var x=Object.prototype;S.exports=function(u){var y=u&&u.constructor;return u===(typeof y=="function"&&y.prototype||x)}},9714:S=>{S.exports=function(){this.__data__=[],this.size=0}},3812:(S,x,u)=>{var y=u(8301),p=Array.prototype.splice;S.exports=function(b){var m=this.__data__,E=y(m,b);return!(E<0||(E==m.length-1?m.pop():p.call(m,E,1),--this.size,0))}},4727:(S,x,u)=>{var y=u(8301);S.exports=function(p){var b=this.__data__,m=y(b,p);return m<0?void 0:b[m][1]}},8379:(S,x,u)=>{var y=u(8301);S.exports=function(p){return y(this.__data__,p)>-1}},8291:(S,x,u)=>{var y=u(8301);S.exports=function(p,b){var m=this.__data__,E=y(m,p);return E<0?(++this.size,m.push([p,b])):m[E][1]=b,this}},2092:(S,x,u)=>{var y=u(9073),p=u(2707),b=u(1955);S.exports=function(){this.size=0,this.__data__={hash:new y,map:new(b||p),string:new y}}},9626:(S,x,u)=>{var y=u(5535);S.exports=function(p){var b=y(this,p).delete(p);return this.size-=b?1:0,b}},9925:(S,x,u)=>{var y=u(5535);S.exports=function(p){return y(this,p).get(p)}},6809:(S,x,u)=>{var y=u(5535);S.exports=function(p){return y(this,p).has(p)}},4385:(S,x,u)=>{var y=u(5535);S.exports=function(p,b){var m=y(this,p),E=m.size;return m.set(p,b),this.size+=m.size==E?0:1,this}},9268:(S,x,u)=>{var y=u(4556);S.exports=function(p){var b=y(p,function(E){return m.size===500&&m.clear(),E}),m=b.cache;return b}},4558:(S,x,u)=>{var y=u(9138)(Object,"create");S.exports=y},9566:(S,x,u)=>{var y=u(1019)(Object.keys,Object);S.exports=y},8201:S=>{S.exports=function(x){var u=[];if(x!=null)for(var y in Object(x))u.push(y);return u}},3685:(S,x,u)=>{S=u.nmd(S);var y=u(5380),p=x&&!x.nodeType&&x,b=p&&S&&!S.nodeType&&S,m=b&&b.exports===p&&y.process,E=function(){try{return b&&b.require&&b.require("util").types||m&&m.binding&&m.binding("util")}catch{}}();S.exports=E},1738:S=>{var x=Object.prototype.toString;S.exports=function(u){return x.call(u)}},1019:S=>{S.exports=function(x,u){return function(y){return x(u(y))}}},5265:(S,x,u)=>{var y=u(6701),p=Math.max;S.exports=function(b,m,E){return m=p(m===void 0?b.length-1:m,0),function(){for(var P=arguments,$=-1,j=p(P.length-m,0),G=Array(j);++$<j;)G[$]=P[m+$];$=-1;for(var M=Array(m+1);++$<m;)M[$]=P[$];return M[m]=E(G),y(b,this,M)}}},8549:(S,x,u)=>{var y=u(7722),p=u(9772);S.exports=function(b,m){return m.length<2?b:y(b,p(m,0,-1))}},1433:(S,x,u)=>{var y=u(5380),p=typeof self=="object"&&self&&self.Object===Object&&self,b=y||p||Function("return this")();S.exports=b},6805:(S,x,u)=>{var y=u(7310),p=u(3983)(y);S.exports=p},3983:S=>{var x=Date.now;S.exports=function(u){var y=0,p=0;return function(){var b=x(),m=16-(b-p);if(p=b,m>0){if(++y>=800)return arguments[0]}else y=0;return u.apply(void 0,arguments)}}},1848:(S,x,u)=>{var y=u(2707);S.exports=function(){this.__data__=new y,this.size=0}},7406:S=>{S.exports=function(x){var u=this.__data__,y=u.delete(x);return this.size=u.size,y}},8569:S=>{S.exports=function(x){return this.__data__.get(x)}},3109:S=>{S.exports=function(x){return this.__data__.has(x)}},3389:(S,x,u)=>{var y=u(2707),p=u(1955),b=u(369);S.exports=function(m,E){var P=this.__data__;if(P instanceof y){var $=P.__data__;if(!p||$.length<199)return $.push([m,E]),this.size=++P.size,this;P=this.__data__=new b($)}return P.set(m,E),this.size=P.size,this}},4092:(S,x,u)=>{var y=u(9174),p=u(654),b=u(4082);S.exports=function(m){return p(m)?b(m):y(m)}},3614:(S,x,u)=>{var y=u(9268),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/\\(\\)?/g,m=y(function(E){var P=[];return E.charCodeAt(0)===46&&P.push(""),E.replace(p,function($,j,G,M){P.push(G?M.replace(b,"$1"):j||$)}),P});S.exports=m},6729:(S,x,u)=>{var y=u(5414);S.exports=function(p){if(typeof p=="string"||y(p))return p;var b=p+"";return b=="0"&&1/p==-1/0?"-0":b}},1485:S=>{var x=Function.prototype.toString;S.exports=function(u){if(u!=null){try{return x.call(u)}catch{}try{return u+""}catch{}}return""}},4082:S=>{var x="\\ud800-\\udfff",u="["+x+"]",y="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",p="\\ud83c[\\udffb-\\udfff]",b="[^"+x+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",P="(?:"+y+"|"+p+")?",$="[\\ufe0e\\ufe0f]?",j=$+P+"(?:\\u200d(?:"+[b,m,E].join("|")+")"+$+P+")*",G="(?:"+[b+y+"?",y,m,E,u].join("|")+")",M=RegExp(p+"(?="+p+")|"+G+j,"g");S.exports=function(nt){return nt.match(M)||[]}},5701:S=>{var x="\\ud800-\\udfff",u="\\u2700-\\u27bf",y="a-z\\xdf-\\xf6\\xf8-\\xff",p="A-Z\\xc0-\\xd6\\xd8-\\xde",b="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="["+b+"]",E="\\d+",P="["+u+"]",$="["+y+"]",j="[^"+x+b+E+u+y+p+"]",G="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="["+p+"]",pt="(?:"+$+"|"+j+")",Mt="(?:"+nt+"|"+j+")",rt="(?:['’](?:d|ll|m|re|s|t|ve))?",ft="(?:['’](?:D|LL|M|RE|S|T|VE))?",B="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",it="[\\ufe0e\\ufe0f]?",Q=it+B+"(?:\\u200d(?:"+["[^"+x+"]",G,M].join("|")+")"+it+B+")*",ut="(?:"+[P,G,M].join("|")+")"+Q,tt=RegExp([nt+"?"+$+"+"+rt+"(?="+[m,nt,"$"].join("|")+")",Mt+"+"+ft+"(?="+[m,nt+pt,"$"].join("|")+")",nt+"?"+pt+"+"+rt,nt+"+"+ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",E,ut].join("|"),"g");S.exports=function(Dt){return Dt.match(tt)||[]}},3686:(S,x,u)=>{var y=u(8756),p=u(6983)(function(b,m,E){return m=m.toLowerCase(),b+(E?y(m):m)});S.exports=p},8756:(S,x,u)=>{var y=u(3506),p=u(8580);S.exports=function(b){return p(y(b).toLowerCase())}},2160:(S,x,u)=>{var y=u(6397);S.exports=function(){if(!arguments.length)return[];var p=arguments[0];return y(p)?p:[p]}},3122:S=>{S.exports=function(x){return function(){return x}}},3768:(S,x,u)=>{var y=u(8795),p=u(3506),b=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,m=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");S.exports=function(E){return(E=p(E))&&E.replace(b,y).replace(m,"")}},9316:S=>{S.exports=function(x,u){return x===u||x!=x&&u!=u}},3406:(S,x,u)=>{var y=u(1044);S.exports=function(p){return p!=null&&p.length?y(p,1):[]}},2832:(S,x,u)=>{var y=u(7722);S.exports=function(p,b,m){var E=p==null?void 0:y(p,b);return E===void 0?m:E}},8235:(S,x,u)=>{var y=u(809),p=u(6866);S.exports=function(b,m){return b!=null&&p(b,m,y)}},4796:S=>{S.exports=function(x){return x}},1256:(S,x,u)=>{var y=u(9250),p=u(2934),b=Object.prototype,m=b.hasOwnProperty,E=b.propertyIsEnumerable,P=y(function(){return arguments}())?y:function($){return p($)&&m.call($,"callee")&&!E.call($,"callee")};S.exports=P},6397:S=>{var x=Array.isArray;S.exports=x},8330:(S,x,u)=>{var y=u(8446),p=u(3330);S.exports=function(b){return b!=null&&p(b.length)&&!y(b)}},492:(S,x,u)=>{S=u.nmd(S);var y=u(1433),p=u(659),b=x&&!x.nodeType&&x,m=b&&S&&!S.nodeType&&S,E=m&&m.exports===b?y.Buffer:void 0,P=(E?E.isBuffer:void 0)||p;S.exports=P},9040:(S,x,u)=>{var y=u(2934),p=u(4679);S.exports=function(b){return y(b)&&b.nodeType===1&&!p(b)}},5685:(S,x,u)=>{var y=u(1452),p=u(1201),b=u(1256),m=u(6397),E=u(8330),P=u(492),$=u(7499),j=u(7995),G=Object.prototype.hasOwnProperty;S.exports=function(M){if(M==null)return!0;if(E(M)&&(m(M)||typeof M=="string"||typeof M.splice=="function"||P(M)||j(M)||b(M)))return!M.length;var nt=p(M);if(nt=="[object Map]"||nt=="[object Set]")return!M.size;if($(M))return!y(M).length;for(var pt in M)if(G.call(M,pt))return!1;return!0}},8446:(S,x,u)=>{var y=u(7148),p=u(8953);S.exports=function(b){if(!p(b))return!1;var m=y(b);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},3330:S=>{S.exports=function(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=9007199254740991}},422:(S,x,u)=>{var y=u(4800),p=u(41),b=u(3685),m=b&&b.isMap,E=m?p(m):y;S.exports=E},8953:S=>{S.exports=function(x){var u=typeof x;return x!=null&&(u=="object"||u=="function")}},2934:S=>{S.exports=function(x){return x!=null&&typeof x=="object"}},4679:(S,x,u)=>{var y=u(7148),p=u(3347),b=u(2934),m=Function.prototype,E=Object.prototype,P=m.toString,$=E.hasOwnProperty,j=P.call(Object);S.exports=function(G){if(!b(G)||y(G)!="[object Object]")return!1;var M=p(G);if(M===null)return!0;var nt=$.call(M,"constructor")&&M.constructor;return typeof nt=="function"&&nt instanceof nt&&P.call(nt)==j}},3764:(S,x,u)=>{var y=u(7866),p=u(41),b=u(3685),m=b&&b.isSet,E=m?p(m):y;S.exports=E},7571:(S,x,u)=>{var y=u(7148),p=u(6397),b=u(2934);S.exports=function(m){return typeof m=="string"||!p(m)&&b(m)&&y(m)=="[object String]"}},5414:(S,x,u)=>{var y=u(7148),p=u(2934);S.exports=function(b){return typeof b=="symbol"||p(b)&&y(b)=="[object Symbol]"}},7995:(S,x,u)=>{var y=u(7129),p=u(41),b=u(3685),m=b&&b.isTypedArray,E=m?p(m):y;S.exports=E},1178:(S,x,u)=>{var y=u(1163),p=u(1452),b=u(8330);S.exports=function(m){return b(m)?y(m):p(m)}},5405:(S,x,u)=>{var y=u(1163),p=u(1491),b=u(8330);S.exports=function(m){return b(m)?y(m,!0):p(m)}},5342:S=>{S.exports=function(x){var u=x==null?0:x.length;return u?x[u-1]:void 0}},4556:(S,x,u)=>{var y=u(369);function p(b,m){if(typeof b!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var E=function(){var P=arguments,$=m?m.apply(this,P):P[0],j=E.cache;if(j.has($))return j.get($);var G=b.apply(this,P);return E.cache=j.set($,G)||j,G};return E.cache=new(p.Cache||y),E}p.Cache=y,S.exports=p},4319:(S,x,u)=>{var y=u(4272),p=u(2931),b=u(5263),m=u(7181),E=u(2083),P=u(7222),$=u(9820),j=u(9697),G=$(function(M,nt){var pt={};if(M==null)return pt;var Mt=!1;nt=y(nt,function(ft){return ft=m(ft,M),Mt||(Mt=ft.length>1),ft}),E(M,j(M),pt),Mt&&(pt=p(pt,7,P));for(var rt=nt.length;rt--;)b(pt,nt[rt]);return pt});S.exports=G},7171:(S,x,u)=>{var y=u(6733),p=u(9820)(function(b,m){return b==null?{}:y(b,m)});S.exports=p},5072:(S,x,u)=>{var y=u(6983)(function(p,b,m){return p+(m?"_":"")+b.toLowerCase()});S.exports=y},3629:S=>{S.exports=function(){return[]}},659:S=>{S.exports=function(){return!1}},3506:(S,x,u)=>{var y=u(6584);S.exports=function(p){return p==null?"":y(p)}},8580:(S,x,u)=>{var y=u(7383)("toUpperCase");S.exports=y},7385:(S,x,u)=>{var y=u(8273),p=u(5854),b=u(3506),m=u(5701);S.exports=function(E,P,$){return E=b(E),(P=$?void 0:P)===void 0?p(E)?m(E):y(E):E.match(P)||[]}},9910:(S,x,u)=>{var y=u(4390).getUint64;S.exports=function(p){var b=new DataView(p.buffer,p.byteOffset,p.byteLength),m={version:p[0],flags:new Uint8Array(p.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},E=12;m.version===0?(m.earliestPresentationTime=b.getUint32(E),m.firstOffset=b.getUint32(E+4),E+=8):(m.earliestPresentationTime=y(p.subarray(E)),m.firstOffset=y(p.subarray(E+8)),E+=16),E+=2;var P=b.getUint16(E);for(E+=2;P>0;E+=12,P--)m.references.push({referenceType:(128&p[E])>>>7,referencedSize:2147483647&b.getUint32(E),subsegmentDuration:b.getUint32(E+4),startsWithSap:!!(128&p[E+8]),sapType:(112&p[E+8])>>>4,sapDeltaTime:268435455&b.getUint32(E+8)});return m}},6946:S=>{var x,u,y,p,b,m,E,P=9e4;x=function($){return $*P},u=function($,j){return $*j},y=function($){return $/P},p=function($,j){return $/j},b=function($,j){return x(p($,j))},m=function($,j){return u(y($),j)},E=function($,j,G){return y(G?$:$-j)},S.exports={ONE_SECOND_IN_TS:P,secondsToVideoTs:x,secondsToAudioTs:u,videoTsToSeconds:y,audioTsToSeconds:p,audioTsToVideoTs:b,videoTsToAudioTs:m,metadataTsToSeconds:E}},4390:S=>{var x=Math.pow(2,32);S.exports={getUint64:function(u){var y,p=new DataView(u.buffer,u.byteOffset,u.byteLength);return p.getBigUint64?(y=p.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(y):y:p.getUint32(0)*x+p.getUint32(4)},MAX_UINT32:x}},6155:(S,x,u)=>{u.r(x),u.d(x,{default:()=>_t});var y=u(5204),p=u.n(y),b=u(7509),m=u.n(b),E=u(1401),P=u.n(E),$=u(52),j=u.n($);function G(){return G=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},G.apply(this,arguments)}const M=function(n,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(n)&&(n=p().location&&p().location.href||"");var e=/^\/\//.test(n),i=!p().location&&!/\/\//i.test(n);n=new(p()).URL(n,p().location||"https://example.com");var s=new URL(t,n);return i?s.href.slice(19):e?s.href.slice(s.protocol.length):s.href};var nt=function(){function n(){this.listeners={}}var t=n.prototype;return t.on=function(e,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i)},t.off=function(e,i){if(!this.listeners[e])return!1;var s=this.listeners[e].indexOf(i);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(s,1),s>-1},t.trigger=function(e){var i=this.listeners[e];if(i)if(arguments.length===2)for(var s=i.length,r=0;r<s;++r)i[r].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),d=i.length,f=0;f<d;++f)i[f].apply(this,o)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(i){e.push(i)})},n}();function pt(n){for(var t,e=(t=n,p().atob?p().atob(t):Buffer.from(t,"base64").toString("binary")),i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}class Mt extends nt{constructor(){super(),this.buffer=""}push(t){let e;for(this.buffer+=t,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}const rt="	",ft=function(n){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),e={};return t[1]&&(e.length=parseInt(t[1],10)),t[2]&&(e.offset=parseInt(t[2],10)),e},B=function(n){const t={};if(!n)return t;const e=n.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,s=e.length;for(;s--;)e[s]!==""&&(i=/([^=]*)=(.*)/.exec(e[s]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1]);return t},it=n=>{const t=n.split("x"),e={};return t[0]&&(e.width=parseInt(t[0],10)),t[1]&&(e.height=parseInt(t[1],10)),e};class Q extends nt{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let e,i;(t=t.trim()).length!==0&&(t[0]==="#"?this.tagMappers.reduce((s,r)=>{const o=r(t);return o===t?s:s.concat([o])},[t]).forEach(s=>{for(let r=0;r<this.customParsers.length;r++)if(this.customParsers[r].call(this,s))return;if(s.indexOf("#EXT")===0)if(s=s.replace("\r",""),e=/^#EXTM3U/.exec(s),e)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),e)return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),e)return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),e)return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),e)return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),e)return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),e)return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void this.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),e)return i=G(ft(e[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),e)return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-MAP:(.*)$/.exec(s),e){if(i={type:"tag",tagType:"map"},e[1]){const r=B(e[1]);r.URI&&(i.uri=r.URI),r.BYTERANGE&&(i.byterange=ft(r.BYTERANGE))}this.trigger("data",i)}else{if(e=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),e)return i={type:"tag",tagType:"stream-inf"},e[1]&&(i.attributes=B(e[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=it(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA:(.*)$/.exec(s),e)return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=B(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(s),e)this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(s),e)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),e)return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-KEY:(.*)$/.exec(s),e)return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=B(e[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(e=/^#EXT-X-START:(.*)$/.exec(s),e)return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=B(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),e)return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),e)return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),e)return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-SKIP:(.*)$/.exec(s),e&&e[1])return i={type:"tag",tagType:"skip"},i.attributes=B(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(rt)),void this.trigger("data",i);if(e=/^#EXT-X-PART:(.*)$/.exec(s),e&&e[1])return i={type:"tag",tagType:"part"},i.attributes=B(e[1]),["DURATION"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseFloat(i.attributes[r]))}),["INDEPENDENT","GAP"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=/YES/.test(i.attributes[r]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=ft(i.attributes.BYTERANGE)),void this.trigger("data",i);if(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),e&&e[1])return i={type:"tag",tagType:"server-control"},i.attributes=B(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseFloat(i.attributes[r]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=/YES/.test(i.attributes[r]))}),void this.trigger("data",i);if(e=/^#EXT-X-PART-INF:(.*)$/.exec(s),e&&e[1])return i={type:"tag",tagType:"part-inf"},i.attributes=B(e[1]),["PART-TARGET"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseFloat(i.attributes[r]))}),void this.trigger("data",i);if(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),e&&e[1])return i={type:"tag",tagType:"preload-hint"},i.attributes=B(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(r){if(i.attributes.hasOwnProperty(r)){i.attributes[r]=parseInt(i.attributes[r],10);const o=r==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[r],delete i.attributes[r]}}),void this.trigger("data",i);if(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),e&&e[1])return i={type:"tag",tagType:"rendition-report"},i.attributes=B(e[1]),["LAST-MSN","LAST-PART"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseInt(i.attributes[r],10))}),void this.trigger("data",i);if(e=/^#EXT-X-DATERANGE:(.*)$/.exec(s),e&&e[1]){i={type:"tag",tagType:"daterange"},i.attributes=B(e[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const r=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!r.test(o))continue;const d=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),f=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=d?i.attributes[o].toString(16):f?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i)}else if(e=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),e)this.trigger("data",{type:"tag",tagType:"independent-segments"});else if(e=/^#EXT-X-I-FRAMES-ONLY/.exec(s),e)this.trigger("data",{type:"tag",tagType:"i-frames-only"});else{if(e=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),e)return i={type:"tag",tagType:"content-steering"},i.attributes=B(e[1]),void this.trigger("data",i);if(e=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),e)return i={type:"tag",tagType:"i-frame-playlist"},i.attributes=B(e[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=it(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),void this.trigger("data",i);if(e=/^#EXT-X-DEFINE:(.*)$/.exec(s),e)return i={type:"tag",tagType:"define"},i.attributes=B(e[1]),void this.trigger("data",i);this.trigger("data",{type:"tag",data:s.slice(4)})}}}}else this.trigger("data",{type:"comment",text:s.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))}addParser({expression:t,customType:e,dataParser:i,segment:s}){typeof i!="function"&&(i=r=>r),this.customParsers.push(r=>{if(t.exec(r))return this.trigger("data",{type:"custom",data:i(r),customType:e,segment:s}),!0})}addTagMapper({expression:t,map:e}){this.tagMappers.push(i=>t.test(i)?e(i):i)}}const ut=function(n){const t={};return Object.keys(n).forEach(function(e){var i;t[i=e,i.toLowerCase().replace(/-(\w)/g,s=>s[1].toUpperCase())]=n[e]}),t},tt=function(n){const{serverControl:t,targetDuration:e,partTargetDuration:i}=n;if(!t)return;const s="#EXT-X-SERVER-CONTROL",r="holdBack",o="partHoldBack",d=e&&3*e,f=i&&2*i;e&&!t.hasOwnProperty(r)&&(t[r]=d,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${d}).`})),d&&t[r]<d&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${t[r]}) to targetDuration * 3 (${d})`}),t[r]=d),i&&!t.hasOwnProperty(o)&&(t[o]=3*i,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[o]}).`})),i&&t[o]<f&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${t[o]}) to partTargetDuration * 2 (${f}).`}),t[o]=f)};class Dt extends nt{constructor(t={}){super(),this.lineStream=new Mt,this.parseStream=new Q,this.lineStream.pipe(this.parseStream),this.mainDefinitions=t.mainDefinitions||{},this.params=new URL(t.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const e=this,i=[];let s,r,o={},d=!1;const f=function(){},v={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let g=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let O=0,A=0;const W={};this.on("end",()=>{o.uri||!o.parts&&!o.preloadHints||(!o.map&&s&&(o.map=s),!o.key&&r&&(o.key=r),o.timeline||typeof g!="number"||(o.timeline=g),this.manifest.preloadSegment=o)}),this.parseStream.on("data",function(I){let X,dt;if(e.manifest.definitions){for(const ht in e.manifest.definitions)if(I.uri&&(I.uri=I.uri.replace(`{$${ht}}`,e.manifest.definitions[ht])),I.attributes)for(const lt in I.attributes)typeof I.attributes[lt]=="string"&&(I.attributes[lt]=I.attributes[lt].replace(`{$${ht}}`,e.manifest.definitions[ht]))}({tag(){({version(){I.version&&(this.manifest.version=I.version)},"allow-cache"(){this.manifest.allowCache=I.allowed,"allowed"in I||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const ht={};"length"in I&&(o.byterange=ht,ht.length=I.length,"offset"in I||(I.offset=O)),"offset"in I&&(o.byterange=ht,ht.offset=I.offset),O=ht.offset+ht.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),I.title&&(o.title=I.title),I.duration>0&&(o.duration=I.duration),I.duration===0&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(I.attributes)if(I.attributes.METHOD!=="NONE")if(I.attributes.URI){if(I.attributes.KEYFORMAT==="com.apple.streamingkeydelivery")return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:I.attributes});if(I.attributes.KEYFORMAT==="com.microsoft.playready")return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:I.attributes.URI});if(I.attributes.KEYFORMAT==="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed")return["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(I.attributes.METHOD)===-1?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):(I.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),I.attributes.URI.substring(0,23)!=="data:text/plain;base64,"?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):I.attributes.KEYID&&I.attributes.KEYID.substring(0,2)==="0x"?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:I.attributes.KEYFORMAT,keyId:I.attributes.KEYID.substring(2)},pssh:pt(I.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));I.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:I.attributes.METHOD||"AES-128",uri:I.attributes.URI},I.attributes.IV!==void 0&&(r.iv=I.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(I.number)?this.manifest.mediaSequence=I.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+I.number})},"discontinuity-sequence"(){isFinite(I.number)?(this.manifest.discontinuitySequence=I.number,g=I.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+I.number})},"playlist-type"(){/VOD|EVENT/.test(I.playlistType)?this.manifest.playlistType=I.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+I.playlist})},map(){s={},I.uri&&(s.uri=I.uri),I.byterange&&(s.byterange=I.byterange),r&&(s.key=r)},"stream-inf"(){this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||v,I.attributes?(o.attributes||(o.attributes={}),G(o.attributes,I.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||v,!(I.attributes&&I.attributes.TYPE&&I.attributes["GROUP-ID"]&&I.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const ht=this.manifest.mediaGroups[I.attributes.TYPE];ht[I.attributes["GROUP-ID"]]=ht[I.attributes["GROUP-ID"]]||{},X=ht[I.attributes["GROUP-ID"]],dt={default:/yes/i.test(I.attributes.DEFAULT)},dt.default?dt.autoselect=!0:dt.autoselect=/yes/i.test(I.attributes.AUTOSELECT),I.attributes.LANGUAGE&&(dt.language=I.attributes.LANGUAGE),I.attributes.URI&&(dt.uri=I.attributes.URI),I.attributes["INSTREAM-ID"]&&(dt.instreamId=I.attributes["INSTREAM-ID"]),I.attributes.CHARACTERISTICS&&(dt.characteristics=I.attributes.CHARACTERISTICS),I.attributes.FORCED&&(dt.forced=/yes/i.test(I.attributes.FORCED)),X[I.attributes.NAME]=dt},discontinuity(){g+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){this.manifest.dateTimeString===void 0&&(this.manifest.dateTimeString=I.dateTimeString,this.manifest.dateTimeObject=I.dateTimeObject),o.dateTimeString=I.dateTimeString,o.dateTimeObject=I.dateTimeObject;const{lastProgramDateTime:ht}=this;this.lastProgramDateTime=new Date(I.dateTimeString).getTime(),ht===null&&this.manifest.segments.reduceRight((lt,gt)=>(gt.programDateTime=lt-1e3*gt.duration,gt.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(I.duration)||I.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+I.duration}):(this.manifest.targetDuration=I.duration,tt.call(this,this.manifest))},start(){I.attributes&&!isNaN(I.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:I.attributes["TIME-OFFSET"],precise:I.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){o.cueOut=I.data},"cue-out-cont"(){o.cueOutCont=I.data},"cue-in"(){o.cueIn=I.data},skip(){this.manifest.skip=ut(I.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",I.attributes,["SKIPPED-SEGMENTS"])},part(){d=!0;const ht=this.manifest.segments.length,lt=ut(I.attributes);o.parts=o.parts||[],o.parts.push(lt),lt.byterange&&(lt.byterange.hasOwnProperty("offset")||(lt.byterange.offset=A),A=lt.byterange.offset+lt.byterange.length);const gt=o.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${gt} for segment #${ht}`,I.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Rt,vt)=>{Rt.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${vt} lacks required attribute(s): LAST-PART`})})},"server-control"(){const ht=this.manifest.serverControl=ut(I.attributes);ht.hasOwnProperty("canBlockReload")||(ht.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),tt.call(this,this.manifest),ht.canSkipDateranges&&!ht.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const ht=this.manifest.segments.length,lt=ut(I.attributes),gt=lt.type&&lt.type==="PART";o.preloadHints=o.preloadHints||[],o.preloadHints.push(lt),lt.byterange&&(lt.byterange.hasOwnProperty("offset")||(lt.byterange.offset=gt?A:0,gt&&(A=lt.byterange.offset+lt.byterange.length)));const Rt=o.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Rt} for segment #${ht}`,I.attributes,["TYPE","URI"]),lt.type)for(let vt=0;vt<o.preloadHints.length-1;vt++){const ct=o.preloadHints[vt];ct.type&&ct.type===lt.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Rt} for segment #${ht} has the same TYPE ${lt.type} as preload hint #${vt}`})}},"rendition-report"(){const ht=ut(I.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(ht);const lt=this.manifest.renditionReports.length-1,gt=["LAST-MSN","URI"];d&&gt.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${lt}`,I.attributes,gt)},"part-inf"(){this.manifest.partInf=ut(I.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",I.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),tt.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(ut(I.attributes));const ht=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${ht}`,I.attributes,["ID","START-DATE"]);const lt=this.manifest.dateRanges[ht];lt.endDate&&lt.startDate&&new Date(lt.endDate)<new Date(lt.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),lt.duration&&lt.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),lt.plannedDuration&&lt.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const gt=!!lt.endOnNext;if(gt&&!lt.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),gt&&(lt.duration||lt.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),lt.duration&&lt.endDate){const Rt=lt.startDate.getTime()+1e3*lt.duration;this.manifest.dateRanges[ht].endDate=new Date(Rt)}if(W[lt.id]){for(const vt in W[lt.id])if(lt[vt]&&JSON.stringify(W[lt.id][vt])!==JSON.stringify(lt[vt])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const Rt=this.manifest.dateRanges.findIndex(vt=>vt.id===lt.id);this.manifest.dateRanges[Rt]=G(this.manifest.dateRanges[Rt],lt),W[lt.id]=G(W[lt.id],lt),this.manifest.dateRanges.pop()}else W[lt.id]=lt},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=ut(I.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",I.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const ht=(lt,gt)=>{lt in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${lt}`}):this.manifest.definitions[lt]=gt};if("QUERYPARAM"in I.attributes){if("NAME"in I.attributes||"IMPORT"in I.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});const lt=this.params.get(I.attributes.QUERYPARAM);return lt?void ht(I.attributes.QUERYPARAM,decodeURIComponent(lt)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${I.attributes.QUERYPARAM}`})}return"NAME"in I.attributes?"IMPORT"in I.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in I.attributes&&typeof I.attributes.VALUE=="string"?void ht(I.attributes.NAME,I.attributes.VALUE):void this.trigger("error",{message:`EXT-X-DEFINE: No value for ${I.attributes.NAME}`}):"IMPORT"in I.attributes?this.mainDefinitions[I.attributes.IMPORT]?void ht(I.attributes.IMPORT,this.mainDefinitions[I.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${I.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:I.attributes,uri:I.uri,timeline:g}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",I.attributes,["BANDWIDTH","URI"])}}[I.tagType]||f).call(e)},uri(){o.uri=I.uri,i.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),r&&(o.key=r),o.timeline=g,s&&(o.map=s),A=0,this.lastProgramDateTime!==null&&(o.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*o.duration),o={}},comment(){},custom(){I.segment?(o.custom=o.custom||{},o.custom[I.customType]=I.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[I.customType]=I.data)}})[I.type].call(e)})}requiredCompatibilityversion(t,e){(t<e||!t)&&this.trigger("warn",{message:`manifest must be at least version ${e}`})}warnOnMissingAttributes_(t,e,i){const s=[];i.forEach(function(r){e.hasOwnProperty(r)||s.push(r)}),s.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${s.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}var q,Y,st={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},It=["video","audio","text"],Ot=["Video","Audio","Text"],Tt=function(n){return n&&n.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,i){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},Et=function(n){n===void 0&&(n="");var t=n.split(","),e=[];return t.forEach(function(i){var s;i=i.trim(),It.forEach(function(r){var o=st[r].exec(i.toLowerCase());if(o&&!(o.length<=1)){s=r;var d=i.substring(0,o[1].length),f=i.replace(d,"");e.push({type:d,details:f,mediaType:r})}}),s||e.push({type:i,details:"",mediaType:"unknown"})}),e},Lt=function(n){return n===void 0&&(n=""),st.audio.test(n.trim().toLowerCase())},wt=function(n){if(n&&typeof n=="string"){var t,e=n.toLowerCase().split(",").map(function(r){return Tt(r.trim())}),i="video";e.length===1&&Lt(e[0])?i="audio":e.length===1&&((t=e[0])===void 0&&(t=""),st.text.test(t.trim().toLowerCase()))&&(i="application");var s="mp4";return e.every(function(r){return st.mp4.test(r)})?s="mp4":e.every(function(r){return st.webm.test(r)})?s="webm":e.every(function(r){return st.ogg.test(r)})&&(s="ogg"),i+"/"+s+';codecs="'+n+'"'}},qt=function(n,t){return n===void 0&&(n=""),t===void 0&&(t=!1),p().MediaSource&&p().MediaSource.isTypeSupported&&p().MediaSource.isTypeSupported(wt(n))||t&&p().ManagedMediaSource&&p().ManagedMediaSource.isTypeSupported&&p().ManagedMediaSource.isTypeSupported(wt(n))||!1},Kt=function(n){return n===void 0&&(n=""),n.toLowerCase().split(",").every(function(t){t=t.trim();for(var e=0;e<Ot.length;e++)if(st["muxer"+Ot[e]].test(t))return!0;return!1})},be="mp4a.40.2",ee=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Ee=/^application\/dash\+xml/i,de=function(n){return ee.test(n)?"hls":Ee.test(n)?"dash":n==="application/vnd.videojs.vhs+json"?"vhs-json":null},xe=function(n){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer},Bt=function(n){return n instanceof Uint8Array?n:(Array.isArray(n)||xe(n)||n instanceof ArrayBuffer||(n=typeof n!="number"||typeof n=="number"&&n!=n?0:[n]),new Uint8Array(n&&n.buffer||n,n&&n.byteOffset||0,n&&n.byteLength||0))},le=p().BigInt||Number,Qe=[le("0x1"),le("0x100"),le("0x10000"),le("0x1000000"),le("0x100000000"),le("0x10000000000"),le("0x1000000000000"),le("0x100000000000000"),le("0x10000000000000000")],di=(q=new Uint16Array([65484]),(Y=new Uint8Array(q.buffer,q.byteOffset,q.byteLength))[0]===255||Y[0],function(n,t){var e=t===void 0?{}:t,i=e.signed,s=i!==void 0&&i,r=e.le,o=r!==void 0&&r;n=Bt(n);var d=o?"reduce":"reduceRight",f=(n[d]?n[d]:Array.prototype[d]).call(n,function(g,O,A){var W=o?A:Math.abs(A+1-n.length);return g+le(O)*Qe[W]},le(0));if(s){var v=Qe[n.length]/le(2)-le(1);(f=le(f))>v&&(f-=v,f-=v,f-=le(2))}return Number(f)}),$t=function(n,t){if(typeof n!="string"&&n&&typeof n.toString=="function"&&(n=n.toString()),typeof n!="string")return new Uint8Array;t||(n=unescape(encodeURIComponent(n)));for(var e=new Uint8Array(n.length),i=0;i<n.length;i++)e[i]=n.charCodeAt(i);return e},Ce=function(n,t,e){var i=e===void 0?{}:e,s=i.offset,r=s===void 0?0:s,o=i.mask,d=o===void 0?[]:o;n=Bt(n);var f=(t=Bt(t)).every?t.every:Array.prototype.every;return t.length&&n.length-r>=t.length&&f.call(t,function(v,g){return v===(d[g]?d[g]&n[r+g]:n[r+g])})},Xe=u(2854);const Ni=n=>!!n&&typeof n=="object",li=(...n)=>n.reduce((t,e)=>(typeof e!="object"||Object.keys(e).forEach(i=>{Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=t[i].concat(e[i]):Ni(t[i])&&Ni(e[i])?t[i]=li(t[i],e[i]):t[i]=e[i]}),t),{}),Pt=n=>Object.keys(n).map(t=>n[t]),xt=n=>n.reduce((t,e)=>t.concat(e),[]),Wt=n=>{if(!n.length)return[];const t=[];for(let e=0;e<n.length;e++)t.push(n[e]);return t},Ut=({baseUrl:n="",source:t="",range:e="",indexRange:i=""})=>{const s={uri:t,resolvedUri:M(n||"",t)};if(e||i){const r=(e||i).split("-");let o,d=p().BigInt?p().BigInt(r[0]):parseInt(r[0],10),f=p().BigInt?p().BigInt(r[1]):parseInt(r[1],10);d<Number.MAX_SAFE_INTEGER&&typeof d=="bigint"&&(d=Number(d)),f<Number.MAX_SAFE_INTEGER&&typeof f=="bigint"&&(f=Number(f)),o=typeof f=="bigint"||typeof d=="bigint"?p().BigInt(f)-p().BigInt(d)+p().BigInt(1):f-d+1,typeof o=="bigint"&&o<Number.MAX_SAFE_INTEGER&&(o=Number(o)),s.byterange={length:o,offset:d}}return s},Jt=n=>(n&&typeof n!="number"&&(n=parseInt(n,10)),isNaN(n)?null:n),ge={static(n){const{duration:t,timescale:e=1,sourceDuration:i,periodDuration:s}=n,r=Jt(n.endNumber),o=t/e;return typeof r=="number"?{start:0,end:r}:typeof s=="number"?{start:0,end:s/o}:{start:0,end:i/o}},dynamic(n){const{NOW:t,clientOffset:e,availabilityStartTime:i,timescale:s=1,duration:r,periodStart:o=0,minimumUpdatePeriod:d=0,timeShiftBufferDepth:f=1/0}=n,v=Jt(n.endNumber),g=(t+e)/1e3,O=i+o,A=g+d-O,W=Math.ceil(A*s/r),I=Math.floor((g-O-f)*s/r),X=Math.floor((g-O)*s/r);return{start:Math.max(0,I),end:typeof v=="number"?v:Math.min(W,X)}}},ui=n=>{const{type:t,duration:e,timescale:i=1,periodDuration:s,sourceDuration:r}=n,{start:o,end:d}=ge[t](n),f=((v,g)=>{const O=[];for(let A=v;A<g;A++)O.push(A);return O})(o,d).map((v=>g=>{const{duration:O,timescale:A=1,periodStart:W,startNumber:I=1}=v;return{number:I+g,duration:O/A,timeline:W,time:g*O}})(n));if(t==="static"){const v=f.length-1,g=typeof s=="number"?s:r;f[v].duration=g-e/i*v}return f},oi=n=>{const{baseUrl:t,initialization:e={},sourceDuration:i,indexRange:s="",periodStart:r,presentationTime:o,number:d=0,duration:f}=n;if(!t)throw new Error("NO_BASE_URL");const v=Ut({baseUrl:t,source:e.sourceURL,range:e.range}),g=Ut({baseUrl:t,source:t,indexRange:s});if(g.map=v,f){const O=ui(n);O.length&&(g.duration=O[0].duration,g.timeline=O[0].timeline)}else i&&(g.duration=i,g.timeline=r);return g.presentationTime=o||r,g.number=d,[g]},Ze=(n,t,e)=>{const i=n.sidx.map?n.sidx.map:null,s=n.sidx.duration,r=n.timeline||0,o=n.sidx.byterange,d=o.offset+o.length,f=t.timescale,v=t.references.filter(dt=>dt.referenceType!==1),g=[],O=n.endList?"static":"dynamic",A=n.sidx.timeline;let W,I=A,X=n.mediaSequence||0;W=typeof t.firstOffset=="bigint"?p().BigInt(d)+t.firstOffset:d+t.firstOffset;for(let dt=0;dt<v.length;dt++){const ht=t.references[dt],lt=ht.referencedSize,gt=ht.subsegmentDuration;let Rt;Rt=typeof W=="bigint"?W+p().BigInt(lt)-p().BigInt(1):W+lt-1;const vt=oi({baseUrl:e,timescale:f,timeline:r,periodStart:A,presentationTime:I,number:X,duration:gt,sourceDuration:s,indexRange:`${W}-${Rt}`,type:O})[0];i&&(vt.map=i),g.push(vt),W+=typeof W=="bigint"?p().BigInt(lt):lt,I+=gt/f,X++}return n.segments=g,n},vi=["AUDIO","SUBTITLES"],Je=1/60,Pe=n=>{return(t=n,e=({timeline:i})=>i,Pt(t.reduce((i,s)=>(s.forEach(r=>{i[e(r)]=r}),i),{}))).sort((i,s)=>i.timeline>s.timeline?1:-1);var t,e},Ue=n=>{let t=[];var e,i;return e=n,i=(s,r,o,d)=>{t=t.concat(s.playlists||[])},vi.forEach(function(s){for(var r in e.mediaGroups[s])for(var o in e.mediaGroups[s][r]){var d=e.mediaGroups[s][r][o];i(d)}}),t},K=({playlist:n,mediaSequence:t})=>{n.mediaSequence=t,n.segments.forEach((e,i)=>{e.number=n.mediaSequence+i})},at=n=>n&&n.uri+"-"+(t=>{let e;return e=typeof t.offset=="bigint"||typeof t.length=="bigint"?p().BigInt(t.offset)+p().BigInt(t.length)-p().BigInt(1):t.offset+t.length-1,`${t.offset}-${e}`})(n.byterange),Nt=n=>{const t=n.reduce(function(i,s){return i[s.attributes.baseUrl]||(i[s.attributes.baseUrl]=[]),i[s.attributes.baseUrl].push(s),i},{});let e=[];return Object.values(t).forEach(i=>{const s=Pt(i.reduce((r,o)=>{const d=o.attributes.id+(o.attributes.lang||"");return r[d]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),r[d].segments.push(...o.segments)),o.attributes.contentProtection&&(r[d].attributes.contentProtection=o.attributes.contentProtection)):(r[d]=o,r[d].attributes.timelineStarts=[]),r[d].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),r},{}));e=e.concat(s)}),e.map(i=>{var s;return i.discontinuityStarts=(s=i.segments||[],s.reduce((r,o,d)=>(o.discontinuity&&r.push(d),r),[])),i})},Vt=(n,t)=>{const e=at(n.sidx),i=e&&t[e]&&t[e].sidx;return i&&Ze(n,i,n.sidx.resolvedUri),n},Ht=(n,t={})=>{if(!Object.keys(t).length)return n;for(const e in n)n[e]=Vt(n[e],t);return n},Oe=({attributes:n,segments:t,sidx:e,discontinuityStarts:i})=>{const s={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuityStarts:i,timelineStarts:n.timelineStarts,segments:t};return n.frameRate&&(s.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(s.contentProtection=n.contentProtection),n.serviceLocation&&(s.attributes.serviceLocation=n.serviceLocation),e&&(s.sidx=e),s},ye=({attributes:n})=>n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video",ve=({attributes:n})=>n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio",Ne=({attributes:n})=>n.mimeType==="text/vtt"||n.contentType==="text",Te=n=>n?Object.keys(n).reduce((t,e)=>{const i=n[e];return t.concat(i.playlists)},[]):[],hi=({dashPlaylists:n,locations:t,contentSteering:e,sidxMapping:i={},previousManifest:s,eventStream:r})=>{if(!n.length)return{};const{sourceDuration:o,type:d,suggestedPresentationDelay:f,minimumUpdatePeriod:v}=n[0].attributes,g=Nt(n.filter(ye)).map(Oe),O=Nt(n.filter(ve)),A=Nt(n.filter(Ne)),W=n.map(ct=>ct.attributes.captionServices).filter(Boolean),I={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:Ht(g,i)};v>=0&&(I.minimumUpdatePeriod=1e3*v),t&&(I.locations=t),e&&(I.contentSteering=e),d==="dynamic"&&(I.suggestedPresentationDelay=f),r&&r.length>0&&(I.eventStream=r);const X=I.playlists.length===0,dt=O.length?((ct,Ct={},Ft=!1)=>{let ce;const ae=ct.reduce((fe,ie)=>{const ne=ie.attributes.role&&ie.attributes.role.value||"",Re=ie.attributes.lang||"";let He=ie.attributes.label||"main";if(Re&&!ie.attributes.label){const Le=ne?` (${ne})`:"";He=`${ie.attributes.lang}${Le}`}fe[He]||(fe[He]={language:Re,autoselect:!0,default:ne==="main",playlists:[],uri:""});const Fe=Vt((({attributes:Le,segments:_i,sidx:Qi,mediaSequence:Ss,discontinuitySequence:cs,discontinuityStarts:Bn},gr)=>{const ss={attributes:{NAME:Le.id,BANDWIDTH:Le.bandwidth,CODECS:Le.codecs,"PROGRAM-ID":1},uri:"",endList:Le.type==="static",timeline:Le.periodStart,resolvedUri:Le.baseUrl||"",targetDuration:Le.duration,discontinuitySequence:cs,discontinuityStarts:Bn,timelineStarts:Le.timelineStarts,mediaSequence:Ss,segments:_i};return Le.contentProtection&&(ss.contentProtection=Le.contentProtection),Le.serviceLocation&&(ss.attributes.serviceLocation=Le.serviceLocation),Qi&&(ss.sidx=Qi),gr&&(ss.attributes.AUDIO="audio",ss.attributes.SUBTITLES="subs"),ss})(ie,Ft),Ct);return fe[He].playlists.push(Fe),ce===void 0&&ne==="main"&&(ce=ie,ce.default=!0),fe},{});return ce||(ae[Object.keys(ae)[0]].default=!0),ae})(O,i,X):null,ht=A.length?((ct,Ct={})=>ct.reduce((Ft,ce)=>{const ae=ce.attributes.label||ce.attributes.lang||"text",fe=ce.attributes.lang||"und";return Ft[ae]||(Ft[ae]={language:fe,default:!1,autoselect:!1,playlists:[],uri:""}),Ft[ae].playlists.push(Vt((({attributes:ie,segments:ne,mediaSequence:Re,discontinuityStarts:He,discontinuitySequence:Fe})=>{ne===void 0&&(ne=[{uri:ie.baseUrl,timeline:ie.periodStart,resolvedUri:ie.baseUrl||"",duration:ie.sourceDuration,number:0}],ie.duration=ie.sourceDuration);const Le={NAME:ie.id,BANDWIDTH:ie.bandwidth,"PROGRAM-ID":1};ie.codecs&&(Le.CODECS=ie.codecs);const _i={attributes:Le,uri:"",endList:ie.type==="static",timeline:ie.periodStart,resolvedUri:ie.baseUrl||"",targetDuration:ie.duration,timelineStarts:ie.timelineStarts,discontinuityStarts:He,discontinuitySequence:Fe,mediaSequence:Re,segments:ne};return ie.serviceLocation&&(_i.attributes.serviceLocation=ie.serviceLocation),_i})(ce),Ct)),Ft},{}))(A,i):null,lt=g.concat(Te(dt),Te(ht)),gt=lt.map(({timelineStarts:ct})=>ct);var Rt,vt;return I.timelineStarts=Pe(gt),Rt=lt,vt=I.timelineStarts,Rt.forEach(ct=>{ct.mediaSequence=0,ct.discontinuitySequence=vt.findIndex(function({timeline:Ct}){return Ct===ct.timeline}),ct.segments&&ct.segments.forEach((Ct,Ft)=>{Ct.number=Ft})}),dt&&(I.mediaGroups.AUDIO.audio=dt),ht&&(I.mediaGroups.SUBTITLES.subs=ht),W.length&&(I.mediaGroups["CLOSED-CAPTIONS"].cc=W.reduce((ct,Ct)=>(Ct&&Ct.forEach(Ft=>{const{channel:ce,language:ae}=Ft;ct[ae]={autoselect:!1,default:!1,instreamId:ce,language:ae},Ft.hasOwnProperty("aspectRatio")&&(ct[ae].aspectRatio=Ft.aspectRatio),Ft.hasOwnProperty("easyReader")&&(ct[ae].easyReader=Ft.easyReader),Ft.hasOwnProperty("3D")&&(ct[ae]["3D"]=Ft["3D"])}),ct),{})),s?(({oldManifest:ct,newManifest:Ct})=>{const Ft=ct.playlists.concat(Ue(ct)),ce=Ct.playlists.concat(Ue(Ct));return Ct.timelineStarts=Pe([ct.timelineStarts,Ct.timelineStarts]),(({oldPlaylists:ae,newPlaylists:fe,timelineStarts:ie})=>{fe.forEach(ne=>{ne.discontinuitySequence=ie.findIndex(function({timeline:Le}){return Le===ne.timeline});const Re=((Le,_i)=>{for(let Qi=0;Qi<Le.length;Qi++)if(Le[Qi].attributes.NAME===_i)return Le[Qi];return null})(ae,ne.attributes.NAME);if(!Re||ne.sidx)return;const He=ne.segments[0],Fe=Re.segments.findIndex(function(Le){return Math.abs(Le.presentationTime-He.presentationTime)<Je});if(Fe===-1)return K({playlist:ne,mediaSequence:Re.mediaSequence+Re.segments.length}),ne.segments[0].discontinuity=!0,ne.discontinuityStarts.unshift(0),void((!Re.segments.length&&ne.timeline>Re.timeline||Re.segments.length&&ne.timeline>Re.segments[Re.segments.length-1].timeline)&&ne.discontinuitySequence--);Re.segments[Fe].discontinuity&&!He.discontinuity&&(He.discontinuity=!0,ne.discontinuityStarts.unshift(0),ne.discontinuitySequence--),K({playlist:ne,mediaSequence:Re.segments[Fe].number})})})({oldPlaylists:Ft,newPlaylists:ce,timelineStarts:Ct.timelineStarts}),Ct})({oldManifest:s,newManifest:I}):I},Zi=(n,t,e)=>{const{NOW:i,clientOffset:s,availabilityStartTime:r,timescale:o=1,periodStart:d=0,minimumUpdatePeriod:f=0}=n,v=(i+s)/1e3+f-(r+d);return Math.ceil((v*o-t)/e)},L=(n,t)=>{const{type:e,minimumUpdatePeriod:i=0,media:s="",sourceDuration:r,timescale:o=1,startNumber:d=1,periodStart:f}=n,v=[];let g=-1;for(let O=0;O<t.length;O++){const A=t[O],W=A.d,I=A.r||0,X=A.t||0;let dt;if(g<0&&(g=X),X&&X>g&&(g=X),I<0){const gt=O+1;dt=gt===t.length?e==="dynamic"&&i>0&&s.indexOf("$Number$")>0?Zi(n,g,W):(r*o-g)/W:(t[gt].t-g)/W}else dt=I+1;const ht=d+v.length+dt;let lt=d+v.length;for(;lt<ht;)v.push({number:lt,duration:W/o,time:g,timeline:f}),g+=W,lt++}return v},U=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,J=(n,t)=>n.replace(U,(e=>(i,s,r,o)=>{if(i==="$$")return"$";if(e[s]===void 0)return i;const d=""+e[s];return s==="RepresentationID"?d:(o=r?parseInt(o,10):1,d.length>=o?d:`${new Array(o-d.length+1).join("0")}${d}`)})(t)),bt=(n,t)=>{const e={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=n,s=Ut({baseUrl:n.baseUrl,source:J(i.sourceURL,e),range:i.range});return((o,d)=>o.duration||d?o.duration?ui(o):L(o,d):[{number:o.startNumber||1,duration:o.sourceDuration,time:0,timeline:o.periodStart}])(n,t).map(o=>{e.Number=o.number,e.Time=o.time;const d=J(n.media||"",e),f=n.timescale||1,v=n.presentationTimeOffset||0,g=n.periodStart+(o.time-v)/f;return{uri:d,timeline:o.timeline,duration:o.duration,resolvedUri:M(n.baseUrl||"",d),map:s,number:o.number,presentationTime:g}})},Xt=(n,t)=>{const{duration:e,segmentUrls:i=[],periodStart:s}=n;if(!e&&!t||e&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");const r=i.map(d=>((f,v)=>{const{baseUrl:g,initialization:O={}}=f,A=Ut({baseUrl:g,source:O.sourceURL,range:O.range}),W=Ut({baseUrl:g,source:v.media,range:v.mediaRange});return W.map=A,W})(n,d));let o;return e&&(o=ui(n)),t&&(o=L(n,t)),o.map((d,f)=>{if(r[f]){const v=r[f],g=n.timescale||1,O=n.presentationTimeOffset||0;return v.timeline=d.timeline,v.duration=d.duration,v.number=d.number,v.presentationTime=s+(d.time-O)/g,v}}).filter(d=>d)},Se=({attributes:n,segmentInfo:t})=>{let e,i;t.template?(i=bt,e=li(n,t.template)):t.base?(i=oi,e=li(n,t.base)):t.list&&(i=Xt,e=li(n,t.list));const s={attributes:n};if(!i)return s;const r=i(e,t.segmentTimeline);if(e.duration){const{duration:o,timescale:d=1}=e;e.duration=o/d}else r.length?e.duration=r.reduce((o,d)=>Math.max(o,Math.ceil(d.duration)),0):e.duration=0;return s.attributes=e,s.segments=r,t.base&&e.indexRange&&(s.sidx=r[0],s.segments=[]),s},Ie=(n,t)=>Wt(n.childNodes).filter(({tagName:e})=>e===t),ei=n=>n.textContent.trim(),bi=n=>{const t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!t)return 0;const[e,i,s,r,o,d]=t.slice(1);return 31536e3*parseFloat(e||0)+2592e3*parseFloat(i||0)+86400*parseFloat(s||0)+3600*parseFloat(r||0)+60*parseFloat(o||0)+parseFloat(d||0)},xi={mediaPresentationDuration:n=>bi(n),availabilityStartTime(n){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=n)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:n=>bi(n),suggestedPresentationDelay:n=>bi(n),type:n=>n,timeShiftBufferDepth:n=>bi(n),start:n=>bi(n),width:n=>parseInt(n,10),height:n=>parseInt(n,10),bandwidth:n=>parseInt(n,10),frameRate:n=>(t=>parseFloat(t.split("/").reduce((e,i)=>e/i)))(n),startNumber:n=>parseInt(n,10),timescale:n=>parseInt(n,10),presentationTimeOffset:n=>parseInt(n,10),duration(n){const t=parseInt(n,10);return isNaN(t)?bi(n):t},d:n=>parseInt(n,10),t:n=>parseInt(n,10),r:n=>parseInt(n,10),presentationTime:n=>parseInt(n,10),DEFAULT:n=>n},ii=n=>n&&n.attributes?Wt(n.attributes).reduce((t,e)=>{const i=xi[e.name]||xi.DEFAULT;return t[e.name]=i(e.value),t},{}):{},Oi={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},sn=(n,t)=>t.length?xt(n.map(function(e){return t.map(function(i){const s=ei(i),r=M(e.baseUrl,s),o=li(ii(i),{baseUrl:r});return r!==s&&!o.serviceLocation&&e.serviceLocation&&(o.serviceLocation=e.serviceLocation),o})})):n,$i=n=>{const t=Ie(n,"SegmentTemplate")[0],e=Ie(n,"SegmentList")[0],i=e&&Ie(e,"SegmentURL").map(O=>li({tag:"SegmentURL"},ii(O))),s=Ie(n,"SegmentBase")[0],r=e||t,o=r&&Ie(r,"SegmentTimeline")[0],d=e||s||t,f=d&&Ie(d,"Initialization")[0],v=t&&ii(t);v&&f?v.initialization=f&&ii(f):v&&v.initialization&&(v.initialization={sourceURL:v.initialization});const g={template:v,segmentTimeline:o&&Ie(o,"S").map(O=>ii(O)),list:e&&li(ii(e),{segmentUrls:i,initialization:ii(f)}),base:s&&li(ii(s),{initialization:ii(f)})};return Object.keys(g).forEach(O=>{g[O]||delete g[O]}),g},un=n=>xt(Ie(n.node,"EventStream").map(t=>{const e=ii(t),i=e.schemeIdUri;return Ie(t,"Event").map(s=>{const r=ii(s),o=r.presentationTime||0,d=e.timescale||1,f=r.duration||0,v=o/d+n.attributes.start;return{schemeIdUri:i,value:e.value,id:r.id,start:v,end:v+f/d,messageData:ei(s)||r.messageData,contentEncoding:e.contentEncoding,presentationTimeOffset:e.presentationTimeOffset||0}})})),_n=(n,t)=>(e,i)=>{const s=sn(t,Ie(e.node,"BaseURL")),r=li(n,{periodStart:e.attributes.start});typeof e.attributes.duration=="number"&&(r.periodDuration=e.attributes.duration);const o=Ie(e.node,"AdaptationSet"),d=$i(e.node);return xt(o.map(((f,v,g)=>O=>{const A=ii(O),W=sn(v,Ie(O,"BaseURL")),I=Ie(O,"Role")[0],X={role:ii(I)};let dt=li(f,A,X);const ht=Ie(O,"Accessibility")[0],lt=(gt=ii(ht)).schemeIdUri==="urn:scte:dash:cc:cea-608:2015"?(typeof gt.value!="string"?[]:gt.value.split(";")).map(ce=>{let ae,fe;return fe=ce,/^CC\d=/.test(ce)?[ae,fe]=ce.split("="):/^CC\d$/.test(ce)&&(ae=ce),{channel:ae,language:fe}}):gt.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"?(typeof gt.value!="string"?[]:gt.value.split(";")).map(ce=>{const ae={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(ce)){const[fe,ie=""]=ce.split("=");ae.channel=fe,ae.language=ce,ie.split(",").forEach(ne=>{const[Re,He]=ne.split(":");Re==="lang"?ae.language=He:Re==="er"?ae.easyReader=Number(He):Re==="war"?ae.aspectRatio=Number(He):Re==="3D"&&(ae["3D"]=Number(He))})}else ae.language=ce;return ae.channel&&(ae.channel="SERVICE"+ae.channel),ae}):void 0;var gt;lt&&(dt=li(dt,{captionServices:lt}));const Rt=Ie(O,"Label")[0];if(Rt&&Rt.childNodes.length){const ce=Rt.childNodes[0].nodeValue.trim();dt=li(dt,{label:ce})}const vt=Ie(O,"ContentProtection").reduce((ce,ae)=>{const fe=ii(ae);fe.schemeIdUri&&(fe.schemeIdUri=fe.schemeIdUri.toLowerCase());const ie=Oi[fe.schemeIdUri];if(ie){ce[ie]={attributes:fe};const ne=Ie(ae,"cenc:pssh")[0];if(ne){const Re=ei(ne);ce[ie].pssh=Re&&pt(Re)}}return ce},{});Object.keys(vt).length&&(dt=li(dt,{contentProtection:vt}));const ct=$i(O),Ct=Ie(O,"Representation"),Ft=li(g,ct);return xt(Ct.map(((ce,ae,fe)=>ie=>{const ne=Ie(ie,"BaseURL"),Re=sn(ae,ne),He=li(ce,ii(ie)),Fe=$i(ie);return Re.map(Le=>({segmentInfo:li(fe,Fe),attributes:li(He,Le)}))})(dt,W,Ft)))})(r,s,d)))},Pn=(n,t)=>{if(n.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!n.length)return null;const e=li({serverURL:ei(n[0])},ii(n[0]));return e.queryBeforeStart=e.queryBeforeStart==="true",e},qn=n=>{if(n==="")throw new Error("DASH_EMPTY_MANIFEST");const t=new Xe.DOMParser;let e,i;try{e=t.parseFromString(n,"application/xml"),i=e&&e.documentElement.tagName==="MPD"?e.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i};var Sn=u(9910),On=u.n(Sn),qs=Bt([73,68,51]),$n=function n(t,e){return e===void 0&&(e=0),(t=Bt(t)).length-e<10||!Ce(t,qs,{offset:e})?e:(e+=function(i,s){s===void 0&&(s=0);var r=(i=Bt(i))[s+5],o=i[s+6]<<21|i[s+7]<<14|i[s+8]<<7|i[s+9];return(16&r)>>4?o+20:o+10}(t,e),n(t,e))},br=function(n){return typeof n=="string"?$t(n):n},Tr=function n(t,e,i){i===void 0&&(i=!1),e=function(g){return Array.isArray(g)?g.map(function(O){return br(O)}):[br(g)]}(e),t=Bt(t);var s=[];if(!e.length)return s;for(var r=0;r<t.length;){var o=(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0,d=t.subarray(r+4,r+8);if(o===0)break;var f=r+o;if(f>t.length){if(i)break;f=t.length}var v=t.subarray(r+8,f);Ce(d,e[0])&&(e.length===1?s.push(v):s.push.apply(s,n(v,e.slice(1),i))),r=f}return s},$s={EBML:Bt([26,69,223,163]),DocType:Bt([66,130]),Segment:Bt([24,83,128,103]),SegmentInfo:Bt([21,73,169,102]),Tracks:Bt([22,84,174,107]),Track:Bt([174]),TrackNumber:Bt([215]),DefaultDuration:Bt([35,227,131]),TrackEntry:Bt([174]),TrackType:Bt([131]),FlagDefault:Bt([136]),CodecID:Bt([134]),CodecPrivate:Bt([99,162]),VideoTrack:Bt([224]),AudioTrack:Bt([225]),Cluster:Bt([31,67,182,117]),Timestamp:Bt([231]),TimestampScale:Bt([42,215,177]),BlockGroup:Bt([160]),BlockDuration:Bt([155]),Block:Bt([161]),SimpleBlock:Bt([163])},as=[128,64,32,16,8,4,2,1],fs=function(n,t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1);var s=function(o){for(var d=1,f=0;f<as.length&&!(o&as[f]);f++)d++;return d}(n[t]),r=n.subarray(t,t+s);return e&&((r=Array.prototype.slice.call(n,t,t+s))[0]^=as[s-1]),{length:s,value:di(r,{signed:i}),bytes:r}},os=function n(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(e){return n(e)}):typeof t=="number"?function(e,i){var s={}.le,r=s!==void 0&&s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!=e)&&(e=0);for(var o,d=(o=e=le(e),Math.ceil(function(O){return O.toString(2).length}(o)/8)),f=new Uint8Array(new ArrayBuffer(d)),v=0;v<d;v++){var g=r?v:Math.abs(v+1-f.length);f[g]=Number(e/Qe[v]&le(255)),e<0&&(f[g]=Math.abs(~f[g]),f[g]-=v===0?1:2)}return f}(t):t},sr=function n(t,e,i){if(i>=e.length)return e.length;var s=fs(e,i,!1);if(Ce(t.bytes,s.bytes))return i;var r=fs(e,i+s.length);return n(t,e,i+r.length+r.value+s.length)},Vs=function n(t,e){e=function(g){return Array.isArray(g)?g.map(function(O){return os(O)}):[os(g)]}(e),t=Bt(t);var i=[];if(!e.length)return i;for(var s=0;s<t.length;){var r=fs(t,s,!1),o=fs(t,s+r.length),d=s+r.length+o.length;o.value===127&&(o.value=sr(r,t,d),o.value!==t.length&&(o.value-=d));var f=d+o.value>t.length?t.length:d+o.value,v=t.subarray(d,f);Ce(e[0],r.bytes)&&(e.length===1?i.push(v):i=i.concat(n(v,e.slice(1)))),s+=r.length+o.length+v.length}return i},xs=Bt([0,0,0,1]),tn=Bt([0,0,1]),rr=Bt([0,0,3]),Yr=function(n){for(var t=[],e=1;e<n.length-2;)Ce(n.subarray(e,e+3),rr)&&(t.push(e+2),e++),e++;if(t.length===0)return n;var i=n.length-t.length,s=new Uint8Array(i),r=0;for(e=0;e<i;r++,e++)r===t[0]&&(r++,t.shift()),s[e]=n[r];return s},Hs=function(n,t,e,i){n=Bt(n),e=[].concat(e);for(var s,r=0,o=0;r<n.length&&(o<i||s);){var d=void 0;if(Ce(n.subarray(r),xs)?d=4:Ce(n.subarray(r),tn)&&(d=3),d){if(o++,s)return Yr(n.subarray(s,r));var f=void 0;t==="h264"?f=31&n[r+d]:t==="h265"&&(f=n[r+d]>>1&63),e.indexOf(f)!==-1&&(s=r+d),r+=d+(t==="h264"?1:2)}else r++}return n.subarray(0,0)},Yi={webm:Bt([119,101,98,109]),matroska:Bt([109,97,116,114,111,115,107,97]),flac:Bt([102,76,97,67]),ogg:Bt([79,103,103,83]),ac3:Bt([11,119]),riff:Bt([82,73,70,70]),avi:Bt([65,86,73]),wav:Bt([87,65,86,69]),"3gp":Bt([102,116,121,112,51,103]),mp4:Bt([102,116,121,112]),fmp4:Bt([115,116,121,112]),mov:Bt([102,116,121,112,113,116]),moov:Bt([109,111,111,118]),moof:Bt([109,111,111,102])},Vi={aac:function(n){var t=$n(n);return Ce(n,[255,16],{offset:t,mask:[255,22]})},mp3:function(n){var t=$n(n);return Ce(n,[255,2],{offset:t,mask:[255,6]})},webm:function(n){var t=Vs(n,[$s.EBML,$s.DocType])[0];return Ce(t,Yi.webm)},mkv:function(n){var t=Vs(n,[$s.EBML,$s.DocType])[0];return Ce(t,Yi.matroska)},mp4:function(n){return!Vi["3gp"](n)&&!Vi.mov(n)&&(!(!Ce(n,Yi.mp4,{offset:4})&&!Ce(n,Yi.fmp4,{offset:4}))||!(!Ce(n,Yi.moof,{offset:4})&&!Ce(n,Yi.moov,{offset:4}))||void 0)},mov:function(n){return Ce(n,Yi.mov,{offset:4})},"3gp":function(n){return Ce(n,Yi["3gp"],{offset:4})},ac3:function(n){var t=$n(n);return Ce(n,Yi.ac3,{offset:t})},ts:function(n){if(n.length<189&&n.length>=1)return n[0]===71;for(var t=0;t+188<n.length&&t<188;){if(n[t]===71&&n[t+188]===71)return!0;t+=1}return!1},flac:function(n){var t=$n(n);return Ce(n,Yi.flac,{offset:t})},ogg:function(n){return Ce(n,Yi.ogg)},avi:function(n){return Ce(n,Yi.riff)&&Ce(n,Yi.avi,{offset:8})},wav:function(n){return Ce(n,Yi.riff)&&Ce(n,Yi.wav,{offset:8})},h264:function(n){return function(t,e,i){return Hs(t,"h264",7,3)}(n).length},h265:function(n){return function(t,e,i){return Hs(t,"h265",[32,33],3)}(n).length}},zs=Object.keys(Vi).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);zs.forEach(function(n){var t=Vi[n];Vi[n]=function(e){return t(Bt(e))}});var Sr=Vi,Ln=function(n){n=Bt(n);for(var t=0;t<zs.length;t++){var e=zs[t];if(Sr[e](n))return e}return""},en=u(6946),Vn="8.21.0";const rn={},Dn=function(n,t){return rn[n]=rn[n]||[],t&&(rn[n]=rn[n].concat(t)),rn[n]},ms=function(n,t){const e=Dn(n).indexOf(t);return!(e<=-1||(rn[n]=rn[n].slice(),rn[n].splice(e,1),0))},Hn={prefixed:!0},zn=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],ar=zn[0];let Wn;for(let n=0;n<zn.length;n++)if(zn[n][1]in m()){Wn=zn[n];break}if(Wn){for(let n=0;n<Wn.length;n++)Hn[ar[n]]=Wn[n];Hn.prefixed=Wn[0]!==ar[0]}let ji=[];const ze=function n(t,e=":",i=""){let s,r="info";function o(...d){s("log",r,d)}return s=((d,f,v)=>(g,O,A)=>{const W=f.levels[O],I=new RegExp(`^(${W})$`);let X=d;if(g!=="log"&&A.unshift(g.toUpperCase()+":"),v&&(X=`%c${d}`,A.unshift(v)),A.unshift(X+":"),ji){ji.push([].concat(A));const ht=ji.length-1e3;ji.splice(0,ht>0?ht:0)}if(!p().console)return;let dt=p().console[g];dt||g!=="debug"||(dt=p().console.info||p().console.log),dt&&W&&I.test(g)&&dt[Array.isArray(A)?"apply":"call"](p().console,A)})(t,o,i),o.createLogger=(d,f,v)=>{const g=f!==void 0?f:e;return n(`${t} ${g} ${d}`,g,v!==void 0?v:i)},o.createNewLogger=(d,f,v)=>n(d,f,v),o.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},o.level=d=>{if(typeof d=="string"){if(!o.levels.hasOwnProperty(d))throw new Error(`"${d}" in not a valid log level`);r=d}return r},o.history=()=>ji?[].concat(ji):[],o.history.filter=d=>(ji||[]).filter(f=>new RegExp(`.*${d}.*`).test(f[0])),o.history.clear=()=>{ji&&(ji.length=0)},o.history.disable=()=>{ji!==null&&(ji.length=0,ji=null)},o.history.enable=()=>{ji===null&&(ji=[])},o.error=(...d)=>s("error",r,d),o.warn=(...d)=>s("warn",r,d),o.debug=(...d)=>s("debug",r,d),o}("VIDEOJS"),wn=ze.createLogger,Ws=Object.prototype.toString,Gs=function(n){return hn(n)?Object.keys(n):[]};function dn(n,t){Gs(n).forEach(e=>t(n[e],e))}function ks(n,t,e=0){return Gs(n).reduce((i,s)=>t(i,n[s],s),e)}function hn(n){return!!n&&typeof n=="object"}function Gn(n){return hn(n)&&Ws.call(n)==="[object Object]"&&n.constructor===Object}function pi(...n){const t={};return n.forEach(e=>{e&&dn(e,(i,s)=>{Gn(i)?(Gn(t[s])||(t[s]={}),t[s]=pi(t[s],i)):t[s]=i})}),t}function As(n={}){const t=[];for(const e in n)if(n.hasOwnProperty(e)){const i=n[e];t.push(i)}return t}function gs(n,t,e,i=!0){const s=o=>Object.defineProperty(n,t,{value:o,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const o=e();return s(o),o}};return i&&(r.set=s),Object.defineProperty(n,t,r)}var Is=Object.freeze({__proto__:null,each:dn,reduce:ks,isObject:hn,isPlain:Gn,merge:pi,values:As,defineLazyProperty:gs});let Xs,ys=!1,Ys=null,Ki=!1,Ps=!1,Xn=!1,Rn=!1,En=!1,vn=null,N=null;const k=!!(p().cast&&p().cast.framework&&p().cast.framework.CastReceiverContext);let D=null,F=!1,ot=!1,mt=!1,Gt=!1,jt=!1,he=!1,Yt=!1;const ue=!!(ni()&&("ontouchstart"in p()||p().navigator.maxTouchPoints||p().DocumentTouch&&p().document instanceof p().DocumentTouch)),te=p().navigator&&p().navigator.userAgentData;if(te&&te.platform&&te.brands&&(Ki=te.platform==="Android",Xn=!!te.brands.find(n=>n.brand==="Microsoft Edge"),Rn=!!te.brands.find(n=>n.brand==="Chromium"),En=!Xn&&Rn,vn=N=(te.brands.find(n=>n.brand==="Chromium")||{}).version||null,ot=te.platform==="Windows"),!Rn){const n=p().navigator&&p().navigator.userAgent||"";ys=/iPod/i.test(n),Ys=function(){const t=n.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Ki=/Android/i.test(n),Xs=function(){const t=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return e&&i?parseFloat(t[1]+"."+t[2]):e||null}(),Ps=/Firefox/i.test(n),Xn=/Edg/i.test(n),Rn=/Chrome/i.test(n)||/CriOS/i.test(n),En=!Xn&&Rn,vn=N=function(){const t=n.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),D=function(){const t=/MSIE\s(\d+)\.\d/.exec(n);let e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(e=11),e}(),jt=/Tizen/i.test(n),he=/Web0S/i.test(n),Yt=jt||he,F=/Safari/i.test(n)&&!En&&!Ki&&!Xn&&!Yt,ot=/Windows/i.test(n),mt=/iPad/i.test(n)||F&&ue&&!/iPhone/i.test(n),Gt=/iPhone/i.test(n)&&!mt}const pe=Gt||mt||ys,De=(F||pe)&&!En;var We=Object.freeze({__proto__:null,get IS_IPOD(){return ys},get IOS_VERSION(){return Ys},get IS_ANDROID(){return Ki},get ANDROID_VERSION(){return Xs},get IS_FIREFOX(){return Ps},get IS_EDGE(){return Xn},get IS_CHROMIUM(){return Rn},get IS_CHROME(){return En},get CHROMIUM_VERSION(){return vn},get CHROME_VERSION(){return N},IS_CHROMECAST_RECEIVER:k,get IE_VERSION(){return D},get IS_SAFARI(){return F},get IS_WINDOWS(){return ot},get IS_IPAD(){return mt},get IS_IPHONE(){return Gt},get IS_TIZEN(){return jt},get IS_WEBOS(){return he},get IS_SMART_TV(){return Yt},TOUCH_ENABLED:ue,IS_IOS:pe,IS_ANY_SAFARI:De});function qe(n){return typeof n=="string"&&!!n.trim()}function ni(){return m()===p().document}function Be(n){return hn(n)&&n.nodeType===1}function gi(){try{return p().parent!==p().self}catch{return!0}}function cn(n){return function(t,e){if(!qe(t))return m()[n](null);qe(e)&&(e=m().querySelector(e));const i=Be(e)?e:m();return i[n]&&i[n](t)}}function Ae(n="div",t={},e={},i){const s=m().createElement(n);return Object.getOwnPropertyNames(t).forEach(function(r){const o=t[r];r==="textContent"?Yn(s,o):s[r]===o&&r!=="tabIndex"||(s[r]=o)}),Object.getOwnPropertyNames(e).forEach(function(r){s.setAttribute(r,e[r])}),i&&$e(s,i),s}function Yn(n,t){return n.textContent===void 0?n.innerText=t:n.textContent=t,n}function or(n,t){t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}function Kn(n,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),n.classList.contains(t)}function Qn(n,...t){return n.classList.add(...t.reduce((e,i)=>e.concat(i.split(/\s+/)),[])),n}function _e(n,...t){return n?(n.classList.remove(...t.reduce((e,i)=>e.concat(i.split(/\s+/)),[])),n):(ze.warn("removeClass was called with an element that doesn't exist"),null)}function Me(n,t,e){return typeof e=="function"&&(e=e(n,t)),typeof e!="boolean"&&(e=void 0),t.split(/\s+/).forEach(i=>n.classList.toggle(i,e)),n}function ki(n,t){Object.getOwnPropertyNames(t).forEach(function(e){const i=t[e];i==null||i===!1?n.removeAttribute(e):n.setAttribute(e,i===!0?"":i)})}function yi(n){const t={},e=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(n&&n.attributes&&n.attributes.length>0){const i=n.attributes;for(let s=i.length-1;s>=0;s--){const r=i[s].name;let o=i[s].value;e.includes(r)&&(o=o!==null),t[r]=o}}return t}function Hi(n,t){return n.getAttribute(t)}function an(n,t,e){n.setAttribute(t,e)}function Jn(n,t){n.removeAttribute(t)}function w(){m().body.focus(),m().onselectstart=function(){return!1}}function T(){m().onselectstart=function(){return!0}}function z(n){if(n&&n.getBoundingClientRect&&n.parentNode){const t=n.getBoundingClientRect(),e={};return["bottom","height","left","right","top","width"].forEach(i=>{t[i]!==void 0&&(e[i]=t[i])}),e.height||(e.height=parseFloat(we(n,"height"))),e.width||(e.width=parseFloat(we(n,"width"))),e}}function et(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const t=n.offsetWidth,e=n.offsetHeight;let i=0,s=0;for(;n.offsetParent&&n!==m()[Hn.fullscreenElement];)i+=n.offsetLeft,s+=n.offsetTop,n=n.offsetParent;return{left:i,top:s,width:t,height:e}}function St(n,t){const e={x:0,y:0};if(pe){let g=n;for(;g&&g.nodeName.toLowerCase()!=="html";){const O=we(g,"transform");if(/^matrix/.test(O)){const A=O.slice(7,-1).split(/,\s/).map(Number);e.x+=A[4],e.y+=A[5]}else if(/^matrix3d/.test(O)){const A=O.slice(9,-1).split(/,\s/).map(Number);e.x+=A[12],e.y+=A[13]}if(g.assignedSlot&&g.assignedSlot.parentElement&&p().WebKitCSSMatrix){const A=p().getComputedStyle(g.assignedSlot.parentElement).transform,W=new(p()).WebKitCSSMatrix(A);e.x+=W.m41,e.y+=W.m42}g=g.parentNode||g.host}}const i={},s=et(t.target),r=et(n),o=r.width,d=r.height;let f=t.offsetY-(r.top-s.top),v=t.offsetX-(r.left-s.left);return t.changedTouches&&(v=t.changedTouches[0].pageX-r.left,f=t.changedTouches[0].pageY+r.top,pe&&(v-=e.x,f-=e.y)),i.y=1-Math.max(0,Math.min(1,f/d)),i.x=Math.max(0,Math.min(1,v/o)),i}function zt(n){return hn(n)&&n.nodeType===3}function Zt(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function re(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(t=>(typeof t=="function"&&(t=t()),Be(t)||zt(t)?t:typeof t=="string"&&/\S/.test(t)?m().createTextNode(t):void 0)).filter(t=>t)}function $e(n,t){return re(t).forEach(e=>n.appendChild(e)),n}function Ve(n,t){return $e(Zt(n),t)}function Ai(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0||n.type==="mousedown"&&n.button===0&&n.buttons===0||n.button===0&&n.buttons===1}const Bi=cn("querySelector"),Li=cn("querySelectorAll");function we(n,t){if(!n||!t)return"";if(typeof p().getComputedStyle=="function"){let e;try{e=p().getComputedStyle(n)}catch{return""}return e?e.getPropertyValue(t)||e[t]:""}return""}function je(n){[...m().styleSheets].forEach(t=>{try{const e=[...t.cssRules].map(s=>s.cssText).join(""),i=m().createElement("style");i.textContent=e,n.document.head.appendChild(i)}catch{const i=m().createElement("link");i.rel="stylesheet",i.type=t.type,i.media=t.media.mediaText,i.href=t.href,n.document.head.appendChild(i)}})}var fi=Object.freeze({__proto__:null,isReal:ni,isEl:Be,isInFrame:gi,createEl:Ae,textContent:Yn,prependTo:or,hasClass:Kn,addClass:Qn,removeClass:_e,toggleClass:Me,setAttributes:ki,getAttributes:yi,getAttribute:Hi,setAttribute:an,removeAttribute:Jn,blockTextSelection:w,unblockTextSelection:T,getBoundingClientRect:z,findPosition:et,getPointerPosition:St,isTextNode:zt,emptyEl:Zt,normalizeContent:re,appendContent:$e,insertContent:Ve,isSingleLeftClick:Ai,$:Bi,$$:Li,computedStyle:we,copyStyleSheetsToWindow:je});let zi,nn=!1;const pn=function(){if(zi.options.autoSetup===!1)return;const n=Array.prototype.slice.call(m().getElementsByTagName("video")),t=Array.prototype.slice.call(m().getElementsByTagName("audio")),e=Array.prototype.slice.call(m().getElementsByTagName("video-js")),i=n.concat(t,e);if(i&&i.length>0)for(let s=0,r=i.length;s<r;s++){const o=i[s];if(!o||!o.getAttribute){ke(1);break}o.player===void 0&&o.getAttribute("data-setup")!==null&&zi(o)}else nn||ke(1)};function ke(n,t){ni()&&(t&&(zi=t),p().setTimeout(pn,n))}function ci(){nn=!0,p().removeEventListener("load",ci)}ni()&&(m().readyState==="complete"?ci():p().addEventListener("load",ci));const Mi=function(n){const t=m().createElement("style");return t.className=n,t},Cn=function(n,t){n.styleSheet?n.styleSheet.cssText=t:n.textContent=t};var mi=new WeakMap;let Zn,ti=3;function oe(){return ti++}function Ye(n,t){if(!mi.has(n))return;const e=mi.get(n);e.handlers[t].length===0&&(delete e.handlers[t],n.removeEventListener?n.removeEventListener(t,e.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+t,e.dispatcher)),Object.getOwnPropertyNames(e.handlers).length<=0&&(delete e.handlers,delete e.dispatcher,delete e.disabled),Object.getOwnPropertyNames(e).length===0&&mi.delete(n)}function Nn(n,t,e,i){e.forEach(function(s){n(t,s,i)})}function wr(n){if(n.fixed_)return n;function t(){return!0}function e(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const i=n||p().event;n={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in i)s.includes(r)||r==="returnValue"&&i.preventDefault||(n[r]=i[r]);if(n.target||(n.target=n.srcElement||m()),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=t},n.isPropagationStopped=e,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=t,n.stopPropagation()},n.isImmediatePropagationStopped=e,n.clientX!==null&&n.clientX!==void 0){const r=m().documentElement,o=m().body;n.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),n.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n.fixed_=!0,n}const Bh=function(){if(typeof Zn!="boolean"){Zn=!1;try{const n=Object.defineProperty({},"passive",{get(){Zn=!0}});p().addEventListener("test",null,n),p().removeEventListener("test",null,n)}catch{}}return Zn},Fh=["touchstart","touchmove"];function Mn(n,t,e){if(Array.isArray(t))return Nn(Mn,n,t,e);mi.has(n)||mi.set(n,{});const i=mi.get(n);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),e.guid||(e.guid=oe()),i.handlers[t].push(e),i.dispatcher||(i.disabled=!1,i.dispatcher=function(s,r){if(i.disabled)return;s=wr(s);const o=i.handlers[s.type];if(o){const d=o.slice(0);for(let f=0,v=d.length;f<v&&!s.isImmediatePropagationStopped();f++)try{d[f].call(n,s,r)}catch(g){ze.error(g)}}}),i.handlers[t].length===1)if(n.addEventListener){let s=!1;Bh()&&Fh.indexOf(t)>-1&&(s={passive:!0}),n.addEventListener(t,i.dispatcher,s)}else n.attachEvent&&n.attachEvent("on"+t,i.dispatcher)}function fn(n,t,e){if(!mi.has(n))return;const i=mi.get(n);if(!i.handlers)return;if(Array.isArray(t))return Nn(fn,n,t,e);const s=function(o,d){i.handlers[d]=[],Ye(o,d)};if(t===void 0){for(const o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&s(n,o);return}const r=i.handlers[t];if(r)if(e){if(e.guid)for(let o=0;o<r.length;o++)r[o].guid===e.guid&&r.splice(o--,1);Ye(n,t)}else s(n,t)}function Er(n,t,e){const i=mi.has(n)?mi.get(n):{},s=n.parentNode||n.ownerDocument;if(typeof t=="string"?t={type:t,target:n}:t.target||(t.target=n),t=wr(t),i.dispatcher&&i.dispatcher.call(n,t,e),s&&!t.isPropagationStopped()&&t.bubbles===!0)Er.call(null,s,t,e);else if(!s&&!t.defaultPrevented&&t.target&&t.target[t.type]){mi.has(t.target)||mi.set(t.target,{});const r=mi.get(t.target);t.target[t.type]&&(r.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),r.disabled=!1)}return!t.defaultPrevented}function xa(n,t,e){if(Array.isArray(t))return Nn(xa,n,t,e);const i=function(){fn(n,t,i),e.apply(this,arguments)};i.guid=e.guid=e.guid||oe(),Mn(n,t,i)}function Io(n,t,e){const i=function(){fn(n,t,i),e.apply(this,arguments)};i.guid=e.guid=e.guid||oe(),Mn(n,t,i)}var qh=Object.freeze({__proto__:null,fixEvent:wr,on:Mn,off:fn,trigger:Er,one:xa,any:Io});const ts=30,Pi=function(n,t,e){t.guid||(t.guid=oe());const i=t.bind(n);return i.guid=e?e+"_"+t.guid:t.guid,i},_s=function(n,t){let e=p().performance.now();return function(...i){const s=p().performance.now();s-e>=t&&(n(...i),e=s)}},lu=function(n,t,e,i=p()){let s;const r=function(){const o=this,d=arguments;let f=function(){s=null,f=null,e||n.apply(o,d)};!s&&e&&n.apply(o,d),i.clearTimeout(s),s=i.setTimeout(f,t)};return r.cancel=()=>{i.clearTimeout(s),s=null},r};var $h=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:ts,bind_:Pi,throttle:_s,debounce:lu});let Kr;class Un{on(t,e){const i=this.addEventListener;this.addEventListener=()=>{},Mn(this,t,e),this.addEventListener=i}off(t,e){fn(this,t,e)}one(t,e){const i=this.addEventListener;this.addEventListener=()=>{},xa(this,t,e),this.addEventListener=i}any(t,e){const i=this.addEventListener;this.addEventListener=()=>{},Io(this,t,e),this.addEventListener=i}trigger(t){const e=t.type||t;typeof t=="string"&&(t={type:e}),t=wr(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Er(this,t)}queueTrigger(t){Kr||(Kr=new Map);const e=t.type||t;let i=Kr.get(this);i||(i=new Map,Kr.set(this,i));const s=i.get(e);i.delete(e),p().clearTimeout(s);const r=p().setTimeout(()=>{i.delete(e),i.size===0&&(i=null,Kr.delete(this)),this.trigger(t)},0);i.set(e,r)}}Un.prototype.allowedEvents_={},Un.prototype.addEventListener=Un.prototype.on,Un.prototype.removeEventListener=Un.prototype.off,Un.prototype.dispatchEvent=Un.prototype.trigger;const ka=n=>typeof n.name=="function"?n.name():typeof n.name=="string"?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Os=n=>n instanceof Un||!!n.eventBusEl_&&["on","one","off","trigger"].every(t=>typeof n[t]=="function"),Po=n=>typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length,Aa=(n,t,e)=>{if(!n||!n.nodeName&&!Os(n))throw new Error(`Invalid target for ${ka(t)}#${e}; must be a DOM node or evented object.`)},uu=(n,t,e)=>{if(!Po(n))throw new Error(`Invalid event type for ${ka(t)}#${e}; must be a non-empty string or array.`)},cu=(n,t,e)=>{if(typeof n!="function")throw new Error(`Invalid listener for ${ka(t)}#${e}; must be a function.`)},Oo=(n,t,e)=>{const i=t.length<3||t[0]===n||t[0]===n.eventBusEl_;let s,r,o;return i?(s=n.eventBusEl_,t.length>=3&&t.shift(),[r,o]=t):(s=t[0],r=t[1],o=t[2]),Aa(s,n,e),uu(r,n,e),cu(o,n,e),o=Pi(n,o),{isTargetingSelf:i,target:s,type:r,listener:o}},lr=(n,t,e,i)=>{Aa(n,n,t),n.nodeName?qh[t](n,e,i):n[t](e,i)},Vh={on(...n){const{isTargetingSelf:t,target:e,type:i,listener:s}=Oo(this,n,"on");if(lr(e,"on",i,s),!t){const r=()=>this.off(e,i,s);r.guid=s.guid;const o=()=>this.off("dispose",r);o.guid=s.guid,lr(this,"on","dispose",r),lr(e,"on","dispose",o)}},one(...n){const{isTargetingSelf:t,target:e,type:i,listener:s}=Oo(this,n,"one");if(t)lr(e,"one",i,s);else{const r=(...o)=>{this.off(e,i,r),s.apply(null,o)};r.guid=s.guid,lr(e,"one",i,r)}},any(...n){const{isTargetingSelf:t,target:e,type:i,listener:s}=Oo(this,n,"any");if(t)lr(e,"any",i,s);else{const r=(...o)=>{this.off(e,i,r),s.apply(null,o)};r.guid=s.guid,lr(e,"any",i,r)}},off(n,t,e){if(!n||Po(n))fn(this.eventBusEl_,n,t);else{const i=n,s=t;Aa(i,this,"off"),uu(s,this,"off"),cu(e,this,"off"),e=Pi(this,e),this.off("dispose",e),i.nodeName?(fn(i,s,e),fn(i,"dispose",e)):Os(i)&&(i.off(s,e),i.off("dispose",e))}},trigger(n,t){Aa(this.eventBusEl_,this,"trigger");const e=n&&typeof n!="string"?n.type:n;if(!Po(e))throw new Error(`Invalid event type for ${ka(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Er(this.eventBusEl_,n,t)}};function Lo(n,t={}){const{eventBusKey:e}=t;if(e){if(!n[e].nodeName)throw new Error(`The eventBusKey "${e}" does not refer to an element.`);n.eventBusEl_=n[e]}else n.eventBusEl_=Ae("span",{className:"vjs-event-bus"});return Object.assign(n,Vh),n.eventedCallbacks&&n.eventedCallbacks.forEach(i=>{i()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&mi.has(i)&&mi.delete(i)}),p().setTimeout(()=>{n.eventBusEl_=null},0)}),n}const Hh={state:{},setState(n){let t;return typeof n=="function"&&(n=n()),dn(n,(e,i)=>{this.state[i]!==e&&(t=t||{},t[i]={from:this.state[i],to:e}),this.state[i]=e}),t&&Os(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function du(n,t){return Object.assign(n,Hh),n.state=Object.assign({},n.state,t),typeof n.handleStateChanged=="function"&&Os(n)&&n.on("statechanged",n.handleStateChanged),n}const Qr=function(n){return typeof n!="string"?n:n.replace(/./,t=>t.toLowerCase())},Wi=function(n){return typeof n!="string"?n:n.replace(/./,t=>t.toUpperCase())},hu=function(n,t){return Wi(n)===Wi(t)};var zh=Object.freeze({__proto__:null,toLowerCase:Qr,toTitleCase:Wi,titleCaseEquals:hu});class kt{constructor(t,e,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=pi({},this.options_),e=this.options_=pi(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){const s=t&&t.id&&t.id()||"no_player";this.id_=`${s}_component_${oe()}`}this.name_=e.name||null,e.el?this.el_=e.el:e.createEl!==!1&&(this.el_=this.createEl()),e.className&&this.el_&&e.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),e.evented!==!1&&(Lo(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),du(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,e.initChildren!==!1&&this.initChildren(),this.ready(i),e.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t?(this.options_=pi(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,e,i){return Ae(t,e,i)}localize(t,e,i=t){const s=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[s],d=s&&s.split("-")[0],f=r&&r[d];let v=i;return o&&o[t]?v=o[t]:f&&f[t]&&(v=f[t]),e&&(v=v.replace(/\{(\d+)\}/g,function(g,O){const A=e[O-1];let W=A;return A===void 0&&(W=g),W})),v}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((i,s)=>i.concat(s),[]);let e=this;for(let i=0;i<t.length;i++)if(e=e.getChild(t[i]),!e||!e.getChild)return;return e}setIcon(t,e=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",s=Ae("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=m().createElementNS(i,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const o=m().createElementNS(i,"use");return r.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${t}`),s.appendChild(r),this.iconIsSet_?e.replaceChild(s,e.querySelector(".vjs-icon-placeholder")):e.appendChild(s),this.iconIsSet_=!0,s}addChild(t,e={},i=this.children_.length){let s,r;if(typeof t=="string"){r=Wi(t);const o=e.componentClass||r;e.name=r;const d=kt.getComponent(o);if(!d)throw new Error(`Component ${o} does not exist`);if(typeof d!="function")return null;s=new d(this.player_||this,e)}else s=t;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),r=r||s.name&&Wi(s.name()),r&&(this.childNameIndex_[r]=s,this.childNameIndex_[Qr(r)]=s),typeof s.el=="function"&&s.el()){let o=null;this.children_[i+1]&&(this.children_[i+1].el_?o=this.children_[i+1].el_:Be(this.children_[i+1])&&(o=this.children_[i+1])),this.contentEl().insertBefore(s.el(),o)}return s}removeChild(t){if(typeof t=="string"&&(t=this.getChild(t)),!t||!this.children_)return;let e=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===t){e=!0,this.children_.splice(s,1);break}if(!e)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[Wi(t.name())]=null,this.childNameIndex_[Qr(t.name())]=null;const i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){const t=this.options_.children;if(t){const e=this.options_,i=o=>{const d=o.name;let f=o.opts;if(e[d]!==void 0&&(f=e[d]),f===!1)return;f===!0&&(f={}),f.playerOptions=this.options_.playerOptions;const v=this.addChild(d,f);v&&(this[d]=v)};let s;const r=kt.getComponent("Tech");s=Array.isArray(t)?t:Object.keys(t),s.concat(Object.keys(this.options_).filter(function(o){return!s.some(function(d){return typeof d=="string"?o===d:o===d.name})})).map(o=>{let d,f;return typeof o=="string"?(d=o,f=t[d]||this.options_[d]||{}):(d=o.name,f=o),{name:d,opts:f}}).filter(o=>{const d=kt.getComponent(o.opts.componentClass||Wi(o.name));return d&&!r.isTech(d)}).forEach(i)}}buildCSSClass(){return""}ready(t,e=!1){if(t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)}$(t,e){return Bi(t,e||this.contentEl())}$$(t,e){return Li(t,e||this.contentEl())}hasClass(t){return Kn(this.el_,t)}addClass(...t){Qn(this.el_,...t)}removeClass(...t){_e(this.el_,...t)}toggleClass(t,e){Me(this.el_,t,e)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return Hi(this.el_,t)}setAttribute(t,e){an(this.el_,t,e)}removeAttribute(t){Jn(this.el_,t)}width(t,e){return this.dimension("width",t,e)}height(t,e){return this.dimension("height",t,e)}dimensions(t,e){this.width(t,!0),this.height(e)}dimension(t,e,i){if(e!==void 0)return e!==null&&e==e||(e=0),(""+e).indexOf("%")!==-1||(""+e).indexOf("px")!==-1?this.el_.style[t]=e:this.el_.style[t]=e==="auto"?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;const s=this.el_.style[t],r=s.indexOf("px");return parseInt(r!==-1?s.slice(0,r):this.el_["offset"+Wi(t)],10)}currentDimension(t){let e=0;if(t!=="width"&&t!=="height")throw new Error("currentDimension only accepts width or height value");if(e=we(this.el_,t),e=parseFloat(e),e===0||isNaN(e)){const i=`offset${Wi(t)}`;e=this.el_[i]}return e}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const t=this.el_.getBoundingClientRect();return{boundingClientRect:{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},center:{x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(t.key==="Tab"||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t,e=0,i=null;this.on("touchstart",function(r){r.touches.length===1&&(i={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=p().performance.now(),t=!0)}),this.on("touchmove",function(r){if(r.touches.length>1)t=!1;else if(i){const o=r.touches[0].pageX-i.pageX,d=r.touches[0].pageY-i.pageY;Math.sqrt(o*o+d*d)>10&&(t=!1)}});const s=function(){t=!1};this.on("touchleave",s),this.on("touchcancel",s),this.on("touchend",function(r){i=null,t===!0&&p().performance.now()-e<200&&(r.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const t=Pi(this.player(),this.player().reportUserActivity);let e;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});const i=function(s){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(t,e){var i;return t=Pi(this,t),this.clearTimersOnDispose_(),i=p().setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),t()},e),this.setTimeoutIds_.add(i),i}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),p().clearTimeout(t)),t}setInterval(t,e){t=Pi(this,t),this.clearTimersOnDispose_();const i=p().setInterval(t,e);return this.setIntervalIds_.add(i),i}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),p().clearInterval(t)),t}requestAnimationFrame(t){var e;return this.clearTimersOnDispose_(),t=Pi(this,t),e=p().requestAnimationFrame(()=>{this.rafIds_.has(e)&&this.rafIds_.delete(e),t()}),this.rafIds_.add(e),e}requestNamedAnimationFrame(t,e){this.namedRafs_.has(t)&&this.cancelNamedAnimationFrame(t),this.clearTimersOnDispose_(),e=Pi(this,e);const i=this.requestAnimationFrame(()=>{e(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,i),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),p().cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,e])=>{this[t].forEach((i,s)=>this[e](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(t){return(t||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(t){function e(s){const r=p().getComputedStyle(s,null),o=r.getPropertyValue("visibility");return r.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}return t||(t=this.el()),!!(function(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const r={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(r.x<0||r.x>(m().documentElement.clientWidth||p().innerWidth)||r.y<0||r.y>(m().documentElement.clientHeight||p().innerHeight))return!1;let o=m().elementFromPoint(r.x,r.y);for(;o;){if(o===s)return!0;if(!o.parentNode)return!1;o=o.parentNode}}(t)&&(i=t,e(i.parentElement)&&e(i)&&i.style.opacity!=="0"&&p().getComputedStyle(i).height!=="0px"&&p().getComputedStyle(i).width!=="0px")&&(!t.parentElement||t.tabIndex>=0));var i}static registerComponent(t,e){if(typeof t!="string"||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);const i=kt.getComponent("Tech"),s=i&&i.isTech(e),r=kt===e||kt.prototype.isPrototypeOf(e.prototype);if(s||!r){let d;throw d=s?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${t}"; ${d}.`)}t=Wi(t),kt.components_||(kt.components_={});const o=kt.getComponent("Player");if(t==="Player"&&o&&o.players){const d=o.players,f=Object.keys(d);if(d&&f.length>0&&f.map(v=>d[v]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return kt.components_[t]=e,kt.components_[Qr(t)]=e,e}static getComponent(t){if(t&&kt.components_)return kt.components_[t]}}function pu(n,t,e,i){return function(s,r,o){if(typeof r!="number"||r<0||r>o)throw new Error(`Failed to execute '${s}' on 'TimeRanges': The index provided (${r}) is non-numeric or out of bounds (0-${o}).`)}(n,i,e.length-1),e[i][t]}function Do(n){let t;return t=n===void 0||n.length===0?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:n.length,start:pu.bind(null,"start",0,n),end:pu.bind(null,"end",1,n)},p().Symbol&&p().Symbol.iterator&&(t[p().Symbol.iterator]=()=>(n||[]).values()),t}function ls(n,t){return Array.isArray(n)?Do(n):n===void 0||t===void 0?Do():Do([[n,t]])}kt.registerComponent("Component",kt);const fu=function(n,t){n=n<0?0:n;let e=Math.floor(n%60),i=Math.floor(n/60%60),s=Math.floor(n/3600);const r=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(n)||n===1/0)&&(s=i=e="-"),s=s>0||o>0?s+":":"",i=((s||r>=10)&&i<10?"0"+i:i)+":",e=e<10?"0"+e:e,s+i+e};let Ro=fu;function mu(n){Ro=n}function gu(){Ro=fu}function ur(n,t=n){return Ro(n,t)}var Wh=Object.freeze({__proto__:null,createTimeRanges:ls,createTimeRange:ls,setFormatTime:mu,resetFormatTime:gu,formatTime:ur});function yu(n,t){let e,i,s=0;if(!t)return 0;n&&n.length||(n=ls(0,0));for(let r=0;r<n.length;r++)e=n.start(r),i=n.end(r),i>t&&(i=t),s+=i-e;return s/t}function Fi(n){if(n instanceof Fi)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:hn(n)&&(typeof n.code=="number"&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=Fi.defaultMessages[this.code]||"")}function Jr(n){return n!=null&&typeof n.then=="function"}function vs(n){Jr(n)&&n.then(null,t=>{})}Fi.prototype.code=0,Fi.prototype.message="",Fi.prototype.status=null,Fi.prototype.metadata=null,Fi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Fi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},Fi.MEDIA_ERR_CUSTOM=0,Fi.prototype.MEDIA_ERR_CUSTOM=0,Fi.MEDIA_ERR_ABORTED=1,Fi.prototype.MEDIA_ERR_ABORTED=1,Fi.MEDIA_ERR_NETWORK=2,Fi.prototype.MEDIA_ERR_NETWORK=2,Fi.MEDIA_ERR_DECODE=3,Fi.prototype.MEDIA_ERR_DECODE=3,Fi.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Fi.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Fi.MEDIA_ERR_ENCRYPTED=5,Fi.prototype.MEDIA_ERR_ENCRYPTED=5;const _u=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,e,i)=>(n[e]&&(t[e]=n[e]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},No="vjs-modal-dialog";class Cr extends kt{constructor(t,e){super(t,e),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ae("div",{className:`${No}-content`},{role:"document"}),this.descEl_=Ae("p",{className:`${No}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Yn(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${No} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(this.opened_)return void(this.options_.fillAlways&&this.fill());const t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if(typeof t=="boolean"){const e=this.closeable_=!!t;let i=this.getChild("closeButton");if(e&&!i){const s=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(i,"close",this.close_)}!e&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){const e=this.contentEl(),i=e.parentNode,s=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(e),this.empty(),Ve(e,t),this.trigger("modalfill"),s?i.insertBefore(e,s):i.appendChild(e);const r=this.getChild("closeButton");r&&i.appendChild(r.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),Zt(this.contentEl()),this.trigger("modalempty")}content(t){return t!==void 0&&(this.content_=t),this.content_}conditionalFocus_(){const t=m().activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(this.trigger({type:"modalKeydown",originalEvent:t,target:this,bubbles:!0}),t.stopPropagation(),t.key==="Escape"&&this.closeable())return t.preventDefault(),void this.close();if(t.key!=="Tab")return;const e=this.focusableEls_(),i=this.el_.querySelector(":focus");let s;for(let r=0;r<e.length;r++)if(i===e[r]){s=r;break}m().activeElement===this.el_&&(s=0),t.shiftKey&&s===0?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||s!==e.length-1||(e[0].focus(),t.preventDefault())}focusableEls_(){const t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,e=>(e instanceof p().HTMLAnchorElement||e instanceof p().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof p().HTMLInputElement||e instanceof p().HTMLSelectElement||e instanceof p().HTMLTextAreaElement||e instanceof p().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof p().HTMLIFrameElement||e instanceof p().HTMLObjectElement||e instanceof p().HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable"))}}Cr.prototype.options_={pauseOnOpen:!0,temporary:!0},kt.registerComponent("ModalDialog",Cr);class xr extends Un{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let e=0;e<t.length;e++)this.addTrack(t[e])}addTrack(t){const e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get(){return this.tracks_[e]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},Os(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let e;for(let i=0,s=this.length;i<s;i++)if(this[i]===t){e=this[i],e.off&&e.off(),this.tracks_.splice(i,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})}getTrackById(t){let e=null;for(let i=0,s=this.length;i<s;i++){const r=this[i];if(r.id===t){e=r;break}}return e}}xr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in xr.prototype.allowedEvents_)xr.prototype["on"+n]=null;const Mo=function(n,t){for(let e=0;e<n.length;e++)Object.keys(n[e]).length&&t.id!==n[e].id&&(n[e].enabled=!1)},Uo=function(n,t){for(let e=0;e<n.length;e++)Object.keys(n[e]).length&&t.id!==n[e].id&&(n[e].selected=!1)};class vu extends xr{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Ia{constructor(t){Ia.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){const e=this.length||0;let i=0;const s=t.length;this.cues_=t,this.length_=t.length;const r=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(e<s)for(i=e;i<s;i++)r.call(this,i)}getCueById(t){let e=null;for(let i=0,s=this.length;i<s;i++){const r=this[i];if(r.id===t){e=r;break}}return e}}const Gh={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Xh={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Yh={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},bu={disabled:"disabled",hidden:"hidden",showing:"showing"};class jo extends Un{constructor(t={}){super();const e={id:t.id||"vjs_track_"+oe(),kind:t.kind||"",language:t.language||""};let i=t.label||"";for(const s in e)Object.defineProperty(this,s,{get:()=>e[s],set(){}});Object.defineProperty(this,"label",{get:()=>i,set(s){s!==i&&(i=s,this.trigger("labelchange"))}})}}const Bo=function(n){return new URL(n,m().baseURI)},Tu=function(n){return new URL(n,m().baseURI).href},Fo=function(n){if(typeof n=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},Pa=function(n,t=p().location){return Bo(n).origin!==t.origin};var Kh=Object.freeze({__proto__:null,parseUrl:Bo,getAbsoluteURL:Tu,getFileExtension:Fo,isCrossOrigin:Pa});const Su=function(n,t){const e=new(p()).WebVTT.Parser(p(),p().vttjs,p().WebVTT.StringDecoder()),i=[];e.oncue=function(s){t.addCue(s)},e.onparsingerror=function(s){i.push(s)},e.onflush=function(){t.trigger({type:"loadeddata",target:t})},e.parse(n),i.length>0&&(p().console&&p().console.groupCollapsed&&p().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),i.forEach(s=>ze.error(s)),p().console&&p().console.groupEnd&&p().console.groupEnd()),e.flush()},wu=function(n,t){const e={uri:n},i=Pa(n);i&&(e.cors=i);const s=t.tech_.crossOrigin()==="use-credentials";s&&(e.withCredentials=s),P()(e,Pi(this,function(r,o,d){if(r)return ze.error(r,o);t.loaded_=!0,typeof p().WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],f=>{if(f.type!=="vttjserror")return Su(d,t);ze.error(`vttjs failed to load, stopping trying to process ${t.src}`)}):Su(d,t)}))};class Zr extends jo{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");const e=pi(t,{kind:Yh[t.kind]||"subtitles",language:t.language||t.srclang||""});let i=bu[e.mode]||"disabled";const s=e.default;e.kind!=="metadata"&&e.kind!=="chapters"||(i="hidden"),super(e),this.tech_=e.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new Ia(this.cues_),o=new Ia(this.activeCues_);let d=!1;this.timeupdateHandler=Pi(this,function(f={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),this.tech_.one("dispose",()=>{this.stopTracking()}),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>s,set(){}},mode:{get:()=>i,set(f){bu[f]&&i!==f&&(i=f,this.preload_||i==="disabled"||this.cues.length!==0||wu(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const f=this.tech_.currentTime(),v=[];for(let g=0,O=this.cues.length;g<O;g++){const A=this.cues[g];A.startTime<=f&&A.endTime>=f&&v.push(A)}if(d=!1,v.length!==this.activeCues_.length)d=!0;else for(let g=0;g<v.length;g++)this.activeCues_.indexOf(v[g])===-1&&(d=!0);return this.activeCues_=v,o.setCues_(this.activeCues_),o},set(){}}}),e.src?(this.src=e.src,this.preload_||(this.loaded_=!0),(this.preload_||e.kind!=="subtitles"&&e.kind!=="captions")&&wu(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let e=t;if(!("getCueAsHTML"in e)){e=new(p()).vttjs.VTTCue(t.startTime,t.endTime,t.text);for(const s in t)s in e||(e[s]=t[s]);e.id=t.id,e.originalCue_=t}const i=this.tech_.textTracks();for(let s=0;s<i.length;s++)i[s]!==this&&i[s].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)}removeCue(t){let e=this.cues_.length;for(;e--;){const i=this.cues_[e];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}}}Zr.prototype.allowedEvents_={cuechange:"cuechange"};class Eu extends jo{constructor(t={}){const e=pi(t,{kind:Xh[t.kind]||""});super(e);let i=!1;Object.defineProperty(this,"enabled",{get:()=>i,set(s){typeof s=="boolean"&&s!==i&&(i=s,this.trigger("enabledchange"))}}),e.enabled&&(this.enabled=e.enabled),this.loaded_=!0}}class Cu extends jo{constructor(t={}){const e=pi(t,{kind:Gh[t.kind]||""});super(e);let i=!1;Object.defineProperty(this,"selected",{get:()=>i,set(s){typeof s=="boolean"&&s!==i&&(i=s,this.trigger("selectedchange"))}}),e.selected&&(this.selected=e.selected)}}class Ls extends Un{constructor(t={}){let e;super();const i=new Zr(t);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get:()=>e},track:{get:()=>i}}),e=Ls.NONE,i.addEventListener("loadeddata",()=>{e=Ls.LOADED,this.trigger({type:"load",target:this})})}}Ls.prototype.allowedEvents_={load:"load"},Ls.NONE=0,Ls.LOADING=1,Ls.LOADED=2,Ls.ERROR=3;const es={audio:{ListClass:class extends xr{constructor(n=[]){for(let t=n.length-1;t>=0;t--)if(n[t].enabled){Mo(n,n[t]);break}super(n),this.changing_=!1}addTrack(n){n.enabled&&Mo(this,n),super.addTrack(n),n.addEventListener&&(n.enabledChange_=()=>{this.changing_||(this.changing_=!0,Mo(this,n),this.changing_=!1,this.trigger("change"))},n.addEventListener("enabledchange",n.enabledChange_))}removeTrack(n){super.removeTrack(n),n.removeEventListener&&n.enabledChange_&&(n.removeEventListener("enabledchange",n.enabledChange_),n.enabledChange_=null)}},TrackClass:Eu,capitalName:"Audio"},video:{ListClass:class extends xr{constructor(n=[]){for(let t=n.length-1;t>=0;t--)if(n[t].selected){Uo(n,n[t]);break}super(n),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(n){n.selected&&Uo(this,n),super.addTrack(n),n.addEventListener&&(n.selectedChange_=()=>{this.changing_||(this.changing_=!0,Uo(this,n),this.changing_=!1,this.trigger("change"))},n.addEventListener("selectedchange",n.selectedChange_))}removeTrack(n){super.removeTrack(n),n.removeEventListener&&n.selectedChange_&&(n.removeEventListener("selectedchange",n.selectedChange_),n.selectedChange_=null)}},TrackClass:Cu,capitalName:"Video"},text:{ListClass:vu,TrackClass:Zr,capitalName:"Text"}};Object.keys(es).forEach(function(n){es[n].getterName=`${n}Tracks`,es[n].privateName=`${n}Tracks_`});const kr={remoteText:{ListClass:vu,TrackClass:Zr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(n=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,e=n.length;t<e;t++)this.addTrackElement_(n[t])}addTrackElement_(n){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)}getTrackElementByTrack_(n){let t;for(let e=0,i=this.trackElements_.length;e<i;e++)if(n===this.trackElements_[e].track){t=this.trackElements_[e];break}return t}removeTrackElement_(n){for(let t=0,e=this.trackElements_.length;t<e;t++)if(n===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:Ls,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},bn=Object.assign({},es,kr);kr.names=Object.keys(kr),es.names=Object.keys(es),bn.names=[].concat(kr.names).concat(es.names);class Ke extends kt{constructor(t={},e=function(){}){t.reportTouchActivity=!1,super(null,t,e),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),bn.names.forEach(i=>{const s=bn[i];t&&t[s.getterName]&&(this[s.privateName]=t[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{t[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),t.nativeCaptions===!1||t.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:t.nativeCaptions!==!0&&t.nativeTextTracks!==!0||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=t.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new bn.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Pi(this,function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,e===1&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return ls(0,0)}bufferedPercent(){return yu(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(es.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){(t=[].concat(t)).forEach(e=>{const i=this[`${e}Tracks`]()||[];let s=i.length;for(;s--;){const r=i[s];e==="text"&&this.removeRemoteTextTrack(r),i.removeTrack(r)}})}cleanupAutoTextTracks(){const t=this.autoRemoteTextTracks_||[];let e=t.length;for(;e--;){const i=t[e];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return t!==void 0&&(this.error_=new Fi(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?ls(0,0):ls()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){es.names.forEach(t=>{const e=es[t],i=()=>{this.trigger(`${t}trackchange`)},s=this[e.getterName]();s.addEventListener("removetrack",i),s.addEventListener("addtrack",i),this.on("dispose",()=>{s.removeEventListener("removetrack",i),s.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!p().WebVTT)if(m().body.contains(this.el())){if(!this.options_["vtt.js"]&&Gn(j())&&Object.keys(j()).length>0)return void this.trigger("vttjsloaded");const t=m().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),p().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const t=this.textTracks(),e=this.remoteTextTracks(),i=d=>t.addTrack(d.track),s=d=>t.removeTrack(d.track);e.on("addtrack",i),e.on("removetrack",s),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),o=()=>{r();for(let d=0;d<t.length;d++){const f=t[d];f.removeEventListener("cuechange",r),f.mode==="showing"&&f.addEventListener("cuechange",r)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",function(){e.off("addtrack",i),e.off("removetrack",s),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(let d=0;d<t.length;d++)t[d].removeEventListener("cuechange",r)})}addTextTrack(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(s,r,o,d,f={}){const v=s.textTracks();f.kind=r,o&&(f.label=o),d&&(f.language=d),f.tech=s;const g=new bn.text.TrackClass(f);return v.addTrack(g),g}(this,t,e,i)}createRemoteTextTrack(t){const e=pi(t,{tech:this});return new kr.remoteTextEl.TrackClass(e)}addRemoteTextTrack(t={},e){const i=this.createRemoteTextTrack(t);return typeof e!="boolean"&&(e=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),e===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(t){const e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){const e=oe();return!this.isReady_||this.paused()?(this.queuedHanders_.add(e),this.one("playing",()=>{this.queuedHanders_.has(e)&&(this.queuedHanders_.delete(e),t())})):this.requestNamedAnimationFrame(e,t),e}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,e){return Ke.canPlayType(t.type)}static isTech(t){return t.prototype instanceof Ke||t instanceof Ke||t===Ke}static registerTech(t,e){if(Ke.techs_||(Ke.techs_={}),!Ke.isTech(e))throw new Error(`Tech ${t} must be a Tech`);if(!Ke.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ke.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Wi(t),Ke.techs_[t]=e,Ke.techs_[Qr(t)]=e,t!=="Tech"&&Ke.defaultTechOrder_.push(t),e}static getTech(t){if(t)return Ke.techs_&&Ke.techs_[t]?Ke.techs_[t]:(t=Wi(t),p()&&p().videojs&&p().videojs[t]?(ze.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),p().videojs[t]):void 0)}}bn.names.forEach(function(n){const t=bn[n];Ke.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Ke.prototype.featuresVolumeControl=!0,Ke.prototype.featuresMuteControl=!0,Ke.prototype.featuresFullscreenResize=!1,Ke.prototype.featuresPlaybackRate=!1,Ke.prototype.featuresProgressEvents=!1,Ke.prototype.featuresSourceset=!1,Ke.prototype.featuresTimeupdateEvents=!1,Ke.prototype.featuresNativeTextTracks=!1,Ke.prototype.featuresVideoFrameCallback=!1,Ke.withSourceHandlers=function(n){n.registerSourceHandler=function(t,e){let i=n.sourceHandlers;i||(i=n.sourceHandlers=[]),e===void 0&&(e=i.length),i.splice(e,0,t)},n.canPlayType=function(t){const e=n.sourceHandlers||[];let i;for(let s=0;s<e.length;s++)if(i=e[s].canPlayType(t),i)return i;return""},n.selectSourceHandler=function(t,e){const i=n.sourceHandlers||[];let s;for(let r=0;r<i.length;r++)if(s=i[r].canHandleSource(t,e),s)return i[r];return null},n.canPlaySource=function(t,e){const i=n.selectSourceHandler(t,e);return i?i.canHandleSource(t,e):""},["seekable","seeking","duration"].forEach(function(t){const e=this[t];typeof e=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let e=n.selectSourceHandler(t,this.options_);e||(n.nativeSourceHandler?e=n.nativeSourceHandler:ze.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),e!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=e.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},kt.registerComponent("Tech",Ke),Ke.registerTech("Tech",Ke),Ke.defaultTechOrder_=[];const cr={},Oa={},La={};function Qh(n,t,e){n.setTimeout(()=>dr(t,cr[t.type],e,n),1)}function xu(n,t,e,i=null){const s="call"+Wi(e),r=n.reduce(qo(s),i),o=r===La,d=o?null:t[e](r);return function(f,v,g,O){for(let A=f.length-1;A>=0;A--){const W=f[A];W[v]&&W[v](O,g)}}(n,e,d,o),d}const Jh={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Zh={setCurrentTime:1,setMuted:1,setVolume:1},ku={play:1,pause:1};function qo(n){return(t,e)=>t===La?La:e[n]?e[n](t):t}function dr(n={},t=[],e,i,s=[],r=!1){const[o,...d]=t;if(typeof o=="string")dr(n,cr[o],e,i,s,r);else if(o){const f=function(v,g){const O=Oa[v.id()];let A=null;if(O==null)return A=g(v),Oa[v.id()]=[[g,A]],A;for(let W=0;W<O.length;W++){const[I,X]=O[W];I===g&&(A=X)}return A===null&&(A=g(v),O.push([g,A])),A}(i,o);if(!f.setSource)return s.push(f),dr(n,d,e,i,s,r);f.setSource(Object.assign({},n),function(v,g){if(v)return dr(n,d,e,i,s,r);s.push(f),dr(g,n.type===g.type?d:cr[g.type],e,i,s,r)})}else d.length?dr(n,d,e,i,s,r):r?e(n,s):dr(n,cr["*"],e,i,s,!0)}const tp={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Da=function(n=""){const t=Fo(n);return tp[t.toLowerCase()]||""},Au=function(n){if(Array.isArray(n)){let t=[];n.forEach(function(e){e=Au(e),Array.isArray(e)?t=t.concat(e):hn(e)&&t.push(e)}),n=t}else n=typeof n=="string"&&n.trim()?[Iu({src:n})]:hn(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?[Iu(n)]:[];return n};function Iu(n){if(!n.type){const t=Da(n.src);t&&(n.type=t)}return n}const Pu=jt?10009:he?461:8,Ar={codes:{play:415,pause:19,ff:417,rw:412,back:Pu},names:{415:"play",19:"pause",417:"ff",412:"rw",[Pu]:"back"},isEventKey(n,t){return t=t.toLowerCase(),!(!this.names[n.keyCode]||this.names[n.keyCode]!==t)},getEventName(n){if(this.names[n.keyCode])return this.names[n.keyCode];if(this.codes[n.code]){const t=this.codes[n.code];return this.names[t]}return null}};class ep extends Un{constructor(t){super(),this.player_=t,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(t){const e=t.originalEvent?t.originalEvent:t;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){if(this.isPaused_)return;e.preventDefault();const i=e.key.substring(5).toLowerCase();this.move(i)}else if(Ar.isEventKey(e,"play")||Ar.isEventKey(e,"pause")||Ar.isEventKey(e,"ff")||Ar.isEventKey(e,"rw")){e.preventDefault();const i=Ar.getEventName(e);this.performMediaAction_(i)}else Ar.isEventKey(e,"Back")&&t.target&&typeof t.target.closeable=="function"&&t.target.closeable()&&(e.preventDefault(),t.target.close())}performMediaAction_(t){if(this.player_)switch(t){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(t){const e=t.relatedTarget;let i=null;const s=this.getCurrentComponent(t.target);e&&(i=!!e.closest(".video-js"),e.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(t.currentTarget.contains(t.relatedTarget)||i)&&e||(s&&s.name()==="CloseButton"?this.refocusComponent():(this.pause(),s&&s.el()&&(this.lastFocusedComponent_=s)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const t=this.player_,e=[];function i(s){for(const r of s)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&e.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&i(r.children_)}return t.children_.forEach(s=>{if(s.hasOwnProperty("el_")){if(s.getIsFocusable&&s.getIsAvailableToBeFocused&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el()))return void e.push(s);s.hasOwnProperty("children_")&&s.children_.length>0?i(s.children_):s.hasOwnProperty("items")&&s.items.length>0?i(s.items):this.findSuitableDOMChild(s)&&e.push(s)}if(s.name_==="ErrorDisplay"&&s.opened_){const r=s.el_.querySelector(".vjs-errors-ok-button-container");r&&r.querySelectorAll("button").forEach((o,d)=>{e.push({name:()=>"ModalButton"+(d+1),el:()=>o,getPositions:()=>{const f=o.getBoundingClientRect();return{boundingClientRect:{x:f.x,y:f.y,width:f.width,height:f.height,top:f.top,right:f.right,bottom:f.bottom,left:f.left},center:{x:f.left+f.width/2,y:f.top+f.height/2,width:0,height:0,top:f.top+f.height/2,right:f.left+f.width/2,bottom:f.top+f.height/2,left:f.left+f.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:f=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=e,this.focusableComponents}findSuitableDOMChild(t){return t.el()?function e(i){if(t.getIsFocusable(i)&&t.getIsAvailableToBeFocused(i))return i;for(let s=0;s<i.children.length;s++){const r=e(i.children[s]);if(r)return r}return null}(t.el()):null}getCurrentComponent(t){this.updateFocusableComponents();const e=t||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===e)return i}}add(t){const e=[...this.focusableComponents];t.hasOwnProperty("el_")&&t.getIsFocusable()&&t.getIsAvailableToBeFocused(t.el())&&e.push(t),this.focusableComponents=e,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(t){for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===t.name())return this.focusableComponents.splice(e,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(t){const e=this.getCurrentComponent();if(!e)return;const i=e.getPositions(),s=this.focusableComponents.filter(o=>o!==e&&this.isInDirection_(i.boundingClientRect,o.getPositions().boundingClientRect,t)),r=this.findBestCandidate_(i.center,s,t);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:t,focusedComponent:e})}findBestCandidate_(t,e,i){let s=1/0,r=null;for(const o of e){const d=o.getPositions().center,f=this.calculateDistance_(t,d,i);f<s&&(s=f,r=o)}return r}isInDirection_(t,e,i){switch(i){case"right":return e.left>=t.right;case"left":return e.right<=t.left;case"down":return e.top>=t.bottom;case"up":return e.bottom<=t.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[t])}else this.focus(this.updateFocusableComponents()[0])}focus(t){typeof t=="object"&&(t.getIsAvailableToBeFocused(t.el())?t.focus():this.findSuitableDOMChild(t)&&this.findSuitableDOMChild(t).focus())}calculateDistance_(t,e,i){const s=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);let o;switch(i){case"right":case"left":o=s+100*r;break;case"up":o=2*r+.5*s;break;case"down":o=5*r+s;break;default:o=s+r}return o}searchForTrackSelect_(){const t=this;for(const e of t.updateFocusableComponents())if(e.constructor.name==="TextTrackSelect"){t.focus(e);break}}}kt.registerComponent("MediaLoader",class extends kt{constructor(n,t,e){if(super(n,pi({createEl:!1},t),e),t.playerOptions.sources&&t.playerOptions.sources.length!==0)n.src(t.playerOptions.sources);else for(let i=0,s=t.playerOptions.techOrder;i<s.length;i++){const r=Wi(s[i]);let o=Ke.getTech(r);if(r||(o=kt.getComponent(r)),o&&o.isSupported()){n.loadTech_(r);break}}}});class Ra extends kt{constructor(t,e){super(t,e),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(t="div",e={},i={}){e=Object.assign({className:this.buildCSSClass(),tabIndex:0},e),t==="button"&&ze.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=e.tabIndex;const s=Ae(t,e,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(Ae("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=Ae("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,e=this.el()){if(t===void 0)return this.controlText_||"Need Text";const i=this.localize(t);this.controlText_=t,Yn(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||e.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this.tabIndex_!==void 0&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this.tabIndex_!==void 0&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){t.key===" "||t.key==="Enter"?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}kt.registerComponent("ClickableComponent",Ra);class $o extends Ra{constructor(t,e){super(t,e),this.update(),this.update_=i=>this.update(i),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ae("div",{className:"vjs-poster"})}crossOrigin(t){if(t===void 0)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;t===null||t==="anonymous"||t==="use-credentials"?this.$("img")&&(this.$("img").crossOrigin=t):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}update(t){const e=this.player().poster();this.setSrc(e),e?this.show():this.hide()}setSrc(t){t?(this.$("img")||this.el_.appendChild(Ae("picture",{className:"vjs-poster",tabIndex:-1},{},Ae("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t):this.el_.textContent=""}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?vs(this.player_.play()):this.player_.pause())}}$o.prototype.crossorigin=$o.prototype.crossOrigin,kt.registerComponent("PosterImage",$o);const is="#222",Ou="#ccc",ip={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Vo(n,t){let e;if(n.length===4)e=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else{if(n.length!==7)throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");e=n.slice(1)}return"rgba("+parseInt(e.slice(0,2),16)+","+parseInt(e.slice(2,4),16)+","+parseInt(e.slice(4,6),16)+","+t+")"}function Ds(n,t,e){try{n.style[t]=e}catch{return}}function Lu(n){return n?`${n}px`:""}kt.registerComponent("TextTrackDisplay",class extends kt{constructor(n,t,e){super(n,t,e);const i=s=>{this.updateDisplayOverlay(),this.updateDisplay(s)};n.on("loadstart",s=>this.toggleDisplay(s)),n.on("texttrackchange",s=>this.updateDisplay(s)),n.on("loadedmetadata",s=>{this.updateDisplayOverlay(),this.preselectTrack(s)}),n.ready(Pi(this,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)return void this.hide();n.on("fullscreenchange",i),n.on("playerresize",i);const s=p().screen.orientation||p(),r=p().screen.orientation?"change":"orientationchange";s.addEventListener(r,i),n.on("dispose",()=>s.removeEventListener(r,i));const o=this.options_.playerOptions.tracks||[];for(let d=0;d<o.length;d++)this.player_.addRemoteTextTrack(o[d],!0);this.preselectTrack()}))}preselectTrack(){const n={captions:1,subtitles:1},t=this.player_.textTracks(),e=this.player_.cache_.selectedLanguage;let i,s,r;for(let o=0;o<t.length;o++){const d=t[o];e&&e.enabled&&e.language&&e.language===d.language&&d.kind in n?d.kind===e.kind?r=d:r||(r=d):e&&!e.enabled?(r=null,i=null,s=null):d.default&&(d.kind!=="descriptions"||i?d.kind in n&&!s&&(s=d):i=d)}r?r.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof p().WebVTT=="function"&&p().WebVTT.processCues(p(),[],this.el_)}updateDisplay(){const n=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const r=[];for(let o=0;o<n.length;++o){const d=n[o];d.mode==="showing"&&r.push(d)}return void this.updateForTrack(r)}let e=null,i=null,s=n.length;for(;s--;){const r=n[s];r.mode==="showing"&&(r.kind==="descriptions"?e=r:i=r)}if(i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):e&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e)),!p().CSS.supports("inset","10px")){const r=this.el_,o=r.querySelectorAll(".vjs-text-track-cue"),d=this.player_.controlBar.el_.getBoundingClientRect().height,f=this.player_.el_.getBoundingClientRect().height;r.style="",Ds(r,"position","relative"),Ds(r,"height",f-d+"px"),Ds(r,"top","unset"),Ds(r,"bottom",Yt?f+"px":"0px"),o.length>0&&o.forEach(v=>{if(v.style.inset){const g=v.style.inset.split(" ");g.length===3&&Object.assign(v.style,{top:g[0],right:g[1],bottom:g[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!p().CSS.supports("inset-inline: 10px"))return;const n=this.player_.currentWidth(),t=this.player_.currentHeight(),e=n/t,i=this.player_.videoWidth()/this.player_.videoHeight();let s=0,r=0;Math.abs(e-i)>.1&&(e>i?s=Math.round((n-t*i)/2):r=Math.round((t-n/i)/2)),Ds(this.el_,"insetInline",Lu(s)),Ds(this.el_,"insetBlock",Lu(r))}updateDisplayState(n){const t=this.player_.textTrackSettings.getValues(),e=n.activeCues;let i=e.length;for(;i--;){const s=e[i];if(!s)continue;const r=s.displayState;if(t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&Ds(r.firstChild,"color",Vo(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ds(r.firstChild,"backgroundColor",Vo(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ds(r,"backgroundColor",Vo(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?r.firstChild.style.textShadow=`2px 2px 3px ${is}, 2px 2px 4px ${is}, 2px 2px 5px ${is}`:t.edgeStyle==="raised"?r.firstChild.style.textShadow=`1px 1px ${is}, 2px 2px ${is}, 3px 3px ${is}`:t.edgeStyle==="depressed"?r.firstChild.style.textShadow=`1px 1px ${Ou}, 0 1px ${Ou}, -1px -1px ${is}, 0 -1px ${is}`:t.edgeStyle==="uniform"&&(r.firstChild.style.textShadow=`0 0 4px ${is}, 0 0 4px ${is}, 0 0 4px ${is}, 0 0 4px ${is}`)),t.fontPercent&&t.fontPercent!==1){const o=p().parseFloat(r.style.fontSize);r.style.fontSize=o*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=ip[t.fontFamily])}}updateForTrack(n){if(Array.isArray(n)||(n=[n]),typeof p().WebVTT!="function"||n.every(e=>!e.activeCues))return;const t=[];for(let e=0;e<n.length;++e){const i=n[e];for(let s=0;s<i.activeCues.length;++s)t.push(i.activeCues[s])}p().WebVTT.processCues(p(),t,this.el_);for(let e=0;e<n.length;++e){const i=n[e];for(let s=0;s<i.activeCues.length;++s){const r=i.activeCues[s].displayState;Qn(r,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:e)),i.language&&an(r,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),kt.registerComponent("LoadingSpinner",class extends kt{createEl(){const n=this.player_.isAudio(),t=this.localize(n?"Audio Player":"Video Player"),e=Ae("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(e),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class mn extends Ra{createEl(t,e={},i={}){const s=Ae("button",e=Object.assign({className:this.buildCSSClass()},e),i=Object.assign({type:"button"},i));return this.player_.options_.experimentalSvgIcons||s.appendChild(Ae("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(t,e={}){const i=this.constructor.name;return ze.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),kt.prototype.addChild.call(this,t,e)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){t.key!==" "&&t.key!=="Enter"?super.handleKeyDown(t):t.stopPropagation()}}kt.registerComponent("Button",mn);class Du extends mn{constructor(t,e){super(t,e),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){const e=this.player_.play();if(this.mouseused_&&"clientX"in t&&"clientY"in t)return vs(e),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const i=this.player_.getChild("controlBar"),s=i&&i.getChild("playToggle");if(!s)return void this.player_.tech(!0).focus();const r=()=>s.focus();Jr(e)?e.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}}Du.prototype.controlText_="Play Video",kt.registerComponent("BigPlayButton",Du),kt.registerComponent("CloseButton",class extends mn{constructor(n,t){super(n,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(n){this.trigger({type:"close",bubbles:!1})}handleKeyDown(n){n.key==="Escape"?(n.preventDefault(),n.stopPropagation(),this.trigger("click")):super.handleKeyDown(n)}});class Ru extends mn{constructor(t,e={}){super(t,e),e.replay=e.replay===void 0||e.replay,this.setIcon("play"),this.on(t,"play",i=>this.handlePlay(i)),this.on(t,"pause",i=>this.handlePause(i)),e.replay&&this.on(t,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?vs(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",e=>this.handleSeeked(e))}}Ru.prototype.controlText_="Play",kt.registerComponent("PlayToggle",Ru);class Ir extends kt{constructor(t,e){super(t,e),this.on(t,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const t=this.buildCSSClass(),e=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),i=Ae("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return e.appendChild(i),this.contentEl_=Ae("span",{className:`${t}-display`},{role:"presentation"}),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(t){(this.player_.options_.enableSmoothSeeking||t.type!=="seeking")&&this.updateContent(t)}updateTextNode_(t=0){t=ur(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,ze.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=m().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))}))}updateContent(t){}}Ir.prototype.labelText_="Time",Ir.prototype.controlText_="Time",kt.registerComponent("TimeDisplay",Ir);class Ho extends Ir{buildCSSClass(){return"vjs-current-time"}updateContent(t){let e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)}}Ho.prototype.labelText_="Current Time",Ho.prototype.controlText_="Current Time",kt.registerComponent("CurrentTimeDisplay",Ho);class zo extends Ir{constructor(t,e){super(t,e);const i=s=>this.updateContent(s);this.on(t,"durationchange",i),this.on(t,"loadstart",i),this.on(t,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(t){const e=this.player_.duration();this.updateTextNode_(e)}}zo.prototype.labelText_="Duration",zo.prototype.controlText_="Duration",kt.registerComponent("DurationDisplay",zo),kt.registerComponent("TimeDivider",class extends kt{createEl(){const n=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),e=super.createEl("span",{textContent:"/"});return t.appendChild(e),n.appendChild(t),n}});class Wo extends Ir{constructor(t,e){super(t,e),this.on(t,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const t=super.createEl();return this.options_.displayNegative!==!1&&t.insertBefore(Ae("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if(typeof this.player_.duration()!="number")return;let e;e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e)}}Wo.prototype.labelText_="Remaining Time",Wo.prototype.controlText_="Remaining Time",kt.registerComponent("RemainingTimeDisplay",Wo),kt.registerComponent("LiveDisplay",class extends kt{constructor(n,t){super(n,t),this.updateShowing(),this.on(this.player(),"durationchange",e=>this.updateShowing(e))}createEl(){const n=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ae("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ae("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(m().createTextNode(this.localize("LIVE"))),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,super.dispose()}updateShowing(n){this.player().duration()===1/0?this.show():this.hide()}});class Nu extends mn{constructor(t,e){super(t,e),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",t),this.textEl_=Ae("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function ta(n,t,e){return n=Number(n),Math.min(e,Math.max(t,isNaN(n)?t:n))}Nu.prototype.controlText_="Seek to live, currently playing live",kt.registerComponent("SeekToLive",Nu);var np=Object.freeze({__proto__:null,clamp:ta});class Go extends kt{constructor(t,e){super(t,e),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,e={},i={}){return e.className=e.className+" vjs-slider",e=Object.assign({tabIndex:0},e),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(t,e,i)}handleMouseDown(t){const e=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type!=="touchstart"||En||t.preventDefault(),w(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove_),this.on(e,"mouseup",this.handleMouseUp_),this.on(e,"touchmove",this.handleMouseMove_),this.on(e,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){const e=this.bar.el_.ownerDocument;T(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{const e=this.vertical()?"height":"width";this.bar.el().style[e]=(100*t).toFixed(2)+"%"})),t}getProgress(){return Number(ta(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){const e=St(this.el_,t);return this.vertical()?e.y:e.x}handleKeyDown(t){const e=this.options_.playerOptions.spatialNavigation,i=e&&e.enabled,s=e&&e.horizontalSeek;i?s&&t.key==="ArrowLeft"||!s&&t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):s&&t.key==="ArrowRight"||!s&&t.key==="ArrowUp"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t):t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):t.key==="ArrowUp"||t.key==="ArrowRight"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}kt.registerComponent("Slider",Go);const Xo=(n,t)=>ta(n/t*100,0,100).toFixed(2)+"%";kt.registerComponent("LoadProgressBar",class extends kt{constructor(n,t){super(n,t),this.partEls_=[],this.on(n,"progress",e=>this.update(e))}createEl(){const n=super.createEl("div",{className:"vjs-load-progress"}),t=Ae("span",{className:"vjs-control-text"}),e=Ae("span",{textContent:this.localize("Loaded")}),i=m().createTextNode(": ");return this.percentageEl_=Ae("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),n.appendChild(t),t.appendChild(e),t.appendChild(i),t.appendChild(this.percentageEl_),n}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(n){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,e=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),r=this.partEls_,o=Xo(s,i);this.percent_!==o&&(this.el_.style.width=o,Yn(this.percentageEl_,o),this.percent_=o);for(let d=0;d<e.length;d++){const f=e.start(d),v=e.end(d);let g=r[d];g||(g=this.el_.appendChild(Ae()),r[d]=g),g.dataset.start===f&&g.dataset.end===v||(g.dataset.start=f,g.dataset.end=v,g.style.left=Xo(f,s),g.style.width=Xo(v-f,s))}for(let d=r.length;d>e.length;d--)this.el_.removeChild(r[d-1]);r.length=e.length})}}),kt.registerComponent("TimeTooltip",class extends kt{constructor(n,t){super(n,t),this.update=_s(Pi(this,this.update),ts)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(n,t,e){const i=et(this.el_),s=z(this.player_.el()),r=n.width*t;if(!s||!i)return;let o=n.left-s.left+r,d=n.width-r+(s.right-n.right);d||(d=n.width-r,o=r);let f=i.width/2;o<f?f+=f-o:d<f&&(f=d),f<0?f=0:f>i.width&&(f=i.width),f=Math.round(f),this.el_.style.right=`-${f}px`,this.write(e)}write(n){Yn(this.el_,n)}updateTime(n,t,e,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const r=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),d=o-t*o;s=(d<1?"":"-")+ur(d,o)}else s=ur(e,r);this.update(n,t,s),i&&i()})}});class Yo extends kt{constructor(t,e){super(t,e),this.setIcon("circle"),this.update=_s(Pi(this,this.update),ts)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,e){const i=this.getChild("timeTooltip");if(!i)return;const s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,e,s)}}Yo.prototype.options_={children:[]},pe||Ki||Yo.prototype.options_.children.push("timeTooltip"),kt.registerComponent("PlayProgressBar",Yo);class Mu extends kt{constructor(t,e){super(t,e),this.update=_s(Pi(this,this.update),ts)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,e){const i=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,i,()=>{this.el_.style.left=t.width*e+"px"})}}Mu.prototype.options_={children:["timeTooltip"]},kt.registerComponent("MouseTimeDisplay",Mu);class Na extends Go{constructor(t,e){(e=pi(Na.prototype.options_,e)).children=[...e.children];const i=t.options_.disableSeekWhileScrubbingOnMobile&&(pe||Ki);(!pe&&!Ki||i)&&e.children.splice(1,0,"mouseTimeDisplay"),super(t,e),this.shouldDisableSeekWhileScrubbingOnMobile_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Pi(this,this.update),this.update=_s(this.update_,ts),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in m()&&"visibilityState"in m()&&this.on(m(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){m().visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,ts))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if(m().visibilityState==="hidden")return;const e=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let r=this.player_.duration();s&&s.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==e&&(this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.percent_=e),this.currentTime_===i&&this.duration_===r||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ur(i,r),ur(r,r)],"{1} of {2}")),this.currentTime_=i,this.duration_=r),this.bar&&this.bar.update(z(this.el()),this.getProgress())}),e}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const t=this.getCurrentTime_();let e;const i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e}handleMouseDown(t){Ai(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,e=!1){if(!Ai(t)||isNaN(this.player_.duration()))return;let i;e||this.player_.scrubbing()||this.player_.scrubbing(!0);const s=this.calculateDistance(t),r=this.player_.liveTracker;if(r&&r.isLive()){if(s>=.99)return void r.seekToLiveEdge();const o=r.seekableStart(),d=r.liveCurrentTime();if(i=o+s*r.liveWindow(),i>=d&&(i=d),i<=o&&(i=o+.1),i===1/0)return}else i=s*this.player_.duration(),i===this.player_.duration()&&(i-=.1);this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=i:this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();const t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?vs(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){const e=this.player_.liveTracker;if(t.key===" "||t.key==="Enter")t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(t.key==="Home")t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(t.key==="End")t.preventDefault(),t.stopPropagation(),e&&e.isLive()?this.userSeek_(e.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(t.key)){t.preventDefault(),t.stopPropagation();const i=.1*parseInt(t.key,10);e&&e.isLive()?this.userSeek_(e.seekableStart()+e.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else t.key==="PageDown"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):t.key==="PageUp"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in m()&&"visibilityState"in m()&&this.off(m(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Na.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},kt.registerComponent("SeekBar",Na);class Uu extends kt{constructor(t,e){super(t,e),this.handleMouseMove=_s(Pi(this,this.handleMouseMove),ts),this.throttledHandleMouseSeek=_s(Pi(this,this.handleMouseSeek),ts),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){const e=this.getChild("seekBar");if(!e)return;const i=e.getChild("playProgressBar"),s=e.getChild("mouseTimeDisplay");if(!i&&!s)return;const r=e.el(),o=et(r);let d=St(r,t).x;d=ta(d,0,1),s&&s.update(o,d),i&&i.update(o,e.getProgress())}handleMouseSeek(t){const e=this.getChild("seekBar");e&&e.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach(t=>t.disable&&t.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&vs(this.player_.play())}}enable(){this.children().forEach(t=>t.enable&&t.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){const e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const e=this.getChild("seekBar");e&&e.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}}Uu.prototype.options_={children:["seekBar"]},kt.registerComponent("ProgressControl",Uu);class ju extends mn{constructor(t,e){super(t,e),this.setIcon("picture-in-picture-enter"),this.on(t,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){m().pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in p()?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof m().exitPictureInPicture=="function"&&super.show()}}ju.prototype.controlText_="Picture-in-Picture",kt.registerComponent("PictureInPictureToggle",ju);class Bu extends mn{constructor(t,e){super(t,e),this.setIcon("fullscreen-enter"),this.on(t,"fullscreenchange",i=>this.handleFullscreenChange(i)),m()[t.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Bu.prototype.controlText_="Fullscreen",kt.registerComponent("FullscreenToggle",Bu),kt.registerComponent("VolumeLevel",class extends kt{createEl(){const n=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",n),n.appendChild(super.createEl("span",{className:"vjs-control-text"})),n}}),kt.registerComponent("VolumeLevelTooltip",class extends kt{constructor(n,t){super(n,t),this.update=_s(Pi(this,this.update),ts)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(n,t,e,i){if(!e){const s=z(this.el_),r=z(this.player_.el()),o=n.width*t;if(!r||!s)return;const d=n.left-r.left+o,f=n.width-o+(r.right-n.right);let v=s.width/2;d<v?v+=v-d:f<v&&(v=f),v<0?v=0:v>s.width&&(v=s.width),this.el_.style.right=`-${v}px`}this.write(`${i}%`)}write(n){Yn(this.el_,n)}updateVolume(n,t,e,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(n,t,e,i.toFixed(0)),s&&s()})}});class Fu extends kt{constructor(t,e){super(t,e),this.update=_s(Pi(this,this.update),ts)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,e,i){const s=100*e;this.getChild("volumeLevelTooltip").updateVolume(t,e,i,s,()=>{i?this.el_.style.bottom=t.height*e+"px":this.el_.style.left=t.width*e+"px"})}}Fu.prototype.options_={children:["volumeLevelTooltip"]},kt.registerComponent("MouseVolumeLevelDisplay",Fu);class Ma extends Go{constructor(t,e){super(t,e),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(t,"volumechange",i=>this.updateARIAAttributes(i)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){Ai(t)&&super.handleMouseDown(t)}handleMouseMove(t){const e=this.getChild("mouseVolumeLevelDisplay");if(e){const i=this.el(),s=z(i),r=this.vertical();let o=St(i,t);o=r?o.y:o.x,o=ta(o,0,1),e.update(s,o,r)}Ai(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){const e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const t=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(t)})}}Ma.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},pe||Ki||Ma.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Ma.prototype.playerEvent="volumechange",kt.registerComponent("VolumeBar",Ma);class qu extends kt{constructor(t,e={}){e.vertical=e.vertical||!1,(e.volumeBar===void 0||Gn(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),super(t,e),function(i,s){s.tech_&&!s.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(s,"loadstart",function(){s.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})}(this,t),this.throttledHandleMouseMove=_s(Pi(this,this.handleMouseMove),ts),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){const e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}}qu.prototype.options_={children:["volumeBar"]},kt.registerComponent("VolumeControl",qu);class $u extends mn{constructor(t,e){super(t,e),function(i,s){s.tech_&&!s.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(s,"loadstart",function(){s.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})}(this,t),this.on(t,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){const e=this.player_.volume(),i=this.player_.lastVolume_();if(e===0){const s=i<.1?.1:i;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const t=this.player_.volume();let e=3;this.setIcon("volume-high"),pe&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?(this.setIcon("volume-mute"),e=0):t<.33?(this.setIcon("volume-low"),e=1):t<.67&&(this.setIcon("volume-medium"),e=2),_e(this.el_,[0,1,2,3].reduce((i,s)=>i+`${s?" ":""}vjs-vol-${s}`,"")),Qn(this.el_,`vjs-vol-${e}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}$u.prototype.controlText_="Mute",kt.registerComponent("MuteToggle",$u);class Vu extends kt{constructor(t,e={}){e.inline!==void 0?e.inline=e.inline:e.inline=!0,(e.volumeControl===void 0||Gn(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),super(t,e),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(t,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){t.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),Mn(m(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),fn(m(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){t.key==="Escape"&&this.handleMouseOut()}}Vu.prototype.options_={children:["muteToggle","volumeControl"]},kt.registerComponent("VolumePanel",Vu);class Hu extends mn{constructor(t,e){super(t,e),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipForwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(t){if(isNaN(this.player_.duration()))return;const e=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()?i.seekableEnd():this.player_.duration();let r;r=e+this.skipTime<=s?e+this.skipTime:s,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Hu.prototype.controlText_="Skip Forward",kt.registerComponent("SkipForward",Hu);class zu extends mn{constructor(t,e){super(t,e),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipBackwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(t){const e=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()&&i.seekableStart();let r;r=s&&e-this.skipTime<=s?s:e>=this.skipTime?e-this.skipTime:0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}zu.prototype.controlText_="Skip Backward",kt.registerComponent("SkipBackward",zu);class Wu extends kt{constructor(t,e){super(t,e),e&&(this.menuButton_=e.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(t){t instanceof kt&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof kt&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){const e=this.addChild(t);e&&this.addEventListenerForItem(e)}createEl(){const t=this.options_.contentElType||"ul";this.contentEl_=Ae(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const e=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),Mn(e,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),e}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){const e=t.relatedTarget||m().activeElement;if(!this.children().some(i=>i.el()===e)){const i=this.menuButton_;i&&i.buttonPressed_&&e!==i.el().firstChild&&i.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();const e=this.children();if(!Array.isArray(e))return;const i=e.filter(s=>s.el()===t.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(t){t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):t.key!=="ArrowRight"&&t.key!=="ArrowUp"||(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){const e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())}}kt.registerComponent("Menu",Wu);class Ko extends kt{constructor(t,e={}){super(t,e),this.menuButton_=new mn(t,e),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=mn.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Mn(m(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const t=new Wu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const e=Ae("li",{className:"vjs-menu-title",textContent:Wi(this.options_.title),tabIndex:-1}),i=new kt(this.player_,{el:e});t.addItem(i)}if(this.items=this.createItems(),this.items)for(let e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(t){super.setIcon(t,this.menuButton_.el_)}buildWrapperCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${mn.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,e=this.menuButton_.el()){return this.menuButton_.controlText(t,e)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),fn(m(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){t.key==="Escape"||t.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus())):t.key!=="Up"&&(t.key!=="Down"||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(t.preventDefault(),this.pressButton())}handleMenuKeyUp(t){t.key!=="Escape"&&t.key!=="Tab"||this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){t.key!=="Escape"&&t.key!=="Tab"||(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),pe&&gi())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}kt.registerComponent("MenuButton",Ko);class Qo extends Ko{constructor(t,e){const i=e.tracks;if(super(t,e),this.items.length<=1&&this.hide(),!i)return;const s=Pi(this,this.update);i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),i.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s),i.removeEventListener("labelchange",s)})}}kt.registerComponent("TrackButton",Qo);class ea extends Ra{constructor(t,e){super(t,e),this.selectable=e.selectable,this.isSelected_=e.selected||!1,this.multiSelectable=e.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,e,i){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},e),i),r=Ae("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(r):s.replaceChild(r,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(t){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(t.key)||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}kt.registerComponent("MenuItem",ea);class ia extends ea{constructor(t,e){const i=e.track,s=t.textTracks();e.label=i.label||i.language||"Unknown",e.selected=i.mode==="showing",super(t,e),this.track=i,this.kinds=(e.kinds||[e.kind||this.track.kind]).filter(Boolean);const r=(...d)=>{this.handleTracksChange.apply(this,d)},o=(...d)=>{this.handleSelectedLanguageChange.apply(this,d)};if(t.on(["loadstart","texttrackchange"],r),s.addEventListener("change",r),s.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],r),s.removeEventListener("change",r),s.removeEventListener("selectedlanguagechange",o)}),s.onchange===void 0){let d;this.on(["tap","click"],function(){if(typeof p().Event!="object")try{d=new(p()).Event("change")}catch{}d||(d=m().createEvent("Event"),d.initEvent("change",!0,!0)),s.dispatchEvent(d)})}this.handleTracksChange()}handleClick(t){const e=this.track,i=this.player_.textTracks();if(super.handleClick(t),i)for(let s=0;s<i.length;s++){const r=i[s];this.kinds.indexOf(r.kind)!==-1&&(r===e?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(t){const e=this.track.mode==="showing";e!==this.isSelected_&&this.selected(e)}handleSelectedLanguageChange(t){if(this.track.mode==="showing"){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}kt.registerComponent("TextTrackMenuItem",ia);class Gu extends ia{constructor(t,e){e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,super(t,e)}handleTracksChange(t){const e=this.player().textTracks();let i=!0;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(t){const e=this.player().textTracks();let i=!0;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}kt.registerComponent("OffTextTrackMenuItem",Gu);class Pr extends Qo{constructor(t,e={}){e.tracks=t.textTracks(),super(t,e)}createItems(t=[],e=ia){let i;this.label_&&(i=`${this.label_} off`),t.push(new Gu(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<s.length;r++){const o=s[r];if(this.kinds_.indexOf(o.kind)>-1){const d=new e(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});d.addClass(`vjs-${o.kind}-menu-item`),t.push(d)}}return t}}kt.registerComponent("TextTrackButton",Pr);class Xu extends ea{constructor(t,e){const i=e.track,s=e.cue,r=t.currentTime();e.selectable=!0,e.multiSelectable=!1,e.label=s.text,e.selected=s.startTime<=r&&r<s.endTime,super(t,e),this.track=i,this.cue=s}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}kt.registerComponent("ChaptersTrackMenuItem",Xu);class Jo extends Pr{constructor(t,e,i){super(t,e,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&t.track.kind!=="chapters")return;const e=this.findChaptersTrack();e!==this.track_?(this.setTrack(e),super.update()):(!this.items||e&&e.cues&&e.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const t=this.player_.textTracks()||[];for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Wi(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const t=[];if(!this.track_)return t;const e=this.track_.cues;if(!e)return t;for(let i=0,s=e.length;i<s;i++){const r=e[i],o=new Xu(this.player_,{track:this.track_,cue:r});t.push(o)}return t}}Jo.prototype.kind_="chapters",Jo.prototype.controlText_="Chapters",kt.registerComponent("ChaptersButton",Jo);class Zo extends Pr{constructor(t,e,i){super(t,e,i),this.setIcon("audio-description");const s=t.textTracks(),r=Pi(this,this.handleTracksChange);s.addEventListener("change",r),this.on("dispose",function(){s.removeEventListener("change",r)})}handleTracksChange(t){const e=this.player().textTracks();let i=!1;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.kind!==this.kind_&&o.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Zo.prototype.kind_="descriptions",Zo.prototype.controlText_="Descriptions",kt.registerComponent("DescriptionsButton",Zo);class tl extends Pr{constructor(t,e,i){super(t,e,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}tl.prototype.kind_="subtitles",tl.prototype.controlText_="Subtitles",kt.registerComponent("SubtitlesButton",tl);class el extends ia{constructor(t,e){e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",super(t,e),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+e.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}kt.registerComponent("CaptionSettingsMenuItem",el);class il extends Pr{constructor(t,e,i){super(t,e,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new el(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}}il.prototype.kind_="captions",il.prototype.controlText_="Captions",kt.registerComponent("CaptionsButton",il);class Yu extends ia{createEl(t,e,i){const s=super.createEl(t,e,i),r=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):r.appendChild(Ae("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ae("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}kt.registerComponent("SubsCapsMenuItem",Yu);class nl extends Pr{constructor(t,e={}){super(t,e),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Wi(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new el(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,Yu),t}}nl.prototype.kinds_=["captions","subtitles"],nl.prototype.controlText_="Subtitles",kt.registerComponent("SubsCapsButton",nl);class Ku extends ea{constructor(t,e){const i=e.track,s=t.audioTracks();e.label=i.label||i.language||"Unknown",e.selected=i.enabled,super(t,e),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const r=(...o)=>{this.handleTracksChange.apply(this,o)};s.addEventListener("change",r),this.on("dispose",()=>{s.removeEventListener("change",r)})}createEl(t,e,i){const s=super.createEl(t,e,i),r=s.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Ae("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ae("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let i=0;i<e.length;i++){const s=e[i];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}}kt.registerComponent("AudioTrackMenuItem",Ku);class Qu extends Qo{constructor(t,e={}){e.tracks=t.audioTracks(),super(t,e),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;const e=this.player_.audioTracks();for(let i=0;i<e.length;i++){const s=e[i];t.push(new Ku(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return t}}Qu.prototype.controlText_="Audio Track",kt.registerComponent("AudioTrackButton",Qu);class sl extends ea{constructor(t,e){const i=e.rate,s=parseFloat(i,10);e.label=i,e.selected=s===t.playbackRate(),e.selectable=!0,e.multiSelectable=!1,super(t,e),this.label=i,this.rate=s,this.on(t,"ratechange",r=>this.update(r))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}}sl.prototype.contentElType="button",kt.registerComponent("PlaybackRateMenuItem",sl);class Ju extends Ko{constructor(t,e){super(t,e),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",i=>this.updateVisibility(i)),this.on(t,"ratechange",i=>this.updateLabel(i)),this.on(t,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ae("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const t=this.playbackRates(),e=[];for(let i=t.length-1;i>=0;i--)e.push(new sl(this.player(),{rate:t[i]+"x"}));return e}handlePlaybackRateschange(t){this.update()}playbackRates(){const t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Ju.prototype.controlText_="Playback Rate",kt.registerComponent("PlaybackRateMenuButton",Ju);class Zu extends kt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",e={},i={}){return e.className||(e.className=this.buildCSSClass()),super.createEl(t,e,i)}}kt.registerComponent("Spacer",Zu),kt.registerComponent("CustomControlSpacer",class extends Zu{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}});class tc extends kt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}tc.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},kt.registerComponent("ControlBar",tc);class ec extends Cr{constructor(t,e){super(t,e),this.on(t,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const t=this.player().error();return t?this.localize(t.message):""}}ec.prototype.options_=Object.assign({},Cr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),kt.registerComponent("ErrorDisplay",ec);class ic extends kt{constructor(t,e={}){super(t,e),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ae("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const e=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${oe()}`)+"-"+t[1].replace(/\W+/g,""),i=Ae("option",{id:e,value:this.localize(t[0]),textContent:this.localize(t[1])});return i.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${e}`),i}))}}kt.registerComponent("TextTrackSelect",ic);class hr extends kt{constructor(t,e={}){super(t,e);const i=Ae("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const s=this.options_.selects;for(const r of s){const o=this.options_.selectConfigs[r],d=o.className,f=o.id.replace("%s",this.options_.id_);let v=null;const g=`vjs_select_${oe()}`;if(this.options_.type==="colors"){v=Ae("span",{className:d});const A=Ae("label",{id:f,className:"vjs-label",textContent:this.localize(o.label)});A.setAttribute("for",g),v.appendChild(A)}const O=new ic(t,{SelectOptions:o.options,legendId:this.options_.legendId,id:g,labelId:f});this.addChild(O),this.options_.type==="colors"&&(v.appendChild(O.el()),this.el().appendChild(v))}}createEl(){return Ae("fieldset",{className:this.options_.className})}}kt.registerComponent("TextTrackFieldset",hr);class nc extends kt{constructor(t,e={}){super(t,e);const i=this.options_.textTrackComponentid,s=new hr(t,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const r=new hr(t,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const o=new hr(t,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return Ae("div",{className:"vjs-track-settings-colors"})}}kt.registerComponent("TextTrackSettingsColors",nc);class sc extends kt{constructor(t,e={}){super(t,e);const i=this.options_.textTrackComponentid,s=new hr(t,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const r=new hr(t,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const o=new hr(t,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return Ae("div",{className:"vjs-track-settings-font"})}}kt.registerComponent("TextTrackSettingsFont",sc);class rc extends kt{constructor(t,e={}){super(t,e);const i=this.localize("restore all settings to the default values"),s=new mn(t,{controlText:i,className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const r=new mn(t,{controlText:i,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Done"),this.addChild(r)}createEl(){return Ae("div",{className:"vjs-track-settings-controls"})}}kt.registerComponent("TrackSettingsControls",rc);const rl="vjs-text-track-settings",ac=["#000","Black"],oc=["#00F","Blue"],lc=["#0FF","Cyan"],uc=["#0F0","Green"],cc=["#F0F","Magenta"],dc=["#F00","Red"],hc=["#FFF","White"],pc=["#FF0","Yellow"],al=["1","Opaque"],ol=["0.5","Semi-Transparent"],fc=["0","Transparent"],Ks={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ac,hc,dc,uc,oc,pc,cc,lc],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[al,ol,fc],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[hc,ac,dc,uc,oc,pc,cc,lc],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>n==="1.00"?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[al,ol],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[fc,ol,al],className:"vjs-window-opacity vjs-opacity"}};function mc(n,t){if(t&&(n=t(n)),n&&n!=="none")return n}Ks.windowColor.options=Ks.backgroundColor.options,kt.registerComponent("TextTrackSettings",class extends Cr{constructor(n,t){t.temporary=!1,super(n,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(n),this.endDialog=Ae("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(n){const t=new nc(n,{textTrackComponentid:this.id_,selectConfigs:Ks,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const e=new sc(n,{textTrackComponentid:this.id_,selectConfigs:Ks,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(e);const i=new rc(n);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),dn(Ks,n=>{this.on(this.$(n.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return ks(Ks,(n,t,e)=>{const i=(s=this.$(t.selector),r=t.parser,mc(s.options[s.options.selectedIndex].value,r));var s,r;return i!==void 0&&(n[e]=i),n},{})}setValues(n){dn(Ks,(t,e)=>{(function(i,s,r){if(s){for(let o=0;o<i.options.length;o++)if(mc(i.options[o].value,r)===s){i.selectedIndex=o;break}}})(this.$(t.selector),n[e],t.parser)})}setDefaults(){dn(Ks,n=>{const t=n.hasOwnProperty("default")?n.default:0;this.$(n.selector).selectedIndex=t})}restoreSettings(){let n;try{n=JSON.parse(p().localStorage.getItem(rl))}catch(t){ze.warn(t)}n&&this.setValues(n)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const n=this.getValues();try{Object.keys(n).length?p().localStorage.setItem(rl,JSON.stringify(n)):p().localStorage.removeItem(rl)}catch(t){ze.warn(t)}}updateDisplay(){const n=this.player_.getChild("textTrackDisplay");n&&n.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}),kt.registerComponent("ResizeManager",class extends kt{constructor(n,t){let e=t.ResizeObserver||p().ResizeObserver;t.ResizeObserver===null&&(e=!1),super(n,pi({createEl:!e,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||p().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=lu(()=>{this.resizeHandler()},100,!1,this),e?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(n.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const i=this.debouncedHandler_;let s=this.unloadListener_=function(){fn(this,"resize",i),fn(this,"unload",s),s=null};Mn(this.el_.contentWindow,"unload",s),Mn(this.el_.contentWindow,"resize",i)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const sp={trackingThreshold:20,liveTolerance:15};kt.registerComponent("LiveTracker",class extends kt{constructor(n,t){super(n,pi(sp,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",e=>this.handleDurationchange(e)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const n=this.player_.seekable();if(!n||!n.length)return;const t=Number(p().performance.now().toFixed(4)),e=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+e;const i=this.liveCurrentTime(),s=this.player_.currentTime();let r=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(r=!1),r!==this.behindLiveEdge_&&(this.behindLiveEdge_=r,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,ts),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const n=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&n>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const n=this.player_.seekable(),t=[];let e=n?n.length:0;for(;e--;)t.push(n.end(e));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const n=this.player_.seekable(),t=[];let e=n?n.length:0;for(;e--;)t.push(n.start(e));return t.length?t.sort()[0]:0}liveWindow(){const n=this.liveCurrentTime();return n===1/0?0:n-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const n=this.seekableEnd();return this.lastSeekEnd_!==-1&&n!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=n,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),kt.registerComponent("TitleBar",class extends kt{constructor(n,t){super(n,t),this.on("statechanged",e=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ae("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${oe()}`}),description:Ae("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${oe()}`})},Ae("div",{className:"vjs-title-bar"},{},As(this.els))}updateDom_(){const n=this.player_.tech_,t=n&&n.el_,e={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],r=this.els[i],o=e[i];Zt(r),s&&Yn(r,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,r.id))}),this.state.title||this.state.description?this.show():this.hide()}update(n){this.setState(n)}dispose(){const n=this.player_.tech_,t=n&&n.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const rp={initialDisplay:4e3,position:[],takeFocus:!1};kt.registerComponent("TransientButton",class extends mn{constructor(n,t){super(n,t=pi(rp,t)),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],e=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(n=>`vjs-${n}`).join(" ")}`}createEl(){const n=Ae("button",{},{type:"button",class:this.buildCSSClass()},Ae("span"));return this.controlTextEl_=n.querySelector("span"),n}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}});const ll=n=>{const t=n.el();if(t.hasAttribute("src"))return n.triggerSourceset(t.src),!0;const e=n.$$("source"),i=[];let s="";if(!e.length)return!1;for(let r=0;r<e.length;r++){const o=e[r].src;o&&i.indexOf(o)===-1&&i.push(o)}return!!i.length&&(i.length===1&&(s=i[0]),n.triggerSourceset(s),!0)},ap=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const t=m().createElement(this.nodeName.toLowerCase());t.innerHTML=n;const e=m().createDocumentFragment();for(;t.childNodes.length;)e.appendChild(t.childNodes[0]);return this.innerText="",p().Element.prototype.appendChild.call(this,e),this.innerHTML}}),gc=(n,t)=>{let e={};for(let i=0;i<n.length&&(e=Object.getOwnPropertyDescriptor(n[i],t),!(e&&e.set&&e.get));i++);return e.enumerable=!0,e.configurable=!0,e},yc=function(n){const t=n.el();if(t.resetSourceWatch_)return;const e={},i=(r=>gc([r.el(),p().HTMLMediaElement.prototype,p().Element.prototype,ap],"innerHTML"))(n),s=r=>(...o)=>{const d=r.apply(t,o);return ll(n),d};["append","appendChild","insertAdjacentHTML"].forEach(r=>{t[r]&&(e[r]=t[r],t[r]=s(e[r]))}),Object.defineProperty(t,"innerHTML",pi(i,{set:s(i.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(e).forEach(r=>{t[r]=e[r]}),Object.defineProperty(t,"innerHTML",i)},n.one("sourceset",t.resetSourceWatch_)},op=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?Tu(p().Element.prototype.getAttribute.call(this,"src")):""},set(n){return p().Element.prototype.setAttribute.call(this,"src",n),n}});class me extends Ke{constructor(t,e){super(t,e);const i=t.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||t.tag&&t.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let o=r.length;const d=[];for(;o--;){const f=r[o];f.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(f),this.remoteTextTracks().addTrack(f.track),this.textTracks().addTrack(f.track),s||this.el_.hasAttribute("crossorigin")||!Pa(f.src)||(s=!0)):d.push(f))}for(let f=0;f<d.length;f++)this.el_.removeChild(d[f])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&ze.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(ue||Gt)&&t.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),me.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){(function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=(o=>gc([o.el(),p().HTMLMediaElement.prototype,op],"src"))(t),s=e.setAttribute,r=e.load;Object.defineProperty(e,"src",pi(i,{set:o=>{const d=i.set.call(e,o);return t.triggerSourceset(e.src),d}})),e.setAttribute=(o,d)=>{const f=s.call(e,o,d);return/src/i.test(o)&&t.triggerSourceset(e.src),f},e.load=()=>{const o=r.call(e);return ll(t)||(t.triggerSourceset(""),yc(t)),o},e.currentSrc?t.triggerSourceset(e.currentSrc):ll(t)||yc(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=s,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}})(this)}restoreMetadataTracksInIOSNativePlayer_(){const t=this.textTracks();let e;const i=()=>{e=[];for(let r=0;r<t.length;r++){const o=t[r];o.kind==="metadata"&&e.push({track:o,storedMode:o.mode})}};i(),t.addEventListener("change",i),this.on("dispose",()=>t.removeEventListener("change",i));const s=()=>{for(let r=0;r<e.length;r++){const o=e[r];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}t.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",i),t.removeEventListener("change",s),t.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",s)})}overrideNative_(t,e){if(e!==this[`featuresNative${t}Tracks`])return;const i=t.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(s=>{this.el()[`${i}Tracks`].removeEventListener(s,this[`${i}TracksListeners_`][s])}),this[`featuresNative${t}Tracks`]=!e,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){const e=es[t],i=this.el()[e.getterName],s=this[e.getterName]();if(!this[`featuresNative${e.capitalName}Tracks`]||!i||!i.addEventListener)return;const r={change:d=>{const f={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(f),t==="text"&&this[kr.remoteText.getterName]().trigger(f)},addtrack(d){s.addTrack(d.track)},removetrack(d){s.removeTrack(d.track)}},o=function(){const d=[];for(let f=0;f<s.length;f++){let v=!1;for(let g=0;g<i.length;g++)if(i[g]===s[f]){v=!0;break}v||d.push(s[f])}for(;d.length;)s.removeTrack(d.shift())};this[e.getterName+"Listeners_"]=r,Object.keys(r).forEach(d=>{const f=r[d];i.addEventListener(d,f),this.on("dispose",v=>i.removeEventListener(d,f))}),this.on("loadstart",o),this.on("dispose",d=>this.off("loadstart",o))}proxyNativeTracks_(){es.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){const i=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(i,t),me.disposeMediaElement(t),t=i}else{t=m().createElement("video");const i=pi({},this.options_.tag&&yi(this.options_.tag));ue&&this.options_.nativeControlsForTouch===!0||delete i.controls,ki(t,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}this.options_.preload!==void 0&&an(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);const e=["loop","muted","playsinline","autoplay"];for(let i=0;i<e.length;i++){const s=e[i],r=this.options_[s];r!==void 0&&(r?an(t,s,s):Jn(t,s),t[s]=r)}return t}handleLateInit_(t){if(t.networkState===0||t.networkState===3)return;if(t.readyState===0){let i=!1;const s=function(){i=!0};this.on("loadstart",s);const r=function(){i||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",r),i||this.trigger("loadstart")})}const e=["loadstart"];e.push("loadedmetadata"),t.readyState>=2&&e.push("loadeddata"),t.readyState>=3&&e.push("canplay"),t.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(i){this.trigger(i)},this)})}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&De?this.el_.fastSeek(t):this.el_.currentTime=t}catch(e){ze(e,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Ki&&En&&this.el_.currentTime===0){const t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},e=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",e),this.on("dispose",()=>{this.off("webkitbeginfullscreen",e),this.off("webkitendfullscreen",t)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)vs(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(t===void 0)return this.el_.src;this.setSrc(t)}addSourceElement(t,e){if(!t)return ze.error("Invalid source URL."),!1;const i={src:t};e&&(i.type=e);const s=Ae("source",{},i);return this.el_.appendChild(s),!0}removeSourceElement(t){if(!t)return ze.error("Source URL is required to remove the source element."),!1;const e=this.el_.querySelectorAll("source");for(const i of e)if(i.src===t)return this.el_.removeChild(i),!0;return ze.warn(`No matching source element found with src: ${t}`),!1}reset(){me.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,e,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,i):super.addTextTrack(t,e,i)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);const e=m().createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e}addRemoteTextTrack(t,e){const i=super.addRemoteTextTrack(t,e);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){const e=this.$$("track");let i=e.length;for(;i--;)t!==e[i]&&t!==e[i].track||this.el().removeChild(e[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const t={};return this.el().webkitDroppedFrameCount!==void 0&&this.el().webkitDecodedFrameCount!==void 0&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),p().performance&&(t.creationTime=p().performance.now()),t}}gs(me,"TEST_VID",function(){if(!ni())return;const n=m().createElement("video"),t=m().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",n.appendChild(t),n}),me.isSupported=function(){try{me.TEST_VID.volume=.5}catch{return!1}return!(!me.TEST_VID||!me.TEST_VID.canPlayType)},me.canPlayType=function(n){return me.TEST_VID.canPlayType(n)},me.canPlaySource=function(n,t){return me.canPlayType(n.type)},me.canControlVolume=function(){try{const n=me.TEST_VID.volume;me.TEST_VID.volume=n/2+.1;const t=n!==me.TEST_VID.volume;return t&&pe?(p().setTimeout(()=>{me&&me.prototype&&(me.prototype.featuresVolumeControl=n!==me.TEST_VID.volume)}),!1):t}catch{return!1}},me.canMuteVolume=function(){try{const n=me.TEST_VID.muted;return me.TEST_VID.muted=!n,me.TEST_VID.muted?an(me.TEST_VID,"muted","muted"):Jn(me.TEST_VID,"muted"),n!==me.TEST_VID.muted}catch{return!1}},me.canControlPlaybackRate=function(){if(Ki&&En&&N<58)return!1;try{const n=me.TEST_VID.playbackRate;return me.TEST_VID.playbackRate=n/2+.1,n!==me.TEST_VID.playbackRate}catch{return!1}},me.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(m().createElement("video"),"src",{get:n,set:n}),Object.defineProperty(m().createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(m().createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(m().createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0},me.supportsNativeTextTracks=function(){return De||pe&&En},me.supportsNativeVideoTracks=function(){return!(!me.TEST_VID||!me.TEST_VID.videoTracks)},me.supportsNativeAudioTracks=function(){return!(!me.TEST_VID||!me.TEST_VID.audioTracks)},me.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,t]){gs(me.prototype,n,()=>me[t](),!0)}),me.prototype.featuresVolumeControl=me.canControlVolume(),me.prototype.movingMediaElementInDOM=!pe,me.prototype.featuresFullscreenResize=!0,me.prototype.featuresProgressEvents=!0,me.prototype.featuresTimeupdateEvents=!0,me.prototype.featuresVideoFrameCallback=!(!me.TEST_VID||!me.TEST_VID.requestVideoFrameCallback),me.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}},me.resetMediaElement=function(n){if(!n)return;const t=n.querySelectorAll("source");let e=t.length;for(;e--;)n.removeChild(t[e]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){me.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){me.prototype["set"+Wi(n)]=function(t){this.el_[n]=t,t?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){me.prototype[n]=function(){return this.el_[n]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){me.prototype["set"+Wi(n)]=function(t){this.el_[n]=t}}),["pause","load","play"].forEach(function(n){me.prototype[n]=function(){return this.el_[n]()}}),Ke.withSourceHandlers(me),me.nativeSourceHandler={},me.nativeSourceHandler.canPlayType=function(n){try{return me.TEST_VID.canPlayType(n)}catch{return""}},me.nativeSourceHandler.canHandleSource=function(n,t){if(n.type)return me.nativeSourceHandler.canPlayType(n.type);if(n.src){const e=Fo(n.src);return me.nativeSourceHandler.canPlayType(`video/${e}`)}return""},me.nativeSourceHandler.handleSource=function(n,t,e){t.setSrc(n.src)},me.nativeSourceHandler.dispose=function(){},me.registerSourceHandler(me.nativeSourceHandler),Ke.registerTech("Html5",me);const _c=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ul={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},cl=["tiny","xsmall","small","medium","large","xlarge","huge"],Ua={};cl.forEach(n=>{const t=n.charAt(0)==="x"?`x-${n.substring(1)}`:n;Ua[n]=`vjs-layout-${t}`});const lp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Di extends kt{constructor(t,e,i){if(t.id=t.id||e.id||`vjs_video_${oe()}`,(e=Object.assign(Di.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language){const o=t.closest("[lang]");o&&(e.language=o.getAttribute("lang"))}if(super(null,e,i),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=wn(this.id_),this.fsApi_=Hn,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&yi(t),this.language(this.options_.language),e.languages){const o={};Object.getOwnPropertyNames(e.languages).forEach(function(d){o[d.toLowerCase()]=e.languages[d]}),this.languages_=o}else this.languages_=Di.prototype.options_.languages;this.resetCache_(),this.poster_=e.poster||"",this.controls_=!!e.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Lo(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Mn(m(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=pi(this.options_);if(e.plugins&&Object.keys(e.plugins).forEach(o=>{this[o](e.plugins[o])}),e.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(e.playbackRates),e.experimentalSvgIcons){const o=new(p()).DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`,"image/svg+xml");if(o.querySelector("parsererror"))ze.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const d=o.documentElement;d.style.display="none",this.el_.appendChild(d),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(t.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),e.spatialNavigation&&e.spatialNavigation.enabled&&(this.spatialNavigation=new ep(this),this.addClass("vjs-spatial-navigation-enabled")),ue&&this.addClass("vjs-touch-enabled"),pe||this.addClass("vjs-workinghover"),Di.players[this.id_]=this;const r=Vn.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),fn(m(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),fn(m(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Di.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Oa.hasOwnProperty(this.id())&&delete Oa[this.id()],bn.names.forEach(t=>{const e=this[bn[t].getterName]();e&&e.off&&e.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t,e=this.tag,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:s||(t=this.el_=super.createEl("div"));const r=yi(e);if(s){for(t=this.el_=e,e=this.tag=m().createElement("video");t.children.length;)e.appendChild(t.firstChild);Kn(t,"video-js")||Qn(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(f=>{try{e[f]=t[f]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",En&&ot&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(f){s&&f==="class"||t.setAttribute(f,r[f]),s&&e.setAttribute(f,r[f])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(f=>We[f]).map(f=>"vjs-device-"+f.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),p().VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Mi("vjs-styles-dimensions");const f=Bi(".vjs-styles-defaults"),v=Bi("head");v.insertBefore(this.styleEl_,f?f.nextSibling:v.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const d=e.getElementsByTagName("a");for(let f=0;f<d.length;f++){const v=d.item(f);Qn(v,"vjs-hidden"),v.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),or(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(t){if(t===void 0)return this.techGet_("crossOrigin");t===null||t==="anonymous"||t==="use-credentials"?(this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)):ze.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,e){const i=t+"_";if(e===void 0)return this[i]||0;if(e===""||e==="auto")return this[i]=void 0,void this.updateStyleEl_();const s=parseFloat(e);isNaN(s)?ze.error(`Improper value "${e}" supplied for for ${t}`):(this[i]=s,this.updateStyleEl_())}fluid(t){if(t===void 0)return!!this.fluid_;var e,i;this.fluid_=!!t,Os(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),i=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},Os(e=this)?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(p().VIDEOJS_NO_DYNAMIC_STYLE===!0){const d=typeof this.width_=="number"?this.width_:this.options_.width,f=typeof this.height_=="number"?this.height_:this.options_.height,v=this.tech_&&this.tech_.el();return void(v&&(d>=0&&(v.width=d),f>=0&&(v.height=f)))}let t,e,i,s;i=this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const r=i.split(":"),o=r[1]/r[0];t=this.width_!==void 0?this.width_:this.height_!==void 0?this.height_/o:this.videoWidth()||300,e=this.height_!==void 0?this.height_:t*o,s=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(s),Cn(this.styleEl_,`
      .${s} {
        width: ${t}px;
        height: ${e}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${100*o}%;
      }
    `)}loadTech_(t,e){this.tech_&&this.unloadTech_();const i=Wi(t),s=t.charAt(0).toLowerCase()+t.slice(1);i!=="Html5"&&this.tag&&(Ke.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const o={source:e,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};bn.names.forEach(g=>{const O=bn[g];o[O.getterName]=this[O.privateName]}),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[s]),Object.assign(o,this.options_[t.toLowerCase()]),this.tag&&(o.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const d=Ke.getTech(t);if(!d)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);var f,v;this.tech_=new d(o),this.tech_.ready(Pi(this,this.handleTechReady_),!0),f=this.textTracksJson_||[],v=this.tech_,f.forEach(function(g){const O=v.addRemoteTextTrack(g).track;!g.src&&g.cues&&g.cues.forEach(A=>O.addCue(A))}),v.textTracks(),_c.forEach(g=>{this.on(this.tech_,g,O=>this[`handleTech${Wi(g)}_`](O))}),Object.keys(ul).forEach(g=>{this.on(this.tech_,g,O=>{this.tech_.playbackRate()===0&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${ul[g]}_`].bind(this),event:O}):this[`handleTech${ul[g]}_`](O)})}),this.on(this.tech_,"loadstart",g=>this.handleTechLoadStart_(g)),this.on(this.tech_,"sourceset",g=>this.handleTechSourceset_(g)),this.on(this.tech_,"waiting",g=>this.handleTechWaiting_(g)),this.on(this.tech_,"ended",g=>this.handleTechEnded_(g)),this.on(this.tech_,"seeking",g=>this.handleTechSeeking_(g)),this.on(this.tech_,"play",g=>this.handleTechPlay_(g)),this.on(this.tech_,"pause",g=>this.handleTechPause_(g)),this.on(this.tech_,"durationchange",g=>this.handleTechDurationChange_(g)),this.on(this.tech_,"fullscreenchange",(g,O)=>this.handleTechFullscreenChange_(g,O)),this.on(this.tech_,"fullscreenerror",(g,O)=>this.handleTechFullscreenError_(g,O)),this.on(this.tech_,"enterpictureinpicture",g=>this.handleTechEnterPictureInPicture_(g)),this.on(this.tech_,"leavepictureinpicture",g=>this.handleTechLeavePictureInPicture_(g)),this.on(this.tech_,"error",g=>this.handleTechError_(g)),this.on(this.tech_,"posterchange",g=>this.handleTechPosterChange_(g)),this.on(this.tech_,"textdata",g=>this.handleTechTextData_(g)),this.on(this.tech_,"ratechange",g=>this.handleTechRateChange_(g)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||i==="Html5"&&this.tag||or(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){bn.names.forEach(t=>{const e=bn[t];this[e.privateName]=this[e.getterName]()}),this.textTracksJson_=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const r=_u(s.track);return s.src&&(r.src=s.src),r}).concat(Array.prototype.filter.call(t.textTracks(),function(s){return i.indexOf(s)===-1}).map(_u))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return t===void 0&&ze.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":Vn}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||typeof t!="string")return;const e=()=>{const s=this.muted();this.muted(!0);const r=()=>{this.muted(s)};this.playTerminatedQueue_.push(r);const o=this.play();if(Jr(o))return o.catch(d=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${d||""}`)})};let i;return t!=="any"||this.muted()?i=t!=="muted"||this.muted()?this.play():e():(i=this.play(),Jr(i)&&(i=i.catch(e))),Jr(i)?i.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})}):void 0}updateSourceCaches_(t=""){let e=t,i="";typeof e!="string"&&(e=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!i&&(i=((f,v)=>{if(!v)return"";if(f.cache_.source.src===v&&f.cache_.source.type)return f.cache_.source.type;const g=f.cache_.sources.filter(A=>A.src===v);if(g.length)return g[0].type;const O=f.$$("source");for(let A=0;A<O.length;A++){const W=O[A];if(W.type&&W.src&&W.src===v)return W.type}return Da(v)})(this,e)),this.cache_.source=pi({},t,{src:e,type:i});const s=this.cache_.sources.filter(f=>f.src&&f.src===e),r=[],o=this.$$("source"),d=[];for(let f=0;f<o.length;f++){const v=yi(o[f]);r.push(v),v.src&&v.src===e&&d.push(v.src)}d.length&&!s.length?this.cache_.sources=r:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e}handleTechSourceset_(t){if(!this.changingSrc_){let e=r=>this.updateSourceCaches_(r);const i=this.currentSource().src,s=t.src;i&&!/^blob:/.test(i)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==i)&&(e=()=>{}),e(s),t.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const t=this.currentTime(),e=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",e))};this.on("timeupdate",e)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(this.options_!==void 0&&this.options_.userActions!==void 0&&this.options_.userActions.click!==void 0&&this.options_.userActions.click===!1||(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?vs(this.play()):this.pause()))}handleTechDoubleClick_(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),e=>e.contains(t.target))||this.options_!==void 0&&this.options_.userActions!==void 0&&this.options_.userActions.doubleClick!==void 0&&this.options_.userActions.doubleClick===!1||(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isInPictureInPicture()&&!m().pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){const e=t.target.player;if(e&&e!==this)return;const i=this.el();let s=m()[this.fsApi_.fullscreenElement]===i;!s&&i.matches&&(s=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(t,e){e&&(e.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(e.isFullscreen))}handleTechFullscreenError_(t,e){this.trigger("fullscreenerror",e)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){const t=this.tech_.error();t&&this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,e){this.ready(function(){if(t in Zh)return function(i,s,r,o){return s[r](i.reduce(qo(r),o))}(this.middleware_,this.tech_,t,e);if(t in ku)return xu(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(i){throw ze(i),i}},!0)}techGet_(t){if(this.tech_&&this.tech_.isReady_){if(t in Jh)return function(e,i,s){return e.reduceRight(qo(s),i[s]())}(this.middleware_,this.tech_,t);if(t in ku)return xu(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){throw this.tech_[t]===void 0?(ze(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,e),e):e.name==="TypeError"?(ze(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,e),this.tech_.isReady_=!1,e):(ze(e),e)}}}play(){return new Promise(t=>{this.play_(t)})}play_(t=vs){this.playCallbacks_.push(t);const e=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(De||pe);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!e)return this.waitToPlay_=r=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!e&&i&&this.load());const s=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(e){e()})}runPlayCallbacks_(t){const e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(i){i(t)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||ls(0,0)}scrubbing(t){if(t===void 0)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){return t===void 0?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),this.cache_.initTime=0,void(isFinite(t)&&(this.cache_.currentTime=Number(t)))):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return t&&t.length||(t=ls(0,0)),t}seekable(){let t=this.techGet_("seekable");return t&&t.length||(t=ls(0,0)),t}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return yu(this.buffered(),this.duration())}bufferedEnd(){const t=this.buffered(),e=this.duration();let i=t.end(t.length-1);return i>e&&(i=e),i}volume(t){let e;return t!==void 0?(e=Math.max(0,Math.min(1,t)),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)}muted(t){if(t===void 0)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)}defaultMuted(t){return t!==void 0&&this.techCall_("setDefaultMuted",t),this.techGet_("defaultMuted")||!1}lastVolume_(t){if(t===void 0||t===0)return this.cache_.lastVolume;this.cache_.lastVolume=t}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(t!==void 0){const e=this.isFullscreen_;return this.isFullscreen_=!!t,this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();const e=this;return new Promise((i,s)=>{function r(){e.off("fullscreenerror",d),e.off("fullscreenchange",o)}function o(){r(),i()}function d(v,g){r(),s(g)}e.one("fullscreenchange",o),e.one("fullscreenerror",d);const f=e.requestFullscreenHelper_(t);f&&(f.then(r,r),f.then(i,s))})}requestFullscreenHelper_(t){let e;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(e=t)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](e);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==1?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const t=this;return new Promise((e,i)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",r)}function r(){s(),e()}function o(f,v){s(),i(v)}t.one("fullscreenchange",r),t.one("fullscreenerror",o);const d=t.exitFullscreenHelper_();d&&(d.then(s,s),d.then(e,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const t=m()[this.fsApi_.exitFullscreen]();return t&&vs(t.then(()=>this.isFullscreen(!1))),t}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==1?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=m().documentElement.style.overflow,Mn(m(),"keydown",this.boundFullWindowOnEscKey_),m().documentElement.style.overflow="hidden",Qn(m().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){t.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,fn(m(),"keydown",this.boundFullWindowOnEscKey_),m().documentElement.style.overflow=this.docOrigOverflow,_e(m().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){return t!==void 0?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&p().documentPictureInPicture){const t=m().createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(Ae("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),p().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(e=>(je(e),this.el_.parentNode.insertBefore(t,this.el_),e.document.body.appendChild(this.el_),e.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:e}),e.addEventListener("pagehide",i=>{const s=i.target.querySelector(".video-js");t.parentNode.replaceChild(s,t),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),e))}return"pictureInPictureEnabled"in m()&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return p().documentPictureInPicture&&p().documentPictureInPicture.window?(p().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in m()?m().exitPictureInPicture():void 0}handleKeyDown(t){const{userActions:e}=this.options_;e&&e.hotkeys&&((i=>{const s=i.tagName.toLowerCase();return!!i.isContentEditable||(s==="input"?["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type)===-1:["textarea"].indexOf(s)!==-1)})(this.el_.ownerDocument.activeElement)||(typeof e.hotkeys=="function"?e.hotkeys.call(this,t):this.handleHotkeys(t)))}handleHotkeys(t){const e=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=o=>t.key.toLowerCase()==="f",muteKey:s=o=>t.key.toLowerCase()==="m",playPauseKey:r=o=>t.key.toLowerCase()==="k"||t.key.toLowerCase()===" "}=e;if(i.call(this,t)){t.preventDefault(),t.stopPropagation();const o=kt.getComponent("FullscreenToggle");m()[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,t)}else s.call(this,t)?(t.preventDefault(),t.stopPropagation(),kt.getComponent("MuteToggle").prototype.handleClick.call(this,t)):r.call(this,t)&&(t.preventDefault(),t.stopPropagation(),kt.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let e;for(let i=0,s=this.options_.techOrder;i<s.length;i++){const r=s[i];let o=Ke.getTech(r);if(o||(o=kt.getComponent(r)),o){if(o.isSupported()&&(e=o.canPlayType(t),e))return e}else ze.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(t){const e=this.options_.techOrder.map(d=>[d,Ke.getTech(d)]).filter(([d,f])=>f?f.isSupported():(ze.error(`The "${d}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(d,f,v){let g;return d.some(O=>f.some(A=>{if(g=v(O,A),g)return!0})),g};let s;const r=([d,f],v)=>{if(f.canPlaySource(v,this.options_[d.toLowerCase()]))return{source:v,tech:d}};var o;return s=this.options_.sourceOrder?i(t,e,(o=r,(d,f)=>o(f,d))):i(e,t,r),s||!1}handleSrc_(t,e){if(t===void 0)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=Au(t);if(i.length){if(this.changingSrc_=!0,e||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),Qh(this,i[0],(s,r)=>{if(this.middleware_=r,e||(this.cache_.sources=i),this.updateSourceCaches_(s),this.src_(s))return i.length>1?this.handleSrc_(i.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());var o,d;o=r,d=this.tech_,o.forEach(f=>f.setTech&&f.setTech(d))}),i.length>1){const s=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},r=()=>{this.off("error",s)};this.one("error",s),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",r)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(t){return this.handleSrc_(t,!1)}src_(t){const e=this.selectSource([t]);return!e||(hu(e.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(e.tech,e.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}addSourceElement(t,e){return!!this.tech_&&this.tech_.addSourceElement(t,e)}removeSourceElement(t){return!!this.tech_&&this.tech_.removeSourceElement(t)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():vs(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Os(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:t,durationDisplay:e,progressControl:i,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:r}=i||{};t&&t.updateContent(),e&&e.updateContent(),s&&s.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const t=this.currentSource(),e=[];return Object.keys(t).length!==0&&e.push(t),this.cache_.sources||e}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){return t!==void 0?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")}autoplay(t){if(t===void 0)return this.options_.autoplay||!1;let e;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),e=!1):this.options_.autoplay=!!t,e=e===void 0?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)}playsinline(t){return t!==void 0&&(this.techCall_("setPlaysinline",t),this.options_.playsinline=t),this.techGet_("playsinline")}loop(t){return t!==void 0?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")}poster(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(t===void 0)return this.error_||null;if(Dn("beforeerror").forEach(e=>{const i=e(this,t);hn(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null?t=i:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&t.code===4){const e=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e),void this.one("loadstart",function(){this.off(["click","touchstart"],e)})}if(t===null)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Fi(t),this.addClass("vjs-error"),ze.error(`(CODE:${this.error_.code} ${Fi.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Dn("error").forEach(e=>e(this,this.error_))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(t===void 0)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,e,i;const s=Pi(this,this.reportUserActivity),r=function(f){s(),this.clearInterval(t)};this.on("mousedown",function(){s(),this.clearInterval(t),t=this.setInterval(s,250)}),this.on("mousemove",function(f){f.screenX===e&&f.screenY===i||(e=f.screenX,i=f.screenY,s())}),this.on("mouseup",r),this.on("mouseleave",r);const o=this.getChild("controlBar");let d;!o||pe||Ki||(o.on("mouseenter",function(f){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),o.on("mouseleave",function(f){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(d);const f=this.options_.inactivityTimeout;f<=0||(d=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},f))},250)}playbackRate(t){if(t===void 0)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)}defaultPlaybackRate(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(t===void 0)return!!this.isAudio_;this.isAudio_=!!t}updatePlayerHeightOnAudioOnlyMode_(){const t=this.getChild("ControlBar");t&&this.audioOnlyCache_.controlBarHeight!==t.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=t.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const t=this.children(),e=this.getChild("ControlBar"),i=e&&e.currentHeight();t.forEach(s=>{s!==e&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return typeof t!="boolean"||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(t,e,i){if(this.tech_)return this.tech_.addTextTrack(t,e,i)}addRemoteTextTrack(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)}removeRemoteTextTrack(t={}){let{track:e}=t;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Os(this)&&this.trigger("languagechange"))}languages(){return pi(Di.prototype.options_.languages,this.languages_)}toJSON(){const t=pi(this.options_),e=t.tracks;t.tracks=[];for(let i=0;i<e.length;i++){let s=e[i];s=pi(s),s.player=void 0,t.tracks[i]=s}return t}createModal(t,e){(e=e||{}).content=t||"";const i=new Cr(this,e);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const t=this.currentBreakpoint(),e=this.currentWidth();for(let i=0;i<cl.length;i++){const s=cl[i];if(e<=this.breakpoints_[s]){if(t===s)return;t&&this.removeClass(Ua[t]),this.addClass(Ua[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return t===void 0||(this.breakpoint_="",this.breakpoints_=Object.assign({},lp,t),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(t){return t===void 0?this.responsive_:(t=!!t)!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Ua[this.breakpoint_]||""}loadMedia(t,e){if(!t||typeof t!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=pi(t);const{artist:s,artwork:r,description:o,poster:d,src:f,textTracks:v,title:g}=this.cache_.media;!r&&d&&(this.cache_.media.artwork=[{src:d,type:Da(d)}]),i&&this.crossOrigin(i),f&&this.src(f),d&&this.poster(d),Array.isArray(v)&&v.forEach(O=>this.addRemoteTextTrack(O,!1)),this.titleBar&&this.titleBar.update({title:g,description:o||s||""}),this.ready(e)}getMedia(){if(!this.cache_.media){const t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),i=>({kind:i.kind,label:i.label,language:i.language,src:i.src}))};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Da(e.poster)}]),e}return pi(this.cache_.media)}static getTagSettings(t){const e={sources:[],tracks:[]},i=yi(t),s=i["data-setup"];if(Kn(t,"vjs-fill")&&(i.fill=!0),Kn(t,"vjs-fluid")&&(i.fluid=!0),s!==null)try{Object.assign(i,JSON.parse(s||"{}"))}catch(r){ze.error("data-setup",r)}if(Object.assign(e,i),t.hasChildNodes()){const r=t.childNodes;for(let o=0,d=r.length;o<d;o++){const f=r[o],v=f.nodeName.toLowerCase();v==="source"?e.sources.push(yi(f)):v==="track"&&e.tracks.push(yi(f))}}return e}debug(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(t===void 0)return this.cache_.playbackRates;Array.isArray(t)&&t.every(e=>typeof e=="number")&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}}bn.names.forEach(function(n){const t=bn[n];Di.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Di.prototype.crossorigin=Di.prototype.crossOrigin,Di.players={};const na=p().navigator;Di.prototype.options_={techOrder:Ke.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:na&&(na.languages&&na.languages[0]||na.userLanguage||na.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1},_c.forEach(function(n){Di.prototype[`handleTech${Wi(n)}_`]=function(){return this.trigger(n)}}),kt.registerComponent("Player",Di);const ja="plugin",Or="activePlugins_",Lr={},Ba=n=>Lr.hasOwnProperty(n),Fa=n=>Ba(n)?Lr[n]:void 0,vc=(n,t)=>{n[Or]=n[Or]||{},n[Or][t]=!0},qa=(n,t,e)=>{const i=(e?"before":"")+"pluginsetup";n.trigger(i,t),n.trigger(i+":"+t.name,t)},bc=(n,t)=>(t.prototype.name=n,function(...e){qa(this,{name:n,plugin:t,instance:null},!0);const i=new t(this,...e);return this[n]=()=>i,qa(this,i.getEventHash()),i});class xn{constructor(t){if(this.constructor===xn)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Lo(this),delete this.trigger,du(this,this.constructor.defaultState),vc(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,e={}){return Er(this.eventBusEl_,t,this.getEventHash(e))}handleStateChanged(t){}dispose(){const{name:t,player:e}=this;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Or][t]=!1,this.player=this.state=null,e[t]=bc(t,Lr[t])}static isBasic(t){const e=typeof t=="string"?Fa(t):t;return typeof e=="function"&&!xn.prototype.isPrototypeOf(e.prototype)}static registerPlugin(t,e){if(typeof t!="string")throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(Ba(t))ze.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(Di.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if(typeof e!="function")throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof e}.`);return Lr[t]=e,t!==ja&&(xn.isBasic(e)?Di.prototype[t]=function(i,s){const r=function(){qa(this,{name:i,plugin:s,instance:null},!0);const o=s.apply(this,arguments);return vc(this,i),qa(this,{name:i,plugin:s,instance:o}),o};return Object.keys(s).forEach(function(o){r[o]=s[o]}),r}(t,e):Di.prototype[t]=bc(t,e)),e}static deregisterPlugin(t){if(t===ja)throw new Error("Cannot de-register base plugin.");Ba(t)&&(delete Lr[t],delete Di.prototype[t])}static getPlugins(t=Object.keys(Lr)){let e;return t.forEach(i=>{const s=Fa(i);s&&(e=e||{},e[i]=s)}),e}static getPluginVersion(t){const e=Fa(t);return e&&e.VERSION||""}}function us(n,t,e,i){return function(s,r){let o=!1;return function(...d){return o||ze.warn(s),o=!0,r.apply(this,d)}}(`${t} is deprecated and will be removed in ${n}.0; please use ${e} instead.`,i)}xn.getPlugin=Fa,xn.BASE_PLUGIN_NAME=ja,xn.registerPlugin(ja,xn),Di.prototype.usingPlugin=function(n){return!!this[Or]&&this[Or][n]===!0},Di.prototype.hasPlugin=function(n){return!!Ba(n)};const Tc=n=>n.indexOf("#")===0?n.slice(1):n;function _t(n,t,e){let i=_t.getPlayer(n);if(i)return t&&ze.warn(`Player "${n}" is already initialised. Options will not be applied.`),e&&i.ready(e),i;const s=typeof n=="string"?Bi("#"+Tc(n)):n;if(!Be(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const r="getRootNode"in s&&s.getRootNode()instanceof p().ShadowRoot?s.getRootNode():s.ownerDocument.body;s.ownerDocument.defaultView&&r.contains(s)||ze.warn("The element supplied is not included in the DOM"),(t=t||{}).restoreEl===!0&&(t.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),Dn("beforesetup").forEach(d=>{const f=d(s,pi(t));hn(f)&&!Array.isArray(f)?t=pi(t,f):ze.error("please return an object in beforesetup hooks")});const o=kt.getComponent("Player");return i=new o(s,t,e),Dn("setup").forEach(d=>d(i)),i}if(_t.hooks_=rn,_t.hooks=Dn,_t.hook=function(n,t){Dn(n,t)},_t.hookOnce=function(n,t){Dn(n,[].concat(t).map(e=>{const i=(...s)=>(ms(n,i),e(...s));return i}))},_t.removeHook=ms,p().VIDEOJS_NO_DYNAMIC_STYLE!==!0&&ni()){let n=Bi(".vjs-styles-defaults");if(!n){n=Mi("vjs-styles-defaults");const t=Bi("head");t&&t.insertBefore(n,t.firstChild),Cn(n,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}ke(1,_t),_t.VERSION=Vn,_t.options=Di.prototype.options_,_t.getPlayers=()=>Di.players,_t.getPlayer=n=>{const t=Di.players;let e;if(typeof n=="string"){const i=Tc(n),s=t[i];if(s)return s;e=Bi("#"+i)}else e=n;if(Be(e)){const{player:i,playerId:s}=e;if(i||t[s])return i||t[s]}},_t.getAllPlayers=()=>Object.keys(Di.players).map(n=>Di.players[n]).filter(Boolean),_t.players=Di.players,_t.getComponent=kt.getComponent,_t.registerComponent=(n,t)=>(Ke.isTech(t)&&ze.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),kt.registerComponent.call(kt,n,t)),_t.getTech=Ke.getTech,_t.registerTech=Ke.registerTech,_t.use=function(n,t){cr[n]=cr[n]||[],cr[n].push(t)},Object.defineProperty(_t,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(_t.middleware,"TERMINATOR",{value:La,writeable:!1,enumerable:!0}),_t.browser=We,_t.obj=Is,_t.mergeOptions=us(9,"videojs.mergeOptions","videojs.obj.merge",pi),_t.defineLazyProperty=us(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",gs),_t.bind=us(9,"videojs.bind","native Function.prototype.bind",Pi),_t.registerPlugin=xn.registerPlugin,_t.deregisterPlugin=xn.deregisterPlugin,_t.plugin=(n,t)=>(ze.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),xn.registerPlugin(n,t)),_t.getPlugins=xn.getPlugins,_t.getPlugin=xn.getPlugin,_t.getPluginVersion=xn.getPluginVersion,_t.addLanguage=function(n,t){return n=(""+n).toLowerCase(),_t.options.languages=pi(_t.options.languages,{[n]:t}),_t.options.languages[n]},_t.log=ze,_t.createLogger=wn,_t.time=Wh,_t.createTimeRange=us(9,"videojs.createTimeRange","videojs.time.createTimeRanges",ls),_t.createTimeRanges=us(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",ls),_t.formatTime=us(9,"videojs.formatTime","videojs.time.formatTime",ur),_t.setFormatTime=us(9,"videojs.setFormatTime","videojs.time.setFormatTime",mu),_t.resetFormatTime=us(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",gu),_t.parseUrl=us(9,"videojs.parseUrl","videojs.url.parseUrl",Bo),_t.isCrossOrigin=us(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Pa),_t.EventTarget=Un,_t.any=Io,_t.on=Mn,_t.one=xa,_t.off=fn,_t.trigger=Er,_t.xhr=P(),_t.TextTrack=Zr,_t.AudioTrack=Eu,_t.VideoTrack=Cu,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{_t[n]=function(){return ze.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),fi[n].apply(null,arguments)}}),_t.computedStyle=us(9,"videojs.computedStyle","videojs.dom.computedStyle",we),_t.dom=fi,_t.fn=$h,_t.num=np,_t.str=zh,_t.url=Kh,_t.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};class up{constructor(t){let e=this;return e.id=t.id,e.label=e.id,e.width=t.width,e.height=t.height,e.bitrate=t.bandwidth,e.frameRate=t.frameRate,e.enabled_=t.enabled,Object.defineProperty(e,"enabled",{get:()=>e.enabled_(),set(i){e.enabled_(i)}}),e}}class $a extends _t.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get:()=>t.selectedIndex_}),Object.defineProperty(t,"length",{get:()=>t.levels_.length}),t[Symbol.iterator]=()=>t.levels_.values(),t}addQualityLevel(t){let e=this.getQualityLevelById(t.id);if(e)return e;const i=this.levels_.length;return e=new up(t),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(e),this.trigger({qualityLevel:e,type:"addqualitylevel"}),e}removeQualityLevel(t){let e=null;for(let i=0,s=this.length;i<s;i++)if(this[i]===t){e=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return e&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),e}getQualityLevelById(t){for(let e=0,i=this.length;e<i;e++){const s=this[e];if(s.id===t)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}$a.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in $a.prototype.allowedEvents_)$a.prototype["on"+n]=null;var Sc="4.1.0";const wc=function(n){return function(t,e){const i=t.qualityLevels,s=new $a,r=function(){s.dispose(),t.qualityLevels=i,t.off("dispose",r)};return t.on("dispose",r),t.qualityLevels=()=>s,t.qualityLevels.VERSION=Sc,s}(this,_t.obj.merge({},n))};_t.registerPlugin("qualityLevels",wc),wc.VERSION=Sc;const kn=M,Va=(n,t)=>t&&t.responseURL&&n!==t.responseURL?t.responseURL:n,ns=n=>_t.log.debug?_t.log.debug.bind(_t,"VHS:",`${n} >`):function(){};function Si(...n){const t=_t.obj||_t;return(t.merge||t.mergeOptions).apply(t,n)}function gn(...n){const t=_t.time||_t;return(t.createTimeRanges||t.createTimeRanges).apply(t,n)}const Rs=1/30,bs=.1,Ec=function(n,t){const e=[];let i;if(n&&n.length)for(i=0;i<n.length;i++)t(n.start(i),n.end(i))&&e.push([n.start(i),n.end(i)]);return gn(e)},Dr=function(n,t){return Ec(n,function(e,i){return e-bs<=t&&i+bs>=t})},Ha=function(n,t){return Ec(n,function(e){return e-Rs>=t})},Cc=n=>{const t=[];if(!n||!n.length)return"";for(let e=0;e<n.length;e++)t.push(n.start(e)+" => "+n.end(e));return t.join(", ")},pr=n=>{const t=[];for(let e=0;e<n.length;e++)t.push({start:n.start(e),end:n.end(e)});return t},dl=function(n){if(n&&n.length&&n.end)return n.end(n.length-1)},hl=function(n,t){let e=0;if(!n||!n.length)return e;for(let i=0;i<n.length;i++){const s=n.start(i),r=n.end(i);t>r||(e+=t>s&&t<=r?r-t:r-s)}return e},pl=(n,t)=>{if(!t.preload)return t.duration;let e=0;return(t.parts||[]).forEach(function(i){e+=i.duration}),(t.preloadHints||[]).forEach(function(i){i.type==="PART"&&(e+=n.partTargetDuration)}),e},fl=n=>(n.segments||[]).reduce((t,e,i)=>(e.parts?e.parts.forEach(function(s,r){t.push({duration:s.duration,segmentIndex:i,partIndex:r,part:s,segment:e})}):t.push({duration:e.duration,segmentIndex:i,partIndex:null,segment:e,part:null}),t),[]),xc=n=>{const t=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return t&&t.parts||[]},kc=({preloadSegment:n})=>{if(!n)return;const{parts:t,preloadHints:e}=n;let i=(e||[]).reduce((s,r)=>s+(r.type==="PART"?1:0),0);return i+=t&&t.length?t.length:0,i},Ac=(n,t)=>{if(t.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const e=xc(t).length>0;return e&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:e&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Ic=function(n,t,e){if(t===void 0&&(t=n.mediaSequence+n.segments.length),t<n.mediaSequence)return 0;const i=function(r,o){let d=0,f=o-r.mediaSequence,v=r.segments[f];if(v){if(v.start!==void 0)return{result:v.start,precise:!0};if(v.end!==void 0)return{result:v.end-v.duration,precise:!0}}for(;f--;){if(v=r.segments[f],v.end!==void 0)return{result:d+v.end,precise:!0};if(d+=pl(r,v),v.start!==void 0)return{result:d+v.start,precise:!0}}return{result:d,precise:!1}}(n,t);if(i.precise)return i.result;const s=function(r,o){let d,f=0,v=o-r.mediaSequence;for(;v<r.segments.length;v++){if(d=r.segments[v],d.start!==void 0)return{result:d.start-f,precise:!0};if(f+=pl(r,d),d.end!==void 0)return{result:d.end-f,precise:!0}}return{result:-1,precise:!1}}(n,t);return s.precise?s.result:i.result+e},Pc=function(n,t,e){if(!n)return 0;if(typeof e!="number"&&(e=0),t===void 0){if(n.totalDuration)return n.totalDuration;if(!n.endList)return p()[1/0]}return Ic(n,t,e)},sa=function({defaultDuration:n,durationList:t,startIndex:e,endIndex:i}){let s=0;if(e>i&&([e,i]=[i,e]),e<0){for(let r=e;r<Math.min(0,i);r++)s+=n;e=0}for(let r=e;r<i;r++)s+=t[r].duration;return s},Oc=function(n,t,e,i){if(!n||!n.segments)return null;if(n.endList)return Pc(n);if(t===null)return null;t=t||0;let s=Ic(n,n.mediaSequence+n.segments.length,t);return e&&(s-=i=typeof i=="number"?i:Ac(null,n)),Math.max(0,s)},Lc=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},ml=function(n){return n.excludeUntil&&n.excludeUntil===1/0},za=function(n){const t=Lc(n);return!n.disabled&&!t},Dc=function(n,t){return t.attributes&&t.attributes[n]},gl=(n,t)=>{if(n.playlists.length===1)return!0;const e=t.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(i=>!!za(i)&&(i.attributes.BANDWIDTH||0)<e).length===0},yl=(n,t)=>!(!n&&!t||!n&&t||n&&!t||n!==t&&(!n.id||!t.id||n.id!==t.id)&&(!n.resolvedUri||!t.resolvedUri||n.resolvedUri!==t.resolvedUri)&&(!n.uri||!t.uri||n.uri!==t.uri)),Rc=function(n,t){const e=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let i=!1;for(const s in e){for(const r in e[s])if(i=t(e[s][r]),i)break;if(i)break}return!!i},ra=n=>{if(!n||!n.playlists||!n.playlists.length)return Rc(n,t=>t.playlists&&t.playlists.length||t.uri);for(let t=0;t<n.playlists.length;t++){const e=n.playlists[t],i=e.attributes&&e.attributes.CODECS;if((!i||!i.split(",").every(s=>Lt(s)))&&!Rc(n,s=>yl(e,s)))return!1}return!0};var An={liveEdgeDelay:Ac,duration:Pc,seekable:function(n,t,e){const i=t||0;let s=Oc(n,t,!0,e);return s===null?gn():(s<i&&(s=i),gn(i,s))},getMediaInfoForTime:function({playlist:n,currentTime:t,startingSegmentIndex:e,startingPartIndex:i,startTime:s,exactManifestTimings:r}){let o=t-s;const d=fl(n);let f=0;for(let v=0;v<d.length;v++){const g=d[v];if(e===g.segmentIndex&&(typeof i!="number"||typeof g.partIndex!="number"||i===g.partIndex)){f=v;break}}if(o<0){if(f>0)for(let v=f-1;v>=0;v--){const g=d[v];if(o+=g.duration,r){if(o<0)continue}else if(o+Rs<=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:s-sa({defaultDuration:n.targetDuration,durationList:d,startIndex:f,endIndex:v})}}return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:t}}if(f<0){for(let v=f;v<0;v++)if(o-=n.targetDuration,o<0)return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:t};f=0}for(let v=f;v<d.length;v++){const g=d[v];o-=g.duration;const O=g.duration>Rs;if(o!==0&&!(O&&o+Rs>=0)||v===d.length-1){if(r){if(o>0)continue}else if(o-Rs>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:s+sa({defaultDuration:n.targetDuration,durationList:d,startIndex:f,endIndex:v})}}}return{segmentIndex:d[d.length-1].segmentIndex,partIndex:d[d.length-1].partIndex,startTime:t}},isEnabled:za,isDisabled:function(n){return n.disabled},isExcluded:Lc,isIncompatible:ml,playlistEnd:Oc,isAes:function(n){for(let t=0;t<n.segments.length;t++)if(n.segments[t].key)return!0;return!1},hasAttribute:Dc,estimateSegmentRequestTime:function(n,t,e,i=0){return Dc("BANDWIDTH",e)?(n*e.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:gl,isAudioOnly:ra,playlistMatch:yl,segmentDurationWithParts:pl};const{log:Nc}=_t,Rr=(n,t)=>`${n}-${t}`,Mc=(n,t,e)=>`placeholder-uri-${n}-${t}-${e}`,Nr=(n,t)=>{n.mediaGroups&&["AUDIO","SUBTITLES"].forEach(e=>{if(n.mediaGroups[e])for(const i in n.mediaGroups[e])for(const s in n.mediaGroups[e][i]){const r=n.mediaGroups[e][i][s];t(r,e,i,s)}})},Uc=({playlist:n,uri:t,id:e})=>{n.id=e,n.playlistErrors_=0,t&&(n.uri=t),n.attributes=n.attributes||{}},jc=(n,t,e=Mc)=>{n.uri=t;for(let s=0;s<n.playlists.length;s++)if(!n.playlists[s].uri){const r=`placeholder-uri-${s}`;n.playlists[s].uri=r}const i=ra(n);Nr(n,(s,r,o,d)=>{if(!s.playlists||!s.playlists.length){if(i&&r==="AUDIO"&&!s.uri)for(let f=0;f<n.playlists.length;f++){const v=n.playlists[f];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===o)return}s.playlists=[G({},s)]}s.playlists.forEach(function(f,v){const g=e(r,o,d,f),O=Rr(v,g);f.uri?f.resolvedUri=f.resolvedUri||kn(n.uri,f.uri):(f.uri=v===0?g:O,f.resolvedUri=f.uri),f.id=f.id||O,f.attributes=f.attributes||{},n.playlists[f.id]=f,n.playlists[f.uri]=f})}),(s=>{let r=s.playlists.length;for(;r--;){const o=s.playlists[r];Uc({playlist:o,id:Rr(r,o.uri)}),o.resolvedUri=kn(s.uri,o.uri),s.playlists[o.id]=o,s.playlists[o.uri]=o,o.attributes.BANDWIDTH||Nc.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(n),(s=>{Nr(s,r=>{r.uri&&(r.resolvedUri=kn(s.uri,r.uri))})})(n)};class Bc{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(t=[]){if(this.offset_!==null||!t.length)return;const[e]=t;e.programDateTime!==void 0&&(this.offset_=e.programDateTime/1e3)}setPendingDateRanges(t=[]){if(!t.length)return;const[e]=t,i=e.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=t.reduce((s,r)=>(s.set(r.id,r),s),new Map)}processDateRange(t){this.pendingDateRanges_.delete(t.id),this.processedDateRanges_.set(t.id,t)}getDateRangesToProcess(){if(this.offset_===null)return[];const t={},e=[];this.pendingDateRanges_.forEach((i,s)=>{if(!this.processedDateRanges_.has(s)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),e.push(i),i.class))if(t[i.class]){const r=t[i.class].push(i);i.classListIndex=r-1}else t[i.class]=[i],i.classListIndex=0});for(const i of e){const s=t[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&s[i.classListIndex+1]?i.endTime=s[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return e}trimProcessedDateRanges_(t){new Map(this.processedDateRanges_).forEach((e,i)=>{e.startDate.getTime()<t&&this.processedDateRanges_.delete(i)})}}const fr=({requestType:n,request:t,error:e,parseFailure:i})=>{const s=t.status<200||t.status>299,r=t.status>=400&&t.status<=499,o={uri:t.uri,requestType:n},d=s&&!r||i;if(e&&r)o.error=G({},e),o.errorType=_t.Error.NetworkRequestFailed;else if(t.aborted)o.errorType=_t.Error.NetworkRequestAborted;else if(t.timedout)o.erroType=_t.Error.NetworkRequestTimeout;else if(d){const f=i?_t.Error.NetworkBodyParserFailed:_t.Error.NetworkBadStatus;o.errorType=f,o.status=t.status,o.headers=t.headers}return o},{EventTarget:cp}=_t,dp=(n,t)=>{if(!n)return t;const e=Si(n,t);if(n.preloadHints&&!t.preloadHints&&delete e.preloadHints,n.parts&&!t.parts)delete e.parts;else if(n.parts&&t.parts)for(let i=0;i<t.parts.length;i++)n.parts&&n.parts[i]&&(e.parts[i]=Si(n.parts[i],t.parts[i]));return!n.skipped&&t.skipped&&(e.skipped=!1),n.preload&&!t.preload&&(e.preload=!1),e},Fc=(n,t)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=kn(t,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=kn(t,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=kn(t,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=kn(t,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(e=>{e.resolvedUri||(e.resolvedUri=kn(t,e.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(e=>{e.resolvedUri||(e.resolvedUri=kn(t,e.uri))})},qc=function(n){const t=n.segments||[],e=n.preloadSegment;if(e&&e.parts&&e.parts.length){if(e.preloadHints){for(let i=0;i<e.preloadHints.length;i++)if(e.preloadHints[i].type==="MAP")return t}e.duration=n.targetDuration,e.preload=!0,t.push(e)}return t},$c=(n,t)=>n===t||n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence&&n.preloadSegment===t.preloadSegment,_l=(n,t,e=$c)=>{const i=Si(n,{}),s=i.playlists[t.id];if(!s||e(s,t))return null;t.segments=qc(t);const r=Si(s,t);if(r.preloadSegment&&!t.preloadSegment&&delete r.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(let o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}r.segments=((o,d,f)=>{const v=o.slice(),g=d.slice();f=f||0;const O=[];let A;for(let W=0;W<g.length;W++){const I=v[W+f],X=g[W];I?(A=I.map||A,O.push(dp(I,X))):(A&&!X.map&&(X.map=A),O.push(X))}return O})(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}r.segments.forEach(o=>{Fc(o,r.resolvedUri)});for(let o=0;o<i.playlists.length;o++)i.playlists[o].id===t.id&&(i.playlists[o]=r);return i.playlists[t.id]=r,i.playlists[t.uri]=r,Nr(n,(o,d,f,v)=>{if(o.playlists)for(let g=0;g<o.playlists.length;g++)t.id===o.playlists[g].id&&(o.playlists[g]=r)}),i},vl=(n,t)=>{const e=n.segments||[],i=e[e.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],r=s&&s.duration||i&&i.duration;return t&&r?1e3*r:500*(n.partTargetDuration||n.targetDuration||10)},Vc=(n,t,e)=>{if(!n)return;const i=[];return n.forEach(s=>{if(!s.attributes)return;const{BANDWIDTH:r,RESOLUTION:o,CODECS:d}=s.attributes;i.push({id:s.id,bandwidth:r,resolution:o,codecs:d})}),{type:t,isLive:e,renditions:i}};class Mr extends cp{constructor(t,e,i={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=ns("PlaylistLoader");const{withCredentials:s=!1}=i;this.src=t,this.vhs_=e,this.withCredentials=s,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const r=e.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new Bc,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const t=this.media();if(!t)return;this.dateRangesStorage_.setOffset(t.segments),this.dateRangesStorage_.setPendingDateRanges(t.dateRanges);const e=this.dateRangesStorage_.getDateRangesToProcess();e.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(e)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const t=this.media();let e=kn(this.main.uri,t.uri);this.llhls&&(e=((i,s)=>{if(s.endList||!s.serverControl)return i;const r={};if(s.serverControl.canBlockReload){const{preloadSegment:o}=s;let d=s.mediaSequence+s.segments.length;if(o){const f=o.parts||[],v=kc(s)-1;v>-1&&v!==f.length-1&&(r._HLS_part=v),(v>-1||f.length)&&d--}r._HLS_msn=d}if(s.serverControl&&s.serverControl.canSkipUntil&&(r._HLS_skip=s.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){const o=new(p()).URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(d){r.hasOwnProperty(d)&&o.searchParams.set(d,r[d])}),i=o.toString()}return i})(e,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:e,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,s)=>{if(this.request)return i?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}playlistRequestError(t,e,i){const{uri:s,id:r}=e;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[r],status:t.status,message:`HLS playlist request error at URL: ${s}.`,responseText:t.responseText,code:t.status>=500?4:2,metadata:fr({requestType:t.requestType,request:t,error:t.error})},this.trigger("error")}parseManifest_({url:t,manifestString:e}){try{return(({onwarn:i,oninfo:s,manifestString:r,customTagParsers:o=[],customTagMappers:d=[],llhls:f})=>{const v=new Dt;i&&v.on("warn",i),s&&v.on("info",s),o.forEach(A=>v.addParser(A)),d.forEach(A=>v.addTagMapper(A)),v.push(r),v.end();const g=v.manifest;if(f||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(A){g.hasOwnProperty(A)&&delete g[A]}),g.segments&&g.segments.forEach(function(A){["parts","preloadHints"].forEach(function(W){A.hasOwnProperty(W)&&delete A[W]})})),!g.targetDuration){let A=10;g.segments&&g.segments.length&&(A=g.segments.reduce((W,I)=>Math.max(W,I.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${A}`}),g.targetDuration=A}const O=xc(g);if(O.length&&!g.partTargetDuration){const A=O.reduce((W,I)=>Math.max(W,I.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${A}`}),Nc.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),g.partTargetDuration=A}return g})({onwarn:({message:i})=>this.logger_(`m3u8-parser warn for ${t}: ${i}`),oninfo:({message:i})=>this.logger_(`m3u8-parser info for ${t}: ${i}`),manifestString:e,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(i){this.error=i,this.error.metadata={errorType:_t.Error.StreamingHlsPlaylistParserError,error:i}}}haveMetadata({playlistString:t,playlistObject:e,url:i,id:s}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:r});const o=e||this.parseManifest_({url:i,manifestString:t});o.lastRequest=Date.now(),Uc({playlist:o,uri:i,id:s});const d=_l(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,d?(this.main=d,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(vl(this.media(),!!d)),r.parsedPlaylist=Vc(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),p().clearTimeout(this.mediaUpdateTimeout),p().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new Bc,this.off()}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,e){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(p().clearTimeout(this.finalRenditionTimeout),e){const d=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=p().setTimeout(this.media.bind(this,t,!1),d))}const i=this.state,s=!this.media_||t.id!==this.media_.id,r=this.main.playlists[t.id];if(r&&r.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(s&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(vl(t,!0)),!s)return;if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t;const o={playlistInfo:{type:"media",uri:t.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(d,f)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=Va(t.resolvedUri,f),d)return this.playlistRequestError(this.request,t,i);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:f.responseText,url:t.uri,id:t.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const e=this.media();if(t){const i=e?(e.partTargetDuration||e.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=p().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i)}else this.started?e&&!e.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=p().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,typeof this.src=="object")return this.src.uri||(this.src.uri=p().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);const t={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e,i)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:fr({requestType:i.requestType,request:i,error:e})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:t}),this.src=Va(this.src,i),this.trigger({type:"playlistparsestart",metadata:t});const s=this.parseManifest_({manifestString:i.responseText,url:this.src});t.parsedPlaylist=Vc(s.playlists,t.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:t}),this.setupInitialPlaylist(s)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists)return this.main=t,jc(this.main,this.srcUri()),t.playlists.forEach(i=>{i.segments=qc(i),i.segments.forEach(s=>{Fc(s,i.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const e=this.srcUri()||p().location.href;this.main=((i,s)=>{const r=Rr(0,s),o={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:p().location.href,resolvedUri:p().location.href,playlists:[{uri:s,id:r,resolvedUri:s,attributes:{}}]};return o.playlists[r]=o.playlists[0],o.playlists[s]=o.playlists[0],o})(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(t,e){const i=this.main,s=t.ID;let r=i.playlists.length;for(;r--;){const o=i.playlists[r];if(o.attributes["PATHWAY-ID"]===s){const d=o.resolvedUri,f=o.id;if(e){const v=this.createCloneURI_(o.resolvedUri,t),g=Rr(s,v),O=this.createCloneAttributes_(s,o.attributes),A=this.createClonePlaylist_(o,g,t,O);i.playlists[r]=A,i.playlists[g]=A,i.playlists[v]=A}else i.playlists.splice(r,1);delete i.playlists[f],delete i.playlists[d]}}this.updateOrDeleteCloneMedia(t,e)}updateOrDeleteCloneMedia(t,e){const i=this.main,s=t.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(i.mediaGroups[r]&&i.mediaGroups[r][s]){for(const o in i.mediaGroups[r])if(o===s){for(const d in i.mediaGroups[r][o])i.mediaGroups[r][o][d].playlists.forEach((f,v)=>{const g=i.playlists[f.id],O=g.id,A=g.resolvedUri;delete i.playlists[O],delete i.playlists[A]});delete i.mediaGroups[r][o]}}}),e&&this.createClonedMediaGroups_(t)}addClonePathway(t,e={}){const i=this.main,s=i.playlists.length,r=this.createCloneURI_(e.resolvedUri,t),o=Rr(t.ID,r),d=this.createCloneAttributes_(t.ID,e.attributes),f=this.createClonePlaylist_(e,o,t,d);i.playlists[s]=f,i.playlists[o]=f,i.playlists[r]=f,this.createClonedMediaGroups_(t)}createClonedMediaGroups_(t){const e=t.ID,i=t["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(s.mediaGroups[r]&&!s.mediaGroups[r][e]){for(const o in s.mediaGroups[r])if(o===i){s.mediaGroups[r][e]={};for(const d in s.mediaGroups[r][o]){const f=s.mediaGroups[r][o][d];s.mediaGroups[r][e][d]=G({},f);const v=s.mediaGroups[r][e][d],g=this.createCloneURI_(f.resolvedUri,t);v.resolvedUri=g,v.uri=g,v.playlists=[],f.playlists.forEach((O,A)=>{const W=s.playlists[O.id],I=Mc(r,e,d),X=Rr(e,I);if(W&&!s.playlists[X]){const dt=this.createClonePlaylist_(W,X,t),ht=dt.resolvedUri;s.playlists[X]=dt,s.playlists[ht]=dt}v.playlists[A]=this.createClonePlaylist_(O,X,t)})}}}})}createClonePlaylist_(t,e,i,s){const r=this.createCloneURI_(t.resolvedUri,i),o={resolvedUri:r,uri:r,id:e};return t.segments&&(o.segments=[]),s&&(o.attributes=s),Si(t,o)}createCloneURI_(t,e){const i=new URL(t);i.hostname=e["URI-REPLACEMENT"].HOST;const s=e["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(s))i.searchParams.set(r,s[r]);return i.href}createCloneAttributes_(t,e){const i={"PATHWAY-ID":t};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{e[s]&&(i[s]=t)}),i}getKeyIdSet(t){if(t.contentProtection){const e=new Set;for(const i in t.contentProtection){const s=t.contentProtection[i].attributes.keyId;s&&e.add(s.toLowerCase())}return e}}}const bl=function(n,t,e,i){const s=n.responseType==="arraybuffer"?n.response:n.responseText;!t&&s&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=s.byteLength||s.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),e.headers&&(n.responseHeaders=e.headers),t&&t.code==="ETIMEDOUT"&&(n.timedout=!0),t||n.aborted||e.statusCode===200||e.statusCode===206||e.statusCode===0||(t=new Error("XHR Failed with a response of: "+(n&&(s||n.responseText)))),i(t,n)},Hc=function(){const n=function t(e,i){e=Si({timeout:45e3},e);const s=t.beforeRequest||_t.Vhs.xhr.beforeRequest,r=t._requestCallbackSet||_t.Vhs.xhr._requestCallbackSet||new Set,o=t._responseCallbackSet||_t.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(_t.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(s));const d=_t.Vhs.xhr.original===!0?_t.xhr:_t.Vhs.xhr,f=((O,A)=>{if(!O||!O.size)return;let W=A;return O.forEach(I=>{W=I(W)}),W})(r,e);r.delete(s);const v=d(f||e,function(O,A){return((W,I,X,dt)=>{W&&W.size&&W.forEach(ht=>{ht(I,X,dt)})})(o,v,O,A),bl(v,O,A,i)}),g=v.abort;return v.abort=function(){return v.aborted=!0,g.apply(v,arguments)},v.uri=e.uri,v.requestType=e.requestType,v.requestTime=Date.now(),v};return n.original=!0,n},Tl=function(n){const t={};return n.byterange&&(t.Range=function(e){let i;const s=e.offset;return i=typeof e.offset=="bigint"||typeof e.length=="bigint"?p().BigInt(e.offset)+p().BigInt(e.length)-p().BigInt(1):e.offset+e.length-1,"bytes="+s+"-"+i}(n.byterange)),t},hp=function(n,t){return n.start(t)+"-"+n.end(t)},pp=function(n,t){const e=n.toString(16);return"00".substring(0,2-e.length)+e+(t%2?" ":"")},fp=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},zc=function(n){const t={};return Object.keys(n).forEach(e=>{const i=n[e];xe(i)?t[e]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[e]=i}),t},Wa=function(n){const t=n.byterange||{length:1/0,offset:0};return[t.length,t.offset,n.resolvedUri].join(",")},Wc=function(n){return n.resolvedUri},Gc=n=>{const t=Array.prototype.slice.call(n),e=16;let i,s,r="";for(let o=0;o<t.length/e;o++)i=t.slice(o*e,o*e+e).map(pp).join(""),s=t.slice(o*e,o*e+e).map(fp).join(""),r+=i+" "+s+`
`;return r};var mp=Object.freeze({__proto__:null,createTransferableMessage:zc,initSegmentId:Wa,segmentKeyId:Wc,hexDump:Gc,tagDump:({bytes:n})=>Gc(n),textRanges:n=>{let t,e="";for(t=0;t<n.length;t++)e+=hp(n,t)+" ";return e}});const Xc=({programTime:n,playlist:t,retryCount:e=2,seekTo:i,pauseAfterSeek:s=!0,tech:r,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(n===void 0||!t||!i)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!r.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!(O=>{if(!O.segments||O.segments.length===0)return!1;for(let A=0;A<O.segments.length;A++)if(!O.segments[A].dateTimeObject)return!1;return!0})(t))return o({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const d=((O,A)=>{let W;try{W=new Date(O)}catch{return null}if(!A||!A.segments||A.segments.length===0)return null;let I=A.segments[0];if(W<new Date(I.dateTimeObject))return null;for(let gt=0;gt<A.segments.length-1&&(I=A.segments[gt],!(W<new Date(A.segments[gt+1].dateTimeObject)));gt++);const X=A.segments[A.segments.length-1],dt=X.dateTimeObject,ht=X.videoTimingInfo?(lt=X.videoTimingInfo).transmuxedPresentationEnd-lt.transmuxedPresentationStart-lt.transmuxerPrependedSeconds:X.duration+.25*X.duration;var lt;return W>new Date(dt.getTime()+1e3*ht)?null:(W>new Date(dt)&&(I=X),{segment:I,estimatedStart:I.videoTimingInfo?I.videoTimingInfo.transmuxedPresentationStart:An.duration(A,A.mediaSequence+A.segments.indexOf(I)),type:I.videoTimingInfo?"accurate":"estimate"})})(n,t);if(!d)return o({message:`${n} was not found in the stream`});const f=d.segment,v=((O,A)=>{let W,I;try{W=new Date(O),I=new Date(A)}catch{}const X=W.getTime();return(I.getTime()-X)/1e3})(f.dateTimeObject,n);if(d.type==="estimate")return e===0?o({message:`${n} is not buffered yet. Try again`}):(i(d.estimatedStart+v),void r.one("seeked",()=>{Xc({programTime:n,playlist:t,retryCount:e-1,seekTo:i,pauseAfterSeek:s,tech:r,callback:o})}));const g=f.start+v;r.one("seeked",()=>o(null,r.currentTime())),s&&r.pause(),i(g)},Yc=(n,t)=>{if(n.readyState===4)return t()},{EventTarget:gp}=_t,Kc=function(n,t){if(!$c(n,t)||n.sidx&&t.sidx&&(n.sidx.offset!==t.sidx.offset||n.sidx.length!==t.sidx.length)||!n.sidx&&t.sidx||n.sidx&&!t.sidx||n.segments&&!t.segments||!n.segments&&t.segments)return!1;if(!n.segments&&!t.segments)return!0;for(let e=0;e<n.segments.length;e++){const i=n.segments[e],s=t.segments[e];if(i.uri!==s.uri)return!1;if(!i.byterange&&!s.byterange)continue;const r=i.byterange,o=s.byterange;if(r&&!o||!r&&o||r.offset!==o.offset||r.length!==o.length)return!1}return!0},yp=(n,t,e,i)=>`placeholder-uri-${n}-${t}-${i.attributes.NAME||e}`,_p=(n,t)=>(!n.map&&!t.map||!!(n.map&&t.map&&n.map.byterange.offset===t.map.byterange.offset&&n.map.byterange.length===t.map.byterange.length))&&n.uri===t.uri&&n.byterange.offset===t.byterange.offset&&n.byterange.length===t.byterange.length,Qc=(n,t)=>{const e={};for(const i in n){const s=n[i].sidx;if(s){const r=at(s);if(!t[r])break;const o=t[r].sidxInfo;_p(o,s)&&(e[r]=t[r])}}return e};class Sl extends gp{constructor(t,e,i={},s){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:r=!1}=i;if(this.vhs_=e,this.withCredentials=r,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=ns("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}get isPaused(){return this.isPaused_}requestErrored_(t,e,i){return!this.request||(this.request=null,t?(this.error=typeof t!="object"||t instanceof Error?{status:e.status,message:"DASH request error at URL: "+e.uri,response:e.response,code:2,metadata:t.metadata}:t,i&&(this.state=i),this.trigger("error"),!0):void 0)}addSidxSegments_(t,e,i){const s=t.sidx&&at(t.sidx);if(!t.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s])return p().clearTimeout(this.mediaRequest_),void(this.mediaRequest_=p().setTimeout(()=>i(!1),0));const r=Va(t.sidx.resolvedUri),o=(d,f)=>{if(this.requestErrored_(d,f,e))return;const v=this.mainPlaylistLoader_.sidxMapping_,{requestType:g}=f;let O;try{O=On()(Bt(f.response).subarray(8))}catch(A){return A.metadata=fr({requestType:g,request:f,parseFailure:!0}),void this.requestErrored_(A,f,e)}return v[s]={sidxInfo:t.sidx,sidx:O},Ze(t,O,t.sidx.resolvedUri),i(!0)};this.request=((d,f,v,g)=>{let O,A=[],W=!1;const I=function(lt,gt,Rt,vt){return gt.abort(),W=!0,v(lt,gt,Rt,vt)},X=function(lt,gt){if(W)return;if(lt)return lt.metadata=fr({requestType:g,request:gt,error:lt}),I(lt,gt,"",A);const Rt=gt.responseText.substring(A&&A.byteLength||0,gt.responseText.length);if(A=function(){for(var ct=arguments.length,Ct=new Array(ct),Ft=0;Ft<ct;Ft++)Ct[Ft]=arguments[Ft];if(Ct=Ct.filter(function(ie){return ie&&(ie.byteLength||ie.length)&&typeof ie!="string"}),Ct.length<=1)return Bt(Ct[0]);var ce=Ct.reduce(function(ie,ne,Re){return ie+(ne.byteLength||ne.length)},0),ae=new Uint8Array(ce),fe=0;return Ct.forEach(function(ie){ie=Bt(ie),ae.set(ie,fe),fe+=ie.byteLength}),ae}(A,$t(Rt,!0)),O=O||$n(A),A.length<10||O&&A.length<O+2)return Yc(gt,()=>I(lt,gt,"",A));const vt=Ln(A);return vt==="ts"&&A.length<188||!vt&&A.length<376?Yc(gt,()=>I(lt,gt,"",A)):I(null,gt,vt,A)},dt={uri:d,beforeSend(lt){lt.overrideMimeType("text/plain; charset=x-user-defined"),lt.addEventListener("progress",function({total:gt,loaded:Rt}){return bl(lt,null,{statusCode:lt.status},X)})}},ht=f(dt,function(lt,gt){return bl(ht,lt,gt,X)});return ht})(r,this.vhs_.xhr,(d,f,v,g)=>{if(d)return o(d,f);if(!v||v!=="mp4"){const W=v||"unknown";return o({status:f.status,message:`Unsupported ${W} container type for sidx segment at URL: ${r}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},f)}const{offset:O,length:A}=t.sidx.byterange;if(g.length>=A+O)return o(d,{response:g.subarray(O,O+A),status:f.status,uri:f.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:Tl({byterange:t.sidx.byterange})},o)},"dash-sidx")}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},p().clearTimeout(this.minimumUpdatePeriodTimeout_),p().clearTimeout(this.mediaRequest_),p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const e=this.state;if(typeof t=="string"){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}const i=!this.media_||t.id!==this.media_.id;if(i&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,e,s=>{this.haveMetadata({startingState:e,playlist:t})}))}haveMetadata({startingState:t,playlist:e}){this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,p().clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(e.id),t==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(p().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(t){this.isPaused_=!1,p().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const e=this.media();if(t){const i=e?e.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=p().setTimeout(()=>this.load(),i)}else this.started?e&&!e.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){if(this.started=!0,!this.isMain_)return p().clearTimeout(this.mediaRequest_),void(this.mediaRequest_=p().setTimeout(()=>this.haveMain_(),0));this.requestMain_((t,e)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(t){const e={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,s)=>{if(i){const{requestType:o}=s;i.metadata=fr({requestType:o,request:s,error:i})}if(this.requestErrored_(i,s))return void(this.state==="HAVE_NOTHING"&&(this.started=!1));this.trigger({type:"manifestrequestcomplete",metadata:e});const r=s.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?this.mainLoaded_=Date.parse(s.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Va(this.mainPlaylistLoader_.srcUrl,s),r?(this.handleMain_(),void this.syncClientServerClock_(()=>t(s,r))):t(s,r)})}syncClientServerClock_(t){const e=(i=this.mainPlaylistLoader_.mainXml_,(s=>{const r=Ie(s,"UTCTiming")[0];if(!r)return null;const o=ii(r);switch(o.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":o.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":o.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":o.method="DIRECT",o.value=Date.parse(o.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return o})(qn(i)));var i;return e===null?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()):e.method==="DIRECT"?(this.mainPlaylistLoader_.clientOffset_=e.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:kn(this.mainPlaylistLoader_.srcUrl,e.value),method:e.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(s,r)=>{if(!this.request)return;if(s){const{requestType:d}=r;return this.error.metadata=fr({requestType:d,request:r,error:s}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()}let o;o=e.method==="HEAD"?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):this.mainLoaded_:Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=o-Date.now(),t()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){p().clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const t=this.mainPlaylistLoader_.main,e={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let i;this.trigger({type:"manifestparsestart",metadata:e});try{i=(({mainXml:r,srcUrl:o,clientOffset:d,sidxMapping:f,previousManifest:v})=>{const g=((O,A={})=>{const W=((X,dt={})=>{const{manifestUri:ht="",NOW:lt=Date.now(),clientOffset:gt=0,eventHandler:Rt=function(){}}=dt,vt=Ie(X,"Period");if(!vt.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const ct=Ie(X,"Location"),Ct=ii(X),Ft=sn([{baseUrl:ht}],Ie(X,"BaseURL")),ce=Ie(X,"ContentSteering");Ct.type=Ct.type||"static",Ct.sourceDuration=Ct.mediaPresentationDuration||0,Ct.NOW=lt,Ct.clientOffset=gt,ct.length&&(Ct.locations=ct.map(ei));const ae=[];return vt.forEach((fe,ie)=>{const ne=ii(fe),Re=ae[ie-1];ne.start=(({attributes:He,priorPeriodAttributes:Fe,mpdType:Le})=>typeof He.start=="number"?He.start:Fe&&typeof Fe.start=="number"&&typeof Fe.duration=="number"?Fe.start+Fe.duration:Fe||Le!=="static"?null:0)({attributes:ne,priorPeriodAttributes:Re?Re.attributes:null,mpdType:Ct.type}),ae.push({node:fe,attributes:ne})}),{locations:Ct.locations,contentSteeringInfo:Pn(ce,Rt),representationInfo:xt(ae.map(_n(Ct,Ft))),eventStream:xt(ae.map(un))}})(qn(O),A),I=W.representationInfo.map(Se);return hi({dashPlaylists:I,locations:W.locations,contentSteering:W.contentSteeringInfo,sidxMapping:A.sidxMapping,previousManifest:A.previousManifest,eventStream:W.eventStream})})(r,{manifestUri:o,clientOffset:d,sidxMapping:f,previousManifest:v});return jc(g,o,yp),g})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t})}catch(r){this.error=r,this.error.metadata={errorType:_t.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}t&&(i=((r,o,d)=>{let f=!0,v=Si(r,{duration:o.duration,minimumUpdatePeriod:o.minimumUpdatePeriod,timelineStarts:o.timelineStarts});for(let g=0;g<o.playlists.length;g++){const O=o.playlists[g];if(O.sidx){const W=at(O.sidx);d&&d[W]&&d[W].sidx&&Ze(O,d[W].sidx,O.sidx.resolvedUri)}const A=_l(v,O,Kc);A&&(v=A,f=!1)}return Nr(o,(g,O,A,W)=>{if(g.playlists&&g.playlists.length){const I=g.playlists[0].id,X=_l(v,g.playlists[0],Kc);X&&(v=X,W in v.mediaGroups[O][A]||(v.mediaGroups[O][A][W]=g),v.mediaGroups[O][A][W].playlists[0]=v.playlists[I],f=!1)}}),((g,O)=>{Nr(g,(A,W,I,X)=>{O.mediaGroups[W][I]&&X in O.mediaGroups[W][I]||delete g.mediaGroups[W][I][X]})})(v,o),o.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(f=!1),f?null:v})(t,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||t;const s=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(s&&s!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=s),(!t||i&&i.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:r,endList:o}=i,d=[];i.playlists.forEach(v=>{d.push({id:v.id,bandwidth:v.attributes.BANDWIDTH,resolution:v.attributes.RESOLUTION,codecs:v.attributes.CODECS})});const f={duration:r,isLive:!o,renditions:d};e.parsedManifest=f,this.trigger({type:"manifestparsecomplete",metadata:e})}return!!i}updateMinimumUpdatePeriodTimeout_(){const t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(p().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let e=t.main&&t.main.minimumUpdatePeriod;e===0&&(t.media()?e=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof e!="number"||e<=0?e<0&&this.logger_(`found invalid minimumUpdatePeriod of ${e}, not setting a timeout`):this.createMUPTimeout_(e)}createMUPTimeout_(t){const e=this.mainPlaylistLoader_;e.minimumUpdatePeriodTimeout_=p().setTimeout(()=>{e.minimumUpdatePeriodTimeout_=null,e.trigger("minimumUpdatePeriod"),e.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,e)=>{e&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((i,s)=>{let r=Qc(i.playlists,s);return Nr(i,(o,d,f,v)=>{if(o.playlists&&o.playlists.length){const g=o.playlists;r=Si(r,Qc(g,s))}}),r})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const e=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==e[t];if(i?this.media_=e[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=p().setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},vl(this.media(),!!i)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(t){if(t&&this.mainPlaylistLoader_.main.eventStream){const e=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",e,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(t){if(t.contentProtection){const e=new Set;for(const i in t.contentProtection){const s=t.contentProtection[i].attributes["cenc:default_KID"];s&&e.add(s.replace(/-/g,"").toLowerCase())}return e}}}var on={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Jc=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},Zc=function(n){return function(){const t=function(s){try{return URL.createObjectURL(new Blob([s],{type:"application/javascript"}))}catch{const o=new BlobBuilder;return o.append(s),URL.createObjectURL(o.getBlob())}}(n),e=Jc(new Worker(t));e.objURL=t;const i=e.terminate;return e.on=e.addEventListener,e.off=e.removeEventListener,e.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},e}},td=function(n){return`var browserWorkerPolyFill = ${Jc.toString()};
browserWorkerPolyFill(self);
`+n},ed=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},vp=td(ed(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:u.g!==void 0?u.g:typeof self<"u"?self:{},t=function(){this.init=function(){var a={};this.on=function(l,h){a[l]||(a[l]=[]),a[l]=a[l].concat(h)},this.off=function(l,h){var c;return!!a[l]&&(c=a[l].indexOf(h),a[l]=a[l].slice(),a[l].splice(c,1),c>-1)},this.trigger=function(l){var h,c,_,C;if(h=a[l])if(arguments.length===2)for(_=h.length,c=0;c<_;++c)h[c].call(this,arguments[1]);else{for(C=[],c=arguments.length,c=1;c<arguments.length;++c)C.push(arguments[c]);for(_=h.length,c=0;c<_;++c)h[c].apply(this,C)}},this.dispose=function(){a={}}}};t.prototype.pipe=function(a){return this.on("data",function(l){a.push(l)}),this.on("done",function(l){a.flush(l)}),this.on("partialdone",function(l){a.partialFlush(l)}),this.on("endedtimeline",function(l){a.endTimeline(l)}),this.on("reset",function(l){a.reset(l)}),a},t.prototype.push=function(a){this.trigger("data",a)},t.prototype.flush=function(a){this.trigger("done",a)},t.prototype.partialFlush=function(a){this.trigger("partialdone",a)},t.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},t.prototype.reset=function(a){this.trigger("reset",a)};var e,i,s,r,o,d,f,v,g,O,A,W,I,X,dt,ht,lt,gt,Rt,vt,ct,Ct,Ft,ce,ae,fe,ie,ne,Re,He,Fe,Le,_i,Qi,Ss,cs,Bn,gr,ss,Gi,ds=t,qr=Math.pow(2,32),ln={getUint64:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength);return h.getBigUint64?(l=h.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(l):l:h.getUint32(0)*qr+h.getUint32(4)},MAX_UINT32:qr},Ja=ln.MAX_UINT32;(function(){var a;if(Ct={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array<"u"){for(a in Ct)Ct.hasOwnProperty(a)&&(Ct[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);Ft=new Uint8Array([105,115,111,109]),ae=new Uint8Array([97,118,99,49]),ce=new Uint8Array([0,0,0,1]),fe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ie=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ne={video:fe,audio:ie},Fe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),He=new Uint8Array([0,0,0,0,0,0,0,0]),Le=new Uint8Array([0,0,0,0,0,0,0,0]),_i=Le,Qi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ss=Le,Re=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),e=function(a){var l,h,c=[],_=0;for(l=1;l<arguments.length;l++)c.push(arguments[l]);for(l=c.length;l--;)_+=c[l].byteLength;for(h=new Uint8Array(_+8),new DataView(h.buffer,h.byteOffset,h.byteLength).setUint32(0,h.byteLength),h.set(a,4),l=0,_=8;l<c.length;l++)h.set(c[l],_),_+=c[l].byteLength;return h},i=function(){return e(Ct.dinf,e(Ct.dref,Fe))},s=function(a){return e(Ct.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},dt=function(a){return e(Ct.hdlr,ne[a])},X=function(a){var l=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(l[12]=a.samplerate>>>24&255,l[13]=a.samplerate>>>16&255,l[14]=a.samplerate>>>8&255,l[15]=255&a.samplerate),e(Ct.mdhd,l)},I=function(a){return e(Ct.mdia,X(a),dt(a.type),d(a))},o=function(a){return e(Ct.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},d=function(a){return e(Ct.minf,a.type==="video"?e(Ct.vmhd,Re):e(Ct.smhd,He),i(),lt(a))},f=function(a,l){for(var h=[],c=l.length;c--;)h[c]=Rt(l[c]);return e.apply(null,[Ct.moof,o(a)].concat(h))},v=function(a){for(var l=a.length,h=[];l--;)h[l]=A(a[l]);return e.apply(null,[Ct.moov,O(4294967295)].concat(h).concat(g(a)))},g=function(a){for(var l=a.length,h=[];l--;)h[l]=vt(a[l]);return e.apply(null,[Ct.mvex].concat(h))},O=function(a){var l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(Ct.mvhd,l)},ht=function(a){var l,h,c=a.samples||[],_=new Uint8Array(4+c.length);for(h=0;h<c.length;h++)l=c[h].flags,_[h+4]=l.dependsOn<<4|l.isDependedOn<<2|l.hasRedundancy;return e(Ct.sdtp,_)},lt=function(a){return e(Ct.stbl,gt(a),e(Ct.stts,Ss),e(Ct.stsc,_i),e(Ct.stsz,Qi),e(Ct.stco,Le))},gt=function(a){return e(Ct.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),a.type==="video"?cs(a):Bn(a))},cs=function(a){var l,h,c=a.sps||[],_=a.pps||[],C=[],R=[];for(l=0;l<c.length;l++)C.push((65280&c[l].byteLength)>>>8),C.push(255&c[l].byteLength),C=C.concat(Array.prototype.slice.call(c[l]));for(l=0;l<_.length;l++)R.push((65280&_[l].byteLength)>>>8),R.push(255&_[l].byteLength),R=R.concat(Array.prototype.slice.call(_[l]));if(h=[Ct.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(Ct.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([c.length],C,[_.length],R))),e(Ct.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var V=a.sarRatio[0],H=a.sarRatio[1];h.push(e(Ct.pasp,new Uint8Array([(4278190080&V)>>24,(16711680&V)>>16,(65280&V)>>8,255&V,(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H])))}return e.apply(null,h)},Bn=function(a){return e(Ct.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),s(a))},W=function(a){var l=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return e(Ct.tkhd,l)},Rt=function(a){var l,h,c,_,C,R;return l=e(Ct.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),C=Math.floor(a.baseMediaDecodeTime/Ja),R=Math.floor(a.baseMediaDecodeTime%Ja),h=e(Ct.tfdt,new Uint8Array([1,0,0,0,C>>>24&255,C>>>16&255,C>>>8&255,255&C,R>>>24&255,R>>>16&255,R>>>8&255,255&R])),a.type==="audio"?(c=ct(a,92),e(Ct.traf,l,h,c)):(_=ht(a),c=ct(a,_.length+92),e(Ct.traf,l,h,c,_))},A=function(a){return a.duration=a.duration||4294967295,e(Ct.trak,W(a),I(a))},vt=function(a){var l=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return a.type!=="video"&&(l[l.length-1]=0),e(Ct.trex,l)},Gi=function(a,l){var h=0,c=0,_=0,C=0;return a.length&&(a[0].duration!==void 0&&(h=1),a[0].size!==void 0&&(c=2),a[0].flags!==void 0&&(_=4),a[0].compositionTimeOffset!==void 0&&(C=8)),[0,0,h|c|_|C,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&l)>>>24,(16711680&l)>>>16,(65280&l)>>>8,255&l]},ss=function(a,l){var h,c,_,C,R,V;for(l+=20+16*(C=a.samples||[]).length,_=Gi(C,l),(c=new Uint8Array(_.length+16*C.length)).set(_),h=_.length,V=0;V<C.length;V++)R=C[V],c[h++]=(4278190080&R.duration)>>>24,c[h++]=(16711680&R.duration)>>>16,c[h++]=(65280&R.duration)>>>8,c[h++]=255&R.duration,c[h++]=(4278190080&R.size)>>>24,c[h++]=(16711680&R.size)>>>16,c[h++]=(65280&R.size)>>>8,c[h++]=255&R.size,c[h++]=R.flags.isLeading<<2|R.flags.dependsOn,c[h++]=R.flags.isDependedOn<<6|R.flags.hasRedundancy<<4|R.flags.paddingValue<<1|R.flags.isNonSyncSample,c[h++]=61440&R.flags.degradationPriority,c[h++]=15&R.flags.degradationPriority,c[h++]=(4278190080&R.compositionTimeOffset)>>>24,c[h++]=(16711680&R.compositionTimeOffset)>>>16,c[h++]=(65280&R.compositionTimeOffset)>>>8,c[h++]=255&R.compositionTimeOffset;return e(Ct.trun,c)},gr=function(a,l){var h,c,_,C,R,V;for(l+=20+8*(C=a.samples||[]).length,_=Gi(C,l),(h=new Uint8Array(_.length+8*C.length)).set(_),c=_.length,V=0;V<C.length;V++)R=C[V],h[c++]=(4278190080&R.duration)>>>24,h[c++]=(16711680&R.duration)>>>16,h[c++]=(65280&R.duration)>>>8,h[c++]=255&R.duration,h[c++]=(4278190080&R.size)>>>24,h[c++]=(16711680&R.size)>>>16,h[c++]=(65280&R.size)>>>8,h[c++]=255&R.size;return e(Ct.trun,h)},ct=function(a,l){return a.type==="audio"?gr(a,l):ss(a,l)};var la,Za,to,ua,eo,io,no,so,ro={ftyp:r=function(){return e(Ct.ftyp,Ft,ce,Ft,ae)},mdat:function(a){return e(Ct.mdat,a)},moof:f,moov:v,initSegment:function(a){var l,h=r(),c=v(a);return(l=new Uint8Array(h.byteLength+c.byteLength)).set(h),l.set(c,h.byteLength),l}},ao=function(a,l){var h={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return h.dataOffset=l,h.compositionTimeOffset=a.pts-a.dts,h.duration=a.duration,h.size=4*a.length,h.size+=a.byteLength,a.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},ca={groupNalsIntoFrames:function(a){var l,h,c=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,c.byteLength=0,l=0;l<a.length;l++)(h=a[l]).nalUnitType==="access_unit_delimiter_rbsp"?(c.length&&(c.duration=h.dts-c.dts,_.byteLength+=c.byteLength,_.nalCount+=c.length,_.duration+=c.duration,_.push(c)),(c=[h]).byteLength=h.data.byteLength,c.pts=h.pts,c.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(c.keyFrame=!0),c.duration=h.dts-c.dts,c.byteLength+=h.data.byteLength,c.push(h));return _.length&&(!c.duration||c.duration<=0)&&(c.duration=_[_.length-1].duration),_.byteLength+=c.byteLength,_.nalCount+=c.length,_.duration+=c.duration,_.push(c),_},groupFramesIntoGops:function(a){var l,h,c=[],_=[];for(c.byteLength=0,c.nalCount=0,c.duration=0,c.pts=a[0].pts,c.dts=a[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=a[0].pts,_.dts=a[0].dts,l=0;l<a.length;l++)(h=a[l]).keyFrame?(c.length&&(_.push(c),_.byteLength+=c.byteLength,_.nalCount+=c.nalCount,_.duration+=c.duration),(c=[h]).nalCount=h.length,c.byteLength=h.byteLength,c.pts=h.pts,c.dts=h.dts,c.duration=h.duration):(c.duration+=h.duration,c.nalCount+=h.length,c.byteLength+=h.byteLength,c.push(h));return _.length&&c.duration<=0&&(c.duration=_[_.length-1].duration),_.byteLength+=c.byteLength,_.nalCount+=c.nalCount,_.duration+=c.duration,_.push(c),_},extendFirstKeyFrame:function(a){var l;return!a[0][0].keyFrame&&a.length>1&&(l=a.shift(),a.byteLength-=l.byteLength,a.nalCount-=l.nalCount,a[0][0].dts=l.dts,a[0][0].pts=l.pts,a[0][0].duration+=l.duration),a},generateSampleTable:function(a,l){var h,c,_,C,R,V=l||0,H=[];for(h=0;h<a.length;h++)for(C=a[h],c=0;c<C.length;c++)R=C[c],V+=(_=ao(R,V)).size,H.push(_);return H},concatenateNalData:function(a){var l,h,c,_,C,R,V=0,H=a.byteLength,Z=a.nalCount,yt=new Uint8Array(H+4*Z),At=new DataView(yt.buffer);for(l=0;l<a.length;l++)for(_=a[l],h=0;h<_.length;h++)for(C=_[h],c=0;c<C.length;c++)R=C[c],At.setUint32(V,R.data.byteLength),V+=4,yt.set(R.data,V),V+=R.data.byteLength;return yt},generateSampleTableForFrame:function(a,l){var h,c=[];return h=ao(a,l||0),c.push(h),c},concatenateNalDataForFrame:function(a){var l,h,c=0,_=a.byteLength,C=a.length,R=new Uint8Array(_+4*C),V=new DataView(R.buffer);for(l=0;l<a.length;l++)h=a[l],V.setUint32(c,h.data.byteLength),c+=4,R.set(h.data,c),c+=h.data.byteLength;return R}},ws=[33,16,5,32,164,27],Dl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ei=function(a){for(var l=[];a--;)l.push(0);return l},Rl=9e4;io=function(a,l){return Za(eo(a,l))},no=function(a,l){return to(ua(a),l)},so=function(a,l,h){return ua(h?a:a-l)};var Ri={ONE_SECOND_IN_TS:Rl,secondsToVideoTs:Za=function(a){return a*Rl},secondsToAudioTs:to=function(a,l){return a*l},videoTsToSeconds:ua=function(a){return a/Rl},audioTsToSeconds:eo=function(a,l){return a/l},audioTsToVideoTs:io,videoTsToAudioTs:no,metadataTsToSeconds:so},oo=Ri,Jp={prefixWithSilence:function(a,l,h,c){var _,C,R,V,H,Z=0,yt=0,At=0;if(l.length&&(_=oo.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),C=Math.ceil(oo.ONE_SECOND_IN_TS/(a.samplerate/1024)),h&&c&&(Z=_-Math.max(h,c),At=(yt=Math.floor(Z/C))*C),!(yt<1||At>oo.ONE_SECOND_IN_TS/2))){for((R=function(){if(!la){var Qt={96e3:[ws,[227,64],Ei(154),[56]],88200:[ws,[231],Ei(170),[56]],64e3:[ws,[248,192],Ei(240),[56]],48e3:[ws,[255,192],Ei(268),[55,148,128],Ei(54),[112]],44100:[ws,[255,192],Ei(268),[55,163,128],Ei(84),[112]],32e3:[ws,[255,192],Ei(268),[55,234],Ei(226),[112]],24e3:[ws,[255,192],Ei(268),[55,255,128],Ei(268),[111,112],Ei(126),[224]],16e3:[ws,[255,192],Ei(268),[55,255,128],Ei(268),[111,255],Ei(269),[223,108],Ei(195),[1,192]],12e3:[Dl,Ei(268),[3,127,248],Ei(268),[6,255,240],Ei(268),[13,255,224],Ei(268),[27,253,128],Ei(259),[56]],11025:[Dl,Ei(268),[3,127,248],Ei(268),[6,255,240],Ei(268),[13,255,224],Ei(268),[27,255,192],Ei(268),[55,175,128],Ei(108),[112]],8e3:[Dl,Ei(268),[3,121,16],Ei(47),[7]]};se=Qt,la=Object.keys(se).reduce(function(Ge,si){return Ge[si]=new Uint8Array(se[si].reduce(function(ri,Ti){return ri.concat(Ti)},[])),Ge},{})}var se;return la}()[a.samplerate])||(R=l[0].data),V=0;V<yt;V++)H=l[0],l.splice(0,0,{data:R,dts:H.dts-C,pts:H.pts-C});return a.baseMediaDecodeTime-=Math.floor(oo.videoTsToAudioTs(At,a.samplerate)),At}},trimAdtsFramesByEarliestDts:function(a,l,h){return l.minSegmentDts>=h?a:(l.minSegmentDts=1/0,a.filter(function(c){return c.dts>=h&&(l.minSegmentDts=Math.min(l.minSegmentDts,c.dts),l.minSegmentPts=l.minSegmentDts,!0)}))},generateSampleTable:function(a){var l,h,c=[];for(l=0;l<a.length;l++)h=a[l],c.push({size:h.data.byteLength,duration:1024});return c},concatenateFrameData:function(a){var l,h,c=0,_=new Uint8Array(function(C){var R,V=0;for(R=0;R<C.length;R++)V+=C[R].data.byteLength;return V}(a));for(l=0;l<a.length;l++)h=a[l],_.set(h.data,c),c+=h.data.byteLength;return _}},Zp=Ri.ONE_SECOND_IN_TS,tf={clearDtsInfo:function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,l){var h,c=a.minSegmentDts;return l||(c-=a.timelineStartInfo.dts),h=a.timelineStartInfo.baseMediaDecodeTime,h+=c,h=Math.max(0,h),a.type==="audio"&&(h*=a.samplerate/Zp,h=Math.floor(h)),h},collectDtsInfo:function(a,l){typeof l.pts=="number"&&(a.timelineStartInfo.pts===void 0&&(a.timelineStartInfo.pts=l.pts),a.minSegmentPts===void 0?a.minSegmentPts=l.pts:a.minSegmentPts=Math.min(a.minSegmentPts,l.pts),a.maxSegmentPts===void 0?a.maxSegmentPts=l.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,l.pts)),typeof l.dts=="number"&&(a.timelineStartInfo.dts===void 0&&(a.timelineStartInfo.dts=l.dts),a.minSegmentDts===void 0?a.minSegmentDts=l.dts:a.minSegmentDts=Math.min(a.minSegmentDts,l.dts),a.maxSegmentDts===void 0?a.maxSegmentDts=l.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,l.dts))}},Yd={parseSei:function(a){for(var l=0,h={payloadType:-1,payloadSize:0},c=0,_=0;l<a.byteLength&&a[l]!==128;){for(;a[l]===255;)c+=255,l++;for(c+=a[l++];a[l]===255;)_+=255,l++;if(_+=a[l++],!h.payload&&c===4){if(String.fromCharCode(a[l+3],a[l+4],a[l+5],a[l+6])==="GA94"){h.payloadType=c,h.payloadSize=_,h.payload=a.subarray(l,l+_);break}h.payload=void 0}l+=_,c=0,_=0}return h},parseUserData:function(a){return a.payload[0]!==181||(a.payload[1]<<8|a.payload[2])!=49||String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])!=="GA94"||a.payload[7]!==3?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,l){var h,c,_,C,R=[];if(!(64&l[0]))return R;for(c=31&l[0],h=0;h<c;h++)C={type:3&l[2+(_=3*h)],pts:a},4&l[_+2]&&(C.ccData=l[_+3]<<8|l[_+4],R.push(C));return R},discardEmulationPreventionBytes:function(a){for(var l,h,c=a.byteLength,_=[],C=1;C<c-2;)a[C]===0&&a[C+1]===0&&a[C+2]===3?(_.push(C+2),C+=2):C++;if(_.length===0)return a;l=c-_.length,h=new Uint8Array(l);var R=0;for(C=0;C<l;R++,C++)R===_[0]&&(R++,_.shift()),h[C]=a[R];return h},USER_DATA_REGISTERED_ITU_T_T35:4},Nl=ds,lo=Yd,In=function(a){a=a||{},In.prototype.init.call(this),this.parse708captions_=typeof a.parse708captions!="boolean"||a.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ui(0,0),new Ui(0,1),new Ui(1,0),new Ui(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ii({captionServices:a.captionServices})),this.reset(),this.ccStreams_.forEach(function(l){l.on("data",this.trigger.bind(this,"data")),l.on("partialdone",this.trigger.bind(this,"partialdone")),l.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};In.prototype=new Nl,In.prototype.push=function(a){var l,h,c;if(a.nalUnitType==="sei_rbsp"&&(l=lo.parseSei(a.escapedRBSP)).payload&&l.payloadType===lo.USER_DATA_REGISTERED_ITU_T_T35&&(h=lo.parseUserData(l)))if(a.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));c=lo.parseCaptionPackets(a.pts,h),this.captionPackets_=this.captionPackets_.concat(c),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},In.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(l){return a==="flush"?l.flush():l.partialFlush()},this)},In.prototype.flushStream=function(a){this.captionPackets_.length?(this.captionPackets_.forEach(function(l,h){l.presortIndex=h}),this.captionPackets_.sort(function(l,h){return l.pts===h.pts?l.presortIndex-h.presortIndex:l.pts-h.pts}),this.captionPackets_.forEach(function(l){l.type<2?this.dispatchCea608Packet(l):this.dispatchCea708Packet(l)},this),this.captionPackets_.length=0,this.flushCCStreams(a)):this.flushCCStreams(a)},In.prototype.flush=function(){return this.flushStream("flush")},In.prototype.partialFlush=function(){return this.flushStream("partialFlush")},In.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},In.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),this.activeCea608Channel_[a.type]!==null&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},In.prototype.setsChannel1Active=function(a){return(30720&a.ccData)==4096},In.prototype.setsChannel2Active=function(a){return(30720&a.ccData)==6144},In.prototype.setsTextOrXDSActive=function(a){return(28928&a.ccData)==256||(30974&a.ccData)==4138||(30974&a.ccData)==6186},In.prototype.dispatchCea708Packet=function(a){this.parse708captions_&&this.cc708Stream_.push(a)};var ef={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},uo=function(a){return 32<=a&&a<=127||160<=a&&a<=255},Ms=function(a){this.windowNum=a,this.reset()};Ms.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ms.prototype.getText=function(){return this.rows.join(`
`)},Ms.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ms.prototype.newLine=function(a){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(a),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ms.prototype.isEmpty=function(){return this.rows.length===0||this.rows.length===1&&this.rows[0]===""},Ms.prototype.addText=function(a){this.rows[this.rowIdx]+=a},Ms.prototype.backspace=function(){if(!this.isEmpty()){var a=this.rows[this.rowIdx];this.rows[this.rowIdx]=a.substr(0,a.length-1)}};var co=function(a,l,h){this.serviceNum=a,this.text="",this.currentWindow=new Ms(-1),this.windows=[],this.stream=h,typeof l=="string"&&this.createTextDecoder(l)};co.prototype.init=function(a,l){this.startPts=a;for(var h=0;h<8;h++)this.windows[h]=new Ms(h),typeof l=="function"&&(this.windows[h].beforeRowOverflow=l)},co.prototype.setCurrentWindow=function(a){this.currentWindow=this.windows[a]},co.prototype.createTextDecoder=function(a){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(a)}catch(l){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+a+" encoding. "+l})}};var Ii=function(a){a=a||{},Ii.prototype.init.call(this);var l,h=this,c=a.captionServices||{},_={};Object.keys(c).forEach(C=>{l=c[C],/^SERVICE/.test(C)&&(_[C]=l.encoding)}),this.serviceEncodings=_,this.current708Packet=null,this.services={},this.push=function(C){C.type===3?(h.new708Packet(),h.add708Bytes(C)):(h.current708Packet===null&&h.new708Packet(),h.add708Bytes(C))}};Ii.prototype=new Nl,Ii.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ii.prototype.add708Bytes=function(a){var l=a.ccData,h=l>>>8,c=255&l;this.current708Packet.ptsVals.push(a.pts),this.current708Packet.data.push(h),this.current708Packet.data.push(c)},Ii.prototype.push708Packet=function(){var a=this.current708Packet,l=a.data,h=null,c=null,_=0,C=l[_++];for(a.seq=C>>6,a.sizeCode=63&C;_<l.length;_++)c=31&(C=l[_++]),(h=C>>5)==7&&c>0&&(h=C=l[_++]),this.pushServiceBlock(h,_,c),c>0&&(_+=c-1)},Ii.prototype.pushServiceBlock=function(a,l,h){var c,_=l,C=this.current708Packet.data,R=this.services[a];for(R||(R=this.initService(a,_));_<l+h&&_<C.length;_++)c=C[_],uo(c)?_=this.handleText(_,R):c===24?_=this.multiByteCharacter(_,R):c===16?_=this.extendedCommands(_,R):128<=c&&c<=135?_=this.setCurrentWindow(_,R):152<=c&&c<=159?_=this.defineWindow(_,R):c===136?_=this.clearWindows(_,R):c===140?_=this.deleteWindows(_,R):c===137?_=this.displayWindows(_,R):c===138?_=this.hideWindows(_,R):c===139?_=this.toggleWindows(_,R):c===151?_=this.setWindowAttributes(_,R):c===144?_=this.setPenAttributes(_,R):c===145?_=this.setPenColor(_,R):c===146?_=this.setPenLocation(_,R):c===143?R=this.reset(_,R):c===8?R.currentWindow.backspace():c===12?R.currentWindow.clearText():c===13?R.currentWindow.pendingNewLine=!0:c===14?R.currentWindow.clearText():c===141&&_++},Ii.prototype.extendedCommands=function(a,l){var h=this.current708Packet.data[++a];return uo(h)&&(a=this.handleText(a,l,{isExtended:!0})),a},Ii.prototype.getPts=function(a){return this.current708Packet.ptsVals[Math.floor(a/2)]},Ii.prototype.initService=function(a,l){var h,c,_=this;return(h="SERVICE"+a)in this.serviceEncodings&&(c=this.serviceEncodings[h]),this.services[a]=new co(a,c,_),this.services[a].init(this.getPts(l),function(C){_.flushDisplayed(C,_.services[a])}),this.services[a]},Ii.prototype.handleText=function(a,l,h){var c,_,C,R,V=h&&h.isExtended,H=h&&h.isMultiByte,Z=this.current708Packet.data,yt=V?4096:0,At=Z[a],Qt=Z[a+1],se=l.currentWindow;if(H?(_=[At,Qt],a++):_=[At],l.textDecoder_&&!V)c=l.textDecoder_.decode(new Uint8Array(_));else if(H){const Ge=_.map(si=>("0"+(255&si).toString(16)).slice(-2)).join("");c=String.fromCharCode(parseInt(Ge,16))}else R=ef[C=yt|At]||C,c=4096&C&&C===R?"":String.fromCharCode(R);return se.pendingNewLine&&!se.isEmpty()&&se.newLine(this.getPts(a)),se.pendingNewLine=!1,se.addText(c),a},Ii.prototype.multiByteCharacter=function(a,l){var h=this.current708Packet.data,c=h[a+1],_=h[a+2];return uo(c)&&uo(_)&&(a=this.handleText(++a,l,{isMultiByte:!0})),a},Ii.prototype.setCurrentWindow=function(a,l){var h=7&this.current708Packet.data[a];return l.setCurrentWindow(h),a},Ii.prototype.defineWindow=function(a,l){var h=this.current708Packet.data,c=h[a],_=7&c;l.setCurrentWindow(_);var C=l.currentWindow;return c=h[++a],C.visible=(32&c)>>5,C.rowLock=(16&c)>>4,C.columnLock=(8&c)>>3,C.priority=7&c,c=h[++a],C.relativePositioning=(128&c)>>7,C.anchorVertical=127&c,c=h[++a],C.anchorHorizontal=c,c=h[++a],C.anchorPoint=(240&c)>>4,C.rowCount=15&c,c=h[++a],C.columnCount=63&c,c=h[++a],C.windowStyle=(56&c)>>3,C.penStyle=7&c,C.virtualRowCount=C.rowCount+1,a},Ii.prototype.setWindowAttributes=function(a,l){var h=this.current708Packet.data,c=h[a],_=l.currentWindow.winAttr;return c=h[++a],_.fillOpacity=(192&c)>>6,_.fillRed=(48&c)>>4,_.fillGreen=(12&c)>>2,_.fillBlue=3&c,c=h[++a],_.borderType=(192&c)>>6,_.borderRed=(48&c)>>4,_.borderGreen=(12&c)>>2,_.borderBlue=3&c,c=h[++a],_.borderType+=(128&c)>>5,_.wordWrap=(64&c)>>6,_.printDirection=(48&c)>>4,_.scrollDirection=(12&c)>>2,_.justify=3&c,c=h[++a],_.effectSpeed=(240&c)>>4,_.effectDirection=(12&c)>>2,_.displayEffect=3&c,a},Ii.prototype.flushDisplayed=function(a,l){for(var h=[],c=0;c<8;c++)l.windows[c].visible&&!l.windows[c].isEmpty()&&h.push(l.windows[c].getText());l.endPts=a,l.text=h.join(`

`),this.pushCaption(l),l.startPts=a},Ii.prototype.pushCaption=function(a){a.text!==""&&(this.trigger("data",{startPts:a.startPts,endPts:a.endPts,text:a.text,stream:"cc708_"+a.serviceNum}),a.text="",a.startPts=a.endPts)},Ii.prototype.displayWindows=function(a,l){var h=this.current708Packet.data[++a],c=this.getPts(a);this.flushDisplayed(c,l);for(var _=0;_<8;_++)h&1<<_&&(l.windows[_].visible=1);return a},Ii.prototype.hideWindows=function(a,l){var h=this.current708Packet.data[++a],c=this.getPts(a);this.flushDisplayed(c,l);for(var _=0;_<8;_++)h&1<<_&&(l.windows[_].visible=0);return a},Ii.prototype.toggleWindows=function(a,l){var h=this.current708Packet.data[++a],c=this.getPts(a);this.flushDisplayed(c,l);for(var _=0;_<8;_++)h&1<<_&&(l.windows[_].visible^=1);return a},Ii.prototype.clearWindows=function(a,l){var h=this.current708Packet.data[++a],c=this.getPts(a);this.flushDisplayed(c,l);for(var _=0;_<8;_++)h&1<<_&&l.windows[_].clearText();return a},Ii.prototype.deleteWindows=function(a,l){var h=this.current708Packet.data[++a],c=this.getPts(a);this.flushDisplayed(c,l);for(var _=0;_<8;_++)h&1<<_&&l.windows[_].reset();return a},Ii.prototype.setPenAttributes=function(a,l){var h=this.current708Packet.data,c=h[a],_=l.currentWindow.penAttr;return c=h[++a],_.textTag=(240&c)>>4,_.offset=(12&c)>>2,_.penSize=3&c,c=h[++a],_.italics=(128&c)>>7,_.underline=(64&c)>>6,_.edgeType=(56&c)>>3,_.fontStyle=7&c,a},Ii.prototype.setPenColor=function(a,l){var h=this.current708Packet.data,c=h[a],_=l.currentWindow.penColor;return c=h[++a],_.fgOpacity=(192&c)>>6,_.fgRed=(48&c)>>4,_.fgGreen=(12&c)>>2,_.fgBlue=3&c,c=h[++a],_.bgOpacity=(192&c)>>6,_.bgRed=(48&c)>>4,_.bgGreen=(12&c)>>2,_.bgBlue=3&c,c=h[++a],_.edgeRed=(48&c)>>4,_.edgeGreen=(12&c)>>2,_.edgeBlue=3&c,a},Ii.prototype.setPenLocation=function(a,l){var h=this.current708Packet.data,c=h[a],_=l.currentWindow.penLoc;return l.currentWindow.pendingNewLine=!0,c=h[++a],_.row=15&c,c=h[++a],_.column=63&c,a},Ii.prototype.reset=function(a,l){var h=this.getPts(a);return this.flushDisplayed(h,l),this.initService(l.serviceNum,a)};var nf={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ho=function(a){return a===null?"":(a=nf[a]||a,String.fromCharCode(a))},sf=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],yr=function(){for(var a=[],l=15;l--;)a.push({text:"",indent:0,offset:0});return a},Ui=function(a,l){Ui.prototype.init.call(this),this.field_=a||0,this.dataChannel_=l||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(h){var c,_,C,R,V;if((c=32639&h.ccData)!==this.lastControlCode_){if((61440&c)==4096?this.lastControlCode_=c:c!==this.PADDING_&&(this.lastControlCode_=null),C=c>>>8,R=255&c,c!==this.PADDING_)if(c===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(c===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=h.pts;else if(c===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(c===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(c===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(c===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(c===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(c===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=yr();else if(c===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=yr();else if(c===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=yr()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(C,R))V=ho((C=(3&C)<<8)|R),this[this.mode_](h.pts,V),this.column_++;else if(this.isExtCharacter(C,R))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),V=ho((C=(3&C)<<8)|R),this[this.mode_](h.pts,V),this.column_++;else if(this.isMidRowCode(C,R))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,14&~R||this.addFormatting(h.pts,["i"]),1&~R||this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(C,R)){const Z=3&R;this.nonDisplayed_[this.row_].offset=Z,this.column_+=Z}else if(this.isPAC(C,R)){var H=sf.indexOf(7968&c);if(this.mode_==="rollUp"&&(H-this.rollUpRows_+1<0&&(H=this.rollUpRows_-1),this.setRollUp(h.pts,H)),H!==this.row_&&H>=0&&H<=14&&(this.clearFormatting(h.pts),this.row_=H),1&R&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),!(16&~c)){const Z=(14&c)>>1;this.column_=4*Z,this.nonDisplayed_[this.row_].indent+=Z}this.isColorPAC(R)&&(14&~R||this.addFormatting(h.pts,["i"]))}else this.isNormalChar(C)&&(R===0&&(R=null),V=ho(C),V+=ho(R),this[this.mode_](h.pts,V),this.column_+=V.length)}else this.lastControlCode_=null}};Ui.prototype=new Nl,Ui.prototype.flushDisplayed=function(a){const l=c=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+c+"."})},h=[];this.displayed_.forEach((c,_)=>{if(c&&c.text&&c.text.length){try{c.text=c.text.trim()}catch{l(_)}c.text.length&&h.push({text:c.text,line:_+1,position:10+Math.min(70,10*c.indent)+2.5*c.offset})}else c==null&&l(_)}),h.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,content:h,stream:this.name_})},Ui.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=yr(),this.nonDisplayed_=yr(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ui.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ui.prototype.isSpecialCharacter=function(a,l){return a===this.EXT_&&l>=48&&l<=63},Ui.prototype.isExtCharacter=function(a,l){return(a===this.EXT_+1||a===this.EXT_+2)&&l>=32&&l<=63},Ui.prototype.isMidRowCode=function(a,l){return a===this.EXT_&&l>=32&&l<=47},Ui.prototype.isOffsetControlCode=function(a,l){return a===this.OFFSET_&&l>=33&&l<=35},Ui.prototype.isPAC=function(a,l){return a>=this.BASE_&&a<this.BASE_+8&&l>=64&&l<=127},Ui.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},Ui.prototype.isNormalChar=function(a){return a>=32&&a<=127},Ui.prototype.setRollUp=function(a,l){if(this.mode_!=="rollUp"&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=yr(),this.displayed_=yr()),l!==void 0&&l!==this.row_)for(var h=0;h<this.rollUpRows_;h++)this.displayed_[l-h]=this.displayed_[this.row_-h],this.displayed_[this.row_-h]={text:"",indent:0,offset:0};l===void 0&&(l=this.row_),this.topRow_=l-this.rollUpRows_+1},Ui.prototype.addFormatting=function(a,l){this.formatting_=this.formatting_.concat(l);var h=l.reduce(function(c,_){return c+"<"+_+">"},"");this[this.mode_](a,h)},Ui.prototype.clearFormatting=function(a){if(this.formatting_.length){var l=this.formatting_.reverse().reduce(function(h,c){return h+"</"+c+">"},"");this.formatting_=[],this[this.mode_](a,l)}},Ui.prototype.popOn=function(a,l){var h=this.nonDisplayed_[this.row_].text;h+=l,this.nonDisplayed_[this.row_].text=h},Ui.prototype.rollUp=function(a,l){var h=this.displayed_[this.row_].text;h+=l,this.displayed_[this.row_].text=h},Ui.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]={text:"",indent:0,offset:0};for(a=this.row_+1;a<15;a++)this.displayed_[a]={text:"",indent:0,offset:0};for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Ui.prototype.paintOn=function(a,l){var h=this.displayed_[this.row_].text;h+=l,this.displayed_[this.row_].text=h};var Kd={CaptionStream:In,Cea608Stream:Ui,Cea708Stream:Ii},po={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},rf=ds,Qd="shared",Ml=function(a,l){var h=1;for(a>l&&(h=-1);Math.abs(l-a)>4294967296;)a+=8589934592*h;return a},Ul=function(a){var l,h;Ul.prototype.init.call(this),this.type_=a||Qd,this.push=function(c){c.type!=="metadata"?this.type_!==Qd&&c.type!==this.type_||(h===void 0&&(h=c.dts),c.dts=Ml(c.dts,h),c.pts=Ml(c.pts,h),l=c.dts,this.trigger("data",c)):this.trigger("data",c)},this.flush=function(){h=l,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,l=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ul.prototype=new rf;var jl,Jd={TimestampRolloverStream:Ul,handleRollover:Ml},fo=(a,l,h)=>{if(!a)return-1;for(var c=h;c<a.length;c++)if(a[c]===l)return c;return-1},Zd=function(a,l,h){var c,_="";for(c=l;c<h;c++)_+="%"+("00"+a[c].toString(16)).slice(-2);return _},da=function(a,l,h){return decodeURIComponent(Zd(a,l,h))},ha=function(a,l,h){return unescape(Zd(a,l,h))},pa=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},fa={APIC:function(a){var l,h,c=1;a.data[0]===3&&((l=fo(a.data,0,c))<0||(a.mimeType=ha(a.data,c,l),c=l+1,a.pictureType=a.data[c],c++,(h=fo(a.data,0,c))<0||(a.description=da(a.data,c,h),c=h+1,a.mimeType==="-->"?a.url=ha(a.data,c,a.data.length):a.pictureData=a.data.subarray(c,a.data.length))))},"T*":function(a){a.data[0]===3&&(a.value=da(a.data,1,a.data.length).replace(/\0*$/,""),a.values=a.value.split("\0"))},TXXX:function(a){var l;a.data[0]===3&&(l=fo(a.data,0,1))!==-1&&(a.description=da(a.data,1,l),a.value=da(a.data,l+1,a.data.length).replace(/\0*$/,""),a.data=a.value)},"W*":function(a){a.url=ha(a.data,0,a.data.length).replace(/\0.*$/,"")},WXXX:function(a){var l;a.data[0]===3&&(l=fo(a.data,0,1))!==-1&&(a.description=da(a.data,1,l),a.url=ha(a.data,l+1,a.data.length).replace(/\0.*$/,""))},PRIV:function(a){var l;for(l=0;l<a.data.length;l++)if(a.data[l]===0){a.owner=ha(a.data,0,l);break}a.privateData=a.data.subarray(l+1),a.data=a.privateData}},th={parseId3Frames:function(a){var l,h=10,c=0,_=[];if(!(a.length<10||a[0]!==73||a[1]!==68||a[2]!==51)){c=pa(a.subarray(6,10)),c+=10,64&a[5]&&(h+=4,h+=pa(a.subarray(10,14)),c-=pa(a.subarray(16,20)));do{if((l=pa(a.subarray(h+4,h+8)))<1)break;var C={id:String.fromCharCode(a[h],a[h+1],a[h+2],a[h+3]),data:a.subarray(h+10,h+l+10)};C.key=C.id,fa[C.id]?fa[C.id](C):C.id[0]==="T"?fa["T*"](C):C.id[0]==="W"&&fa["W*"](C),_.push(C),h+=10,h+=l}while(h<c);return _}},parseSyncSafeInteger:pa,frameParsers:fa},af=po,Zs=th;(jl=function(a){var l,h={descriptor:a&&a.descriptor},c=0,_=[],C=0;if(jl.prototype.init.call(this),this.dispatchType=af.METADATA_STREAM_TYPE.toString(16),h.descriptor)for(l=0;l<h.descriptor.length;l++)this.dispatchType+=("00"+h.descriptor[l].toString(16)).slice(-2);this.push=function(R){var V,H,Z,yt,At;if(R.type==="timed-metadata"){if(R.dataAlignmentIndicator&&(C=0,_.length=0),_.length===0&&(R.data.length<10||R.data[0]!==73||R.data[1]!==68||R.data[2]!==51))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(_.push(R),C+=R.data.byteLength,_.length===1&&(c=Zs.parseSyncSafeInteger(R.data.subarray(6,10)),c+=10),!(C<c)){for(V={data:new Uint8Array(c),frames:[],pts:_[0].pts,dts:_[0].dts},At=0;At<c;)V.data.set(_[0].data.subarray(0,c-At),At),At+=_[0].data.byteLength,C-=_[0].data.byteLength,_.shift();H=10,64&V.data[5]&&(H+=4,H+=Zs.parseSyncSafeInteger(V.data.subarray(10,14)),c-=Zs.parseSyncSafeInteger(V.data.subarray(16,20)));do{if((Z=Zs.parseSyncSafeInteger(V.data.subarray(H+4,H+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((yt={id:String.fromCharCode(V.data[H],V.data[H+1],V.data[H+2],V.data[H+3]),data:V.data.subarray(H+10,H+Z+10)}).key=yt.id,Zs.frameParsers[yt.id]?Zs.frameParsers[yt.id](yt):yt.id[0]==="T"?Zs.frameParsers["T*"](yt):yt.id[0]==="W"&&Zs.frameParsers["W*"](yt),yt.owner==="com.apple.streaming.transportStreamTimestamp"){var Qt=yt.data,se=(1&Qt[3])<<30|Qt[4]<<22|Qt[5]<<14|Qt[6]<<6|Qt[7]>>>2;se*=4,se+=3&Qt[7],yt.timeStamp=se,V.pts===void 0&&V.dts===void 0&&(V.pts=yt.timeStamp,V.dts=yt.timeStamp),this.trigger("timestamp",yt)}V.frames.push(yt),H+=10,H+=Z}while(H<c);this.trigger("data",V)}}}}).prototype=new ds;var Bl,mo,go,of=jl,Fl=ds,ql=Kd,hs=po,lf=Jd.TimestampRolloverStream,$r=188;(Bl=function(){var a=new Uint8Array($r),l=0;Bl.prototype.init.call(this),this.push=function(h){var c,_=0,C=$r;for(l?((c=new Uint8Array(h.byteLength+l)).set(a.subarray(0,l)),c.set(h,l),l=0):c=h;C<c.byteLength;)c[_]!==71||c[C]!==71?(_++,C++):(this.trigger("data",c.subarray(_,C)),_+=$r,C+=$r);_<c.byteLength&&(a.set(c.subarray(_),0),l=c.byteLength-_)},this.flush=function(){l===$r&&a[0]===71&&(this.trigger("data",a),l=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){l=0,this.trigger("reset")}}).prototype=new Fl,(mo=function(){var a,l,h,c;mo.prototype.init.call(this),c=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(_,C){var R=0;C.payloadUnitStartIndicator&&(R+=_[R]+1),C.type==="pat"?l(_.subarray(R),C):h(_.subarray(R),C)},l=function(_,C){C.section_number=_[7],C.last_section_number=_[8],c.pmtPid=(31&_[10])<<8|_[11],C.pmtPid=c.pmtPid},h=function(_,C){var R,V;if(1&_[5]){for(c.programMapTable={video:null,audio:null,"timed-metadata":{}},R=3+((15&_[1])<<8|_[2])-4,V=12+((15&_[10])<<8|_[11]);V<R;){var H=_[V],Z=(31&_[V+1])<<8|_[V+2];H===hs.H264_STREAM_TYPE&&c.programMapTable.video===null?c.programMapTable.video=Z:H===hs.ADTS_STREAM_TYPE&&c.programMapTable.audio===null?c.programMapTable.audio=Z:H===hs.METADATA_STREAM_TYPE&&(c.programMapTable["timed-metadata"][Z]=H),V+=5+((15&_[V+3])<<8|_[V+4])}C.programMapTable=c.programMapTable}},this.push=function(_){var C={},R=4;if(C.payloadUnitStartIndicator=!!(64&_[1]),C.pid=31&_[1],C.pid<<=8,C.pid|=_[2],(48&_[3])>>>4>1&&(R+=_[R]+1),C.pid===0)C.type="pat",a(_.subarray(R),C),this.trigger("data",C);else if(C.pid===this.pmtPid)for(C.type="pmt",a(_.subarray(R),C),this.trigger("data",C);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,R,C]):this.processPes_(_,R,C)},this.processPes_=function(_,C,R){R.pid===this.programMapTable.video?R.streamType=hs.H264_STREAM_TYPE:R.pid===this.programMapTable.audio?R.streamType=hs.ADTS_STREAM_TYPE:R.streamType=this.programMapTable["timed-metadata"][R.pid],R.type="pes",R.data=_.subarray(C),this.trigger("data",R)}}).prototype=new Fl,mo.STREAM_TYPES={h264:27,adts:15},go=function(){var a,l=this,h=!1,c={data:[],size:0},_={data:[],size:0},C={data:[],size:0},R=function(V,H,Z){var yt,At,Qt=new Uint8Array(V.size),se={type:H},Ge=0,si=0;if(V.data.length&&!(V.size<9)){for(se.trackId=V.data[0].pid,Ge=0;Ge<V.data.length;Ge++)At=V.data[Ge],Qt.set(At.data,si),si+=At.data.byteLength;(function(ri,Ti){var Ji;const js=ri[0]<<16|ri[1]<<8|ri[2];Ti.data=new Uint8Array,js===1&&(Ti.packetLength=6+(ri[4]<<8|ri[5]),Ti.dataAlignmentIndicator=!!(4&ri[6]),192&(Ji=ri[7])&&(Ti.pts=(14&ri[9])<<27|(255&ri[10])<<20|(254&ri[11])<<12|(255&ri[12])<<5|(254&ri[13])>>>3,Ti.pts*=4,Ti.pts+=(6&ri[13])>>>1,Ti.dts=Ti.pts,64&Ji&&(Ti.dts=(14&ri[14])<<27|(255&ri[15])<<20|(254&ri[16])<<12|(255&ri[17])<<5|(254&ri[18])>>>3,Ti.dts*=4,Ti.dts+=(6&ri[18])>>>1)),Ti.data=ri.subarray(9+ri[8]))})(Qt,se),yt=H==="video"||se.packetLength<=V.size,(Z||yt)&&(V.size=0,V.data.length=0),yt&&l.trigger("data",se)}};go.prototype.init.call(this),this.push=function(V){({pat:function(){},pes:function(){var H,Z;switch(V.streamType){case hs.H264_STREAM_TYPE:H=c,Z="video";break;case hs.ADTS_STREAM_TYPE:H=_,Z="audio";break;case hs.METADATA_STREAM_TYPE:H=C,Z="timed-metadata";break;default:return}V.payloadUnitStartIndicator&&R(H,Z,!0),H.data.push(V),H.size+=V.data.byteLength},pmt:function(){var H={type:"metadata",tracks:[]};(a=V.programMapTable).video!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),a.audio!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),h=!0,l.trigger("data",H)}})[V.type]()},this.reset=function(){c.size=0,c.data.length=0,_.size=0,_.data.length=0,this.trigger("reset")},this.flushStreams_=function(){R(c,"video"),R(_,"audio"),R(C,"timed-metadata")},this.flush=function(){if(!h&&a){var V={type:"metadata",tracks:[]};a.video!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),a.audio!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),l.trigger("data",V)}h=!1,this.flushStreams_(),this.trigger("done")}},go.prototype=new Fl;var eh={PAT_PID:0,MP2T_PACKET_LENGTH:$r,TransportPacketStream:Bl,TransportParseStream:mo,ElementaryStream:go,TimestampRolloverStream:lf,CaptionStream:ql.CaptionStream,Cea608Stream:ql.Cea608Stream,Cea708Stream:ql.Cea708Stream,MetadataStream:of};for(var $l in hs)hs.hasOwnProperty($l)&&(eh[$l]=hs[$l]);var Vl,uf=eh,cf=Ri.ONE_SECOND_IN_TS,ih=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Vl=function(a){var l,h=0;Vl.prototype.init.call(this),this.skipWarn_=function(c,_){this.trigger("log",{level:"warn",message:`adts skiping bytes ${c} to ${_} in frame ${h} outside syncword`})},this.push=function(c){var _,C,R,V,H,Z=0;if(a||(h=0),c.type==="audio"){var yt;for(l&&l.length?(R=l,(l=new Uint8Array(R.byteLength+c.data.byteLength)).set(R),l.set(c.data,R.byteLength)):l=c.data;Z+7<l.length;)if(l[Z]===255&&(246&l[Z+1])==240){if(typeof yt=="number"&&(this.skipWarn_(yt,Z),yt=null),C=2*(1&~l[Z+1]),_=(3&l[Z+3])<<11|l[Z+4]<<3|(224&l[Z+5])>>5,H=(V=1024*(1+(3&l[Z+6])))*cf/ih[(60&l[Z+2])>>>2],l.byteLength-Z<_)break;this.trigger("data",{pts:c.pts+h*H,dts:c.dts+h*H,sampleCount:V,audioobjecttype:1+(l[Z+2]>>>6&3),channelcount:(1&l[Z+2])<<2|(192&l[Z+3])>>>6,samplerate:ih[(60&l[Z+2])>>>2],samplingfrequencyindex:(60&l[Z+2])>>>2,samplesize:16,data:l.subarray(Z+7+C,Z+_)}),h++,Z+=_}else typeof yt!="number"&&(yt=Z),Z++;typeof yt=="number"&&(this.skipWarn_(yt,Z),yt=null),l=l.subarray(Z)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){l=void 0,this.trigger("reset")},this.endTimeline=function(){l=void 0,this.trigger("endedtimeline")}}).prototype=new ds;var yo,_o,nh,df=Vl,sh=ds,hf=function(a){var l=a.byteLength,h=0,c=0;this.length=function(){return 8*l},this.bitsAvailable=function(){return 8*l+c},this.loadWord=function(){var _=a.byteLength-l,C=new Uint8Array(4),R=Math.min(4,l);if(R===0)throw new Error("no bytes available");C.set(a.subarray(_,_+R)),h=new DataView(C.buffer).getUint32(0),c=8*R,l-=R},this.skipBits=function(_){var C;c>_?(h<<=_,c-=_):(_-=c,_-=8*(C=Math.floor(_/8)),l-=C,this.loadWord(),h<<=_,c-=_)},this.readBits=function(_){var C=Math.min(c,_),R=h>>>32-C;return(c-=C)>0?h<<=C:l>0&&this.loadWord(),(C=_-C)>0?R<<C|this.readBits(C):R},this.skipLeadingZeros=function(){var _;for(_=0;_<c;++_)if(h&2147483648>>>_)return h<<=_,c-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(_o=function(){var a,l,h=0;_o.prototype.init.call(this),this.push=function(c){var _;l?((_=new Uint8Array(l.byteLength+c.data.byteLength)).set(l),_.set(c.data,l.byteLength),l=_):l=c.data;for(var C=l.byteLength;h<C-3;h++)if(l[h+2]===1){a=h+5;break}for(;a<C;)switch(l[a]){case 0:if(l[a-1]!==0){a+=2;break}if(l[a-2]!==0){a++;break}h+3!==a-2&&this.trigger("data",l.subarray(h+3,a-2));do a++;while(l[a]!==1&&a<C);h=a-2,a+=3;break;case 1:if(l[a-1]!==0||l[a-2]!==0){a+=3;break}this.trigger("data",l.subarray(h+3,a-2)),h=a-2,a+=3;break;default:a+=3}l=l.subarray(h),a-=h,h=0},this.reset=function(){l=null,h=0,this.trigger("reset")},this.flush=function(){l&&l.byteLength>3&&this.trigger("data",l.subarray(h+3)),l=null,h=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new sh,nh={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},yo=function(){var a,l,h,c,_,C,R,V=new _o;yo.prototype.init.call(this),a=this,this.push=function(H){H.type==="video"&&(l=H.trackId,h=H.pts,c=H.dts,V.push(H))},V.on("data",function(H){var Z={trackId:l,pts:h,dts:c,data:H,nalUnitTypeCode:31&H[0]};switch(Z.nalUnitTypeCode){case 5:Z.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Z.nalUnitType="sei_rbsp",Z.escapedRBSP=_(H.subarray(1));break;case 7:Z.nalUnitType="seq_parameter_set_rbsp",Z.escapedRBSP=_(H.subarray(1)),Z.config=C(Z.escapedRBSP);break;case 8:Z.nalUnitType="pic_parameter_set_rbsp";break;case 9:Z.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",Z)}),V.on("done",function(){a.trigger("done")}),V.on("partialdone",function(){a.trigger("partialdone")}),V.on("reset",function(){a.trigger("reset")}),V.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){V.flush()},this.partialFlush=function(){V.partialFlush()},this.reset=function(){V.reset()},this.endTimeline=function(){V.endTimeline()},R=function(H,Z){var yt,At=8,Qt=8;for(yt=0;yt<H;yt++)Qt!==0&&(Qt=(At+Z.readExpGolomb()+256)%256),At=Qt===0?At:Qt},_=function(H){for(var Z,yt,At=H.byteLength,Qt=[],se=1;se<At-2;)H[se]===0&&H[se+1]===0&&H[se+2]===3?(Qt.push(se+2),se+=2):se++;if(Qt.length===0)return H;Z=At-Qt.length,yt=new Uint8Array(Z);var Ge=0;for(se=0;se<Z;Ge++,se++)Ge===Qt[0]&&(Ge++,Qt.shift()),yt[se]=H[Ge];return yt},C=function(H){var Z,yt,At,Qt,se,Ge,si,ri,Ti,Ji,js,Fn,ir=0,Bs=0,nr=0,Ta=0,wi=[1,1];if(yt=(Z=new hf(H)).readUnsignedByte(),Qt=Z.readUnsignedByte(),At=Z.readUnsignedByte(),Z.skipUnsignedExpGolomb(),nh[yt]&&((se=Z.readUnsignedExpGolomb())===3&&Z.skipBits(1),Z.skipUnsignedExpGolomb(),Z.skipUnsignedExpGolomb(),Z.skipBits(1),Z.readBoolean()))for(js=se!==3?8:12,Fn=0;Fn<js;Fn++)Z.readBoolean()&&R(Fn<6?16:64,Z);if(Z.skipUnsignedExpGolomb(),(Ge=Z.readUnsignedExpGolomb())===0)Z.readUnsignedExpGolomb();else if(Ge===1)for(Z.skipBits(1),Z.skipExpGolomb(),Z.skipExpGolomb(),si=Z.readUnsignedExpGolomb(),Fn=0;Fn<si;Fn++)Z.skipExpGolomb();if(Z.skipUnsignedExpGolomb(),Z.skipBits(1),ri=Z.readUnsignedExpGolomb(),Ti=Z.readUnsignedExpGolomb(),(Ji=Z.readBits(1))===0&&Z.skipBits(1),Z.skipBits(1),Z.readBoolean()&&(ir=Z.readUnsignedExpGolomb(),Bs=Z.readUnsignedExpGolomb(),nr=Z.readUnsignedExpGolomb(),Ta=Z.readUnsignedExpGolomb()),Z.readBoolean()&&Z.readBoolean()){switch(Z.readUnsignedByte()){case 1:wi=[1,1];break;case 2:wi=[12,11];break;case 3:wi=[10,11];break;case 4:wi=[16,11];break;case 5:wi=[40,33];break;case 6:wi=[24,11];break;case 7:wi=[20,11];break;case 8:wi=[32,11];break;case 9:wi=[80,33];break;case 10:wi=[18,11];break;case 11:wi=[15,11];break;case 12:wi=[64,33];break;case 13:wi=[160,99];break;case 14:wi=[4,3];break;case 15:wi=[3,2];break;case 16:wi=[2,1];break;case 255:wi=[Z.readUnsignedByte()<<8|Z.readUnsignedByte(),Z.readUnsignedByte()<<8|Z.readUnsignedByte()]}wi&&(wi[0],wi[1])}return{profileIdc:yt,levelIdc:At,profileCompatibility:Qt,width:16*(ri+1)-2*ir-2*Bs,height:(2-Ji)*(Ti+1)*16-2*nr-2*Ta,sarRatio:wi}}},yo.prototype=new sh;var Hl,pf={H264Stream:yo,NalByteStream:_o},ff=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],rh=function(a,l){var h=a[l+6]<<21|a[l+7]<<14|a[l+8]<<7|a[l+9];return h=h>=0?h:0,(16&a[l+5])>>4?h+20:h+10},ah=function(a,l){return a.length-l<10||a[l]!==73||a[l+1]!==68||a[l+2]!==51?l:(l+=rh(a,l),ah(a,l))},oh=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},zl={isLikelyAacData:function(a){var l=ah(a,0);return a.length>=l+2&&!(255&~a[l])&&!(240&~a[l+1])&&(22&a[l+1])==16},parseId3TagSize:rh,parseAdtsSize:function(a,l){var h=(224&a[l+5])>>5,c=a[l+4]<<3;return 6144&a[l+3]|c|h},parseType:function(a,l){return a[l]===73&&a[l+1]===68&&a[l+2]===51?"timed-metadata":!0&a[l]&&!(240&~a[l+1])?"audio":null},parseSampleRate:function(a){for(var l=0;l+5<a.length;){if(a[l]===255&&(246&a[l+1])==240)return ff[(60&a[l+2])>>>2];l++}return null},parseAacTimestamp:function(a){var l,h,c;l=10,64&a[5]&&(l+=4,l+=oh(a.subarray(10,14)));do{if((h=oh(a.subarray(l+4,l+8)))<1)return null;if(String.fromCharCode(a[l],a[l+1],a[l+2],a[l+3])==="PRIV"){c=a.subarray(l+10,l+h+10);for(var _=0;_<c.byteLength;_++)if(c[_]===0){var C=unescape(function(H,Z,yt){var At,Qt="";for(At=0;At<yt;At++)Qt+="%"+("00"+H[At].toString(16)).slice(-2);return Qt}(c,0,_));if(C==="com.apple.streaming.transportStreamTimestamp"){var R=c.subarray(_+1),V=(1&R[3])<<30|R[4]<<22|R[5]<<14|R[6]<<6|R[7]>>>2;return(V*=4)+(3&R[7])}break}}l+=10,l+=h}while(l<a.byteLength);return null}},lh=zl;(Hl=function(){var a=new Uint8Array,l=0;Hl.prototype.init.call(this),this.setTimestamp=function(h){l=h},this.push=function(h){var c,_,C,R,V=0,H=0;for(a.length?(R=a.length,(a=new Uint8Array(h.byteLength+R)).set(a.subarray(0,R)),a.set(h,R)):a=h;a.length-H>=3;)if(a[H]!==73||a[H+1]!==68||a[H+2]!==51)if(255&~a[H]||240&~a[H+1])H++;else{if(a.length-H<7||H+(V=lh.parseAdtsSize(a,H))>a.length)break;C={type:"audio",data:a.subarray(H,H+V),pts:l,dts:l},this.trigger("data",C),H+=V}else{if(a.length-H<10||H+(V=lh.parseId3TagSize(a,H))>a.length)break;_={type:"timed-metadata",data:a.subarray(H,H+V)},this.trigger("data",_),H+=V}c=a.length-H,a=c>0?a.subarray(H):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new ds;var ma,Vr,Wl,_r,vo=ds,ga=ro,ya=ca,bo=Jp,ps=tf,Us=uf,To=Ri,uh=df,mf=pf.H264Stream,gf=Hl,yf=zl.isLikelyAacData,_f=Ri.ONE_SECOND_IN_TS,Gl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Xl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],vf=function(a,l){l.stream=a,this.trigger("log",l)},ch=function(a,l){for(var h=Object.keys(l),c=0;c<h.length;c++){var _=h[c];_!=="headOfPipeline"&&l[_].on&&l[_].on("log",vf.bind(a,_))}},dh=function(a,l){var h;if(a.length!==l.length)return!1;for(h=0;h<a.length;h++)if(a[h]!==l[h])return!1;return!0},Yl=function(a,l,h,c,_,C){return{start:{dts:a,pts:a+(h-l)},end:{dts:a+(c-l),pts:a+(_-h)},prependedContentDuration:C,baseMediaDecodeTime:a}};Vr=function(a,l){var h,c=[],_=0,C=0,R=1/0;h=(l=l||{}).firstSequenceNumber||0,Vr.prototype.init.call(this),this.push=function(V){ps.collectDtsInfo(a,V),a&&Gl.forEach(function(H){a[H]=V[H]}),c.push(V)},this.setEarliestDts=function(V){_=V},this.setVideoBaseMediaDecodeTime=function(V){R=V},this.setAudioAppendStart=function(V){C=V},this.flush=function(){var V,H,Z,yt,At,Qt,se;c.length!==0?(V=bo.trimAdtsFramesByEarliestDts(c,a,_),a.baseMediaDecodeTime=ps.calculateTrackBaseMediaDecodeTime(a,l.keepOriginalTimestamps),se=bo.prefixWithSilence(a,V,C,R),a.samples=bo.generateSampleTable(V),Z=ga.mdat(bo.concatenateFrameData(V)),c=[],H=ga.moof(h,[a]),yt=new Uint8Array(H.byteLength+Z.byteLength),h++,yt.set(H),yt.set(Z,H.byteLength),ps.clearDtsInfo(a),At=Math.ceil(1024*_f/a.samplerate),V.length&&(Qt=V.length*At,this.trigger("segmentTimingInfo",Yl(To.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),V[0].dts,V[0].pts,V[0].dts+Qt,V[0].pts+Qt,se||0)),this.trigger("timingInfo",{start:V[0].pts,end:V[0].pts+Qt})),this.trigger("data",{track:a,boxes:yt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){ps.clearDtsInfo(a),c=[],this.trigger("reset")}},Vr.prototype=new vo,ma=function(a,l){var h,c,_,C=[],R=[];h=(l=l||{}).firstSequenceNumber||0,ma.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(V){ps.collectDtsInfo(a,V),V.nalUnitType!=="seq_parameter_set_rbsp"||c||(c=V.config,a.sps=[V.data],Xl.forEach(function(H){a[H]=c[H]},this)),V.nalUnitType!=="pic_parameter_set_rbsp"||_||(_=V.data,a.pps=[V.data]),C.push(V)},this.flush=function(){for(var V,H,Z,yt,At,Qt,se,Ge,si=0;C.length&&C[0].nalUnitType!=="access_unit_delimiter_rbsp";)C.shift();if(C.length===0)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(V=ya.groupNalsIntoFrames(C),(Z=ya.groupFramesIntoGops(V))[0][0].keyFrame||((H=this.getGopForFusion_(C[0],a))?(si=H.duration,Z.unshift(H),Z.byteLength+=H.byteLength,Z.nalCount+=H.nalCount,Z.pts=H.pts,Z.dts=H.dts,Z.duration+=H.duration):Z=ya.extendFirstKeyFrame(Z)),R.length){var ri;if(!(ri=l.alignGopsAtEnd?this.alignGopsAtEnd_(Z):this.alignGopsAtStart_(Z)))return this.gopCache_.unshift({gop:Z.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),C=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ps.clearDtsInfo(a),Z=ri}ps.collectDtsInfo(a,Z),a.samples=ya.generateSampleTable(Z),At=ga.mdat(ya.concatenateNalData(Z)),a.baseMediaDecodeTime=ps.calculateTrackBaseMediaDecodeTime(a,l.keepOriginalTimestamps),this.trigger("processedGopsInfo",Z.map(function(Ti){return{pts:Ti.pts,dts:Ti.dts,byteLength:Ti.byteLength}})),se=Z[0],Ge=Z[Z.length-1],this.trigger("segmentTimingInfo",Yl(a.baseMediaDecodeTime,se.dts,se.pts,Ge.dts+Ge.duration,Ge.pts+Ge.duration,si)),this.trigger("timingInfo",{start:Z[0].pts,end:Z[Z.length-1].pts+Z[Z.length-1].duration}),this.gopCache_.unshift({gop:Z.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),C=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),yt=ga.moof(h,[a]),Qt=new Uint8Array(yt.byteLength+At.byteLength),h++,Qt.set(yt),Qt.set(At,yt.byteLength),this.trigger("data",{track:a,boxes:Qt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),C=[],this.gopCache_.length=0,R.length=0,this.trigger("reset")},this.resetStream_=function(){ps.clearDtsInfo(a),c=void 0,_=void 0},this.getGopForFusion_=function(V){var H,Z,yt,At,Qt,se=1/0;for(Qt=0;Qt<this.gopCache_.length;Qt++)yt=(At=this.gopCache_[Qt]).gop,a.pps&&dh(a.pps[0],At.pps[0])&&a.sps&&dh(a.sps[0],At.sps[0])&&(yt.dts<a.timelineStartInfo.dts||(H=V.dts-yt.dts-yt.duration)>=-1e4&&H<=45e3&&(!Z||se>H)&&(Z=At,se=H));return Z?Z.gop:null},this.alignGopsAtStart_=function(V){var H,Z,yt,At,Qt,se,Ge,si;for(Qt=V.byteLength,se=V.nalCount,Ge=V.duration,H=Z=0;H<R.length&&Z<V.length&&(yt=R[H],At=V[Z],yt.pts!==At.pts);)At.pts>yt.pts?H++:(Z++,Qt-=At.byteLength,se-=At.nalCount,Ge-=At.duration);return Z===0?V:Z===V.length?null:((si=V.slice(Z)).byteLength=Qt,si.duration=Ge,si.nalCount=se,si.pts=si[0].pts,si.dts=si[0].dts,si)},this.alignGopsAtEnd_=function(V){var H,Z,yt,At,Qt,se,Ge;for(H=R.length-1,Z=V.length-1,Qt=null,se=!1;H>=0&&Z>=0;){if(yt=R[H],At=V[Z],yt.pts===At.pts){se=!0;break}yt.pts>At.pts?H--:(H===R.length-1&&(Qt=Z),Z--)}if(!se&&Qt===null)return null;if((Ge=se?Z:Qt)===0)return V;var si=V.slice(Ge),ri=si.reduce(function(Ti,Ji){return Ti.byteLength+=Ji.byteLength,Ti.duration+=Ji.duration,Ti.nalCount+=Ji.nalCount,Ti},{byteLength:0,duration:0,nalCount:0});return si.byteLength=ri.byteLength,si.duration=ri.duration,si.nalCount=ri.nalCount,si.pts=si[0].pts,si.dts=si[0].dts,si},this.alignGopsWith=function(V){R=V}},ma.prototype=new vo,_r=function(a,l){this.numberOfTracks=0,this.metadataStream=l,(a=a||{}).remux!==void 0?this.remuxTracks=!!a.remux:this.remuxTracks=!0,typeof a.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,_r.prototype.init.call(this),this.push=function(h){return h.content||h.text?this.pendingCaptions.push(h):h.frames?this.pendingMetadata.push(h):(this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),void(h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))))}},_r.prototype=new vo,_r.prototype.flush=function(a){var l,h,c,_,C=0,R={captions:[],captionStreams:{},metadata:[],info:{}},V=0;if(this.pendingTracks.length<this.numberOfTracks){if(a!=="VideoSegmentStream"&&a!=="AudioSegmentStream"||this.remuxTracks)return;if(this.pendingTracks.length===0)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(V=this.videoTrack.timelineStartInfo.pts,Xl.forEach(function(H){R.info[H]=this.videoTrack[H]},this)):this.audioTrack&&(V=this.audioTrack.timelineStartInfo.pts,Gl.forEach(function(H){R.info[H]=this.audioTrack[H]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?R.type=this.pendingTracks[0].type:R.type="combined",this.emittedTracks+=this.pendingTracks.length,c=ga.initSegment(this.pendingTracks),R.initSegment=new Uint8Array(c.byteLength),R.initSegment.set(c),R.data=new Uint8Array(this.pendingBytes),_=0;_<this.pendingBoxes.length;_++)R.data.set(this.pendingBoxes[_],C),C+=this.pendingBoxes[_].byteLength;for(_=0;_<this.pendingCaptions.length;_++)(l=this.pendingCaptions[_]).startTime=To.metadataTsToSeconds(l.startPts,V,this.keepOriginalTimestamps),l.endTime=To.metadataTsToSeconds(l.endPts,V,this.keepOriginalTimestamps),R.captionStreams[l.stream]=!0,R.captions.push(l);for(_=0;_<this.pendingMetadata.length;_++)(h=this.pendingMetadata[_]).cueTime=To.metadataTsToSeconds(h.pts,V,this.keepOriginalTimestamps),R.metadata.push(h);for(R.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",R),_=0;_<R.captions.length;_++)l=R.captions[_],this.trigger("caption",l);for(_=0;_<R.metadata.length;_++)h=R.metadata[_],this.trigger("id3Frame",h)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},_r.prototype.setRemux=function(a){this.remuxTracks=a},(Wl=function(a){var l,h,c=this,_=!0;Wl.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var C={};this.transmuxPipeline_=C,C.type="aac",C.metadataStream=new Us.MetadataStream,C.aacStream=new gf,C.audioTimestampRolloverStream=new Us.TimestampRolloverStream("audio"),C.timedMetadataTimestampRolloverStream=new Us.TimestampRolloverStream("timed-metadata"),C.adtsStream=new uh,C.coalesceStream=new _r(a,C.metadataStream),C.headOfPipeline=C.aacStream,C.aacStream.pipe(C.audioTimestampRolloverStream).pipe(C.adtsStream),C.aacStream.pipe(C.timedMetadataTimestampRolloverStream).pipe(C.metadataStream).pipe(C.coalesceStream),C.metadataStream.on("timestamp",function(R){C.aacStream.setTimestamp(R.timeStamp)}),C.aacStream.on("data",function(R){R.type!=="timed-metadata"&&R.type!=="audio"||C.audioSegmentStream||(h=h||{timelineStartInfo:{baseMediaDecodeTime:c.baseMediaDecodeTime},codec:"adts",type:"audio"},C.coalesceStream.numberOfTracks++,C.audioSegmentStream=new Vr(h,a),C.audioSegmentStream.on("log",c.getLogTrigger_("audioSegmentStream")),C.audioSegmentStream.on("timingInfo",c.trigger.bind(c,"audioTimingInfo")),C.adtsStream.pipe(C.audioSegmentStream).pipe(C.coalesceStream),c.trigger("trackinfo",{hasAudio:!!h,hasVideo:!!l}))}),C.coalesceStream.on("data",this.trigger.bind(this,"data")),C.coalesceStream.on("done",this.trigger.bind(this,"done")),ch(this,C)},this.setupTsPipeline=function(){var C={};this.transmuxPipeline_=C,C.type="ts",C.metadataStream=new Us.MetadataStream,C.packetStream=new Us.TransportPacketStream,C.parseStream=new Us.TransportParseStream,C.elementaryStream=new Us.ElementaryStream,C.timestampRolloverStream=new Us.TimestampRolloverStream,C.adtsStream=new uh,C.h264Stream=new mf,C.captionStream=new Us.CaptionStream(a),C.coalesceStream=new _r(a,C.metadataStream),C.headOfPipeline=C.packetStream,C.packetStream.pipe(C.parseStream).pipe(C.elementaryStream).pipe(C.timestampRolloverStream),C.timestampRolloverStream.pipe(C.h264Stream),C.timestampRolloverStream.pipe(C.adtsStream),C.timestampRolloverStream.pipe(C.metadataStream).pipe(C.coalesceStream),C.h264Stream.pipe(C.captionStream).pipe(C.coalesceStream),C.elementaryStream.on("data",function(R){var V;if(R.type==="metadata"){for(V=R.tracks.length;V--;)l||R.tracks[V].type!=="video"?h||R.tracks[V].type!=="audio"||((h=R.tracks[V]).timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime):(l=R.tracks[V]).timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime;l&&!C.videoSegmentStream&&(C.coalesceStream.numberOfTracks++,C.videoSegmentStream=new ma(l,a),C.videoSegmentStream.on("log",c.getLogTrigger_("videoSegmentStream")),C.videoSegmentStream.on("timelineStartInfo",function(H){h&&!a.keepOriginalTimestamps&&(h.timelineStartInfo=H,C.audioSegmentStream.setEarliestDts(H.dts-c.baseMediaDecodeTime))}),C.videoSegmentStream.on("processedGopsInfo",c.trigger.bind(c,"gopInfo")),C.videoSegmentStream.on("segmentTimingInfo",c.trigger.bind(c,"videoSegmentTimingInfo")),C.videoSegmentStream.on("baseMediaDecodeTime",function(H){h&&C.audioSegmentStream.setVideoBaseMediaDecodeTime(H)}),C.videoSegmentStream.on("timingInfo",c.trigger.bind(c,"videoTimingInfo")),C.h264Stream.pipe(C.videoSegmentStream).pipe(C.coalesceStream)),h&&!C.audioSegmentStream&&(C.coalesceStream.numberOfTracks++,C.audioSegmentStream=new Vr(h,a),C.audioSegmentStream.on("log",c.getLogTrigger_("audioSegmentStream")),C.audioSegmentStream.on("timingInfo",c.trigger.bind(c,"audioTimingInfo")),C.audioSegmentStream.on("segmentTimingInfo",c.trigger.bind(c,"audioSegmentTimingInfo")),C.adtsStream.pipe(C.audioSegmentStream).pipe(C.coalesceStream)),c.trigger("trackinfo",{hasAudio:!!h,hasVideo:!!l})}}),C.coalesceStream.on("data",this.trigger.bind(this,"data")),C.coalesceStream.on("id3Frame",function(R){R.dispatchType=C.metadataStream.dispatchType,c.trigger("id3Frame",R)}),C.coalesceStream.on("caption",this.trigger.bind(this,"caption")),C.coalesceStream.on("done",this.trigger.bind(this,"done")),ch(this,C)},this.setBaseMediaDecodeTime=function(C){var R=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=C),h&&(h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,ps.clearDtsInfo(h),R.audioTimestampRolloverStream&&R.audioTimestampRolloverStream.discontinuity()),l&&(R.videoSegmentStream&&(R.videoSegmentStream.gopCache_=[]),l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,ps.clearDtsInfo(l),R.captionStream.reset()),R.timestampRolloverStream&&R.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(C){h&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(C)},this.setRemux=function(C){var R=this.transmuxPipeline_;a.remux=C,R&&R.coalesceStream&&R.coalesceStream.setRemux(C)},this.alignGopsWith=function(C){l&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(C)},this.getLogTrigger_=function(C){var R=this;return function(V){V.stream=C,R.trigger("log",V)}},this.push=function(C){if(_){var R=yf(C);R&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():R||this.transmuxPipeline_.type==="ts"||this.setupTsPipeline(),_=!1}this.transmuxPipeline_.headOfPipeline.push(C)},this.flush=function(){_=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new vo;var yn,Kl,bf={Transmuxer:Wl,VideoSegmentStream:ma,AudioSegmentStream:Vr,AUDIO_PROPERTIES:Gl,VIDEO_PROPERTIES:Xl,generateSegmentTimingInfo:Yl},Ql=function(a){return a>>>0},Jl=function(a){var l="";return l+=String.fromCharCode(a[0]),l+=String.fromCharCode(a[1]),(l+=String.fromCharCode(a[2]))+String.fromCharCode(a[3])},Tf=Ql,Sf=Jl,hh=function(a,l){var h,c,_,C,R,V=[];if(!l.length)return null;for(h=0;h<a.byteLength;)c=Tf(a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3]),_=Sf(a.subarray(h+4,h+8)),C=c>1?h+c:a.byteLength,_===l[0]&&(l.length===1?V.push(a.subarray(h+8,C)):(R=hh(a.subarray(h+8,C),l.slice(1))).length&&(V=V.concat(R))),h=C;return V},So=hh,wf=Ql,Ef=ln.getUint64,Zl=function(a){var l={version:a[0],flags:new Uint8Array(a.subarray(1,4))};return l.version===1?l.baseMediaDecodeTime=Ef(a.subarray(4)):l.baseMediaDecodeTime=wf(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),l},tu=function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:h.getUint32(4)},_=1&c.flags[2],C=2&c.flags[2],R=8&c.flags[2],V=16&c.flags[2],H=32&c.flags[2],Z=65536&c.flags[0],yt=131072&c.flags[0];return l=8,_&&(l+=4,c.baseDataOffset=h.getUint32(12),l+=4),C&&(c.sampleDescriptionIndex=h.getUint32(l),l+=4),R&&(c.defaultSampleDuration=h.getUint32(l),l+=4),V&&(c.defaultSampleSize=h.getUint32(l),l+=4),H&&(c.defaultSampleFlags=h.getUint32(l)),Z&&(c.durationIsEmpty=!0),!_&&yt&&(c.baseDataOffsetIsMoof=!0),c},ph=ln.getUint64,fh=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},mh=function(a){var l,h={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},c=new DataView(a.buffer,a.byteOffset,a.byteLength),_=1&h.flags[2],C=4&h.flags[2],R=1&h.flags[1],V=2&h.flags[1],H=4&h.flags[1],Z=8&h.flags[1],yt=c.getUint32(4),At=8;for(_&&(h.dataOffset=c.getInt32(At),At+=4),C&&yt&&(l={flags:fh(a.subarray(At,At+4))},At+=4,R&&(l.duration=c.getUint32(At),At+=4),V&&(l.size=c.getUint32(At),At+=4),Z&&(h.version===1?l.compositionTimeOffset=c.getInt32(At):l.compositionTimeOffset=c.getUint32(At),At+=4),h.samples.push(l),yt--);yt--;)l={},R&&(l.duration=c.getUint32(At),At+=4),V&&(l.size=c.getUint32(At),At+=4),H&&(l.flags=fh(a.subarray(At,At+4)),At+=4),Z&&(h.version===1?l.compositionTimeOffset=c.getInt32(At):l.compositionTimeOffset=c.getUint32(At),At+=4),h.samples.push(l);return h},gh=ln.getUint64,rs=function(a){return new Date(1e3*a-20828448e5)},_a=Jl,Cf=function(a){var l,h,c=new DataView(a.buffer,a.byteOffset,a.byteLength),_=[];for(l=0;l+4<a.length;l+=h)if(h=c.getUint32(l),l+=4,h<=0)_.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&a[l]){case 1:_.push("slice_layer_without_partitioning_rbsp");break;case 5:_.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:_.push("sei_rbsp");break;case 7:_.push("seq_parameter_set_rbsp");break;case 8:_.push("pic_parameter_set_rbsp");break;case 9:_.push("access_unit_delimiter_rbsp");break;default:_.push("UNKNOWN NAL - "+a[l]&31)}return _},tr={avc1:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:l.getUint16(6),width:l.getUint16(24),height:l.getUint16(26),horizresolution:l.getUint16(28)+l.getUint16(30)/16,vertresolution:l.getUint16(32)+l.getUint16(34)/16,frameCount:l.getUint16(40),depth:l.getUint16(74),config:yn(a.subarray(78,a.byteLength))}},avcC:function(a){var l,h,c,_,C=new DataView(a.buffer,a.byteOffset,a.byteLength),R={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:3&a[4],sps:[],pps:[]},V=31&a[5];for(c=6,_=0;_<V;_++)h=C.getUint16(c),c+=2,R.sps.push(new Uint8Array(a.subarray(c,c+h))),c+=h;for(l=a[c],c++,_=0;_<l;_++)h=C.getUint16(c),c+=2,R.pps.push(new Uint8Array(a.subarray(c,c+h))),c+=h;return R},btrt:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:l.getUint32(0),maxBitrate:l.getUint32(4),avgBitrate:l.getUint32(8)}},edts:function(a){return{boxes:yn(a)}},elst:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:h.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),edits:[]},_=h.getUint32(4);for(l=8;_;_--)c.version===0?(c.edits.push({segmentDuration:h.getUint32(l),mediaTime:h.getInt32(l+4),mediaRate:h.getUint16(l+8)+h.getUint16(l+10)/65536}),l+=12):(c.edits.push({segmentDuration:gh(a.subarray(l)),mediaTime:gh(a.subarray(l+8)),mediaRate:h.getUint16(l+16)+h.getUint16(l+18)/65536}),l+=20);return c},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:31&a[8],decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(7&a[26])<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){for(var l=new DataView(a.buffer,a.byteOffset,a.byteLength),h={majorBrand:_a(a.subarray(0,4)),minorVersion:l.getUint32(4),compatibleBrands:[]},c=8;c<a.byteLength;)h.compatibleBrands.push(_a(a.subarray(c,c+4))),c+=4;return h},dinf:function(a){return{boxes:yn(a)}},dref:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),dataReferences:yn(a.subarray(8))}},hdlr:function(a){var l={version:new DataView(a.buffer,a.byteOffset,a.byteLength).getUint8(0),flags:new Uint8Array(a.subarray(1,4)),handlerType:_a(a.subarray(8,12)),name:""},h=8;for(h=24;h<a.byteLength;h++){if(a[h]===0){h++;break}l.name+=String.fromCharCode(a[h])}return l.name=decodeURIComponent(escape(l.name)),l},mdat:function(a){return{byteLength:a.byteLength,nals:Cf(a)}},mdhd:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,_={version:h.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};return _.version===1?(c+=4,_.creationTime=rs(h.getUint32(c)),c+=8,_.modificationTime=rs(h.getUint32(c)),c+=4,_.timescale=h.getUint32(c),c+=8,_.duration=h.getUint32(c)):(_.creationTime=rs(h.getUint32(c)),c+=4,_.modificationTime=rs(h.getUint32(c)),c+=4,_.timescale=h.getUint32(c),c+=4,_.duration=h.getUint32(c)),c+=4,l=h.getUint16(c),_.language+=String.fromCharCode(96+(l>>10)),_.language+=String.fromCharCode(96+((992&l)>>5)),_.language+=String.fromCharCode(96+(31&l)),_},mdia:function(a){return{boxes:yn(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:yn(a)}},mp4a:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength),h={dataReferenceIndex:l.getUint16(6),channelcount:l.getUint16(16),samplesize:l.getUint16(18),samplerate:l.getUint16(24)+l.getUint16(26)/65536};return a.byteLength>28&&(h.streamDescriptor=yn(a.subarray(28))[0]),h},moof:function(a){return{boxes:yn(a)}},moov:function(a){return{boxes:yn(a)}},mvex:function(a){return{boxes:yn(a)}},mvhd:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength),h=4,c={version:l.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return c.version===1?(h+=4,c.creationTime=rs(l.getUint32(h)),h+=8,c.modificationTime=rs(l.getUint32(h)),h+=4,c.timescale=l.getUint32(h),h+=8,c.duration=l.getUint32(h)):(c.creationTime=rs(l.getUint32(h)),h+=4,c.modificationTime=rs(l.getUint32(h)),h+=4,c.timescale=l.getUint32(h),h+=4,c.duration=l.getUint32(h)),h+=4,c.rate=l.getUint16(h)+l.getUint16(h+2)/16,h+=4,c.volume=l.getUint8(h)+l.getUint8(h+1)/8,h+=2,h+=2,h+=8,c.matrix=new Uint32Array(a.subarray(h,h+36)),h+=36,h+=24,c.nextTrackId=l.getUint32(h),c},pdin:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:l.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:l.getUint32(4),initialDelay:l.getUint32(8)}},sdtp:function(a){var l,h={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]};for(l=4;l<a.byteLength;l++)h.samples.push({dependsOn:(48&a[l])>>4,isDependedOn:(12&a[l])>>2,hasRedundancy:3&a[l]});return h},sidx:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength),h={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:l.getUint32(4),timescale:l.getUint32(8)},c=12;h.version===0?(h.earliestPresentationTime=l.getUint32(c),h.firstOffset=l.getUint32(c+4),c+=8):(h.earliestPresentationTime=ph(a.subarray(c)),h.firstOffset=ph(a.subarray(c+8)),c+=16),c+=2;var _=l.getUint16(c);for(c+=2;_>0;c+=12,_--)h.references.push({referenceType:(128&a[c])>>>7,referencedSize:2147483647&l.getUint32(c),subsegmentDuration:l.getUint32(c+4),startsWithSap:!!(128&a[c+8]),sapType:(112&a[c+8])>>>4,sapDeltaTime:268435455&l.getUint32(c+8)});return h},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:yn(a)}},ctts:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:h.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),compositionOffsets:[]},_=h.getUint32(4);for(l=8;_;l+=8,_--)c.compositionOffsets.push({sampleCount:h.getUint32(l),sampleOffset:h[c.version===0?"getUint32":"getInt32"](l+4)});return c},stss:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:h.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),syncSamples:[]},_=h.getUint32(4);for(l=8;_;l+=4,_--)c.syncSamples.push(h.getUint32(l));return c},stco:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]},_=h.getUint32(4);for(l=8;_;l+=4,_--)c.chunkOffsets.push(h.getUint32(l));return c},stsc:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c=h.getUint32(4),_={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};for(l=8;c;l+=12,c--)_.sampleToChunks.push({firstChunk:h.getUint32(l),samplesPerChunk:h.getUint32(l+4),sampleDescriptionIndex:h.getUint32(l+8)});return _},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:yn(a.subarray(8))}},stsz:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:h.getUint32(4),entries:[]};for(l=12;l<a.byteLength;l+=4)c.entries.push(h.getUint32(l));return c},stts:function(a){var l,h=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]},_=h.getUint32(4);for(l=8;_;l+=8,_--)c.timeToSamples.push({sampleCount:h.getUint32(l),sampleDelta:h.getUint32(l+4)});return c},styp:function(a){return tr.ftyp(a)},tfdt:Zl,tfhd:tu,tkhd:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength),h=4,c={version:l.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};return c.version===1?(h+=4,c.creationTime=rs(l.getUint32(h)),h+=8,c.modificationTime=rs(l.getUint32(h)),h+=4,c.trackId=l.getUint32(h),h+=4,h+=8,c.duration=l.getUint32(h)):(c.creationTime=rs(l.getUint32(h)),h+=4,c.modificationTime=rs(l.getUint32(h)),h+=4,c.trackId=l.getUint32(h),h+=4,h+=4,c.duration=l.getUint32(h)),h+=4,h+=8,c.layer=l.getUint16(h),h+=2,c.alternateGroup=l.getUint16(h),h+=2,c.volume=l.getUint8(h)+l.getUint8(h+1)/8,h+=2,h+=2,c.matrix=new Uint32Array(a.subarray(h,h+36)),h+=36,c.width=l.getUint16(h)+l.getUint16(h+2)/65536,h+=4,c.height=l.getUint16(h)+l.getUint16(h+2)/65536,c},traf:function(a){return{boxes:yn(a)}},trak:function(a){return{boxes:yn(a)}},trex:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:l.getUint32(4),defaultSampleDescriptionIndex:l.getUint32(8),defaultSampleDuration:l.getUint32(12),defaultSampleSize:l.getUint32(16),sampleDependsOn:3&a[20],sampleIsDependedOn:(192&a[21])>>6,sampleHasRedundancy:(48&a[21])>>4,samplePaddingValue:(14&a[21])>>1,sampleIsDifferenceSample:!!(1&a[21]),sampleDegradationPriority:l.getUint16(22)}},trun:mh,"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var l=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:l.getUint16(4),opcolor:new Uint16Array([l.getUint16(6),l.getUint16(8),l.getUint16(10)])}}};yn=function(a){for(var l,h,c,_,C,R=0,V=[],H=new ArrayBuffer(a.length),Z=new Uint8Array(H),yt=0;yt<a.length;++yt)Z[yt]=a[yt];for(l=new DataView(H);R<a.byteLength;)h=l.getUint32(R),c=_a(a.subarray(R+4,R+8)),_=h>1?R+h:a.byteLength,(C=(tr[c]||function(At){return{data:At}})(a.subarray(R+8,_))).size=h,C.type=c,V.push(C),R=_;return V},Kl=function(a,l){var h;return l=l||0,h=new Array(2*l+1).join(" "),a.map(function(c,_){return h+c.type+`
`+Object.keys(c).filter(function(C){return C!=="type"&&C!=="boxes"}).map(function(C){var R=h+"  "+C+": ",V=c[C];if(V instanceof Uint8Array||V instanceof Uint32Array){var H=Array.prototype.slice.call(new Uint8Array(V.buffer,V.byteOffset,V.byteLength)).map(function(Z){return" "+("00"+Z.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return H?H.length===1?R+"<"+H.join("").slice(1)+">":R+`<
`+H.map(function(Z){return h+"  "+Z}).join(`
`)+`
`+h+"  >":R+"<>"}return R+JSON.stringify(V,null,2).split(`
`).map(function(Z,yt){return yt===0?Z:h+"  "+Z}).join(`
`)}).join(`
`)+(c.boxes?`
`+Kl(c.boxes,l+1):"")}).join(`
`)};var yh,_h,vh,bh,Th,eu,Sh,wh={inspect:yn,textify:Kl,parseType:_a,findBox:So,parseTraf:tr.traf,parseTfdt:tr.tfdt,parseHdlr:tr.hdlr,parseTfhd:tr.tfhd,parseTrun:tr.trun,parseSidx:tr.sidx},wo=function(a){for(var l=0,h=String.fromCharCode(a[l]),c="";h!=="\0";)c+=h,l++,h=String.fromCharCode(a[l]);return c+h},xf=ln.getUint64,Eh=function(a){return a!==void 0||a!==null},kf={parseEmsgBox:function(a){var l,h,c,_,C,R,V,H=4,Z=a[0];if(Z===0)H+=(l=wo(a.subarray(H))).length,H+=(h=wo(a.subarray(H))).length,c=(yt=new DataView(a.buffer)).getUint32(H),H+=4,C=yt.getUint32(H),H+=4,R=yt.getUint32(H),H+=4,V=yt.getUint32(H),H+=4;else if(Z===1){var yt;c=(yt=new DataView(a.buffer)).getUint32(H),H+=4,_=xf(a.subarray(H)),H+=8,R=yt.getUint32(H),H+=4,V=yt.getUint32(H),H+=4,H+=(l=wo(a.subarray(H))).length,H+=(h=wo(a.subarray(H))).length}var At={scheme_id_uri:l,value:h,timescale:c||1,presentation_time:_,presentation_time_delta:C,event_duration:R,id:V,message_data:new Uint8Array(a.subarray(H,a.byteLength))};return function(Qt,se){var Ge=se.scheme_id_uri!=="\0",si=Qt===0&&Eh(se.presentation_time_delta)&&Ge,ri=Qt===1&&Eh(se.presentation_time)&&Ge;return!(Qt>1)&&si||ri}(Z,At)?At:void 0},scaleTime:function(a,l,h,c){return a||a===0?a/l:c+h/l}},Ch=typeof window<"u"?window:n!==void 0?n:typeof self<"u"?self:{},Eo=Ql,va=function(a){return("00"+a.toString(16)).slice(-2)},Xi=So,Hr=Jl,iu=kf,Af=tu,If=mh,Pf=Zl,Of=ln.getUint64,nu=Ch,Lf=th.parseId3Frames;yh=function(a){return Xi(a,["moov","trak"]).reduce(function(l,h){var c,_,C,R,V;return(c=Xi(h,["tkhd"])[0])?(_=c[0],R=Eo(c[C=_===0?12:20]<<24|c[C+1]<<16|c[C+2]<<8|c[C+3]),(V=Xi(h,["mdia","mdhd"])[0])?(C=(_=V[0])===0?12:20,l[R]=Eo(V[C]<<24|V[C+1]<<16|V[C+2]<<8|V[C+3]),l):null):null},{})},_h=function(a,l){var h=Xi(l,["moof","traf"]).reduce(function(c,_){var C,R=Xi(_,["tfhd"])[0],V=Eo(R[4]<<24|R[5]<<16|R[6]<<8|R[7]),H=a[V]||9e4,Z=Xi(_,["tfdt"])[0],yt=new DataView(Z.buffer,Z.byteOffset,Z.byteLength);let At;return typeof(C=Z[0]===1?Of(Z.subarray(4,12)):yt.getUint32(4))=="bigint"?At=C/nu.BigInt(H):typeof C!="number"||isNaN(C)||(At=C/H),At<Number.MAX_SAFE_INTEGER&&(At=Number(At)),At<c&&(c=At),c},1/0);return typeof h=="bigint"||isFinite(h)?h:0},vh=function(a,l){var h,c=Xi(l,["moof","traf"]),_=0,C=0;if(c&&c.length){var R=Xi(c[0],["tfhd"])[0],V=Xi(c[0],["trun"])[0],H=Xi(c[0],["tfdt"])[0];if(R&&(h=Af(R).trackId),H&&(_=Pf(H).baseMediaDecodeTime),V){var Z=If(V);Z.samples&&Z.samples.length&&(C=Z.samples[0].compositionTimeOffset||0)}}var yt=a[h]||9e4;typeof _=="bigint"&&(C=nu.BigInt(C),yt=nu.BigInt(yt));var At=(_+C)/yt;return typeof At=="bigint"&&At<Number.MAX_SAFE_INTEGER&&(At=Number(At)),At},bh=function(a){var l=Xi(a,["moov","trak"]),h=[];return l.forEach(function(c){var _=Xi(c,["mdia","hdlr"]),C=Xi(c,["tkhd"]);_.forEach(function(R,V){var H,Z,yt=Hr(R.subarray(8,12)),At=C[V];yt==="vide"&&(Z=(H=new DataView(At.buffer,At.byteOffset,At.byteLength)).getUint8(0)===0?H.getUint32(12):H.getUint32(20),h.push(Z))})}),h},eu=function(a){var l=a[0]===0?12:20;return Eo(a[l]<<24|a[l+1]<<16|a[l+2]<<8|a[l+3])},Th=function(a){var l=Xi(a,["moov","trak"]),h=[];return l.forEach(function(c){var _,C,R={},V=Xi(c,["tkhd"])[0];V&&(C=(_=new DataView(V.buffer,V.byteOffset,V.byteLength)).getUint8(0),R.id=C===0?_.getUint32(12):_.getUint32(20));var H=Xi(c,["mdia","hdlr"])[0];if(H){var Z=Hr(H.subarray(8,12));R.type=Z==="vide"?"video":Z==="soun"?"audio":Z}var yt=Xi(c,["mdia","minf","stbl","stsd"])[0];if(yt){var At=yt.subarray(8);R.codec=Hr(At.subarray(4,8));var Qt,se=Xi(At,[R.codec])[0];se&&(/^[asm]vc[1-9]$/i.test(R.codec)?(Qt=se.subarray(78),Hr(Qt.subarray(4,8))==="avcC"&&Qt.length>11?(R.codec+=".",R.codec+=va(Qt[9]),R.codec+=va(Qt[10]),R.codec+=va(Qt[11])):R.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(R.codec)?(Qt=se.subarray(28),Hr(Qt.subarray(4,8))==="esds"&&Qt.length>20&&Qt[19]!==0?(R.codec+="."+va(Qt[19]),R.codec+="."+va(Qt[20]>>>2&63).replace(/^0/,"")):R.codec="mp4a.40.2"):R.codec=R.codec.toLowerCase())}var Ge=Xi(c,["mdia","mdhd"])[0];Ge&&(R.timescale=eu(Ge)),h.push(R)}),h},Sh=function(a,l=0){return Xi(a,["emsg"]).map(h=>{var c=iu.parseEmsgBox(new Uint8Array(h)),_=Lf(c.message_data);return{cueTime:iu.scaleTime(c.presentation_time,c.timescale,c.presentation_time_delta,l),duration:iu.scaleTime(c.event_duration,c.timescale),frames:_}})};var ba={findBox:Xi,parseType:Hr,timescale:yh,startTime:_h,compositionStartTime:vh,videoTrackIds:bh,tracks:Th,getTimescaleFromMediaHeader:eu,getEmsgID3:Sh};const{parseTrun:Df}=wh,{findBox:xh}=ba;var kh=Ch,Ah={getMdatTrafPairs:function(a){var l=xh(a,["moof","traf"]),h=xh(a,["mdat"]),c=[];return h.forEach(function(_,C){var R=l[C];c.push({mdat:_,traf:R})}),c},parseSamples:function(a,l,h){var c=l,_=h.defaultSampleDuration||0,C=h.defaultSampleSize||0,R=h.trackId,V=[];return a.forEach(function(H){var Z=Df(H).samples;Z.forEach(function(yt){yt.duration===void 0&&(yt.duration=_),yt.size===void 0&&(yt.size=C),yt.trackId=R,yt.dts=c,yt.compositionTimeOffset===void 0&&(yt.compositionTimeOffset=0),typeof c=="bigint"?(yt.pts=c+kh.BigInt(yt.compositionTimeOffset),c+=kh.BigInt(yt.duration)):(yt.pts=c+yt.compositionTimeOffset,c+=yt.duration)}),V=V.concat(Z)}),V}},Rf=Yd.discardEmulationPreventionBytes,Nf=Kd.CaptionStream,su=So,Mf=Zl,Uf=tu,{getMdatTrafPairs:jf,parseSamples:Bf}=Ah,Ff=function(a,l){for(var h=a,c=0;c<l.length;c++){var _=l[c];if(h<_.size)return _;h-=_.size}return null},qf=function(){var a,l,h,c,_,C,R=!1;this.isInitialized=function(){return R},this.init=function(V){a=new Nf,R=!0,C=!!V&&V.isPartial,a.on("data",function(H){H.startTime=H.startPts/c,H.endTime=H.endPts/c,_.captions.push(H),_.captionStreams[H.stream]=!0}),a.on("log",function(H){_.logs.push(H)})},this.isNewInit=function(V,H){return!(V&&V.length===0||H&&typeof H=="object"&&Object.keys(H).length===0||h===V[0]&&c===H[h])},this.parse=function(V,H,Z){var yt;if(!this.isInitialized()||!H||!Z)return null;if(this.isNewInit(H,Z))h=H[0],c=Z[h];else if(h===null||!c)return l.push(V),null;for(;l.length>0;){var At=l.shift();this.parse(At,H,Z)}return yt=function(Qt,se,Ge){if(se===null)return null;var si=function(ri,Ti){var Ji={};return jf(ri).forEach(function(js){var Fn,ir=js.mdat,Bs=js.traf,nr=su(Bs,["tfhd"]),Ta=Uf(nr[0]),wi=Ta.trackId,Dh=su(Bs,["tfdt"]),Kf=Dh.length>0?Mf(Dh[0]).baseMediaDecodeTime:0,Rh=su(Bs,["trun"]);Ti===wi&&Rh.length>0&&(Fn=function(Wr,Qf,Nh){var Gr,Cs,Sa,ko,Jf=new DataView(Wr.buffer,Wr.byteOffset,Wr.byteLength),ou={logs:[],seiNals:[]};for(Cs=0;Cs+4<Wr.length;Cs+=Sa)if(Sa=Jf.getUint32(Cs),Cs+=4,!(Sa<=0))switch(31&Wr[Cs]){case 6:var Mh=Wr.subarray(Cs+1,Cs+1+Sa),Ao=Ff(Cs,Qf);if(Gr={nalUnitType:"sei_rbsp",size:Sa,data:Mh,escapedRBSP:Rf(Mh),trackId:Nh},Ao)Gr.pts=Ao.pts,Gr.dts=Ao.dts,ko=Ao;else{if(!ko){ou.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Cs+" for trackId "+Nh+". See mux.js#223."});break}Gr.pts=ko.pts,Gr.dts=ko.dts}ou.seiNals.push(Gr)}return ou}(ir,Bf(Rh,Kf,Ta),wi),Ji[wi]||(Ji[wi]={seiNals:[],logs:[]}),Ji[wi].seiNals=Ji[wi].seiNals.concat(Fn.seiNals),Ji[wi].logs=Ji[wi].logs.concat(Fn.logs))}),Ji}(Qt,se)[se]||{};return{seiNals:si.seiNals,logs:si.logs,timescale:Ge}}(V,h,c),yt&&yt.logs&&(_.logs=_.logs.concat(yt.logs)),yt!==null&&yt.seiNals?(this.pushNals(yt.seiNals),this.flushStream(),_):_.logs.length?{logs:_.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(V){if(!this.isInitialized()||!V||V.length===0)return null;V.forEach(function(H){a.push(H)})},this.flushStream=function(){if(!this.isInitialized())return null;C?a.partialFlush():a.flush()},this.clearParsedCaptions=function(){_.captions=[],_.captionStreams={},_.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;a.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){l=[],h=null,c=null,_?this.clearParsedCaptions():_={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()};const{parseTfdt:$f}=wh,er=So,{getTimescaleFromMediaHeader:Vf}=ba,{parseSamples:Hf,getMdatTrafPairs:zf}=Ah;var Ih=function(){let a=9e4;this.init=function(l){const h=er(l,["moov","trak","mdia","mdhd"])[0];h&&(a=Vf(h))},this.parseSegment=function(l){const h=[],c=zf(l);let _=0;return c.forEach(function(C){const R=C.mdat,V=C.traf,H=er(V,["tfdt"])[0],Z=er(V,["tfhd"])[0],yt=er(V,["trun"]);if(H&&(_=$f(H).baseMediaDecodeTime),yt.length&&Z){const At=Hf(yt,_,Z);let Qt=0;At.forEach(function(se){const Ge=new TextDecoder("utf-8"),si=R.slice(Qt,Qt+se.size);er(si,["vtte"])[0]||er(si,["vttc"]).forEach(function(ri){const Ti=er(ri,["payl"])[0],Ji=er(ri,["sttg"])[0],js=se.pts/a,Fn=(se.pts+se.duration)/a;let ir,Bs;if(Ti)try{ir=Ge.decode(Ti)}catch(nr){console.error(nr)}if(Ji)try{Bs=Ge.decode(Ji)}catch(nr){console.error(nr)}se.duration&&ir&&h.push({cueText:ir,start:js,end:Fn,settings:Bs})}),Qt+=se.size})}}),h}},ru=po,Ph=function(a){var l=31&a[1];return(l<<=8)|a[2]},Co=function(a){return!!(64&a[1])},xo=function(a){var l=0;return(48&a[3])>>>4>1&&(l+=a[4]+1),l},au=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Wf={parseType:function(a,l){var h=Ph(a);return h===0?"pat":h===l?"pmt":l?"pes":null},parsePat:function(a){var l=Co(a),h=4+xo(a);return l&&(h+=a[h]+1),(31&a[h+10])<<8|a[h+11]},parsePmt:function(a){var l={},h=Co(a),c=4+xo(a);if(h&&(c+=a[c]+1),1&a[c+5]){var _;_=3+((15&a[c+1])<<8|a[c+2])-4;for(var C=12+((15&a[c+10])<<8|a[c+11]);C<_;){var R=c+C;l[(31&a[R+1])<<8|a[R+2]]=a[R],C+=5+((15&a[R+3])<<8|a[R+4])}return l}},parsePayloadUnitStartIndicator:Co,parsePesType:function(a,l){switch(l[Ph(a)]){case ru.H264_STREAM_TYPE:return"video";case ru.ADTS_STREAM_TYPE:return"audio";case ru.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!Co(a))return null;var l=4+xo(a);if(l>=a.byteLength)return null;var h,c=null;return 192&(h=a[l+7])&&((c={}).pts=(14&a[l+9])<<27|(255&a[l+10])<<20|(254&a[l+11])<<12|(255&a[l+12])<<5|(254&a[l+13])>>>3,c.pts*=4,c.pts+=(6&a[l+13])>>>1,c.dts=c.pts,64&h&&(c.dts=(14&a[l+14])<<27|(255&a[l+15])<<20|(254&a[l+16])<<12|(255&a[l+17])<<5|(254&a[l+18])>>>3,c.dts*=4,c.dts+=(6&a[l+18])>>>1)),c},videoPacketContainsKeyFrame:function(a){for(var l=4+xo(a),h=a.subarray(l),c=0,_=0,C=!1;_<h.byteLength-3;_++)if(h[_+2]===1){c=_+5;break}for(;c<h.byteLength;)switch(h[c]){case 0:if(h[c-1]!==0){c+=2;break}if(h[c-2]!==0){c++;break}_+3!==c-2&&au(31&h[_+3])==="slice_layer_without_partitioning_rbsp_idr"&&(C=!0);do c++;while(h[c]!==1&&c<h.length);_=c-2,c+=3;break;case 1:if(h[c-1]!==0||h[c-2]!==0){c+=3;break}au(31&h[_+3])==="slice_layer_without_partitioning_rbsp_idr"&&(C=!0),_=c-2,c+=3;break;default:c+=3}return h=h.subarray(_),c-=_,_=0,h&&h.byteLength>3&&au(31&h[_+3])==="slice_layer_without_partitioning_rbsp_idr"&&(C=!0),C}},Oh=po,zr=Jd.handleRollover,Ci={};Ci.ts=Wf,Ci.aac=zl;var vr=Ri.ONE_SECOND_IN_TS,Tn=188,Es=71,Gf=function(a,l,h){for(var c,_,C,R,V=0,H=Tn,Z=!1;H<=a.byteLength;)if(a[V]!==Es||a[H]!==Es&&H!==a.byteLength)V++,H++;else{if(c=a.subarray(V,H),Ci.ts.parseType(c,l.pid)==="pes"&&(_=Ci.ts.parsePesType(c,l.table),C=Ci.ts.parsePayloadUnitStartIndicator(c),_==="audio"&&C&&(R=Ci.ts.parsePesTime(c))&&(R.type="audio",h.audio.push(R),Z=!0)),Z)break;V+=Tn,H+=Tn}for(V=(H=a.byteLength)-Tn,Z=!1;V>=0;)if(a[V]!==Es||a[H]!==Es&&H!==a.byteLength)V--,H--;else{if(c=a.subarray(V,H),Ci.ts.parseType(c,l.pid)==="pes"&&(_=Ci.ts.parsePesType(c,l.table),C=Ci.ts.parsePayloadUnitStartIndicator(c),_==="audio"&&C&&(R=Ci.ts.parsePesTime(c))&&(R.type="audio",h.audio.push(R),Z=!0)),Z)break;V-=Tn,H-=Tn}},Xf=function(a,l,h){for(var c,_,C,R,V,H,Z,yt=0,At=Tn,Qt=!1,se={data:[],size:0};At<a.byteLength;)if(a[yt]!==Es||a[At]!==Es)yt++,At++;else{if(c=a.subarray(yt,At),Ci.ts.parseType(c,l.pid)==="pes"&&(_=Ci.ts.parsePesType(c,l.table),C=Ci.ts.parsePayloadUnitStartIndicator(c),_==="video"&&(C&&!Qt&&(R=Ci.ts.parsePesTime(c))&&(R.type="video",h.video.push(R),Qt=!0),!h.firstKeyFrame))){if(C&&se.size!==0){for(V=new Uint8Array(se.size),H=0;se.data.length;)Z=se.data.shift(),V.set(Z,H),H+=Z.byteLength;if(Ci.ts.videoPacketContainsKeyFrame(V)){var Ge=Ci.ts.parsePesTime(V);Ge?(h.firstKeyFrame=Ge,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}se.size=0}se.data.push(c),se.size+=c.byteLength}if(Qt&&h.firstKeyFrame)break;yt+=Tn,At+=Tn}for(yt=(At=a.byteLength)-Tn,Qt=!1;yt>=0;)if(a[yt]!==Es||a[At]!==Es)yt--,At--;else{if(c=a.subarray(yt,At),Ci.ts.parseType(c,l.pid)==="pes"&&(_=Ci.ts.parsePesType(c,l.table),C=Ci.ts.parsePayloadUnitStartIndicator(c),_==="video"&&C&&(R=Ci.ts.parsePesTime(c))&&(R.type="video",h.video.push(R),Qt=!0)),Qt)break;yt-=Tn,At-=Tn}},Yf=function(a,l){var h;return h=Ci.aac.isLikelyAacData(a)?function(c){for(var _,C=!1,R=0,V=null,H=null,Z=0,yt=0;c.length-yt>=3;){switch(Ci.aac.parseType(c,yt)){case"timed-metadata":if(c.length-yt<10){C=!0;break}if((Z=Ci.aac.parseId3TagSize(c,yt))>c.length){C=!0;break}H===null&&(_=c.subarray(yt,yt+Z),H=Ci.aac.parseAacTimestamp(_)),yt+=Z;break;case"audio":if(c.length-yt<7){C=!0;break}if((Z=Ci.aac.parseAdtsSize(c,yt))>c.length){C=!0;break}V===null&&(_=c.subarray(yt,yt+Z),V=Ci.aac.parseSampleRate(_)),R++,yt+=Z;break;default:yt++}if(C)return null}if(V===null||H===null)return null;var At=vr/V;return{audio:[{type:"audio",dts:H,pts:H},{type:"audio",dts:H+1024*R*At,pts:H+1024*R*At}]}}(a):function(c){var _={pid:null,table:null},C={};for(var R in function(V,H){for(var Z,yt=0,At=Tn;At<V.byteLength;)if(V[yt]!==Es||V[At]!==Es)yt++,At++;else{switch(Z=V.subarray(yt,At),Ci.ts.parseType(Z,H.pid)){case"pat":H.pid=Ci.ts.parsePat(Z);break;case"pmt":var Qt=Ci.ts.parsePmt(Z);H.table=H.table||{},Object.keys(Qt).forEach(function(se){H.table[se]=Qt[se]})}yt+=Tn,At+=Tn}}(c,_),_.table)if(_.table.hasOwnProperty(R))switch(_.table[R]){case Oh.H264_STREAM_TYPE:C.video=[],Xf(c,_,C),C.video.length===0&&delete C.video;break;case Oh.ADTS_STREAM_TYPE:C.audio=[],Gf(c,_,C),C.audio.length===0&&delete C.audio}return C}(a),h&&(h.audio||h.video)?(function(c,_){if(c.audio&&c.audio.length){var C=_;(C===void 0||isNaN(C))&&(C=c.audio[0].dts),c.audio.forEach(function(H){H.dts=zr(H.dts,C),H.pts=zr(H.pts,C),H.dtsTime=H.dts/vr,H.ptsTime=H.pts/vr})}if(c.video&&c.video.length){var R=_;if((R===void 0||isNaN(R))&&(R=c.video[0].dts),c.video.forEach(function(H){H.dts=zr(H.dts,R),H.pts=zr(H.pts,R),H.dtsTime=H.dts/vr,H.ptsTime=H.pts/vr}),c.firstKeyFrame){var V=c.firstKeyFrame;V.dts=zr(V.dts,R),V.pts=zr(V.pts,R),V.dtsTime=V.dts/vr,V.ptsTime=V.pts/vr}}}(h,l),h):null};class Lh{constructor(l,h){this.options=h||{},this.self=l,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new bf.Transmuxer(this.options),function(l,h){h.on("data",function(c){const _=c.initSegment;c.initSegment={data:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength};const C=c.data;c.data=C.buffer,l.postMessage({action:"data",segment:c,byteOffset:C.byteOffset,byteLength:C.byteLength},[c.data])}),h.on("done",function(c){l.postMessage({action:"done"})}),h.on("gopInfo",function(c){l.postMessage({action:"gopInfo",gopInfo:c})}),h.on("videoSegmentTimingInfo",function(c){const _={start:{decode:Ri.videoTsToSeconds(c.start.dts),presentation:Ri.videoTsToSeconds(c.start.pts)},end:{decode:Ri.videoTsToSeconds(c.end.dts),presentation:Ri.videoTsToSeconds(c.end.pts)},baseMediaDecodeTime:Ri.videoTsToSeconds(c.baseMediaDecodeTime)};c.prependedContentDuration&&(_.prependedContentDuration=Ri.videoTsToSeconds(c.prependedContentDuration)),l.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:_})}),h.on("audioSegmentTimingInfo",function(c){const _={start:{decode:Ri.videoTsToSeconds(c.start.dts),presentation:Ri.videoTsToSeconds(c.start.pts)},end:{decode:Ri.videoTsToSeconds(c.end.dts),presentation:Ri.videoTsToSeconds(c.end.pts)},baseMediaDecodeTime:Ri.videoTsToSeconds(c.baseMediaDecodeTime)};c.prependedContentDuration&&(_.prependedContentDuration=Ri.videoTsToSeconds(c.prependedContentDuration)),l.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:_})}),h.on("id3Frame",function(c){l.postMessage({action:"id3Frame",id3Frame:c})}),h.on("caption",function(c){l.postMessage({action:"caption",caption:c})}),h.on("trackinfo",function(c){l.postMessage({action:"trackinfo",trackInfo:c})}),h.on("audioTimingInfo",function(c){l.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ri.videoTsToSeconds(c.start),end:Ri.videoTsToSeconds(c.end)}})}),h.on("videoTimingInfo",function(c){l.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ri.videoTsToSeconds(c.start),end:Ri.videoTsToSeconds(c.end)}})}),h.on("log",function(c){l.postMessage({action:"log",log:c})})}(this.self,this.transmuxer)}pushMp4Captions(l){this.captionParser||(this.captionParser=new qf,this.captionParser.init());const h=new Uint8Array(l.data,l.byteOffset,l.byteLength),c=this.captionParser.parse(h,l.trackIds,l.timescales);this.self.postMessage({action:"mp4Captions",captions:c&&c.captions||[],logs:c&&c.logs||[],data:h.buffer},[h.buffer])}initMp4WebVttParser(l){this.webVttParser||(this.webVttParser=new Ih);const h=new Uint8Array(l.data,l.byteOffset,l.byteLength);this.webVttParser.init(h)}getMp4WebVttText(l){this.webVttParser||(this.webVttParser=new Ih);const h=new Uint8Array(l.data,l.byteOffset,l.byteLength),c=this.webVttParser.parseSegment(h);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:c||[],data:h.buffer},[h.buffer])}probeMp4StartTime({timescales:l,data:h}){const c=ba.startTime(l,h);this.self.postMessage({action:"probeMp4StartTime",startTime:c,data:h},[h.buffer])}probeMp4Tracks({data:l}){const h=ba.tracks(l);this.self.postMessage({action:"probeMp4Tracks",tracks:h,data:l},[l.buffer])}probeEmsgID3({data:l,offset:h}){const c=ba.getEmsgID3(l,h);this.self.postMessage({action:"probeEmsgID3",id3Frames:c,emsgData:l},[l.buffer])}probeTs({data:l,baseStartTime:h}){const c=typeof h!="number"||isNaN(h)?void 0:h*Ri.ONE_SECOND_IN_TS,_=Yf(l,c);let C=null;_&&(C={hasVideo:_.video&&_.video.length===2||!1,hasAudio:_.audio&&_.audio.length===2||!1},C.hasVideo&&(C.videoStart=_.video[0].ptsTime),C.hasAudio&&(C.audioStart=_.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:C,data:l},[l.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(l){const h=new Uint8Array(l.data,l.byteOffset,l.byteLength);this.transmuxer.push(h)}reset(){this.transmuxer.reset()}setTimestampOffset(l){const h=l.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ri.secondsToVideoTs(h)))}setAudioAppendStart(l){this.transmuxer.setAudioAppendStart(Math.ceil(Ri.secondsToVideoTs(l.appendStart)))}setRemux(l){this.transmuxer.setRemux(l.remux)}flush(l){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(l){this.transmuxer.alignGopsWith(l.gopsToAlignWith.slice())}}self.onmessage=function(a){a.data.action==="init"&&a.data.options?this.messageHandlers=new Lh(self,a.data.options):(this.messageHandlers||(this.messageHandlers=new Lh(self)),a.data&&a.data.action&&a.data.action!=="init"&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data))}}));var bp=Zc(vp);const id=n=>{const{transmuxer:t,bytes:e,audioAppendStart:i,gopsToAlignWith:s,remux:r,onData:o,onTrackInfo:d,onAudioTimingInfo:f,onVideoTimingInfo:v,onVideoSegmentTimingInfo:g,onAudioSegmentTimingInfo:O,onId3:A,onCaptions:W,onDone:I,onEndedTimeline:X,onTransmuxerLog:dt,isEndOfTimeline:ht,segment:lt,triggerSegmentEventFn:gt}=n,Rt={buffer:[]};let vt=ht;if(t.onmessage=ct=>{t.currentTransmux===n&&(ct.data.action==="data"&&((Ct,Ft,ce)=>{const{type:ae,initSegment:fe,captions:ie,captionStreams:ne,metadata:Re,videoFrameDtsTime:He,videoFramePtsTime:Fe}=Ct.data.segment;Ft.buffer.push({captions:ie,captionStreams:ne,metadata:Re});const Le=Ct.data.segment.boxes||{data:Ct.data.segment.data},_i={type:ae,data:new Uint8Array(Le.data,Le.data.byteOffset,Le.data.byteLength),initSegment:new Uint8Array(fe.data,fe.byteOffset,fe.byteLength)};He!==void 0&&(_i.videoFrameDtsTime=He),Fe!==void 0&&(_i.videoFramePtsTime=Fe),ce(_i)})(ct,Rt,o),ct.data.action==="trackinfo"&&d(ct.data.trackInfo),ct.data.action==="gopInfo"&&((Ct,Ft)=>{Ft.gopInfo=Ct.data.gopInfo})(ct,Rt),ct.data.action==="audioTimingInfo"&&f(ct.data.audioTimingInfo),ct.data.action==="videoTimingInfo"&&v(ct.data.videoTimingInfo),ct.data.action==="videoSegmentTimingInfo"&&g(ct.data.videoSegmentTimingInfo),ct.data.action==="audioSegmentTimingInfo"&&O(ct.data.audioSegmentTimingInfo),ct.data.action==="id3Frame"&&A([ct.data.id3Frame],ct.data.id3Frame.dispatchType),ct.data.action==="caption"&&W(ct.data.caption),ct.data.action==="endedtimeline"&&(vt=!1,X()),ct.data.action==="log"&&dt(ct.data.log),ct.data.type==="transmuxed"&&(vt||(t.onmessage=null,(({transmuxedData:Ct,callback:Ft})=>{Ct.buffer=[],Ft(Ct)})({transmuxedData:Rt,callback:I}),nd(t))))},t.onerror=()=>{const ct={message:"Received an error message from the transmuxer worker",metadata:{errorType:_t.Error.StreamingFailedToTransmuxSegment,segmentInfo:mr({segment:lt})}};I(null,ct)},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),r!==void 0&&t.postMessage({action:"setRemux",remux:r}),e.byteLength){const ct=e instanceof ArrayBuffer?e:e.buffer,Ct=e instanceof ArrayBuffer?0:e.byteOffset;gt({type:"segmenttransmuxingstart",segment:lt}),t.postMessage({action:"push",data:ct,byteOffset:Ct,byteLength:e.byteLength},[ct])}ht&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},nd=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),typeof n.currentTransmux=="function"?n.currentTransmux():id(n.currentTransmux))},sd=(n,t)=>{n.postMessage({action:t}),nd(n)};var rd=n=>{((t,e)=>{if(!e.currentTransmux)return e.currentTransmux=t,void sd(e,t);e.transmuxQueue.push(sd.bind(null,e,t))})("reset",n)};const Ur=function(n){const t=n.transmuxer,e=n.endAction||n.action,i=n.callback,s=G({},n,{endAction:null,transmuxer:null,callback:null}),r=o=>{o.data.action===e&&(t.removeEventListener("message",r),o.data.data&&(o.data.data=new Uint8Array(o.data.data,n.byteOffset||0,n.byteLength||o.data.data.byteLength),n.data&&(n.data=o.data.data)),i(o.data))};if(t.addEventListener("message",r),n.data){const o=n.data instanceof ArrayBuffer;s.byteOffset=o?0:n.data.byteOffset,s.byteLength=n.data.byteLength;const d=[o?n.data:n.data.buffer];t.postMessage(s,d)}else t.postMessage(s)},wl=-101,El=-102,ad="wvtt",Cl=n=>{n.forEach(t=>{t.abort()})},xl=(n,t)=>{const{requestType:e}=t,i=fr({requestType:e,request:t,error:n});return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:wl,xhr:t,metadata:i}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:El,xhr:t,metadata:i}:n?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t,metadata:i}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t,metadata:i}:null},od=(n,t,e,i)=>(s,r)=>{const o=r.response,d=xl(s,r);if(d)return e(d,n);if(o.byteLength!==16)return e({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},n);const f=new DataView(o),v=new Uint32Array([f.getUint32(0),f.getUint32(4),f.getUint32(8),f.getUint32(12)]);for(let O=0;O<t.length;O++)t[O].bytes=v;const g={uri:r.uri};return i({type:"segmentkeyloadcomplete",segment:n,keyInfo:g}),e(null,n)},ld=(n,t)=>{const e=Ln(n.map.bytes);if(e!=="mp4"){const i=n.map.resolvedUri||n.map.uri,s=e||"unknown";return t({internal:!0,message:`Found unsupported ${s} container for initialization segment at URL: ${i}`,code:2,metadata:{mediaType:s}})}Ur({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:i,data:s})=>(n.map.bytes=s,i.forEach(function(r){n.map.tracks=n.map.tracks||{},n.map.tracks[r.type]||(n.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[r.id]=r.timescale),r.type==="text"&&((o,d)=>{d===ad&&o.transmuxer.postMessage({action:"initMp4WebVttParser",data:o.map.bytes})})(n,r.codec))}),t(null))})},Tp=({segment:n,bytes:t,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:v,dataFn:g,doneFn:O,onTransmuxerLog:A,triggerSegmentEventFn:W})=>{const I=n.map&&n.map.tracks||{},X=!!(I.audio&&I.video);let dt=i.bind(null,n,"audio","start");const ht=i.bind(null,n,"audio","end");let lt=i.bind(null,n,"video","start");const gt=i.bind(null,n,"video","end");Ur({action:"probeTs",transmuxer:n.transmuxer,data:t,baseStartTime:n.baseStartTime,callback:Rt=>{n.bytes=t=Rt.data;const vt=Rt.result;vt&&(e(n,{hasAudio:vt.hasAudio,hasVideo:vt.hasVideo,isMuxed:X}),e=null),(ct=>{if(!ct.transmuxer.currentTransmux)return ct.transmuxer.currentTransmux=ct,void id(ct);ct.transmuxer.transmuxQueue.push(ct)})({bytes:t,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:X,onData:ct=>{ct.type=ct.type==="combined"?"video":ct.type,g(n,ct)},onTrackInfo:ct=>{e&&(X&&(ct.isMuxed=!0),e(n,ct))},onAudioTimingInfo:ct=>{dt&&ct.start!==void 0&&(dt(ct.start),dt=null),ht&&ct.end!==void 0&&ht(ct.end)},onVideoTimingInfo:ct=>{lt&&ct.start!==void 0&&(lt(ct.start),lt=null),gt&&ct.end!==void 0&&gt(ct.end)},onVideoSegmentTimingInfo:ct=>{const Ct={pts:{start:ct.start.presentation,end:ct.end.presentation},dts:{start:ct.start.decode,end:ct.end.decode}};W({type:"segmenttransmuxingtiminginfoavailable",segment:n,timingInfo:Ct}),s(ct)},onAudioSegmentTimingInfo:ct=>{const Ct={pts:{start:ct.start.pts,end:ct.end.pts},dts:{start:ct.start.dts,end:ct.end.dts}};W({type:"segmenttransmuxingtiminginfoavailable",segment:n,timingInfo:Ct}),r(ct)},onId3:(ct,Ct)=>{o(n,ct,Ct)},onCaptions:ct=>{d(n,[ct])},isEndOfTimeline:f,onEndedTimeline:()=>{v()},onTransmuxerLog:A,onDone:(ct,Ct)=>{O&&(ct.type=ct.type==="combined"?"video":ct.type,W({type:"segmenttransmuxingcomplete",segment:n}),O(Ct,n,ct))},segment:n,triggerSegmentEventFn:W})}})},ud=({segment:n,bytes:t,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:v,dataFn:g,doneFn:O,onTransmuxerLog:A,triggerSegmentEventFn:W})=>{let I=new Uint8Array(t);if(function(X){return Tr(X,["moof"]).length>0}(I)){n.isFmp4=!0;const{tracks:X}=n.map;if(X.text&&(!X.audio||!X.video))return g(n,{data:I,type:"text"}),void((lt,gt,Rt)=>{gt===ad&&Ur({action:"getMp4WebVttText",data:lt.bytes,transmuxer:lt.transmuxer,callback:({data:vt,mp4VttCues:ct})=>{lt.bytes=vt,Rt(null,lt,{mp4VttCues:ct})}})})(n,X.text.codec,O);const dt={isFmp4:!0,hasVideo:!!X.video,hasAudio:!!X.audio};X.audio&&X.audio.codec&&X.audio.codec!=="enca"&&(dt.audioCodec=X.audio.codec),X.video&&X.video.codec&&X.video.codec!=="encv"&&(dt.videoCodec=X.video.codec),X.video&&X.audio&&(dt.isMuxed=!0),e(n,dt);const ht=(lt,gt)=>{g(n,{data:I,type:dt.hasAudio&&!dt.isMuxed?"audio":"video"}),gt&&gt.length&&o(n,gt),lt&&lt.length&&d(n,lt),O(null,n,{})};Ur({action:"probeMp4StartTime",timescales:n.map.timescales,data:I,transmuxer:n.transmuxer,callback:({data:lt,startTime:gt})=>{t=lt.buffer,n.bytes=I=lt,dt.hasAudio&&!dt.isMuxed&&i(n,"audio","start",gt),dt.hasVideo&&i(n,"video","start",gt),Ur({action:"probeEmsgID3",data:I,transmuxer:n.transmuxer,offset:gt,callback:({emsgData:Rt,id3Frames:vt})=>{t=Rt.buffer,n.bytes=I=Rt,X.video&&Rt.byteLength&&n.transmuxer?Ur({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:I,timescales:n.map.timescales,trackIds:[X.video.id],callback:ct=>{t=ct.data.buffer,n.bytes=I=ct.data,ct.logs.forEach(function(Ct){A(Si(Ct,{stream:"mp4CaptionParser"}))}),ht(ct.captions,vt)}}):ht(void 0,vt)}})}})}else if(n.transmuxer){if(n.container===void 0&&(n.container=Ln(I)),n.container!=="ts"&&n.container!=="aac")return e(n,{hasAudio:!1,hasVideo:!1}),void O(null,n,{});Tp({segment:n,bytes:t,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:r,id3Fn:o,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:v,dataFn:g,doneFn:O,onTransmuxerLog:A,triggerSegmentEventFn:W})}else O(null,n,{})},cd=function({id:n,key:t,encryptedBytes:e,decryptionWorker:i,segment:s,doneFn:r},o){const d=v=>{if(v.data.source===n){i.removeEventListener("message",d);const g=v.data.decrypted;o(new Uint8Array(g.bytes,g.byteOffset,g.byteLength))}};let f;i.onerror=()=>{const v="An error occurred in the decryption worker",g=mr({segment:s}),O={message:v,metadata:{error:new Error(v),errorType:_t.Error.StreamingFailedToDecryptSegment,segmentInfo:g,keyInfo:{uri:s.key.resolvedUri||s.map.key.resolvedUri}}};r(O,s)},i.addEventListener("message",d),f=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),i.postMessage(zc({source:n,encrypted:e,key:f,iv:t.iv}),[e.buffer,f.buffer])},Sp=({xhr:n,xhrOptions:t,decryptionWorker:e,segment:i,abortFn:s,progressFn:r,trackInfoFn:o,timingInfoFn:d,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:g,captionsFn:O,isEndOfTimeline:A,endedTimelineFn:W,dataFn:I,doneFn:X,onTransmuxerLog:dt,triggerSegmentEventFn:ht})=>{const lt=[],gt=(({activeXhrs:Ft,decryptionWorker:ce,trackInfoFn:ae,timingInfoFn:fe,videoSegmentTimingInfoFn:ie,audioSegmentTimingInfoFn:ne,id3Fn:Re,captionsFn:He,isEndOfTimeline:Fe,endedTimelineFn:Le,dataFn:_i,doneFn:Qi,onTransmuxerLog:Ss,triggerSegmentEventFn:cs})=>{let Bn=0,gr=!1;return(ss,Gi)=>{if(!gr){if(ss)return gr=!0,Cl(Ft),Qi(ss,Gi);if(Bn+=1,Bn===Ft.length){const ds=function(){if(Gi.encryptedBytes)return(({decryptionWorker:qr,segment:ln,trackInfoFn:Ja,timingInfoFn:la,videoSegmentTimingInfoFn:Za,audioSegmentTimingInfoFn:to,id3Fn:ua,captionsFn:eo,isEndOfTimeline:io,endedTimelineFn:no,dataFn:so,doneFn:ro,onTransmuxerLog:ao,triggerSegmentEventFn:ca})=>{ca({type:"segmentdecryptionstart"}),cd({id:ln.requestId,key:ln.key,encryptedBytes:ln.encryptedBytes,decryptionWorker:qr,segment:ln,doneFn:ro},ws=>{ln.bytes=ws,ca({type:"segmentdecryptioncomplete",segment:ln}),ud({segment:ln,bytes:ln.bytes,trackInfoFn:Ja,timingInfoFn:la,videoSegmentTimingInfoFn:Za,audioSegmentTimingInfoFn:to,id3Fn:ua,captionsFn:eo,isEndOfTimeline:io,endedTimelineFn:no,dataFn:so,doneFn:ro,onTransmuxerLog:ao,triggerSegmentEventFn:ca})})})({decryptionWorker:ce,segment:Gi,trackInfoFn:ae,timingInfoFn:fe,videoSegmentTimingInfoFn:ie,audioSegmentTimingInfoFn:ne,id3Fn:Re,captionsFn:He,isEndOfTimeline:Fe,endedTimelineFn:Le,dataFn:_i,doneFn:Qi,onTransmuxerLog:Ss,triggerSegmentEventFn:cs});ud({segment:Gi,bytes:Gi.bytes,trackInfoFn:ae,timingInfoFn:fe,videoSegmentTimingInfoFn:ie,audioSegmentTimingInfoFn:ne,id3Fn:Re,captionsFn:He,isEndOfTimeline:Fe,endedTimelineFn:Le,dataFn:_i,doneFn:Qi,onTransmuxerLog:Ss,triggerSegmentEventFn:cs})};if(Gi.endOfAllRequests=Date.now(),Gi.map&&Gi.map.encryptedBytes&&!Gi.map.bytes)return cs({type:"segmentdecryptionstart",segment:Gi}),cd({decryptionWorker:ce,id:Gi.requestId+"-init",encryptedBytes:Gi.map.encryptedBytes,key:Gi.map.key,segment:Gi,doneFn:Qi},qr=>{Gi.map.bytes=qr,cs({type:"segmentdecryptioncomplete",segment:Gi}),ld(Gi,ln=>{if(ln)return Cl(Ft),Qi(ln,Gi);ds()})});ds()}}}})({activeXhrs:lt,decryptionWorker:e,trackInfoFn:o,timingInfoFn:d,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:g,captionsFn:O,isEndOfTimeline:A,endedTimelineFn:W,dataFn:I,doneFn:X,onTransmuxerLog:dt,triggerSegmentEventFn:ht});if(i.key&&!i.key.bytes){const Ft=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&Ft.push(i.map.key);const ce=Si(t,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),ae=od(i,Ft,gt,ht);ht({type:"segmentkeyloadstart",segment:i,keyInfo:{uri:i.key.resolvedUri}});const fe=n(ce,ae);lt.push(fe)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const fe=Si(t,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),ie=od(i,[i.map.key],gt,ht);ht({type:"segmentkeyloadstart",segment:i,keyInfo:{uri:i.map.key.resolvedUri}});const ne=n(fe,ie);lt.push(ne)}const Ft=Si(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Tl(i.map),requestType:"segment-media-initialization"}),ce=(({segment:fe,finishProcessingFn:ie,triggerSegmentEventFn:ne})=>(Re,He)=>{const Fe=xl(Re,He);if(Fe)return ie(Fe,fe);const Le=new Uint8Array(He.response);if(ne({type:"segmentloaded",segment:fe}),fe.map.key)return fe.map.encryptedBytes=Le,ie(null,fe);fe.map.bytes=Le,ld(fe,function(_i){if(_i)return _i.xhr=He,_i.status=He.status,ie(_i,fe);ie(null,fe)})})({segment:i,finishProcessingFn:gt,triggerSegmentEventFn:ht});ht({type:"segmentloadstart",segment:i});const ae=n(Ft,ce);lt.push(ae)}const Rt=Si(t,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Tl(i),requestType:"segment"}),vt=(({segment:Ft,finishProcessingFn:ce,responseType:ae,triggerSegmentEventFn:fe})=>(ie,ne)=>{const Re=xl(ie,ne);if(Re)return ce(Re,Ft);fe({type:"segmentloaded",segment:Ft});const He=ae!=="arraybuffer"&&ne.responseText?(Fe=>{const Le=new Uint8Array(new ArrayBuffer(Fe.length));for(let _i=0;_i<Fe.length;_i++)Le[_i]=Fe.charCodeAt(_i);return Le.buffer})(ne.responseText.substring(Ft.lastReachedChar||0)):ne.response;return Ft.stats=(Fe=>({bandwidth:Fe.bandwidth,bytesReceived:Fe.bytesReceived||0,roundTripTime:Fe.roundTripTime||0}))(ne),Ft.key?Ft.encryptedBytes=new Uint8Array(He):Ft.bytes=new Uint8Array(He),ce(null,Ft)})({segment:i,finishProcessingFn:gt,responseType:Rt.responseType,triggerSegmentEventFn:ht});ht({type:"segmentloadstart",segment:i});const ct=n(Rt,vt);ct.addEventListener("progress",(({segment:Ft,progressFn:ce,trackInfoFn:ae,timingInfoFn:fe,videoSegmentTimingInfoFn:ie,audioSegmentTimingInfoFn:ne,id3Fn:Re,captionsFn:He,isEndOfTimeline:Fe,endedTimelineFn:Le,dataFn:_i})=>Qi=>{if(!Qi.target.aborted)return Ft.stats=Si(Ft.stats,(Ss=>{const cs=Ss.target,Bn={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-cs.requestTime||0};return Bn.bytesReceived=Ss.loaded,Bn.bandwidth=Math.floor(Bn.bytesReceived/Bn.roundTripTime*8*1e3),Bn})(Qi)),!Ft.stats.firstBytesReceivedAt&&Ft.stats.bytesReceived&&(Ft.stats.firstBytesReceivedAt=Date.now()),ce(Qi,Ft)})({segment:i,progressFn:r,trackInfoFn:o,timingInfoFn:d,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:g,captionsFn:O,isEndOfTimeline:A,endedTimelineFn:W,dataFn:I})),lt.push(ct);const Ct={};return lt.forEach(Ft=>{Ft.addEventListener("loadend",(({loadendState:ce,abortFn:ae})=>fe=>{fe.target.aborted&&ae&&!ce.calledAbortFn&&(ae(),ce.calledAbortFn=!0)})({loadendState:Ct,abortFn:s}))}),()=>Cl(lt)},wp=ns("CodecUtils"),dd=(n,t)=>{const e=t.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&e.AUDIO&&n.mediaGroups.AUDIO[e.AUDIO]},Ga=function(n){const t={};return n.forEach(({mediaType:e,type:i,details:s})=>{t[e]=t[e]||[],t[e].push(Tt(`${i}${s}`))}),Object.keys(t).forEach(function(e){if(t[e].length>1)return wp(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]}),t},hd=function(n){let t=0;return n.audio&&t++,n.video&&t++,t},aa=function(n,t){const e=t.attributes||{},i=Ga(function(s){const r=s.attributes||{};if(r.CODECS)return Et(r.CODECS)}(t)||[]);if(dd(n,t)&&!i.audio&&!((s,r)=>{if(!dd(s,r))return!0;const o=r.attributes||{},d=s.mediaGroups.AUDIO[o.AUDIO];for(const f in d)if(!d[f].uri&&!d[f].playlists)return!0;return!1})(n,t)){const s=Ga(function(r,o){if(!r.mediaGroups.AUDIO||!o)return null;var d=r.mediaGroups.AUDIO[o];if(!d)return null;for(var f in d){var v=d[f];if(v.default&&v.playlists)return Et(v.playlists[0].attributes.CODECS)}return null}(n,e.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},Xa=ns("PlaylistSelector"),pd=function(n){if(!n||!n.playlist)return;const t=n.playlist;return JSON.stringify({id:t.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:t.attributes&&t.attributes.CODECS||""})},Ya=function(n,t){if(!n)return"";const e=p().getComputedStyle(n);return e?e[t]:""},jr=function(n,t){const e=n.slice();n.sort(function(i,s){const r=t(i,s);return r===0?e.indexOf(i)-e.indexOf(s):r})},kl=function(n,t){let e,i;return n.attributes.BANDWIDTH&&(e=n.attributes.BANDWIDTH),e=e||p().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||p().Number.MAX_VALUE,e-i};let fd=function(n,t,e,i,s,r){if(!n)return;const o={bandwidth:t,width:e,height:i,limitRenditionByPlayerDimensions:s};let d=n.playlists;An.isAudioOnly(n)&&(d=r.getAudioTrackPlaylists_(),o.audioOnly=!0);let f=d.map(vt=>{let ct;const Ct=vt.attributes&&vt.attributes.RESOLUTION&&vt.attributes.RESOLUTION.width,Ft=vt.attributes&&vt.attributes.RESOLUTION&&vt.attributes.RESOLUTION.height;return ct=vt.attributes&&vt.attributes.BANDWIDTH,ct=ct||p().Number.MAX_VALUE,{bandwidth:ct,width:Ct,height:Ft,playlist:vt}});jr(f,(vt,ct)=>vt.bandwidth-ct.bandwidth),f=f.filter(vt=>!An.isIncompatible(vt.playlist));let v=f.filter(vt=>An.isEnabled(vt.playlist));v.length||(v=f.filter(vt=>!An.isDisabled(vt.playlist)));const g=v.filter(vt=>vt.bandwidth*on.BANDWIDTH_VARIANCE<t);let O=g[g.length-1];const A=g.filter(vt=>vt.bandwidth===O.bandwidth)[0];if(s===!1){const vt=A||v[0]||f[0];if(vt&&vt.playlist){let ct="sortedPlaylistReps";return A&&(ct="bandwidthBestRep"),v[0]&&(ct="enabledPlaylistReps"),Xa(`choosing ${pd(vt)} using ${ct} with options`,o),vt.playlist}return Xa("could not choose a playlist with options",o),null}const W=g.filter(vt=>vt.width&&vt.height);jr(W,(vt,ct)=>vt.width-ct.width);const I=W.filter(vt=>vt.width===e&&vt.height===i);O=I[I.length-1];const X=I.filter(vt=>vt.bandwidth===O.bandwidth)[0];let dt,ht,lt,gt;if(X||(dt=W.filter(vt=>vt.width>e||vt.height>i),ht=dt.filter(vt=>vt.width===dt[0].width&&vt.height===dt[0].height),O=ht[ht.length-1],lt=ht.filter(vt=>vt.bandwidth===O.bandwidth)[0]),r.leastPixelDiffSelector){const vt=W.map(ct=>(ct.pixelDiff=Math.abs(ct.width-e)+Math.abs(ct.height-i),ct));jr(vt,(ct,Ct)=>ct.pixelDiff===Ct.pixelDiff?Ct.bandwidth-ct.bandwidth:ct.pixelDiff-Ct.pixelDiff),gt=vt[0]}const Rt=gt||lt||X||A||v[0]||f[0];if(Rt&&Rt.playlist){let vt="sortedPlaylistReps";return gt?vt="leastPixelDiffRep":lt?vt="resolutionPlusOneRep":X?vt="resolutionBestRep":A?vt="bandwidthBestRep":v[0]&&(vt="enabledPlaylistReps"),Xa(`choosing ${pd(Rt)} using ${vt} with options`,o),Rt.playlist}return Xa("could not choose a playlist with options",o),null};const md=function(){let n=this.useDevicePixelRatio&&p().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),fd(this.playlists.main,this.systemBandwidth,parseInt(Ya(this.tech_.el(),"width"),10)*n,parseInt(Ya(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)};function gd(n){try{return new URL(n).pathname.split("/").slice(-2).join("/")}catch{return""}}const Ep={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Cp=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),yd=(n,t,e)=>{n.metadataTrack_||(n.metadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,_t.browser.IS_ANY_SAFARI||(n.metadataTrack_.inBandMetadataTrackDispatchType=t))},oa=function(n,t,e){let i,s;if(e&&e.cues)for(i=e.cues.length;i--;)s=e.cues[i],s.startTime>=n&&s.endTime<=t&&e.removeCue(s)},_d=n=>typeof n=="number"&&isFinite(n),vd=1/60,Br=n=>{const{startOfSegment:t,duration:e,segment:i,part:s,playlist:{mediaSequence:r,id:o,segments:d=[]},mediaIndex:f,partIndex:v,timeline:g}=n,O=d.length-1;let A="mediaIndex/partIndex increment";n.getMediaInfoForTime?A=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(A="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(A+=` with independent ${n.independent}`);const W=typeof v=="number",I=n.segment.uri?"segment":"pre-segment",X=W?kc({preloadSegment:i})-1:0;return`${I} [${r+f}/${r+O}]`+(W?` part [${v}/${X}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(W?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${t}] duration [${e}] timeline [${g}] selected by [${A}] playlist [${o}]`},bd=n=>`${n}TimingInfo`,Al=({timelineChangeController:n,currentTimeline:t,segmentTimeline:e,loaderType:i,audioDisabled:s})=>{if(t===e)return!1;if(i==="audio"){const r=n.lastTimelineChange({type:"main"});return!r||r.to!==e}if(i==="main"&&s){const r=n.pendingTimelineChange({type:"audio"});return!r||r.to!==e}return!1},Qs=n=>{const t=n.pendingSegment_;if(t&&Al({timelineChangeController:n.timelineChangeController_,currentTimeline:n.currentTimeline_,segmentTimeline:t.timeline,loaderType:n.loaderType_,audioDisabled:n.audioDisabled_})&&(e=>{if(!e)return!1;const i=e.pendingTimelineChange({type:"audio"}),s=e.pendingTimelineChange({type:"main"}),r=i&&s,o=r&&i.to!==s.to;return!(!r||i.from===-1||s.from===-1||!o)})(n.timelineChangeController_)){if((e=>{const i=e.timelineChangeController_.pendingTimelineChange({type:"audio"}),s=e.timelineChangeController_.pendingTimelineChange({type:"main"});return i&&s&&i.to<s.to})(n))return void n.timelineChangeController_.trigger("audioTimelineBehind");n.timelineChangeController_.trigger("fixBadTimelineChange")}},Td=({segmentDuration:n,maxDuration:t})=>!!n&&Math.round(n)>t+Rs,mr=({type:n,segment:t})=>{if(!t)return;const e=!!(t.key||t.map&&t.map.ke),i=!!(t.map&&!t.map.bytes),s=t.startOfSegment===void 0?t.start:t.startOfSegment;return{type:n||t.type,uri:t.resolvedUri||t.uri,start:s,duration:t.duration,isEncrypted:e,isMediaInitialization:i}};class Il extends _t.EventTarget{constructor(t,e={}){if(super(),!t)throw new TypeError("Initialization settings are required");if(typeof t.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.addMetadataToTextTrack=t.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=ns(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Qs(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(G({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Qs(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(G({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Qs(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Qs(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return(t=>{const e=new bp;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&p().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING")return this.pendingSegment_&&(this.pendingSegment_=null),void this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,p().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return this.state!=="APPENDING"||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)}error(t){return t!==void 0&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&rd(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return gn();if(this.loaderType_==="main"){const{hasAudio:e,hasVideo:i,isMuxed:s}=t;if(i&&e&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,e=!1){if(!t)return null;const i=Wa(t);let s=this.initSegments_[i];return e&&!s&&t.bytes&&(this.initSegments_[i]=s={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),s||t}segmentKey(t,e=!1){if(!t)return null;const i=Wc(t);let s=this.keyCache_[i];this.cacheEncryptionKeys_&&e&&!s&&t.bytes&&(this.keyCache_[i]=s={resolvedUri:t.resolvedUri,bytes:t.bytes});const r={resolvedUri:(s||t).resolvedUri};return s&&(r.bytes=s.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return this.state==="INIT"&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,e={}){if(!t||this.playlist_&&this.playlist_.endList&&t.endList&&this.playlist_.uri===t.uri)return;const i=this.playlist_,s=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=e,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));let r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_(`playlist update [${r} => ${t.id||t.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(t,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${dl(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==t.uri)return this.mediaIndex!==null&&(t.endList||typeof t.partTargetDuration!="number"?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const o=t.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const d=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!d.parts||!d.parts.length||!d.parts[this.partIndex])){const f=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=f}}s&&(s.mediaIndex-=o,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=t.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,t)}pause(){this.checkBufferTimeout_&&(p().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&rd(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const t=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!t&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,e,i=()=>{},s=!1){if(e===1/0&&(e=this.duration_()),e<=t)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const o=()=>{r--,r===0&&i()};!s&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(t,e,o)),(s||this.loaderType_==="main")&&(this.gopBuffer_=((d,f,v,g)=>{const O=Math.ceil((f-g)*en.ONE_SECOND_IN_TS),A=Math.ceil((v-g)*en.ONE_SECOND_IN_TS),W=d.slice();let I=d.length;for(;I--&&!(d[I].pts<=A););if(I===-1)return W;let X=I+1;for(;X--&&!(d[X].pts<=O););return X=Math.max(X,0),W.splice(X,I-X+1),W})(this.gopBuffer_,t,e,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(t,e,o));for(const d in this.inbandTextTracks_)oa(t,e,this.inbandTextTracks_[d]);oa(t,e,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&p().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=p().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&p().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=p().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const t=this.chooseNextRequest_();if(!t)return;const e={segmentInfo:mr({type:this.loaderType_,segment:t})};this.trigger({type:"segmentselected",metadata:e}),typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t)}isEndOfStream_(t=this.mediaIndex,e=this.playlist_,i=this.partIndex){if(!e||!this.mediaSource_)return!1;const s=typeof t=="number"&&e.segments[t],r=t+1===e.segments.length,o=!s||!s.parts||i+1===s.parts.length;return e.endList&&this.mediaSource_.readyState==="open"&&r&&o}chooseNextRequest_(){const t=this.buffered_(),e=dl(t)||0,i=hl(t,this.currentTime_()),s=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||s||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const d={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(d.isSyncRequest)d.mediaIndex=function(A,W,I){W=W||[];const X=[];let dt=0;for(let ht=0;ht<W.length;ht++){const lt=W[ht];if(A===lt.timeline&&(X.push(ht),dt+=lt.duration,dt>I))return ht}return X.length===0?0:X[X.length-1]}(this.currentTimeline_,o,e),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${d.mediaIndex}`);else if(this.mediaIndex!==null){const A=o[this.mediaIndex],W=typeof this.partIndex=="number"?this.partIndex:-1;d.startOfSegment=A.end?A.end:e,A.parts&&A.parts[W+1]?(d.mediaIndex=this.mediaIndex,d.partIndex=W+1):d.mediaIndex=this.mediaIndex+1}else{let A,W,I;const X=this.fetchAtBuffer_?e:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${X}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${e}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const dt=this.getSyncInfoFromMediaSequenceSync_(X);if(!dt){const ht="No sync info found while using media sequence sync";return this.error({message:ht,metadata:{errorType:_t.Error.StreamingFailedToSelectNextSegment,error:new Error(ht)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${dt.start} --> ${dt.end})`),A=dt.segmentIndex,W=dt.partIndex,I=dt.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const dt=An.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:X,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});A=dt.segmentIndex,W=dt.partIndex,I=dt.startTime}d.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${X}`:`currentTime ${X}`,d.mediaIndex=A,d.startOfSegment=I,d.partIndex=W,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${d.mediaIndex} `)}const f=o[d.mediaIndex];let v=f&&typeof d.partIndex=="number"&&f.parts&&f.parts[d.partIndex];if(!f||typeof d.partIndex=="number"&&!v)return null;typeof d.partIndex!="number"&&f.parts&&(d.partIndex=0,v=f.parts[0]);const g=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&v&&!g&&!v.independent)if(d.partIndex===0){const A=o[d.mediaIndex-1],W=A.parts&&A.parts.length&&A.parts[A.parts.length-1];W&&W.independent&&(d.mediaIndex-=1,d.partIndex=A.parts.length-1,d.independent="previous segment")}else f.parts[d.partIndex-1].independent&&(d.partIndex-=1,d.independent="previous part");const O=this.mediaSource_&&this.mediaSource_.readyState==="ended";return d.mediaIndex>=o.length-1&&O&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,d.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(d))}getSyncInfoFromMediaSequenceSync_(t){if(!this.mediaSequenceSync_)return null;const e=Math.max(t,this.mediaSequenceSync_.start);t!==e&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${t} to ${e}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(e);if(!i)return null;if(!i.isAppended)return i;const s=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return s?(s.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),s):null}generateSegmentInfo_(t){const{independent:e,playlist:i,mediaIndex:s,startOfSegment:r,isSyncRequest:o,partIndex:d,forceTimestampOffset:f,getMediaInfoForTime:v}=t,g=i.segments[s],O=typeof d=="number"&&g.parts[d],A={requestId:"segment-loader-"+Math.random(),uri:O&&O.resolvedUri||g.resolvedUri,mediaIndex:s,partIndex:O?d:null,isSyncRequest:o,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:g.timeline,duration:O&&O.duration||g.duration,segment:g,part:O,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:e},W=f!==void 0?f:this.isPendingTimestampOffset_;A.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:W});const I=dl(this.sourceUpdater_.audioBuffered());return typeof I=="number"&&(A.audioAppendStart=I-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(A.gopsToAlignWith=((X,dt,ht)=>{if(dt==null||!X.length)return[];const lt=Math.ceil((dt-ht+3)*en.ONE_SECOND_IN_TS);let gt;for(gt=0;gt<X.length&&!(X[gt].pts>lt);gt++);return X.slice(gt)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),A}timestampOffsetForSegment_(t){return(({segmentTimeline:e,currentTimeline:i,startOfSegment:s,buffered:r,overrideCheck:o})=>o||e!==i?e<i?s:r.length?r.end(r.length-1):s:null)(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;const e=this.currentTime_(),i=t.bandwidth,s=this.pendingSegment_.duration,r=An.estimateSegmentRequestTime(s,i,this.playlist_,t.bytesReceived),o=function(g,O,A=1){return((g.length?g.end(g.length-1):0)-O)/A}(this.buffered_(),e,this.vhs_.tech_.playbackRate())-1;if(r<=o)return;const d=function(g){const{main:O,currentTime:A,bandwidth:W,duration:I,segmentDuration:X,timeUntilRebuffer:dt,currentTimeline:ht,syncController:lt}=g,gt=O.playlists.filter(Ct=>!An.isIncompatible(Ct));let Rt=gt.filter(An.isEnabled);Rt.length||(Rt=gt.filter(Ct=>!An.isDisabled(Ct)));const vt=Rt.filter(An.hasAttribute.bind(null,"BANDWIDTH")).map(Ct=>{const Ft=lt.getSyncPoint(Ct,I,ht,A)?1:2;return{playlist:Ct,rebufferingImpact:An.estimateSegmentRequestTime(X,W,Ct)*Ft-dt}}),ct=vt.filter(Ct=>Ct.rebufferingImpact<=0);return jr(ct,(Ct,Ft)=>kl(Ft.playlist,Ct.playlist)),ct.length?ct[0]:(jr(vt,(Ct,Ft)=>Ct.rebufferingImpact-Ft.rebufferingImpact),vt[0]||null)}({main:this.vhs_.playlists.main,currentTime:e,bandwidth:i,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!d)return;const f=r-o-d.rebufferingImpact;let v=.5;o<=Rs&&(v=1),!d.playlist||d.playlist.uri===this.playlist_.uri||f<v||(this.bandwidth=d.playlist.attributes.BANDWIDTH*on.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${Br(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,e){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.trigger("progress")}handleTrackInfo_(t,e){const{hasAudio:i,hasVideo:s}=e,r={segmentInfo:mr({type:this.loaderType_,segment:t}),trackInfo:{hasAudio:i,hasVideo:s}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(e)||(e=e||{},function(o,d){if(!o&&!d||!o&&d||o&&!d)return!1;if(o===d)return!0;const f=Object.keys(o).sort(),v=Object.keys(d).sort();if(f.length!==v.length)return!1;for(let g=0;g<f.length;g++){const O=f[g];if(O!==v[g]||o[O]!==d[O])return!1}return!0}(this.currentMediaInfo_,e)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=e,this.currentMediaInfo_=e,this.logger_("trackinfo update",e),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=e,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Qs(this)))}handleTimingInfo_(t,e,i,s){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;const r=this.pendingSegment_,o=bd(e);r[o]=r[o]||{},r[o][i]=s,this.logger_(`timinginfo: ${e} - ${i} - ${s}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Qs(this)}handleCaptions_(t,e){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(e.length===0)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,e));const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};e.forEach(r=>{s[r.stream]=s[r.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[r.stream];o.startTime=Math.min(o.startTime,r.startTime+i),o.endTime=Math.max(o.endTime,r.endTime+i),o.captions.push(r)}),Object.keys(s).forEach(r=>{const{startTime:o,endTime:d,captions:f}=s[r],v=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${d} for ${r}`),function(g,O,A){if(!g[A]){O.trigger({type:"usage",name:"vhs-608"});let W=A;/^cc708_/.test(A)&&(W="SERVICE"+A.split("_")[1]);const I=O.textTracks().getTrackById(W);if(I)g[A]=I;else{let X=A,dt=A,ht=!1;const lt=(O.options_.vhs&&O.options_.vhs.captionServices||{})[W];lt&&(X=lt.label,dt=lt.language,ht=lt.default),g[A]=O.addRemoteTextTrack({kind:"captions",id:W,default:ht,label:X,language:dt},!1).track}}}(v,this.vhs_.tech_,r),oa(o,d,v[r]),function({inbandTextTracks:g,captionArray:O,timestampOffset:A}){if(!O)return;const W=p().WebKitDataCue||p().VTTCue;O.forEach(I=>{const X=I.stream;I.content?I.content.forEach(dt=>{const ht=new W(I.startTime+A,I.endTime+A,dt.text);ht.line=dt.line,ht.align="left",ht.position=dt.position,ht.positionAlign="line-left",g[X].addCue(ht)}):g[X].addCue(new W(I.startTime+A,I.endTime+A,I.text))})}({captionArray:f,inbandTextTracks:v,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,e,i){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(i,e,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,e,i)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const t=this.callQueue_;this.callQueue_=[],t.forEach(e=>e())}processLoadQueue_(){const t=this.loadQueue_;this.loadQueue_=[],t.forEach(e=>e())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&Al({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const t=this.pendingSegment_,e=this.getCurrentMediaInfo_();if(!t||!e)return!1;const{hasAudio:i,hasVideo:s,isMuxed:r}=e;return!(s&&!t.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!t.audioTimingInfo||Al({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,e){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return Qs(this),void this.callQueue_.push(this.handleData_.bind(this,t,e));const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),i.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),i.isFmp4=t.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[bd(e.type)].start;else{const s=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&s&&s.hasVideo;let o;r&&(o=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:o,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,e.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,e)}}updateAppendInitSegmentStatus(t,e){this.loaderType_!=="main"||typeof t.timestampOffset!="number"||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[e]!==t.playlist&&(this.appendInitSegment_[e]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:e,map:i,playlist:s}){if(i){const r=Wa(i);if(this.activeInitSegmentId_===r)return null;e=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=r}return e&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=s,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,e):null}handleQuotaExceededError_({segmentInfo:t,type:e,bytes:i},s){const r=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+pr(r).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+pr(o).join(", "));const d=r.length?r.start(0):0,f=r.length?r.end(r.length-1):0,v=o.length?o.start(0):0,g=o.length?o.end(o.length-1):0;if(f-d<=1&&g-v<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${pr(r).join(", ")}, video buffer: ${pr(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:e,bytes:i}));const O=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${O}`),this.remove(0,O,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=p().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:t,type:e,bytes:i},s){s&&(s.code!==22?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error({message:`${e} append of ${i.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`,metadata:{errorType:_t.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:t,type:e,bytes:i}))}appendToSourceBuffer_({segmentInfo:t,type:e,initSegment:i,data:s,bytes:r}){if(!r){const d=[s];let f=s.byteLength;i&&(d.unshift(i),f+=i.byteLength),r=(v=>{let g,O=0;return v.bytes&&(g=new Uint8Array(v.bytes),v.segments.forEach(A=>{g.set(A,O),O+=A.byteLength})),g})({bytes:f,segments:d})}const o={segmentInfo:mr({type:this.loaderType_,segment:t})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:t,type:e,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:t,type:e,bytes:r}))}handleSegmentTimingInfo_(t,e,i){if(!this.pendingSegment_||e!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,r=`${t}TimingInfo`;s[r]||(s[r]={}),s[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,s[r].transmuxedPresentationStart=i.start.presentation,s[r].transmuxedDecodeStart=i.start.decode,s[r].transmuxedPresentationEnd=i.end.presentation,s[r].transmuxedDecodeEnd=i.end.decode,s[r].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(t,e){const{type:i,data:s}=e;if(!s||!s.byteLength||i==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:i,initSegment:e.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:r,data:s})}loadSegment_(t){if(this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_())return Qs(this),void this.loadQueue_.push(()=>{const e=G({},t,{forceTimestampOffset:!0});G(t,this.generateSegmentInfo_(e)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)});this.updateTransmuxerAndRequestSegment_(t)}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));const e=this.createSimplifiedSegmentObj_(t),i=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),s=this.mediaIndex!==null,r=t.timeline!==this.currentTimeline_&&t.timeline>0,o=i||s&&r;this.logger_(`Requesting
${gd(t.uri)}
${Br(t)}`),e.map&&!e.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Sp({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:e,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:d,level:f,stream:v})=>{this.logger_(`${Br(t)} logged from transmuxer stream ${v} as a ${f}: ${d}`)},triggerSegmentEventFn:({type:d,segment:f,keyInfo:v,trackInfo:g,timingInfo:O})=>{const A={segmentInfo:mr({segment:f})};v&&(A.keyInfo=v),g&&(A.trackInfo=g),O&&(A.timingInfo=O),this.trigger({type:d,metadata:A})}})}trimBackBuffer_(t){const e=((i,s,r)=>{let o=s-on.BACK_BUFFER_LENGTH;i.length&&(o=Math.max(o,i.start(0)));const d=s-r;return Math.min(d,o)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)}createSimplifiedSegmentObj_(t){const e=t.segment,i=t.part,s=t.segment.key||t.segment.map&&t.segment.map.key,r=t.segment.map&&!t.segment.map.bytes,o={resolvedUri:i?i.resolvedUri:e.resolvedUri,byterange:i?i.byterange:e.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part,type:this.loaderType_,start:t.startOfSegment,duration:t.duration,isEncrypted:s,isMediaInitialization:r},d=t.playlist.segments[t.mediaIndex-1];if(d&&d.timeline===e.timeline&&(d.videoTimingInfo?o.baseStartTime=d.videoTimingInfo.transmuxedDecodeEnd:d.audioTimingInfo&&(o.baseStartTime=d.audioTimingInfo.transmuxedDecodeEnd)),e.key){const f=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);o.key=this.segmentKey(e.key),o.key.iv=f}return e.map&&(o.map=this.initSegmentForMap(e.map)),o}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,e){if(this.pendingSegment_.byteLength=e.bytesReceived,t<vd)return void this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record 0.016666666666666666`);const i={bandwidthInfo:{from:this.bandwidth,to:e.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,e,i){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,e,i));if(this.saveTransferStats_(e.stats),!this.pendingSegment_||e.requestId!==this.pendingSegment_.requestId)return;if(t)return this.pendingSegment_=null,this.state="READY",t.code===El?void 0:(this.pause(),t.code===wl?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,e.stats),s.endOfAllRequests=e.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=((r,o,d)=>{if(!o.length)return r;if(d)return o.slice();const f=o[0].pts;let v=0;for(;v<r.length&&!(r[v].pts>=f);v++);return r.slice(0,v).concat(o)})(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(t){const e=this.syncController_.mappingForTimeline(t);e!==null&&(this.timeMapping_=e)}updateMediaSecondsLoaded_(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return t!==null&&(this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:t,playlist:e,mediaIndex:i,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:r,useVideoTimingInfo:o,videoTimingInfo:d,audioTimingInfo:f}){if(t!==void 0)return t;if(!o)return f.start;const v=e.segments[i-1];return i!==0&&v&&v.start!==void 0&&v.end===s+r?d.start:s}waitForAppendsToComplete_(t){const e=this.getCurrentMediaInfo_(t);if(!e)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:i,hasVideo:s,isMuxed:r}=e,o=this.loaderType_==="main"&&s,d=!this.audioDisabled_&&i&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||typeof t.timestampOffset!="number"||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);o&&t.waitingOnAppends++,d&&t.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),d&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){const e=((i,s,r)=>i==="main"&&s&&r?r.hasAudio||r.hasVideo?s.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!s.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!e&&(this.error({message:e,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(t){if(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")return;let e=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),e=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),e=!0),e&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:e,timingInfo:i}){return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};const e=this.getMediaInfo_(),i=this.loaderType_==="main"&&e&&e.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;i&&(t.timingInfo.end=typeof i.end=="number"?i.end:i.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_){const d={segmentInfo:mr({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:d})}if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const t=this.pendingSegment_;t.part&&t.part.syncInfo?t.part.syncInfo.markAppended():t.segment.syncInfo&&t.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});const e=((d,f)=>{if(f!=="hls")return null;const v=(I=>{let X=0;return["video","audio"].forEach(function(dt){const ht=I[`${dt}TimingInfo`];if(!ht)return;const{start:lt,end:gt}=ht;let Rt;typeof lt=="bigint"||typeof gt=="bigint"?Rt=p().BigInt(gt)-p().BigInt(lt):typeof lt=="number"&&typeof gt=="number"&&(Rt=gt-lt),Rt!==void 0&&Rt>X&&(X=Rt)}),typeof X=="bigint"&&X<Number.MAX_SAFE_INTEGER&&(X=Number(X)),X})({audioTimingInfo:d.audioTimingInfo,videoTimingInfo:d.videoTimingInfo});if(!v)return null;const g=d.playlist.targetDuration,O=Td({segmentDuration:v,maxDuration:2*g}),A=Td({segmentDuration:v,maxDuration:g}),W=`Segment with index ${d.mediaIndex} from playlist ${d.playlist.id} has a duration of ${v} when the reported duration is ${d.duration} and the target duration is ${g}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return O||A?{severity:O?"warn":"info",message:W}:null})(t,this.sourceType_);if(e&&(e.severity==="warn"?_t.log.warn(e.message):this.logger_(e.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Br(t)}`);this.logger_(`Appended ${Br(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_!=="main"||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");const i=t.segment,s=t.part,r=i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration,o=s&&s.end&&this.currentTime_()-s.end>3*t.playlist.partTargetDuration;if(r||o)return this.logger_(`bad ${r?"segment":"part"} ${Br(t)}`),void this.resetEverything();this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<vd)return void this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record 0.016666666666666666`);const e=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,s=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(s-e)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;const e=t.segment,i=e.start,s=e.end;if(!_d(i)||!_d(s))return;oa(i,s,this.segmentMetadataTrack_);const r=p().WebKitDataCue||p().VTTCue,o={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,programDateTime:e.programDateTime,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:s},d=new r(i,s,JSON.stringify(o));d.value=o,this.segmentMetadataTrack_.addCue(d)}}function Ns(){}const Sd=function(n){return typeof n!="string"?n:n.replace(/./,t=>t.toUpperCase())},xp=["video","audio"],Pl=(n,t)=>{const e=t[`${n}Buffer`];return e&&e.updating||t.queuePending[n]},Fr=(n,t)=>{if(t.queue.length===0)return;let e=0,i=t.queue[e];if(i.type!=="mediaSource"){if(n!=="mediaSource"&&t.ready()&&t.mediaSource.readyState!=="closed"&&!Pl(n,t)){if(i.type!==n){if(e=((s,r)=>{for(let o=0;o<r.length;o++){const d=r[o];if(d.type==="mediaSource")return null;if(d.type===s)return o}return null})(n,t.queue),e===null)return;i=t.queue[e]}return t.queue.splice(e,1),t.queuePending[n]=i,i.action(n,t),i.doneFn?void 0:(t.queuePending[n]=null,void Fr(n,t))}}else t.updating()||t.mediaSource.readyState==="closed"||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),Fr("audio",t),Fr("video",t))},wd=(n,t)=>{const e=t[`${n}Buffer`],i=Sd(n);e&&(e.removeEventListener("updateend",t[`on${i}UpdateEnd_`]),e.removeEventListener("error",t[`on${i}Error_`]),t.codecs[n]=null,t[`${n}Buffer`]=null)},Ts=(n,t)=>n&&t&&Array.prototype.indexOf.call(n.sourceBuffers,t)!==-1,kp=(n,t,e)=>(i,s)=>{const r=s[`${i}Buffer`];if(Ts(s.mediaSource,r)){s.logger_(`Appending segment ${t.mediaIndex}'s ${n.length} bytes to ${i}Buffer`);try{r.appendBuffer(n)}catch(o){s.logger_(`Error with code ${o.code} `+(o.code===22?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${i}Buffer`),s.queuePending[i]=null,e(o)}}},Ed=(n,t)=>(e,i)=>{const s=i[`${e}Buffer`];if(Ts(i.mediaSource,s)){i.logger_(`Removing ${n} to ${t} from ${e}Buffer`);try{s.remove(n,t)}catch{i.logger_(`Remove ${n} to ${t} from ${e}Buffer failed`)}}},Cd=n=>(t,e)=>{const i=e[`${t}Buffer`];Ts(e.mediaSource,i)&&(e.logger_(`Setting ${t}timestampOffset to ${n}`),i.timestampOffset=n)},xd=n=>(t,e)=>{n()},Ap=n=>t=>{if(t.mediaSource.readyState==="open"){t.logger_(`Calling mediaSource endOfStream(${n||""})`);try{t.mediaSource.endOfStream(n)}catch(e){_t.log.warn("Failed to call media source endOfStream",e)}}},Ip=n=>t=>{t.logger_(`Setting mediaSource duration to ${n}`);try{t.mediaSource.duration=n}catch(e){_t.log.warn("Failed to set media source duration",e)}},Pp=(n,t)=>e=>{const i=Sd(n),s=wt(t);e.logger_(`Adding ${n}Buffer with codec ${t} to mediaSource`);const r=e.mediaSource.addSourceBuffer(s);r.addEventListener("updateend",e[`on${i}UpdateEnd_`]),r.addEventListener("error",e[`on${i}Error_`]),e.codecs[n]=t,e[`${n}Buffer`]=r},Op=n=>t=>{const e=t[`${n}Buffer`];if(wd(n,t),Ts(t.mediaSource,e)){t.logger_(`Removing ${n}Buffer with codec ${t.codecs[n]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(e)}catch(i){_t.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,i)}}},Lp=n=>(t,e)=>{const i=e[`${t}Buffer`],s=wt(n);if(!Ts(e.mediaSource,i))return;const r=n.substring(0,n.indexOf(".")),o=e.codecs[t];if(o.substring(0,o.indexOf("."))===r)return;const d={codecsChangeInfo:{from:o,to:n}};e.trigger({type:"codecschange",metadata:d}),e.logger_(`changing ${t}Buffer codec from ${o} to ${n}`);try{i.changeType(s),e.codecs[t]=n}catch(f){d.errorType=_t.Error.StreamingCodecsChangeError,d.error=f,f.metadata=d,e.error_=f,e.trigger("error"),_t.log.warn(`Failed to changeType on ${t}Buffer`,f)}},jn=({type:n,sourceUpdater:t,action:e,doneFn:i,name:s})=>{t.queue.push({type:n,action:e,doneFn:i,name:s}),Fr(n,t)},kd=(n,t)=>e=>{const i=function(s){if(s.length===0)return"Buffered Ranges are empty";let r=`Buffered Ranges: 
`;for(let o=0;o<s.length;o++){const d=s.start(o),f=s.end(o);r+=`${d} --> ${f}. Duration (${f-d})
`}return r}(t[`${n}Buffered`]());if(t.logger_(`received "updateend" event for ${n} Source Buffer: `,i),t.queuePending[n]){const s=t.queuePending[n].doneFn;t.queuePending[n]=null,s&&s(t[`${n}Error_`])}Fr(n,t)};class Ad extends _t.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>Fr("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=ns("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=kd("video",this),this.onAudioUpdateEnd_=kd("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,e){jn({type:"mediaSource",sourceUpdater:this,action:Pp(t,e),name:"addSourceBuffer"})}abort(t){jn({type:t,sourceUpdater:this,action:(e,i)=>{if(i.mediaSource.readyState!=="open")return;const s=i[`${e}Buffer`];if(Ts(i.mediaSource,s)){i.logger_(`calling abort on ${e}Buffer`);try{s.abort()}catch(r){_t.log.warn(`Failed to abort on ${e}Buffer`,r)}}},name:"abort"})}removeSourceBuffer(t){this.canRemoveSourceBuffer()?jn({type:"mediaSource",sourceUpdater:this,action:Op(t),name:"removeSourceBuffer"}):_t.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!_t.browser.IS_FIREFOX&&p().MediaSource&&p().MediaSource.prototype&&typeof p().MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return p().SourceBuffer&&p().SourceBuffer.prototype&&typeof p().SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(t,e){this.canChangeType()?jn({type:t,sourceUpdater:this,action:Lp(e),name:"changeType"}):_t.log.error("changeType is not supported!")}addOrChangeSourceBuffers(t){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(e=>{const i=t[e];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(e,i);this.canChangeType()&&this.changeType(e,i)})}appendBuffer(t,e){const{segmentInfo:i,type:s,bytes:r}=t;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,e]),void this.logger_(`delayed audio append of ${r.length} until video append`);if(jn({type:s,sourceUpdater:this,action:kp(r,i||{mediaIndex:-1},e),doneFn:e,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(d=>{this.appendBuffer.apply(this,d)})}}audioBuffered(){return Ts(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:gn()}videoBuffered(){return Ts(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:gn()}buffered(){const t=Ts(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,e=Ts(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return e&&!t?this.audioBuffered():t&&!e?this.videoBuffered():function(i,s){let r=null,o=null,d=0;const f=[],v=[];if(!(i&&i.length&&s&&s.length))return gn();let g=i.length;for(;g--;)f.push({time:i.start(g),type:"start"}),f.push({time:i.end(g),type:"end"});for(g=s.length;g--;)f.push({time:s.start(g),type:"start"}),f.push({time:s.end(g),type:"end"});for(f.sort(function(O,A){return O.time-A.time}),g=0;g<f.length;g++)f[g].type==="start"?(d++,d===2&&(r=f[g].time)):f[g].type==="end"&&(d--,d===1&&(o=f[g].time)),r!==null&&o!==null&&(v.push([r,o]),r=null,o=null);return gn(v)}(this.audioBuffered(),this.videoBuffered())}setDuration(t,e=Ns){jn({type:"mediaSource",sourceUpdater:this,action:Ip(t),name:"duration",doneFn:e})}endOfStream(t=null,e=Ns){typeof t!="string"&&(t=void 0),jn({type:"mediaSource",sourceUpdater:this,action:Ap(t),name:"endOfStream",doneFn:e})}removeAudio(t,e,i=Ns){this.audioBuffered().length&&this.audioBuffered().end(0)!==0?jn({type:"audio",sourceUpdater:this,action:Ed(t,e),doneFn:i,name:"remove"}):i()}removeVideo(t,e,i=Ns){this.videoBuffered().length&&this.videoBuffered().end(0)!==0?jn({type:"video",sourceUpdater:this,action:Ed(t,e),doneFn:i,name:"remove"}):i()}updating(){return!(!Pl("audio",this)&&!Pl("video",this))}audioTimestampOffset(t){return t!==void 0&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(jn({type:"audio",sourceUpdater:this,action:Cd(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return t!==void 0&&this.videoBuffer&&this.videoTimestampOffset_!==t&&(jn({type:"video",sourceUpdater:this,action:Cd(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&jn({type:"audio",sourceUpdater:this,action:xd(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&jn({type:"video",sourceUpdater:this,action:xd(t),name:"callback"})}dispose(){this.trigger("dispose"),xp.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`](()=>wd(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Id=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),Pd=new Uint8Array(`

`.split("").map(n=>n.charCodeAt(0)));class Dp extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class Rp extends Il{constructor(t,e={}){super(t,e),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return gn();const t=this.subtitlesTrack_.cues;return gn([[t[0].startTime,t[t.length-1].startTime]])}initSegmentForMap(t,e=!1){if(!t)return null;const i=Wa(t);let s=this.initSegments_[i];if(e&&!s&&t.bytes){const r=Pd.byteLength+t.bytes.byteLength,o=new Uint8Array(r);o.set(t.bytes),o.set(Pd,t.bytes.byteLength),this.initSegments_[i]=s={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:o}}return s||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return t===void 0||(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(t,e){oa(t,e,this.subtitlesTrack_)}fillBuffer_(){const t=this.chooseNextRequest_();if(t){if(this.syncController_.timestampOffsetForTimeline(t.timeline)===null){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,e,i){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===wl&&this.handleTimeout_(),t.code===El?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);const s=this.pendingSegment_,r=i.mp4VttCues&&i.mp4VttCues.length;r&&(s.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(s.duration,e.stats),e.key&&this.segmentKey(e.key,!0),this.state="APPENDING",this.trigger("appending");const o=s.segment;if(o.map&&(o.map.bytes=e.map.bytes),s.bytes=e.bytes,typeof p().WebVTT!="function"&&typeof this.loadVttJs=="function")return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(t,e,i),()=>this.stopForError({message:"Error loading vtt.js"}));o.requested=!0;try{this.parseVTTCues_(s)}catch(d){return void this.stopForError({message:d.message,metadata:{errorType:_t.Error.StreamingVttParserError,error:d}})}if(r||this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,s.cues.forEach(d=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(p()).VTTCue(d.startTime,d.endTime,d.text):d)}),function(d){const f=d.cues;if(!f)return;const v={};for(let g=f.length-1;g>=0;g--){const O=f[g],A=`${O.startTime}-${O.endTime}-${O.text}`;v[A]?d.removeCue(O):v[A]=O}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(t,e){const i=t&&t.type==="vtt",s=e&&e.type==="text";i&&s&&super.handleData_(t,e)}updateTimingInfoEnd_(){}parseMp4VttCues_(t){const e=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();t.mp4VttCues.forEach(i=>{const s=i.start+e,r=i.end+e,o=new(p()).VTTCue(s,r,i.cueText);i.settings&&i.settings.split(" ").forEach(d=>{const f=d.split(":"),v=f[0],g=f[1];o[v]=isNaN(g)?g:Number(g)}),t.cues.push(o)})}parseVTTCues_(t){let e,i=!1;if(typeof p().WebVTT!="function")throw new Dp;if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},t.mp4VttCues)return void this.parseMp4VttCues_(t);typeof p().TextDecoder=="function"?e=new(p()).TextDecoder("utf8"):(e=p().WebVTT.StringDecoder(),i=!0);const s=new(p()).WebVTT.Parser(p(),p().vttjs,e);if(s.oncue=t.cues.push.bind(t.cues),s.ontimestampmap=o=>{t.timestampmap=o},s.onparsingerror=o=>{_t.log.warn("Error encountered when parsing cues: "+o.message)},t.segment.map){let o=t.segment.map.bytes;i&&(o=Id(o)),s.parse(o)}let r=t.bytes;i&&(r=Id(r)),s.parse(r),s.flush()}updateTimeMapping_(t,e,i){const s=t.segment;if(!e)return;if(!t.cues.length)return void(s.empty=!0);const{MPEGTS:r,LOCAL:o}=t.timestampmap,d=r/en.ONE_SECOND_IN_TS-o+e.mapping;if(t.cues.forEach(f=>{const v=f.endTime-f.startTime,g=this.handleRollover_(f.startTime+d,e.time);f.startTime=Math.max(g,0),f.endTime=Math.max(g+v,0)}),!i.syncInfo){const f=t.cues[0].startTime,v=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(f,v-s.duration)}}}handleRollover_(t,e){if(e===null)return t;let i=t*en.ONE_SECOND_IN_TS;const s=e*en.ONE_SECOND_IN_TS;let r;for(r=s<i?-8589934592:8589934592;Math.abs(i-s)>4294967296;)i+=r;return i/en.ONE_SECOND_IN_TS}}const Np=function(n,t){const e=n.cues;for(let i=0;i<e.length;i++){const s=e[i];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null};class Od{constructor({start:t,end:e,segmentIndex:i,partIndex:s=null,appended:r=!1}){this.start_=t,this.end_=e,this.segmentIndex_=i,this.partIndex_=s,this.appended_=r}isInRange(t){return t>=this.start&&t<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Mp{constructor(t,e=[]){this.segmentSyncInfo_=t,this.partsSyncInfo_=e}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(t=>t.resetAppendedStatus())}}class Ld{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(t=>t.resetAppendStatus())}update(t,e){const{mediaSequence:i,segments:s}=t;if(this.isReliable_=this.isReliablePlaylist_(i,s),this.isReliable_)return this.updateStorage_(s,i,this.calculateBaseTime_(i,s,e))}getSyncInfoForTime(t){for(const{segmentSyncInfo:e,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const s of i)if(s.isInRange(t))return s}else if(e.isInRange(t))return e;return null}getSyncInfoForMediaSequence(t){return this.storage_.get(t)}updateStorage_(t,e,i){const s=new Map;let r=`
`,o=i,d=e;this.start_=o,t.forEach((f,v)=>{const g=this.storage_.get(d),O=o,A=O+f.duration,W=!!(g&&g.segmentSyncInfo&&g.segmentSyncInfo.isAppended),I=new Od({start:O,end:A,appended:W,segmentIndex:v});f.syncInfo=I;let X=o;const dt=(f.parts||[]).map((ht,lt)=>{const gt=X,Rt=X+ht.duration,vt=!!(g&&g.partsSyncInfo&&g.partsSyncInfo[lt]&&g.partsSyncInfo[lt].isAppended),ct=new Od({start:gt,end:Rt,appended:vt,segmentIndex:v,partIndex:lt});return X=Rt,r+=`Media Sequence: ${d}.${lt} | Range: ${gt} --> ${Rt} | Appended: ${vt}
`,ht.syncInfo=ct,ct});s.set(d,new Mp(I,dt)),r+=`${gd(f.resolvedUri)} | Media Sequence: ${d} | Range: ${O} --> ${A} | Appended: ${W}
`,d++,o=A}),this.end_=o,this.storage_=s,this.diagnostics_=r}calculateBaseTime_(t,e,i){if(!this.storage_.size)return 0;if(this.storage_.has(t))return this.storage_.get(t).segmentSyncInfo.start;const s=Math.min(...this.storage_.keys());if(t<s){const r=s-t;let o=this.storage_.get(s).segmentSyncInfo.start;for(let d=0;d<r;d++)o-=e[d].duration;return o}return i}isReliablePlaylist_(t,e){return t!=null&&Array.isArray(e)&&e.length}}class Dd extends Ld{constructor(t){super(),this.parent_=t}calculateBaseTime_(t,e,i){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(t);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(t,e,i)}}const Ol=[{name:"VOD",run:(n,t,e,i,s)=>e!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(n,t,e,i,s,r)=>{const o=n.getMediaSequenceSync(r);if(!o||!o.isReliable)return null;const d=o.getSyncInfoForTime(s);return d?{time:d.start,partIndex:d.partIndex,segmentIndex:d.segmentIndex}:null}},{name:"ProgramDateTime",run:(n,t,e,i,s)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let r=null,o=null;const d=fl(t);s=s||0;for(let f=0;f<d.length;f++){const v=d[t.endList||s===0?f:d.length-(f+1)],g=v.segment,O=n.timelineToDatetimeMappings[g.timeline];if(!O||!g.dateTimeObject)continue;let A=g.dateTimeObject.getTime()/1e3+O;if(g.parts&&typeof v.partIndex=="number")for(let I=0;I<v.partIndex;I++)A+=g.parts[I].duration;const W=Math.abs(s-A);if(o!==null&&(W===0||o<W))break;o=W,r={time:A,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}return r}},{name:"Segment",run:(n,t,e,i,s)=>{let r=null,o=null;s=s||0;const d=fl(t);for(let f=0;f<d.length;f++){const v=d[t.endList||s===0?f:d.length-(f+1)],g=v.segment,O=v.part&&v.part.start||g&&g.start;if(g.timeline===i&&O!==void 0){const A=Math.abs(s-O);if(o!==null&&o<A)break;(!r||o===null||o>=A)&&(o=A,r={time:O,segmentIndex:v.segmentIndex,partIndex:v.partIndex})}}return r}},{name:"Discontinuity",run:(n,t,e,i,s)=>{let r=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length){let o=null;for(let d=0;d<t.discontinuityStarts.length;d++){const f=t.discontinuityStarts[d],v=t.discontinuitySequence+d+1,g=n.discontinuities[v];if(g){const O=Math.abs(s-g.time);if(o!==null&&o<O)break;(!r||o===null||o>=O)&&(o=O,r={time:g.time,segmentIndex:f,partIndex:null})}}}return r}},{name:"Playlist",run:(n,t,e,i,s)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class Up extends _t.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const e=new Ld,i=new Dd(e),s=new Dd(e);this.mediaSequenceStorage_={main:e,audio:i,vtt:s},this.logger_=ns("SyncController")}getMediaSequenceSync(t){return this.mediaSequenceStorage_[t]||null}getSyncPoint(t,e,i,s,r){if(e!==1/0)return Ol.find(({name:d})=>d==="VOD").run(this,t,e);const o=this.runStrategies_(t,e,i,s,r);if(!o.length)return null;for(const d of o){const{syncPoint:f,strategy:v}=d,{segmentIndex:g,time:O}=f;if(g<0)continue;const A=O,W=A+t.segments[g].duration;if(this.logger_(`Strategy: ${v}. Current time: ${s}. selected segment: ${g}. Time: [${A} -> ${W}]}`),s>=A&&s<W)return this.logger_("Found sync point with exact match: ",f),f}return this.selectSyncPoint_(o,{key:"time",value:s})}getExpiredTime(t,e){if(!t||!t.segments)return null;const i=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!i.length)return null;const s=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+sa({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(t,e,i,s,r){const o=[];for(let d=0;d<Ol.length;d++){const f=Ol[d],v=f.run(this,t,e,i,s,r);v&&(v.strategy=f.name,o.push({strategy:f.name,syncPoint:v}))}return o}selectSyncPoint_(t,e){let i=t[0].syncPoint,s=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy;for(let o=1;o<t.length;o++){const d=Math.abs(t[o].syncPoint[e.key]-e.value);d<s&&(s=d,i=t[o].syncPoint,r=t[o].strategy)}return this.logger_(`syncPoint for [${e.key}: ${e.value}] chosen with strategy [${r}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(t,e){const i=e.mediaSequence-t.mediaSequence;if(i>86400)_t.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);else for(let s=i-1;s>=0;s--){const r=t.segments[s];if(r&&r.start!==void 0){e.syncInfo={mediaSequence:t.mediaSequence+s,time:r.start},this.logger_(`playlist refresh sync: [time:${e.syncInfo.time}, mediaSequence: ${e.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){const e=t.segments[0],i=e.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[e.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:e}){const i=this.calculateSegmentTimeMapping_(t,t.timingInfo,e),s=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:s.start}));const r=s.dateTimeObject;s.discontinuity&&e&&r&&(this.timelineToDatetimeMappings[s.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(t){return this.timelines[t]===void 0?null:this.timelines[t].time}mappingForTimeline(t){return this.timelines[t]===void 0?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,e,i){const s=t.segment,r=t.part;let o,d,f=this.timelines[t.timeline];if(typeof t.timestampOffset=="number")f={time:t.startOfSegment,mapping:t.startOfSegment-e.start},i&&(this.timelines[t.timeline]=f,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${f.time}] [mapping: ${f.mapping}]`)),o=t.startOfSegment,d=e.end+f.mapping;else{if(!f)return!1;o=e.start+f.mapping,d=e.end+f.mapping}return r&&(r.start=o,r.end=d),(!s.start||o<s.start)&&(s.start=o),s.end=d,!0}saveDiscontinuitySyncInfo_(t){const e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(let s=0;s<e.discontinuityStarts.length;s++){const r=e.discontinuityStarts[s],o=e.discontinuitySequence+s+1,d=r-t.mediaIndex,f=Math.abs(d);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>f){let v;v=d<0?i.start-sa({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex,endIndex:r}):i.end+sa({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex+1,endIndex:r}),this.discontinuities[o]={time:v,accuracy:f}}}}dispose(){this.trigger("dispose"),this.off()}}class jp extends _t.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:e,to:i}){return typeof e=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:e,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:e,to:i}){if(typeof e=="number"&&typeof i=="number"){this.lastTimelineChanges_[t]={type:t,from:e,to:i},delete this.pendingTimelineChanges_[t];const s={timelineChangeInfo:{from:e,to:i}};this.trigger({type:"timelinechange",metadata:s})}return this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Bp=td(ed(function(){var n=function(){function f(){this.listeners={}}var v=f.prototype;return v.on=function(g,O){this.listeners[g]||(this.listeners[g]=[]),this.listeners[g].push(O)},v.off=function(g,O){if(!this.listeners[g])return!1;var A=this.listeners[g].indexOf(O);return this.listeners[g]=this.listeners[g].slice(0),this.listeners[g].splice(A,1),A>-1},v.trigger=function(g){var O=this.listeners[g];if(O)if(arguments.length===2)for(var A=O.length,W=0;W<A;++W)O[W].call(this,arguments[1]);else for(var I=Array.prototype.slice.call(arguments,1),X=O.length,dt=0;dt<X;++dt)O[dt].apply(this,I)},v.dispose=function(){this.listeners={}},v.pipe=function(g){this.on("data",function(O){g.push(O)})},f}();let t=null;class e{constructor(v){let g,O,A;t||(t=function(){const gt=[[[],[],[],[],[]],[[],[],[],[],[]]],Rt=gt[0],vt=gt[1],ct=Rt[4],Ct=vt[4];let Ft,ce,ae;const fe=[],ie=[];let ne,Re,He,Fe,Le,_i;for(Ft=0;Ft<256;Ft++)ie[(fe[Ft]=Ft<<1^283*(Ft>>7))^Ft]=Ft;for(ce=ae=0;!ct[ce];ce^=ne||1,ae=ie[ae]||1)for(Fe=ae^ae<<1^ae<<2^ae<<3^ae<<4,Fe=Fe>>8^255&Fe^99,ct[ce]=Fe,Ct[Fe]=ce,He=fe[Re=fe[ne=fe[ce]]],_i=16843009*He^65537*Re^257*ne^16843008*ce,Le=257*fe[Fe]^16843008*Fe,Ft=0;Ft<4;Ft++)Rt[Ft][ce]=Le=Le<<24^Le>>>8,vt[Ft][Fe]=_i=_i<<24^_i>>>8;for(Ft=0;Ft<5;Ft++)Rt[Ft]=Rt[Ft].slice(0),vt[Ft]=vt[Ft].slice(0);return gt}()),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];const W=this._tables[0][4],I=this._tables[1],X=v.length;let dt=1;if(X!==4&&X!==6&&X!==8)throw new Error("Invalid aes key size");const ht=v.slice(0),lt=[];for(this._key=[ht,lt],g=X;g<4*X+28;g++)A=ht[g-1],(g%X==0||X===8&&g%X==4)&&(A=W[A>>>24]<<24^W[A>>16&255]<<16^W[A>>8&255]<<8^W[255&A],g%X==0&&(A=A<<8^A>>>24^dt<<24,dt=dt<<1^283*(dt>>7))),ht[g]=ht[g-X]^A;for(O=0;g;O++,g--)A=ht[3&O?g:g-4],lt[O]=g<=4||O<4?A:I[0][W[A>>>24]]^I[1][W[A>>16&255]]^I[2][W[A>>8&255]]^I[3][W[255&A]]}decrypt(v,g,O,A,W,I){const X=this._key[1];let dt,ht,lt,gt=v^X[0],Rt=A^X[1],vt=O^X[2],ct=g^X[3];const Ct=X.length/4-2;let Ft,ce=4;const ae=this._tables[1],fe=ae[0],ie=ae[1],ne=ae[2],Re=ae[3],He=ae[4];for(Ft=0;Ft<Ct;Ft++)dt=fe[gt>>>24]^ie[Rt>>16&255]^ne[vt>>8&255]^Re[255&ct]^X[ce],ht=fe[Rt>>>24]^ie[vt>>16&255]^ne[ct>>8&255]^Re[255&gt]^X[ce+1],lt=fe[vt>>>24]^ie[ct>>16&255]^ne[gt>>8&255]^Re[255&Rt]^X[ce+2],ct=fe[ct>>>24]^ie[gt>>16&255]^ne[Rt>>8&255]^Re[255&vt]^X[ce+3],ce+=4,gt=dt,Rt=ht,vt=lt;for(Ft=0;Ft<4;Ft++)W[(3&-Ft)+I]=He[gt>>>24]<<24^He[Rt>>16&255]<<16^He[vt>>8&255]<<8^He[255&ct]^X[ce++],dt=gt,gt=Rt,Rt=vt,vt=ct,ct=dt}}class i extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(v){this.jobs.push(v),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const s=function(f){return f<<24|(65280&f)<<8|(16711680&f)>>8|f>>>24};class r{constructor(v,g,O,A){const W=r.STEP,I=new Int32Array(v.buffer),X=new Uint8Array(v.byteLength);let dt=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(I.subarray(dt,dt+W),g,O,X)),dt=W;dt<I.length;dt+=W)O=new Uint32Array([s(I[dt-4]),s(I[dt-3]),s(I[dt-2]),s(I[dt-1])]),this.asyncStream_.push(this.decryptChunk_(I.subarray(dt,dt+W),g,O,X));this.asyncStream_.push(function(){var ht;A(null,(ht=X).subarray(0,ht.byteLength-ht[ht.byteLength-1]))})}static get STEP(){return 32e3}decryptChunk_(v,g,O,A){return function(){const W=function(I,X,dt){const ht=new Int32Array(I.buffer,I.byteOffset,I.byteLength>>2),lt=new e(Array.prototype.slice.call(X)),gt=new Uint8Array(I.byteLength),Rt=new Int32Array(gt.buffer);let vt,ct,Ct,Ft,ce,ae,fe,ie,ne;for(vt=dt[0],ct=dt[1],Ct=dt[2],Ft=dt[3],ne=0;ne<ht.length;ne+=4)ce=s(ht[ne]),ae=s(ht[ne+1]),fe=s(ht[ne+2]),ie=s(ht[ne+3]),lt.decrypt(ce,ae,fe,ie,Rt,ne),Rt[ne]=s(Rt[ne]^vt),Rt[ne+1]=s(Rt[ne+1]^ct),Rt[ne+2]=s(Rt[ne+2]^Ct),Rt[ne+3]=s(Rt[ne+3]^Ft),vt=ce,ct=ae,Ct=fe,Ft=ie;return gt}(v,g,O);A.set(W,v.byteOffset)}}}var o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:u.g!==void 0?u.g:typeof self<"u"?self:{},d=(typeof window<"u"?window:o!==void 0?o:typeof self<"u"?self:{}).BigInt||Number;d("0x1"),d("0x100"),d("0x10000"),d("0x1000000"),d("0x100000000"),d("0x10000000000"),d("0x1000000000000"),d("0x100000000000000"),d("0x10000000000000000"),function(){var f=new Uint16Array([65484]),v=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);v[0]===255||v[0]}(),self.onmessage=function(f){const v=f.data,g=new Uint8Array(v.encrypted.bytes,v.encrypted.byteOffset,v.encrypted.byteLength),O=new Uint32Array(v.key.bytes,v.key.byteOffset,v.key.byteLength/4),A=new Uint32Array(v.iv.bytes,v.iv.byteOffset,v.iv.byteLength/4);new r(g,O,A,function(W,I){self.postMessage(function(X){const dt={};return Object.keys(X).forEach(ht=>{const lt=X[ht];var gt;gt=lt,(ArrayBuffer.isView==="function"?ArrayBuffer.isView(gt):gt&&gt.buffer instanceof ArrayBuffer)?dt[ht]={bytes:lt.buffer,byteOffset:lt.byteOffset,byteLength:lt.byteLength}:dt[ht]=lt}),dt}({source:v.source,decrypted:I}),[I.buffer])})}}));var Fp=Zc(Bp);const qp=n=>{let t=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Rd=(n,t)=>{n.abort(),n.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Ll=(n,t)=>{t.activePlaylistLoader=n,n.load()},Ka={AUDIO:(n,t)=>()=>{const{mediaTypes:{[n]:e},excludePlaylist:i}=t,s=e.activeTrack(),r=e.activeGroup(),o=(r.filter(f=>f.default)[0]||r[0]).id,d=e.tracks[o];if(s!==d){_t.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const f in e.tracks)e.tracks[f].enabled=e.tracks[f]===d;e.onTrackChanged()}else i({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(n,t)=>()=>{const{mediaTypes:{[n]:e}}=t;_t.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=e.activeTrack();i&&(i.mode="disabled"),e.onTrackChanged()}},Nd={AUDIO:(n,t,e)=>{if(!t)return;const{tech:i,requestOptions:s,segmentLoaders:{[n]:r}}=e;t.on("loadedmetadata",()=>{const o=t.media();r.playlist(o,s),(!i.paused()||o.endList&&i.preload()!=="none")&&r.load()}),t.on("loadedplaylist",()=>{r.playlist(t.media(),s),i.paused()||r.load()}),t.on("error",Ka[n](n,e))},SUBTITLES:(n,t,e)=>{const{tech:i,requestOptions:s,segmentLoaders:{[n]:r},mediaTypes:{[n]:o}}=e;t.on("loadedmetadata",()=>{const d=t.media();r.playlist(d,s),r.track(o.activeTrack()),(!i.paused()||d.endList&&i.preload()!=="none")&&r.load()}),t.on("loadedplaylist",()=>{r.playlist(t.media(),s),i.paused()||r.load()}),t.on("error",Ka[n](n,e))}},$p={AUDIO:(n,t)=>{const{vhs:e,sourceType:i,segmentLoaders:{[n]:s},requestOptions:r,main:{mediaGroups:o},mediaTypes:{[n]:{groups:d,tracks:f,logger_:v}},mainPlaylistLoader:g}=t,O=ra(g.main);o[n]&&Object.keys(o[n]).length!==0||(o[n]={main:{default:{default:!0}}},O&&(o[n].main.default.playlists=g.main.playlists));for(const A in o[n]){d[A]||(d[A]=[]);for(const W in o[n][A]){let I,X=o[n][A][W];if(O?(v(`AUDIO group '${A}' label '${W}' is a main playlist`),X.isMainPlaylist=!0,I=null):I=i==="vhs-json"&&X.playlists?new Mr(X.playlists[0],e,r):X.resolvedUri?new Mr(X.resolvedUri,e,r):X.playlists&&i==="dash"?new Sl(X.playlists[0],e,r,g):null,X=Si({id:W,playlistLoader:I},X),Nd[n](n,X.playlistLoader,t),d[A].push(X),f[W]===void 0){const dt=new _t.AudioTrack({id:W,kind:qp(X),enabled:!1,language:X.language,default:X.default,label:W});f[W]=dt}}}s.on("error",Ka[n](n,t))},SUBTITLES:(n,t)=>{const{tech:e,vhs:i,sourceType:s,segmentLoaders:{[n]:r},requestOptions:o,main:{mediaGroups:d},mediaTypes:{[n]:{groups:f,tracks:v}},mainPlaylistLoader:g}=t;for(const O in d[n]){f[O]||(f[O]=[]);for(const A in d[n][O]){if(!i.options_.useForcedSubtitles&&d[n][O][A].forced)continue;let W,I=d[n][O][A];if(s==="hls")W=new Mr(I.resolvedUri,i,o);else if(s==="dash"){if(!I.playlists.filter(X=>X.excludeUntil!==1/0).length)return;W=new Sl(I.playlists[0],i,o,g)}else s==="vhs-json"&&(W=new Mr(I.playlists?I.playlists[0]:I.resolvedUri,i,o));if(I=Si({id:A,playlistLoader:W},I),Nd[n](n,I.playlistLoader,t),f[O].push(I),v[A]===void 0){const X=e.addRemoteTextTrack({id:A,kind:"subtitles",default:I.default&&I.autoselect,language:I.language,label:A},!1).track;v[A]=X}}}r.on("error",Ka[n](n,t))},"CLOSED-CAPTIONS":(n,t)=>{const{tech:e,main:{mediaGroups:i},mediaTypes:{[n]:{groups:s,tracks:r}}}=t;for(const o in i[n]){s[o]||(s[o]=[]);for(const d in i[n][o]){const f=i[n][o][d];if(!/^(?:CC|SERVICE)/.test(f.instreamId))continue;const v=e.options_.vhs&&e.options_.vhs.captionServices||{};let g={label:d,language:f.language,instreamId:f.instreamId,default:f.default&&f.autoselect};if(v[g.instreamId]&&(g=Si(g,v[g.instreamId])),g.default===void 0&&delete g.default,s[o].push(Si({id:d},f)),r[d]===void 0){const O=e.addRemoteTextTrack({id:g.instreamId,kind:"captions",default:g.default,language:g.language,label:g.label},!1).track;r[d]=O}}}}},Md=(n,t)=>{for(let e=0;e<n.length;e++)if(yl(t,n[e])||n[e].playlists&&Md(n[e].playlists,t))return!0;return!1},Vp={AUDIO:(n,t)=>()=>{const{mediaTypes:{[n]:{tracks:e}}}=t;for(const i in e)if(e[i].enabled)return e[i];return null},SUBTITLES:(n,t)=>()=>{const{mediaTypes:{[n]:{tracks:e}}}=t;for(const i in e)if(e[i].mode==="showing"||e[i].mode==="hidden")return e[i];return null}};class Ud{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(t){t===1&&(this.version_=t)}set ttl(t){this.ttl_=t||300}set reloadUri(t){t&&(this.reloadUri_=kn(this.reloadUri_,t))}set priority(t){t&&t.length&&(this.priority_=t)}set pathwayClones(t){t&&t.length&&(this.pathwayClones_=new Map(t.map(e=>[e.ID,e])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Hp extends _t.EventTarget{constructor(t,e){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new Ud,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=ns("Content Steering"),this.xhr_=t,this.getBandwidth_=e}assignTagProperties(t,e){this.manifestType_=e.serverUri?"HLS":"DASH";const i=e.serverUri||e.serverURL;if(!i)return this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),void this.trigger("error");i.startsWith("data:")?this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1)):(this.steeringManifest.reloadUri=kn(t,i),this.defaultPathway=e.pathwayId||e.defaultServiceLocation,this.queryBeforeStart=e.queryBeforeStart,this.proxyServerUrl_=e.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(t){const e=this.steeringManifest.reloadUri;if(!e)return;const i=t?e:this.getRequestURI(e);if(!i)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();const s={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:s}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(r,o)=>{if(r){if(o.status===410)return this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),void this.excludedSteeringManifestURLs.add(i);if(o.status===429){const v=o.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${v} seconds.`),void this.startTTLTimeout_(parseInt(v,10))}return this.logger_(`manifest failed to load ${r}.`),void this.startTTLTimeout_()}let d;this.trigger({type:"contentsteeringloadcomplete",metadata:s});try{d=JSON.parse(this.request_.responseText)}catch(v){const g={errorType:_t.Error.StreamingContentSteeringParserError,error:v};this.trigger({type:"error",metadata:g})}this.assignSteeringProperties_(d);const f={contentSteeringInfo:s.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:f}),this.startTTLTimeout_()})}setProxyServerUrl_(t){const e=new(p()).URL(t),i=new(p()).URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(e.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(t){const e=JSON.parse(p().atob(t));this.assignSteeringProperties_(e)}setSteeringParams_(t){const e=new(p()).URL(t),i=this.getPathway(),s=this.getBandwidth_();if(i){const r=`_${this.manifestType_}_pathway`;e.searchParams.set(r,i)}if(s){const r=`_${this.manifestType_}_throughput`;e.searchParams.set(r,s)}return e.toString()}assignSteeringProperties_(t){if(this.steeringManifest.version=t.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${t.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=t.TTL,this.steeringManifest.reloadUri=t["RELOAD-URI"],this.steeringManifest.priority=t["PATHWAY-PRIORITY"]||t["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=t["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const e=(i=>{for(const s of i)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==e&&(this.currentPathway=e,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(t){if(!t)return null;const e=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(t);if(!e(s))return s}const i=this.setSteeringParams_(t);return e(i)?null:i}startTTLTimeout_(t=this.steeringManifest.ttl){const e=1e3*t;this.ttlTimeout_=p().setTimeout(()=>{this.requestSteeringManifest()},e)}clearTTLTimeout_(){p().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new Ud}addAvailablePathway(t){t&&this.availablePathways_.add(t)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(t){return this.availablePathways_.delete(t)}didDASHTagChange(t,e){return!e&&this.steeringManifest.reloadUri||e&&(kn(t,e.serverURL)!==this.steeringManifest.reloadUri||e.defaultServiceLocation!==this.defaultPathway||e.queryBeforeStart!==this.queryBeforeStart||e.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let Js;const zp=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Wp=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]};class Gp extends _t.EventTarget{constructor(t){super(),this.fastQualityChange_=((gt,Rt)=>{let vt=null;return(...ct)=>{clearTimeout(vt),vt=setTimeout(()=>{gt.apply(null,ct)},100)}})(this.fastQualityChange_.bind(this));const{src:e,withCredentials:i,tech:s,bandwidth:r,externVhs:o,useCueTags:d,playlistExclusionDuration:f,enableLowInitialPlaylist:v,sourceType:g,cacheEncryptionKeys:O,bufferBasedABR:A,leastPixelDiffSelector:W,captionServices:I,experimentalUseMMS:X}=t;if(!e)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:dt}=t;dt==null&&(dt=1/0),Js=o,this.bufferBasedABR=!!A,this.leastPixelDiffSelector=!!W,this.withCredentials=i,this.tech_=s,this.vhs_=s.vhs,this.player_=t.player_,this.sourceType_=g,this.useCueTags_=d,this.playlistExclusionDuration=f,this.maxPlaylistRetries=dt,this.enableLowInitialPlaylist=v,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:dt,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const gt={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(Rt=>{gt[Rt]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ns,activeTrack:Ns,getActiveGroup:Ns,onGroupChanged:Ns,onTrackChanged:Ns,lastTrack_:null,logger_:ns(`MediaGroups[${Rt}]`)}}),gt})(),X&&p().ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new(p()).ManagedMediaSource,this.usingManagedMediaSource_=!0,_t.log("Using ManagedMediaSource")):p().MediaSource&&(this.mediaSource=new(p()).MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=gn(),this.hasPlayed_=!1,this.syncController_=new Up(t),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Fp,this.sourceUpdater_=new Ad(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new jp,this.keyStatusMap_=new Map;const ht={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:I,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:O,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Sl(e,this.vhs_,Si(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Mr(e,this.vhs_,Si(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Il(Si(ht,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new Il(Si(ht,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new Rp(Si(ht,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((gt,Rt)=>{function vt(){s.off("vttjserror",ct),gt()}function ct(){s.off("vttjsloaded",vt),Rt()}s.one("vttjsloaded",vt),s.one("vttjserror",ct),s.addWebVttScript_()})}),t),this.contentSteeringController_=new Hp(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),zp.forEach(gt=>{this[gt+"_"]=Wp.bind(this,gt)}),this.logger_=ns("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const lt=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(lt,()=>{const gt=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-gt,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const t=this.mainAppendsToLoadedData_(),e=this.audioAppendsToLoadedData_();return t===-1||e===-1?-1:t+e}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){const e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,t)}switchMedia_(t,e,i){const s=this.media(),r=s&&(s.id||s.uri),o=t&&(t.id||t.uri);if(r&&r!==o){this.logger_(`switch media ${r} -> ${o} from ${e}`);const d={renditionInfo:{id:o,bandwidth:t.attributes.BANDWIDTH,resolution:t.attributes.RESOLUTION,codecs:t.attributes.CODECS},cause:e};this.trigger({type:"renditionselected",metadata:d}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${e}`})}this.mainPlaylistLoader_.media(t,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{const e=this.mediaTypes_[t],i=e?e.activeGroup():null,s=this.contentSteeringController_.getPathway();if(i&&s){const r=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===s);r.length&&this.mediaTypes_[t].activePlaylistLoader.media(r[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=p().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(p().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const t=this.main(),e=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return e;const i=t.mediaGroups.AUDIO,s=Object.keys(i);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const d=i.main||s.length&&i[s[0]];for(const f in d)if(d[f].default){r={label:f};break}}if(!r)return e;const o=[];for(const d in i)if(i[d][r.label]){const f=i[d][r.label];if(f.playlists&&f.playlists.length)o.push.apply(o,f.playlists);else if(f.uri)o.push(f);else if(t.playlists.length)for(let v=0;v<t.playlists.length;v++){const g=t.playlists[v];g.attributes&&g.attributes.AUDIO&&g.attributes.AUDIO===d&&o.push(g)}}return o.length?o:e}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;gl(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=e,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),(i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(A=>{$p[A](A,i)});const{mediaTypes:s,mainPlaylistLoader:r,tech:o,vhs:d,segmentLoaders:{AUDIO:f,main:v}}=i;["AUDIO","SUBTITLES"].forEach(A=>{s[A].activeGroup=((W,I)=>X=>{const{mainPlaylistLoader:dt,mediaTypes:{[W]:{groups:ht}}}=I,lt=dt.media();if(!lt)return null;let gt=null;lt.attributes[W]&&(gt=ht[lt.attributes[W]]);const Rt=Object.keys(ht);if(!gt)if(W==="AUDIO"&&Rt.length>1&&ra(I.main))for(let vt=0;vt<Rt.length;vt++){const ct=ht[Rt[vt]];if(Md(ct,lt)){gt=ct;break}}else ht.main?gt=ht.main:Rt.length===1&&(gt=ht[Rt[0]]);return X===void 0?gt:X!==null&&gt&&gt.filter(vt=>vt.id===X.id)[0]||null})(A,i),s[A].activeTrack=Vp[A](A,i),s[A].onGroupChanged=((W,I)=>()=>{const{segmentLoaders:{[W]:X,main:dt},mediaTypes:{[W]:ht}}=I,lt=ht.activeTrack(),gt=ht.getActiveGroup(),Rt=ht.activePlaylistLoader,vt=ht.lastGroup_;gt&&vt&&gt.id===vt.id||(ht.lastGroup_=gt,ht.lastTrack_=lt,Rd(X,ht),gt&&!gt.isMainPlaylist&&(gt.playlistLoader?(X.resyncLoader(),Ll(gt.playlistLoader,ht)):Rt&&dt.resetEverything()))})(A,i),s[A].onGroupChanging=((W,I)=>()=>{const{segmentLoaders:{[W]:X},mediaTypes:{[W]:dt}}=I;dt.lastGroup_=null,X.abort(),X.pause()})(A,i),s[A].onTrackChanged=((W,I)=>()=>{const{mainPlaylistLoader:X,segmentLoaders:{[W]:dt,main:ht},mediaTypes:{[W]:lt}}=I,gt=lt.activeTrack(),Rt=lt.getActiveGroup(),vt=lt.activePlaylistLoader,ct=lt.lastTrack_;if((!ct||!gt||ct.id!==gt.id)&&(lt.lastGroup_=Rt,lt.lastTrack_=gt,Rd(dt,lt),Rt)){if(Rt.isMainPlaylist){if(!gt||!ct||gt.id===ct.id)return;const Ct=I.vhs.playlistController_,Ft=Ct.selectPlaylist();return Ct.media()===Ft?void 0:(lt.logger_(`track change. Switching main audio from ${ct.id} to ${gt.id}`),X.pause(),ht.resetEverything(),void Ct.fastQualityChange_(Ft))}if(W==="AUDIO"){if(!Rt.playlistLoader)return ht.setAudio(!0),void ht.resetEverything();dt.setAudio(!0),ht.setAudio(!1)}vt!==Rt.playlistLoader&&(dt.track&&dt.track(gt),dt.resetEverything()),Ll(Rt.playlistLoader,lt)}})(A,i),s[A].getActiveGroup=((W,{mediaTypes:I})=>()=>{const X=I[W].activeTrack();return X?I[W].activeGroup(X):null})(A,i)});const g=s.AUDIO.activeGroup();if(g){const A=(g.filter(W=>W.default)[0]||g[0]).id;s.AUDIO.tracks[A].enabled=!0,s.AUDIO.onGroupChanged(),s.AUDIO.onTrackChanged(),s.AUDIO.getActiveGroup().playlistLoader?(v.setAudio(!1),f.setAudio(!0)):v.setAudio(!0)}r.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(A=>s[A].onGroupChanged())}),r.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(A=>s[A].onGroupChanging())});const O=()=>{s.AUDIO.onTrackChanged(),o.trigger({type:"usage",name:"vhs-audio-change"})};o.audioTracks().addEventListener("change",O),o.remoteTextTracks().addEventListener("change",s.SUBTITLES.onTrackChanged),d.on("dispose",()=>{o.audioTracks().removeEventListener("change",O),o.remoteTextTracks().removeEventListener("change",s.SUBTITLES.onTrackChanged)}),o.clearTracks("audio");for(const A in s.AUDIO.tracks)o.audioTracks().addTrack(s.AUDIO.tracks[A])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){let e;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(e=this.selectInitialPlaylist()),e||(e=this.selectPlaylist()),!e||!this.shouldSwitchToMedia_(e)||(this.initialMedia_=e,this.switchMedia_(this.initialMedia_,"initial"),this.sourceType_!=="vhs-json"||!this.initialMedia_.segments))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;gl(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=e,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();t.lastExcludeReason_!=="playlist-unchanged"&&this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,e=>{this.player_.trigger(G({},e))})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,e){const i=t.mediaGroups||{};let s=!0;const r=Object.keys(i.AUDIO);for(const o in i.AUDIO)for(const d in i.AUDIO[o])i.AUDIO[o][d].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Js.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){const e=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),s=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function({currentPlaylist:o,buffered:d,currentTime:f,nextPlaylist:v,bufferLowWaterLine:g,bufferHighWaterLine:O,duration:A,bufferBasedABR:W,log:I}){if(!v)return _t.log.warn("We received no playlist to switch to. Please check your stream."),!1;const X=`allowing switch ${o&&o.id||"null"} -> ${v.id}`;if(!o)return I(`${X} as current playlist is not set`),!0;if(v.id===o.id)return!1;const dt=!!Dr(d,f).length;if(!o.endList)return dt||typeof o.partTargetDuration!="number"?(I(`${X} as current playlist is live`),!0):(I(`not ${X} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const ht=hl(d,f),lt=W?on.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:on.MAX_BUFFER_LOW_WATER_LINE;if(A<lt)return I(`${X} as duration < max low water line (${A} < ${lt})`),!0;const gt=v.attributes.BANDWIDTH,Rt=o.attributes.BANDWIDTH;if(gt<Rt&&(!W||ht<O)){let vt=`${X} as next bandwidth < current bandwidth (${gt} < ${Rt})`;return W&&(vt+=` and forwardBuffer < bufferHighWaterLine (${ht} < ${O})`),I(vt),!0}if((!W||gt>Rt)&&ht>=g){let vt=`${X} as forwardBuffer >= bufferLowWaterLine (${ht} >= ${g})`;return W&&(vt+=` and next bandwidth > current bandwidth (${gt} > ${Rt})`),I(vt),!0}return I(`not ${X} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:i,currentPlaylist:e,nextPlaylist:t,bufferLowWaterLine:s,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const e=this.audioSegmentLoader_.pendingSegment_;if(!e||!e.segment||!e.segment.syncInfo)return;const i=e.segment.syncInfo.end+.01;this.tech_.setCurrentTime(i)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(e=>{this.mainSegmentLoader_.on(e,i=>{this.player_.trigger(G({},i))}),this.audioSegmentLoader_.on(e,i=>{this.player_.trigger(G({},i))}),this.subtitleSegmentLoader_.on(e,i=>{this.player_.trigger(G({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(t=this.selectPlaylist()){t&&t===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(t,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}setupFirstPlay(){const t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList||t.start){const e=this.seekable();if(!e.length)return!1;const i=e.end(0);let s=i;if(t.start){const r=t.start.timeOffset;s=r<0?Math.max(i+r,e.start(0)):Math.min(i,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const t=this.tech_.play();t!==void 0&&typeof t.then=="function"&&t.then(null,e=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;const e=this.duration();t[t.length-1].endTime=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const e=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!e||e.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;const e=this.syncController_.getExpiredTime(t,this.duration());if(e===null)return!1;const i=Js.Playlist.playlistEnd(t,e),s=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-s<=bs;const o=r.end(r.length-1);return o-s<=bs&&i-o<=bs}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:e={},playlistExclusionDuration:i}){if(t=t||this.mainPlaylistLoader_.media(),i=i||e.playlistExclusionDuration||this.playlistExclusionDuration,!t)return this.error=e,void(this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));t.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,r=s.filter(za),o=r.length===1&&r[0]===t;if(s.length===1&&i!==1/0)return _t.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const I=this.pathwayAttribute_(t),X=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(I),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(I)},X)}let W=!1;s.forEach(I=>{if(I===t)return;const X=I.excludeUntil;X!==void 0&&X!==1/0&&(W=!0,delete I.excludeUntil)}),W&&(_t.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let d;d=t.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*i,t.excludeUntil=d,e.reason&&(t.lastExcludeReason_=e.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const f=this.selectPlaylist();if(!f)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const v=e.internal?this.logger_:_t.log.warn,g=e.message?" "+e.message:"";v(`${e.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${g} Switching to playlist ${f.id}.`),f.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const O=f.targetDuration/2*1e3||5e3,A=typeof f.lastRequest=="number"&&Date.now()-f.lastRequest<=O;return this.switchMedia_(f,"exclude",o||A)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,e){const i=[],s=t==="all";(s||t==="main")&&i.push(this.mainPlaylistLoader_);const r=[];(s||t==="audio")&&r.push("AUDIO"),(s||t==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(o=>{const d=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;d&&i.push(d)}),["main","audio","subtitle"].forEach(o=>{const d=this[`${o}SegmentLoader_`];!d||t!==o&&t!=="all"||i.push(d)}),i.forEach(o=>e.forEach(d=>{typeof o[d]=="function"&&o[d]()}))}setCurrentTime(t){const e=Dr(this.tech_.buffered(),t);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Js.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}getSeekableRange_(t,e){const i=t.media();if(!i)return null;const s=this.syncController_.getMediaSequenceSync(e);if(s&&s.isReliable){const d=s.start,f=s.end;if(!isFinite(d)||!isFinite(f))return null;const v=Js.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),g=Math.max(0,f-v);return g<d?null:gn([[d,g]])}const r=this.syncController_.getExpiredTime(i,this.duration());if(r===null)return null;const o=Js.Playlist.seekable(i,r,Js.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return o.length?o:null}computeFinalSeekable_(t,e){if(!e)return t;const i=t.start(0),s=t.end(0),r=e.start(0),o=e.end(0);return r>s||i>o?t:gn([[Math.max(i,r),Math.min(s,o)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const t=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!t)return;let e;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!e))return;const i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(t,e),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Cc(this.seekable_)}]`);const s={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:s}),this.tech_.trigger("seekablechanged")}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open")return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){const s=this.seekable();return s.length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))):void 0}const e=this.tech_.buffered();let i=Js.Playlist.duration(this.mainPlaylistLoader_.media());e.length>0&&(i=Math.max(i,e.end(e.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{const e=this.mediaTypes_[t].groups;for(const i in e)e[i].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,e=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!e||!i)}getCodecsOrExclude_(){const t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},e=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;const i=aa(this.main(),e),s={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(s.video=i.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(s.video+=`,${i.audio||t.main.audioCodec||be}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(s.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||be,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!s.audio&&!s.video)return void this.excludePlaylist({playlistToExclude:e,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const o=(v,g)=>v?qt(g,this.usingManagedMediaSource_):Kt(g),d={};let f;if(["video","audio"].forEach(function(v){if(s.hasOwnProperty(v)&&!o(t[v].isFmp4,s[v])){const g=t[v].isFmp4?"browser":"muxer";d[g]=d[g]||[],d[g].push(s[v]),v==="audio"&&(f=g)}}),r&&f&&e.attributes.AUDIO){const v=e.attributes.AUDIO;this.main().playlists.forEach(g=>{(g.attributes&&g.attributes.AUDIO)===v&&g!==e&&(g.excludeUntil=1/0)}),this.logger_(`excluding audio group ${v} as ${f} does not support codec(s): "${s.audio}"`)}if(!Object.keys(d).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const v=[];if(["video","audio"].forEach(g=>{const O=(Et(this.sourceUpdater_.codecs[g]||"")[0]||{}).type,A=(Et(s[g]||"")[0]||{}).type;O&&A&&O.toLowerCase()!==A.toLowerCase()&&v.push(`"${this.sourceUpdater_.codecs[g]}" -> "${s[g]}"`)}),v.length)return void this.excludePlaylist({playlistToExclude:e,error:{message:`Codec switching not supported: ${v.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return s}{const v=Object.keys(d).reduce((g,O)=>(g&&(g+=", "),g+`${O} does not support codec(s): "${d[O].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:e,error:{internal:!0,message:v},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);const e=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(e)}excludeUnsupportedVariants_(){const t=this.main().playlists,e=[];Object.keys(t).forEach(i=>{const s=t[i];if(e.indexOf(s.id)!==-1)return;e.push(s.id);const r=aa(this.main,s),o=[];!r.audio||Kt(r.audio)||qt(r.audio,this.usingManagedMediaSource_)||o.push(`audio codec ${r.audio}`),!r.video||Kt(r.video)||qt(r.video,this.usingManagedMediaSource_)||o.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&o.push(`text codec ${r.text}`),o.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(t){const e=[],i=this.main().playlists,s=Ga(Et(t)),r=hd(s),o=s.video&&Et(s.video)[0]||null,d=s.audio&&Et(s.audio)[0]||null;Object.keys(i).forEach(f=>{const v=i[f];if(e.indexOf(v.id)!==-1||v.excludeUntil===1/0)return;e.push(v.id);const g=[],O=aa(this.mainPlaylistLoader_.main,v),A=hd(O);if(O.audio||O.video){if(A!==r&&g.push(`codec count "${A}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const W=O.video&&Et(O.video)[0]||null,I=O.audio&&Et(O.audio)[0]||null;W&&o&&W.type.toLowerCase()!==o.type.toLowerCase()&&g.push(`video codec "${W.type}" !== "${o.type}"`),I&&d&&I.type.toLowerCase()!==d.type.toLowerCase()&&g.push(`audio codec "${I.type}" !== "${d.type}"`)}g.length&&(v.excludeUntil=1/0,this.logger_(`excluding ${v.id}: ${g.join(" && ")}`))}})}updateAdCues_(t){let e=0;const i=this.seekable();i.length&&(e=i.start(0)),function(s,r,o=0){if(!s.segments)return;let d,f=o;for(let v=0;v<s.segments.length;v++){const g=s.segments[v];if(d||(d=Np(r,f+g.duration/2)),d){if("cueIn"in g){d.endTime=f,d.adEndTime=f,f+=g.duration,d=null;continue}if(f<d.endTime){f+=g.duration;continue}d.endTime+=g.duration}else if("cueOut"in g&&(d=new(p()).VTTCue(f,f+g.duration,g.cueOut),d.adStartTime=f,d.adEndTime=f+parseFloat(g.cueOut),r.addCue(d)),"cueOutCont"in g){const[O,A]=g.cueOutCont.split("/").map(parseFloat);d=new(p()).VTTCue(f,f+g.duration,""),d.adStartTime=f-O,d.adEndTime=d.adStartTime+A,r.addCue(d)}f+=g.duration}}(t,this.cueTagsTrack_,e)}goalBufferLength(){const t=this.tech_.currentTime(),e=on.GOAL_BUFFER_LENGTH,i=on.GOAL_BUFFER_LENGTH_RATE,s=Math.max(e,on.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*i,s)}bufferLowWaterLine(){const t=this.tech_.currentTime(),e=on.BUFFER_LOW_WATER_LINE,i=on.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(e,on.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(e,on.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*i,this.bufferBasedABR?r:s)}bufferHighWaterLine(){return on.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(t){yd(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:e,dateRanges:i})=>{const s=e.metadataTrack_;if(!s)return;const r=p().WebKitDataCue||p().VTTCue;i.forEach(o=>{for(const d of Object.keys(o)){if(Cp.has(d))continue;const f=new r(o.startTime,o.endTime,"");f.id=o.id,f.type="com.apple.quicktime.HLS",f.value={key:Ep[d],data:o[d]},d!=="scte35Out"&&d!=="scte35In"||(f.value.data=new Uint8Array(f.value.data.match(/[\da-f]{2}/gi)).buffer),s.addCue(f)}o.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:t})}addMetadataToTextTrack(t,e,i){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();yd(this.inbandTextTracks_,t,this.tech_),(({inbandTextTracks:r,metadataArray:o,timestampOffset:d,videoDuration:f})=>{if(!o)return;const v=p().WebKitDataCue||p().VTTCue,g=r.metadataTrack_;if(!g||(o.forEach(X=>{const dt=X.cueTime+d;!(typeof dt!="number"||p().isNaN(dt)||dt<0)&&dt<1/0&&X.frames&&X.frames.length&&X.frames.forEach(ht=>{const lt=new v(dt,dt,ht.value||ht.url||ht.data||"");lt.frame=ht,lt.value=ht,function(gt){Object.defineProperties(gt.frame,{id:{get:()=>(_t.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),gt.value.key)},value:{get:()=>(_t.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),gt.value.data)},privateData:{get:()=>(_t.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),gt.value.data)}})}(lt),g.addCue(lt)})}),!g.cues||!g.cues.length))return;const O=g.cues,A=[];for(let X=0;X<O.length;X++)O[X]&&A.push(O[X]);const W=A.reduce((X,dt)=>{const ht=X[dt.startTime]||[];return ht.push(dt),X[dt.startTime]=ht,X},{}),I=Object.keys(W).sort((X,dt)=>Number(X)-Number(dt));I.forEach((X,dt)=>{const ht=W[X],lt=isFinite(f)?f:X,gt=Number(I[dt+1])||lt;ht.forEach(Rt=>{Rt.endTime=gt})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:e,timestampOffset:s,videoDuration:i})}pathwayAttribute_(t){return t.attributes["PATHWAY-ID"]||t.attributes.serviceLocation}initContentSteeringController_(){const t=this.main();if(t.contentSteering){for(const e of t.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(e));this.contentSteeringController_.assignTagProperties(t.uri,t.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,e=>{this.trigger(G({},e))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const e=this.contentSteeringController_.getAvailablePathways(),i=[];for(const s of t.playlists){const r=s.attributes.serviceLocation;if(r&&(i.push(r),!e.has(r)))return!0}return!(i.length||!e.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const t=this.contentSteeringController_.getPathway();if(!t)return;this.handlePathwayClones_();const e=this.main().playlists,i=new Set;let s=!1;Object.keys(e).forEach(r=>{const o=e[r],d=this.pathwayAttribute_(o),f=d&&t!==d;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!f&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const v=!o.excludeUntil&&o.excludeUntil!==1/0;!i.has(o.id)&&f&&v&&(i.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(r=>{const o=this.mediaTypes_[r];if(o.activePlaylistLoader){const d=o.activePlaylistLoader.media_;d&&d.attributes.serviceLocation!==t&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,e=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(e&&e.size||i&&i.size){for(const[s,r]of e.entries())i.get(s)||(this.mainPlaylistLoader_.updateOrDeleteClone(r),this.contentSteeringController_.excludePathway(s));for(const[s,r]of i.entries()){const o=e.get(s);o?this.equalPathwayClones_(o,r)||(this.mainPlaylistLoader_.updateOrDeleteClone(r,!0),this.contentSteeringController_.addAvailablePathway(s)):(t.filter(d=>d.attributes["PATHWAY-ID"]===r["BASE-ID"]).forEach(d=>{this.mainPlaylistLoader_.addClonePathway(r,d)}),this.contentSteeringController_.addAvailablePathway(s))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(t,e){if(t["BASE-ID"]!==e["BASE-ID"]||t.ID!==e.ID||t["URI-REPLACEMENT"].HOST!==e["URI-REPLACEMENT"].HOST)return!1;const i=t["URI-REPLACEMENT"].PARAMS,s=e["URI-REPLACEMENT"].PARAMS;for(const r in i)if(i[r]!==s[r])return!1;for(const r in s)if(i[r]!==s[r])return!1;return!0}changeSegmentPathway_(){const t=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(t,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let t=0;const e="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=this.mainPlaylistLoader_.getKeyIdSet(i);s&&s.size&&s.forEach(r=>{const o="usable",d=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===o,f=i.lastExcludeReason_===e&&i.excludeUntil===1/0;d?d&&f&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${r} is ${o}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==e&&(i.excludeUntil=1/0,i.lastExcludeReason_=e,this.logger_(`excluding playlist ${i.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${o}`)),t++)})}),t>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,r=i.excludeUntil===1/0&&i.lastExcludeReason_===e;s&&r&&(delete i.excludeUntil,_t.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${e} key IDs`))})}addKeyStatus_(t,e){const i=(typeof t=="string"?t:(s=>{const r=new Uint8Array(s);return Array.from(r).map(o=>o.toString(16).padStart(2,"0")).join("")})(t)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${e}' with key ID ${i} added to the keyStatusMap`),this.keyStatusMap_.set(i,e)}updatePlaylistByKeyStatus(t,e){this.addKeyStatus_(t,e),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class Xp{constructor(t,e,i){const{playlistController_:s}=t,r=s.fastQualityChange_.bind(s);if(e.attributes){const v=e.attributes.RESOLUTION;this.width=v&&v.width,this.height=v&&v.height,this.bandwidth=e.attributes.BANDWIDTH,this.frameRate=e.attributes["FRAME-RATE"]}var o,d,f;this.codecs=aa(s.main(),e),this.playlist=e,this.id=i,this.enabled=(o=t.playlists,d=e.id,f=r,v=>{const g=o.main.playlists[d],O=ml(g),A=za(g);if(v===void 0)return A;v?delete g.disabled:g.disabled=!0;const W={renditionInfo:{id:d,bandwidth:g.attributes.BANDWIDTH,resolution:g.attributes.RESOLUTION,codecs:g.attributes.CODECS},cause:"fast-quality"};return v===A||O||(v?(f(g),o.trigger({type:"renditionenabled",metadata:W})):o.trigger({type:"renditiondisabled",metadata:W})),v})}}const jd=["seeking","seeked","pause","playing","error"];class Yp extends _t.EventTarget{constructor(t){super(),this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=ns("PlaybackWatcher"),this.logger_("initialize");const e=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),o=this.playlistController_,d=["main","subtitle","audio"],f={};d.forEach(g=>{f[g]={reset:()=>this.resetSegmentDownloads_(g),updateend:()=>this.checkSegmentDownloads_(g)},o[`${g}SegmentLoader_`].on("appendsdone",f[g].updateend),o[`${g}SegmentLoader_`].on("playlistupdate",f[g].reset),this.tech_.on(["seeked","seeking"],f[g].reset)});const v=g=>{["main","audio"].forEach(O=>{o[`${O}SegmentLoader_`][g]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=()=>v("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(jd,r),this.tech_.on("canplay",i),this.tech_.one("play",e),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off(jd,r),this.tech_.off("canplay",i),this.tech_.off("play",e),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),d.forEach(g=>{o[`${g}SegmentLoader_`].off("appendsdone",f[g].updateend),o[`${g}SegmentLoader_`].off("playlistupdate",f[g].reset),this.tech_.off(["seeked","seeking"],f[g].reset)}),this.checkCurrentTimeTimeout_&&p().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&p().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=p().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){const e=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=e.buffered_()}checkSegmentDownloads_(t){const e=this.playlistController_,i=e[`${t}SegmentLoader_`],s=i.buffered_(),r=function(o,d){if(o===d)return!1;if(!o&&d||!d&&o||o.length!==d.length)return!0;for(let f=0;f<o.length;f++)if(o.start(f)!==d.start(f)||o.end(f)!==d.end(f))return!0;return!1}(this[`${t}Buffered_`],s);if(this[`${t}Buffered_`]=s,r){const o={bufferedRanges:s};return e.trigger({type:"bufferedrangeschanged",metadata:o}),void this.resetSegmentDownloads_(t)}this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:pr(s)}),this[`${t}StalledDownloads_`]<10||(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),t!=="subtitle"&&e.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+bs>=e.end(e.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(t===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(gn([this.lastRecordedTime,t]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=t}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),e=this.tech_.currentTime();let i;if(this.afterSeekableWindow_(t,e,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=t.end(t.length-1)),this.beforeSeekableWindow_(t,e)){const A=t.start(0);i=A+(A===t.end(0)?0:bs)}if(i!==void 0)return this.logger_(`Trying to seek outside of seekable at time ${e} with seekable range ${Cc(t)}. Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0;const s=this.playlistController_.sourceUpdater_,r=this.tech_.buffered(),o=s.audioBuffer?s.audioBuffered():null,d=s.videoBuffer?s.videoBuffered():null,f=this.media(),v=f.partTargetDuration?f.partTargetDuration:2*(f.targetDuration-Rs),g=[o,d];for(let A=0;A<g.length;A++)if(g[A]&&hl(g[A],e)<v)return!1;const O=Ha(r,e);return O.length!==0&&(i=O.start(0)+bs,this.logger_(`Buffered region starts (${O.start(0)})  just beyond seek point (${e}). Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0)}waiting_(){if(this.techWaiting_())return;const t=this.tech_.currentTime(),e=this.tech_.buffered(),i=Dr(e,t);return i.length&&t+3<=i.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,e)){const o=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${e}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:e}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const r=Ha(s,e);return r.length>0&&(this.logger_(`Stopped at ${e} and seeking to ${r.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(e),!0)}afterSeekableWindow_(t,e,i,s=!1){if(!t.length)return!1;let r=t.end(t.length-1)+bs;const o=!i.endList,d=typeof i.partTargetDuration=="number";return o&&(d||s)&&(r=t.end(t.length-1)+3*i.targetDuration),e>r}beforeSeekableWindow_(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:e,currentTime:i}){if(!t)return;let s;if(t.length&&e.length){const r=Dr(t,i-3),o=Dr(t,i),d=Dr(e,i);d.length&&!o.length&&r.length&&(s={start:r.end(0),end:d.end(0)})}else Ha(t,i).length||(s=this.gapFromVideoUnderflow_(t,i));return!!s&&(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${i}`),!0)}skipTheGap_(t){const e=this.tech_.buffered(),i=this.tech_.currentTime(),s=Ha(e,i);if(this.resetTimeUpdate_(),s.length===0||i!==t)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Rs);const r={gapInfo:{from:i,to:s.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(t,e){const i=function(s){if(s.length<2)return gn();const r=[];for(let o=1;o<s.length;o++){const d=s.end(o-1),f=s.start(o);r.push([d,f])}return gn(r)}(t);for(let s=0;s<i.length;s++){const r=i.start(s),o=i.end(s);if(e-r<4&&e-r>2)return{start:r,end:o}}return null}}const Kp={errorInterval:30,getSource(n){return n(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Bd=function(n,t){let e=0,i=0;const s=Si(Kp,t);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){i&&n.currentTime(i)},o=function(v){v!=null&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",r),n.src(v),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},d=function(){if(Date.now()-e<1e3*s.errorInterval)n.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(s.getSource&&typeof s.getSource=="function")return e=Date.now(),s.getSource.call(n,o);_t.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},f=function(){n.off("loadedmetadata",r),n.off("error",d),n.off("dispose",f)};n.on("error",d),n.on("dispose",f),n.reloadSourceOnError=function(v){f(),Bd(n,v)}};var Fd="3.16.2";const qi={PlaylistLoader:Mr,Playlist:An,utils:mp,STANDARD_PLAYLIST_SELECTOR:md,INITIAL_PLAYLIST_SELECTOR:function(){const n=this.playlists.main.playlists.filter(An.isEnabled);return jr(n,(t,e)=>kl(t,e)),n.filter(t=>!!aa(this.playlists.main,t).video)[0]||null},lastBandwidthSelector:md,movingAverageBandwidthSelector:function(n){let t=-1,e=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&p().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),t<0&&(t=this.systemBandwidth,e=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==e&&(t=n*this.systemBandwidth+(1-n)*t,e=this.systemBandwidth),fd(this.playlists.main,t,parseInt(Ya(this.tech_.el(),"width"),10)*i,parseInt(Ya(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:kl,comparePlaylistResolution:function(n,t){let e,i;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(e=n.attributes.RESOLUTION.width),e=e||p().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||p().Number.MAX_VALUE,e===i&&n.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?n.attributes.BANDWIDTH-t.attributes.BANDWIDTH:e-i},xhr:Hc()};Object.keys(on).forEach(n=>{Object.defineProperty(qi,n,{get:()=>(_t.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),on[n]),set(t){_t.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),typeof t!="number"||t<0?_t.log.warn(`value of Vhs.${n} must be greater than or equal to 0`):on[n]=t}})});const qd="videojs-vhs",$d=function(n,t){const e=t.media();let i=-1;for(let s=0;s<n.length;s++)if(n[s].id===e.id){i=s;break}n.selectedIndex_=i,n.trigger({selectedIndex:i,type:"change"})};qi.canPlaySource=function(){return _t.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Vd=()=>{if(!p().localStorage)return null;const n=p().localStorage.getItem(qd);if(!n)return null;try{return JSON.parse(n)}catch{return null}},Hd=(n,t)=>{n._requestCallbackSet||(n._requestCallbackSet=new Set),n._requestCallbackSet.add(t)},zd=(n,t)=>{n._responseCallbackSet||(n._responseCallbackSet=new Set),n._responseCallbackSet.add(t)},Wd=(n,t)=>{n._requestCallbackSet&&(n._requestCallbackSet.delete(t),n._requestCallbackSet.size||delete n._requestCallbackSet)},Gd=(n,t)=>{n._responseCallbackSet&&(n._responseCallbackSet.delete(t),n._responseCallbackSet.size||delete n._responseCallbackSet)};qi.supportsNativeHls=function(){if(!m()||!m().createElement)return!1;const n=m().createElement("video");return!!_t.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}(),qi.supportsNativeDash=!!(m()&&m().createElement&&_t.getTech("Html5").isSupported())&&/maybe|probably/i.test(m().createElement("video").canPlayType("application/dash+xml")),qi.supportsTypeNatively=n=>n==="hls"?qi.supportsNativeHls:n==="dash"&&qi.supportsNativeDash,qi.isSupported=function(){return _t.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},qi.xhr.onRequest=function(n){Hd(qi.xhr,n)},qi.xhr.onResponse=function(n){zd(qi.xhr,n)},qi.xhr.offRequest=function(n){Wd(qi.xhr,n)},qi.xhr.offResponse=function(n){Gd(qi.xhr,n)};const Qp=_t.getComponent("Component");class Xd extends Qp{constructor(t,e,i){if(super(e,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=ns("VhsHandler"),e.options_&&e.options_.playerId){const s=_t.getPlayer(e.options_.playerId);this.player_=s}if(this.tech_=e,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(m(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const r=m().fullscreenElement||m().webkitFullscreenElement||m().mozFullScreenElement||m().msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(t={}){if(this.options_=Si(this.options_,t),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=this.source_.useBandwidthFromLocalStorage!==void 0?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=Vd();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=on.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===on.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{this.source_[i]!==void 0&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const e=this.options_.customPixelRatio;typeof e=="number"&&e>=0&&(this.customPixelRatio=e)}setOptions(t={}){this.setOptions_(t)}src(t,e){if(!t)return;var i;this.setOptions_(),this.options_.src=(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=qi,this.options_.sourceType=de(e),this.options_.seekTo=o=>{this.tech_.setCurrentTime(o)},this.options_.player_=this.player_,this.playlistController_=new Gp(this.options_);const s=Si({liveRangeSafeTimeDelta:bs},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Yp(s),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const o=_t.players[this.tech_.options_.playerId];let d=this.playlistController_.error;typeof d!="object"||d.code?typeof d=="string"&&(d={message:d,code:3}):d.code=3,o.error(d)});const r=this.options_.bufferBasedABR?qi.movingAverageBandwidthSelector(.55):qi.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=qi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(o){this.playlistController_.selectPlaylist=o.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(o){this.playlistController_.mainSegmentLoader_.throughput.rate=o,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let o=this.playlistController_.mainSegmentLoader_.bandwidth;const d=p().navigator.connection||p().navigator.mozConnection||p().navigator.webkitConnection,f=1e7;if(this.options_.useNetworkInformationApi&&d){const v=1e3*d.downlink*1e3;o=v>=f&&o>=f?Math.max(o,v):v}return o},set(o){this.playlistController_.mainSegmentLoader_.bandwidth=o,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const o=1/(this.bandwidth||1);let d;return d=this.throughput>0?1/this.throughput:0,Math.floor(1/(o+d))},set(){_t.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>pr(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>pr(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(o=>{if(!p().localStorage)return!1;let d=Vd();d=d?Si(d,o):o;try{p().localStorage.setItem(qd,JSON.stringify(d))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{var o;(o=this).representations=()=>{const d=o.playlistController_.main(),f=ra(d)?o.playlistController_.getAudioTrackPlaylists_():d.playlists;return f?f.filter(v=>!ml(v)).map((v,g)=>new Xp(o,v,v.id)):[]}}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=p().URL.createObjectURL(this.playlistController_.mediaSource),(_t.browser.IS_ANY_SAFARI||_t.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:e,sourceKeySystems:i,audioMedia:s,mainPlaylists:r})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const o=(v=s?r.concat([s]):r,g=Object.keys(i),v.reduce((O,A)=>{if(!A.contentProtection)return O;const W=g.reduce((I,X)=>{const dt=A.contentProtection[X];return dt&&dt.pssh&&(I[X]={pssh:dt.pssh}),I},{});return Object.keys(W).length&&O.push(W),O},[])),d=[],f=[];var v,g;return o.forEach(O=>{f.push(new Promise((A,W)=>{e.tech_.one("keysessioncreated",A)})),d.push(new Promise((A,W)=>{e.eme.initializeMediaKeys({keySystems:O},I=>{I?W(I):A()})}))}),Promise.race([Promise.all(d),Promise.race(f)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,e=(({player:i,sourceKeySystems:s,media:r,audioMedia:o})=>{const d=((f,v,g)=>{if(!f)return f;let O={};v&&v.attributes&&v.attributes.CODECS&&(O=Ga(Et(v.attributes.CODECS))),g&&g.attributes&&g.attributes.CODECS&&(O.audio=g.attributes.CODECS);const A=wt(O.video),W=wt(O.audio),I={};for(const X in f)I[X]={},W&&(I[X].audioContentType=W),A&&(I[X].videoContentType=A),v.contentProtection&&v.contentProtection[X]&&v.contentProtection[X].pssh&&(I[X].pssh=v.contentProtection[X].pssh),typeof f[X]=="string"&&(I[X].url=f[X]);return Si(f,I)})(s,r,o);return!(!d||(i.currentSource().keySystems=d,d&&!i.eme&&(_t.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),e?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const t=_t.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{(function(e,i){i.representations().forEach(s=>{e.addQualityLevel(s)}),$d(e,i.playlists)})(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{$d(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Fd,"mux.js":"7.1.0","mpd-parser":"1.3.1","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return Ad.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&p().URL.revokeObjectURL&&(p().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,e){return(({playlist:i,time:s,callback:r})=>{if(!r)throw new Error("getProgramTime: callback must be provided");if(!i||s===void 0)return r({message:"getProgramTime: playlist and time must be provided"});const o=((v,g)=>{if(!g||!g.segments||g.segments.length===0)return null;let O,A=0;for(let I=0;I<g.segments.length&&(O=g.segments[I],A=O.videoTimingInfo?O.videoTimingInfo.transmuxedPresentationEnd:A+O.duration,!(v<=A));I++);const W=g.segments[g.segments.length-1];if(W.videoTimingInfo&&W.videoTimingInfo.transmuxedPresentationEnd<v)return null;if(v>A){if(v>A+.25*W.duration)return null;O=W}return{segment:O,estimatedStart:O.videoTimingInfo?O.videoTimingInfo.transmuxedPresentationStart:A-O.duration,type:O.videoTimingInfo?"accurate":"estimate"}})(s,i);if(!o)return r({message:"valid programTime was not found"});if(o.type==="estimate")return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});const d={mediaSeconds:s},f=((v,g)=>{if(!g.dateTimeObject)return null;const O=g.videoTimingInfo.transmuxerPrependedSeconds,A=v-(g.videoTimingInfo.transmuxedPresentationStart+O);return new Date(g.dateTimeObject.getTime()+1e3*A)})(s,o.segment);return f&&(d.programDateTime=f.toISOString()),r(null,d)})({playlist:this.playlistController_.media(),time:t,callback:e})}seekToProgramTime(t,e,i=!0,s=2){return Xc({programTime:t,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})}setupXhrHooks_(){this.xhr.onRequest=t=>{Hd(this.xhr,t)},this.xhr.onResponse=t=>{zd(this.xhr,t)},this.xhr.offRequest=t=>{Wd(this.xhr,t)},this.xhr.offResponse=t=>{Gd(this.xhr,t)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.playlistController_.on(t,e=>{this.player_.trigger(G({},e))})}),["gapjumped","playedrangeschanged"].forEach(t=>{this.playbackWatcher_.on(t,e=>{this.player_.trigger(G({},e))})})}}const Qa={name:"videojs-http-streaming",VERSION:Fd,canHandleSource(n,t={}){const e=Si(_t.options,t);return!(!e.vhs.experimentalUseMMS&&!qt("avc1.4d400d,mp4a.40.2",!1))&&Qa.canPlayType(n.type,e)},handleSource(n,t,e={}){const i=Si(_t.options,e);return t.vhs=new Xd(n,t,i),t.vhs.xhr=Hc(),t.vhs.setupXhrHooks_(),t.vhs.src(n.src,n.type),t.vhs},canPlayType(n,t){const e=de(n);if(!e)return"";const i=Qa.getOverrideNative(t);return!qi.supportsTypeNatively(e)||i?"maybe":""},getOverrideNative(n={}){const{vhs:t={}}=n,e=!(_t.browser.IS_ANY_SAFARI||_t.browser.IS_IOS),{overrideNative:i=e}=t;return i}};qt("avc1.4d400d,mp4a.40.2",!0)&&_t.getTech("Html5").registerSourceHandler(Qa,0),_t.VhsHandler=Xd,_t.VhsSourceHandler=Qa,_t.Vhs=qi,_t.use||_t.registerComponent("Vhs",qi),_t.options.vhs=_t.options.vhs||{},_t.getPlugin&&_t.getPlugin("reloadSourceOnError")||_t.registerPlugin("reloadSourceOnError",function(n){Bd(this,n)})},2579:(S,x,u)=>{var y=u(5204);S.exports=function(p,b){return b===void 0&&(b=!1),function(m,E,P){if(m)p(m);else if(E.statusCode>=400&&E.statusCode<=599){var $=P;if(b)if(y.TextDecoder){var j=((G=E.headers&&E.headers["content-type"])===void 0&&(G=""),G.toLowerCase().split(";").reduce(function(M,nt){var pt=nt.split("="),Mt=pt[0],rt=pt[1];return Mt.trim()==="charset"?rt.trim():M},"utf-8"));try{$=new TextDecoder(j).decode(P)}catch{}}else $=String.fromCharCode.apply(null,new Uint8Array(P));p({cause:$})}else p(null,P);var G}}},8496:(S,x,u)=>{var y=u(5204),p=u(8304),b=u(8716),m=u(8677),E=u(6527);j.httpHandler=u(3432),j.requestInterceptorsStorage=new m,j.responseInterceptorsStorage=new m,j.retryManager=new E;var P=function(M){var nt={};return M&&M.trim().split(`
`).forEach(function(pt){var Mt=pt.indexOf(":"),rt=pt.slice(0,Mt).trim().toLowerCase(),ft=pt.slice(Mt+1).trim();nt[rt]===void 0?nt[rt]=ft:Array.isArray(nt[rt])?nt[rt].push(ft):nt[rt]=[nt[rt],ft]}),nt};function $(M,nt,pt){var Mt=M;return b(nt)?(pt=nt,typeof M=="string"&&(Mt={uri:M})):Mt=p({},nt,{uri:M}),Mt.callback=pt,Mt}function j(M,nt,pt){return G(nt=$(M,nt,pt))}function G(M){if(M.callback===void 0)throw new Error("callback argument missing");if(M.requestType&&j.requestInterceptorsStorage.getIsEnabled()){var nt={uri:M.uri||M.url,headers:M.headers||{},body:M.body,metadata:M.metadata||{},retry:M.retry,timeout:M.timeout},pt=j.requestInterceptorsStorage.execute(M.requestType,nt);M.uri=pt.uri,M.headers=pt.headers,M.body=pt.body,M.metadata=pt.metadata,M.retry=pt.retry,M.timeout=pt.timeout}var Mt=!1,rt=function(Lt,wt,qt){Mt||(Mt=!0,M.callback(Lt,wt,qt))};function ft(){var Lt=void 0;if(Lt=tt.response?tt.response:tt.responseText||function(wt){try{if(wt.responseType==="document")return wt.responseXML;var qt=wt.responseXML&&wt.responseXML.documentElement.nodeName==="parsererror";if(wt.responseType===""&&!qt)return wt.responseXML}catch{}return null}(tt),Tt)try{Lt=JSON.parse(Lt)}catch{}return Lt}function B(Lt){if(clearTimeout(Dt),clearTimeout(M.retryTimeout),Lt instanceof Error||(Lt=new Error(""+(Lt||"Unknown XMLHttpRequest Error"))),Lt.statusCode=0,ut||!j.retryManager.getIsEnabled()||!M.retry||!M.retry.shouldRetry()){if(M.requestType&&j.responseInterceptorsStorage.getIsEnabled()){var wt={headers:Et.headers||{},body:Et.body,responseUrl:tt.responseURL,responseType:tt.responseType},qt=j.responseInterceptorsStorage.execute(M.requestType,wt);Et.body=qt.body,Et.headers=qt.headers}return rt(Lt,Et)}M.retryTimeout=setTimeout(function(){M.retry.moveToNextAttempt(),M.xhr=tt,G(M)},M.retry.getCurrentFuzzedDelay())}function it(){if(!ut){var Lt;clearTimeout(Dt),clearTimeout(M.retryTimeout),Lt=M.useXDR&&tt.status===void 0?200:tt.status===1223?204:tt.status;var wt=Et,qt=null;if(Lt!==0?(wt={body:ft(),statusCode:Lt,method:Y,headers:{},url:q,rawRequest:tt},tt.getAllResponseHeaders&&(wt.headers=P(tt.getAllResponseHeaders()))):qt=new Error("Internal XMLHttpRequest Error"),M.requestType&&j.responseInterceptorsStorage.getIsEnabled()){var Kt={headers:wt.headers||{},body:wt.body,responseUrl:tt.responseURL,responseType:tt.responseType},be=j.responseInterceptorsStorage.execute(M.requestType,Kt);wt.body=be.body,wt.headers=be.headers}return rt(qt,wt,wt.body)}}var Q,ut,tt=M.xhr||null;tt||(tt=M.cors||M.useXDR?new j.XDomainRequest:new j.XMLHttpRequest);var Dt,q=tt.url=M.uri||M.url,Y=tt.method=M.method||"GET",st=M.body||M.data,It=tt.headers=M.headers||{},Ot=!!M.sync,Tt=!1,Et={body:void 0,headers:{},statusCode:0,method:Y,url:q,rawRequest:tt};if("json"in M&&M.json!==!1&&(Tt=!0,It.accept||It.Accept||(It.Accept="application/json"),Y!=="GET"&&Y!=="HEAD"&&(It["content-type"]||It["Content-Type"]||(It["Content-Type"]="application/json"),st=JSON.stringify(M.json===!0?st:M.json))),tt.onreadystatechange=function(){tt.readyState!==4||j.responseInterceptorsStorage.getIsEnabled()||setTimeout(it,0)},tt.onload=it,tt.onerror=B,tt.onprogress=function(){},tt.onabort=function(){ut=!0,clearTimeout(M.retryTimeout)},tt.ontimeout=B,tt.open(Y,q,!Ot,M.username,M.password),Ot||(tt.withCredentials=!!M.withCredentials),!Ot&&M.timeout>0&&(Dt=setTimeout(function(){if(!ut){ut=!0,tt.abort("timeout");var Lt=new Error("XMLHttpRequest timeout");Lt.code="ETIMEDOUT",B(Lt)}},M.timeout)),tt.setRequestHeader)for(Q in It)It.hasOwnProperty(Q)&&tt.setRequestHeader(Q,It[Q]);else if(M.headers&&!function(Lt){for(var wt in Lt)if(Lt.hasOwnProperty(wt))return!1;return!0}(M.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in M&&(tt.responseType=M.responseType),"beforeSend"in M&&typeof M.beforeSend=="function"&&M.beforeSend(tt),tt.send(st||null),tt}S.exports=j,S.exports.default=j,j.XMLHttpRequest=y.XMLHttpRequest||function(){},j.XDomainRequest="withCredentials"in new j.XMLHttpRequest?j.XMLHttpRequest:y.XDomainRequest,function(M,nt){for(var pt=0;pt<M.length;pt++)nt(M[pt])}(["get","put","post","patch","head","delete"],function(M){j[M==="delete"?"del":M]=function(nt,pt,Mt){return(pt=$(nt,pt,Mt)).method=M.toUpperCase(),G(pt)}})},6342:S=>{function x(y,p){(p==null||p>y.length)&&(p=y.length);for(var b=0,m=new Array(p);b<p;b++)m[b]=y[b];return m}var u=function(){function y(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var p=y.prototype;return p.getIsEnabled=function(){return this.enabled_},p.enable=function(){this.enabled_=!0},p.disable=function(){this.enabled_=!1},p.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},p.addInterceptor=function(b,m){this.typeToInterceptorsMap_.has(b)||this.typeToInterceptorsMap_.set(b,new Set);var E=this.typeToInterceptorsMap_.get(b);return!E.has(m)&&(E.add(m),!0)},p.removeInterceptor=function(b,m){var E=this.typeToInterceptorsMap_.get(b);return!(!E||!E.has(m)||(E.delete(m),0))},p.clearInterceptorsByType=function(b){return!!this.typeToInterceptorsMap_.get(b)&&(this.typeToInterceptorsMap_.delete(b),this.typeToInterceptorsMap_.set(b,new Set),!0)},p.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},p.getForType=function(b){return this.typeToInterceptorsMap_.get(b)||new Set},p.execute=function(b,m){for(var E,P=function(j,G){var M=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(M)return(M=M.call(j)).next.bind(M);if(Array.isArray(j)||(M=function(pt,Mt){if(pt){if(typeof pt=="string")return x(pt,Mt);var rt=Object.prototype.toString.call(pt).slice(8,-1);return rt==="Object"&&pt.constructor&&(rt=pt.constructor.name),rt==="Map"||rt==="Set"?Array.from(pt):rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt)?x(pt,Mt):void 0}}(j))||G){M&&(j=M);var nt=0;return function(){return nt>=j.length?{done:!0}:{done:!1,value:j[nt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(this.getForType(b));!(E=P()).done;){var $=E.value;try{m=$(m)}catch{}}return m},y}();S.exports=u},4378:S=>{var x=function(){function y(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var p=y.prototype;return p.getIsEnabled=function(){return this.enabled_},p.enable=function(){this.enabled_=!0},p.disable=function(){this.enabled_=!1},p.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},p.getMaxAttempts=function(){return this.maxAttempts_},p.setMaxAttempts=function(b){this.maxAttempts_=b},p.getDelayFactor=function(){return this.delayFactor_},p.setDelayFactor=function(b){this.delayFactor_=b},p.getFuzzFactor=function(){return this.fuzzFactor_},p.setFuzzFactor=function(b){this.fuzzFactor_=b},p.getInitialDelay=function(){return this.initialDelay_},p.setInitialDelay=function(b){this.initialDelay_=b},p.createRetry=function(b){var m=b===void 0?{}:b,E=m.maxAttempts,P=m.delayFactor,$=m.fuzzFactor,j=m.initialDelay;return new u({maxAttempts:E||this.maxAttempts_,delayFactor:P||this.delayFactor_,fuzzFactor:$||this.fuzzFactor_,initialDelay:j||this.initialDelay_})},y}(),u=function(){function y(b){this.maxAttempts_=b.maxAttempts,this.delayFactor_=b.delayFactor,this.fuzzFactor_=b.fuzzFactor,this.currentDelay_=b.initialDelay,this.currentAttempt_=1}var p=y.prototype;return p.moveToNextAttempt=function(){this.currentAttempt_++;var b=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+b},p.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},p.getCurrentDelay=function(){return this.currentDelay_},p.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},p.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},p.getCurrentFuzzedDelay=function(){var b=this.getCurrentMinPossibleDelay(),m=this.getCurrentMaxPossibleDelay();return b+Math.random()*(m-b)},y}();S.exports=x},52:(S,x,u)=>{var y=u(5204),p=S.exports={WebVTT:u(5483),VTTCue:u(2980),VTTRegion:u(6791)};y.vttjs=p,y.WebVTT=p.WebVTT;var b=p.VTTCue,m=p.VTTRegion,E=y.VTTCue,P=y.VTTRegion;p.shim=function(){y.VTTCue=b,y.VTTRegion=m},p.restore=function(){y.VTTCue=E,y.VTTRegion=P},y.VTTCue||p.shim()},5483:(S,x,u)=>{var y=u(7509),p=Object.create||function(){function q(){}return function(Y){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return q.prototype=Y,new q}}();function b(q,Y){this.name="ParsingError",this.code=q.code,this.message=Y||q.message}function m(q){function Y(It,Ot,Tt,Et){return 3600*(0|It)+60*(0|Ot)+(0|Tt)+(0|Et)/1e3}var st=q.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return st?st[3]?Y(st[1],st[2],st[3].replace(":",""),st[4]):st[1]>59?Y(st[1],st[2],0,st[4]):Y(0,st[1],st[2],st[4]):null}function E(){this.values=p(null)}function P(q,Y,st,It){var Ot=It?q.split(It):[q];for(var Tt in Ot)if(typeof Ot[Tt]=="string"){var Et=Ot[Tt].split(st);Et.length===2&&Y(Et[0].trim(),Et[1].trim())}}function $(q,Y,st){var It=q;function Ot(){var Et=m(q);if(Et===null)throw new b(b.Errors.BadTimeStamp,"Malformed timestamp: "+It);return q=q.replace(/^[^\sa-zA-Z-]+/,""),Et}function Tt(){q=q.replace(/^\s+/,"")}if(Tt(),Y.startTime=Ot(),Tt(),q.substr(0,3)!=="-->")throw new b(b.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+It);q=q.substr(3),Tt(),Y.endTime=Ot(),Tt(),function(Et,Lt){var wt=new E;P(Et,function(qt,Kt){switch(qt){case"region":for(var be=st.length-1;be>=0;be--)if(st[be].id===Kt){wt.set(qt,st[be].region);break}break;case"vertical":wt.alt(qt,Kt,["rl","lr"]);break;case"line":var ee=Kt.split(","),Ee=ee[0];wt.integer(qt,Ee),wt.percent(qt,Ee)&&wt.set("snapToLines",!1),wt.alt(qt,Ee,["auto"]),ee.length===2&&wt.alt("lineAlign",ee[1],["start","center","end"]);break;case"position":ee=Kt.split(","),wt.percent(qt,ee[0]),ee.length===2&&wt.alt("positionAlign",ee[1],["start","center","end"]);break;case"size":wt.percent(qt,Kt);break;case"align":wt.alt(qt,Kt,["start","center","end","left","right"])}},/:/,/\s/),Lt.region=wt.get("region",null),Lt.vertical=wt.get("vertical","");try{Lt.line=wt.get("line","auto")}catch{}Lt.lineAlign=wt.get("lineAlign","start"),Lt.snapToLines=wt.get("snapToLines",!0),Lt.size=wt.get("size",100);try{Lt.align=wt.get("align","center")}catch{Lt.align=wt.get("align","middle")}try{Lt.position=wt.get("position","auto")}catch{Lt.position=wt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Lt.align)}Lt.positionAlign=wt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Lt.align)}(q,Y)}b.prototype=p(Error.prototype),b.prototype.constructor=b,b.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},E.prototype={set:function(q,Y){this.get(q)||Y===""||(this.values[q]=Y)},get:function(q,Y,st){return st?this.has(q)?this.values[q]:Y[st]:this.has(q)?this.values[q]:Y},has:function(q){return q in this.values},alt:function(q,Y,st){for(var It=0;It<st.length;++It)if(Y===st[It]){this.set(q,Y);break}},integer:function(q,Y){/^-?\d+$/.test(Y)&&this.set(q,parseInt(Y,10))},percent:function(q,Y){return!!(Y.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(Y=parseFloat(Y))>=0&&Y<=100)&&(this.set(q,Y),!0)}};var j=y.createElement&&y.createElement("textarea"),G={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},M={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},nt={v:"title",lang:"lang"},pt={rt:"ruby"};function Mt(q,Y){function st(){if(!Y)return null;var de,xe=Y.match(/^([^<]*)(<[^>]*>?)?/);return de=xe[1]?xe[1]:xe[2],Y=Y.substr(de.length),de}function It(de,xe){return!pt[xe.localName]||pt[xe.localName]===de.localName}function Ot(de,xe){var Bt=G[de];if(!Bt)return null;var le=q.document.createElement(Bt),Qe=nt[de];return Qe&&xe&&(le[Qe]=xe.trim()),le}for(var Tt,Et,Lt=q.document.createElement("div"),wt=Lt,qt=[];(Tt=st())!==null;)if(Tt[0]!=="<")wt.appendChild(q.document.createTextNode((Et=Tt,j.innerHTML=Et,Et=j.textContent,j.textContent="",Et)));else{if(Tt[1]==="/"){qt.length&&qt[qt.length-1]===Tt.substr(2).replace(">","")&&(qt.pop(),wt=wt.parentNode);continue}var Kt,be=m(Tt.substr(1,Tt.length-2));if(be){Kt=q.document.createProcessingInstruction("timestamp",be),wt.appendChild(Kt);continue}var ee=Tt.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ee||!(Kt=Ot(ee[1],ee[3]))||!It(wt,Kt))continue;if(ee[2]){var Ee=ee[2].split(".");Ee.forEach(function(de){var xe=/^bg_/.test(de),Bt=xe?de.slice(3):de;if(M.hasOwnProperty(Bt)){var le=xe?"background-color":"color",Qe=M[Bt];Kt.style[le]=Qe}}),Kt.className=Ee.join(" ")}qt.push(ee[1]),wt.appendChild(Kt),wt=Kt}return Lt}var rt=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ft(q){for(var Y=0;Y<rt.length;Y++){var st=rt[Y];if(q>=st[0]&&q<=st[1])return!0}return!1}function B(q){var Y=[],st="";if(!q||!q.childNodes)return"ltr";function It(Et,Lt){for(var wt=Lt.childNodes.length-1;wt>=0;wt--)Et.push(Lt.childNodes[wt])}function Ot(Et){if(!Et||!Et.length)return null;var Lt=Et.pop(),wt=Lt.textContent||Lt.innerText;if(wt){var qt=wt.match(/^.*(\n|\r)/);return qt?(Et.length=0,qt[0]):wt}return Lt.tagName==="ruby"?Ot(Et):Lt.childNodes?(It(Et,Lt),Ot(Et)):void 0}for(It(Y,q);st=Ot(Y);)for(var Tt=0;Tt<st.length;Tt++)if(ft(st.charCodeAt(Tt)))return"rtl";return"ltr"}function it(){}function Q(q,Y,st){it.call(this),this.cue=Y,this.cueDiv=Mt(q,Y.text);var It={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:Y.vertical===""?"horizontal-tb":Y.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(It,this.cueDiv),this.div=q.document.createElement("div"),It={direction:B(this.cueDiv),writingMode:Y.vertical===""?"horizontal-tb":Y.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:Y.align==="middle"?"center":Y.align,font:st.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(It),this.div.appendChild(this.cueDiv);var Ot=0;switch(Y.positionAlign){case"start":case"line-left":Ot=Y.position;break;case"center":Ot=Y.position-Y.size/2;break;case"end":case"line-right":Ot=Y.position-Y.size}Y.vertical===""?this.applyStyles({left:this.formatStyle(Ot,"%"),width:this.formatStyle(Y.size,"%")}):this.applyStyles({top:this.formatStyle(Ot,"%"),height:this.formatStyle(Y.size,"%")}),this.move=function(Tt){this.applyStyles({top:this.formatStyle(Tt.top,"px"),bottom:this.formatStyle(Tt.bottom,"px"),left:this.formatStyle(Tt.left,"px"),right:this.formatStyle(Tt.right,"px"),height:this.formatStyle(Tt.height,"px"),width:this.formatStyle(Tt.width,"px")})}}function ut(q){var Y,st,It,Ot;if(q.div){st=q.div.offsetHeight,It=q.div.offsetWidth,Ot=q.div.offsetTop;var Tt=(Tt=q.div.childNodes)&&(Tt=Tt[0])&&Tt.getClientRects&&Tt.getClientRects();q=q.div.getBoundingClientRect(),Y=Tt?Math.max(Tt[0]&&Tt[0].height||0,q.height/Tt.length):0}this.left=q.left,this.right=q.right,this.top=q.top||Ot,this.height=q.height||st,this.bottom=q.bottom||Ot+(q.height||st),this.width=q.width||It,this.lineHeight=Y!==void 0?Y:q.lineHeight}function tt(q,Y,st,It){var Ot=new ut(Y),Tt=Y.cue,Et=function(xe){if(typeof xe.line=="number"&&(xe.snapToLines||xe.line>=0&&xe.line<=100))return xe.line;if(!xe.track||!xe.track.textTrackList||!xe.track.textTrackList.mediaElement)return-1;for(var Bt=xe.track,le=Bt.textTrackList,Qe=0,di=0;di<le.length&&le[di]!==Bt;di++)le[di].mode==="showing"&&Qe++;return-1*++Qe}(Tt),Lt=[];if(Tt.snapToLines){var wt;switch(Tt.vertical){case"":Lt=["+y","-y"],wt="height";break;case"rl":Lt=["+x","-x"],wt="width";break;case"lr":Lt=["-x","+x"],wt="width"}var qt=Ot.lineHeight,Kt=qt*Math.round(Et),be=st[wt]+qt,ee=Lt[0];Math.abs(Kt)>be&&(Kt=Kt<0?-1:1,Kt*=Math.ceil(be/qt)*qt),Et<0&&(Kt+=Tt.vertical===""?st.height:st.width,Lt=Lt.reverse()),Ot.move(ee,Kt)}else{var Ee=Ot.lineHeight/st.height*100;switch(Tt.lineAlign){case"center":Et-=Ee/2;break;case"end":Et-=Ee}switch(Tt.vertical){case"":Y.applyStyles({top:Y.formatStyle(Et,"%")});break;case"rl":Y.applyStyles({left:Y.formatStyle(Et,"%")});break;case"lr":Y.applyStyles({right:Y.formatStyle(Et,"%")})}Lt=["+y","-x","+x","-y"],Ot=new ut(Y)}var de=function(xe,Bt){for(var le,Qe=new ut(xe),di=1,$t=0;$t<Bt.length;$t++){for(;xe.overlapsOppositeAxis(st,Bt[$t])||xe.within(st)&&xe.overlapsAny(It);)xe.move(Bt[$t]);if(xe.within(st))return xe;var Ce=xe.intersectPercentage(st);di>Ce&&(le=new ut(xe),di=Ce),xe=new ut(Qe)}return le||Qe}(Ot,Lt);Y.move(de.toCSSCompatValues(st))}function Dt(){}it.prototype.applyStyles=function(q,Y){for(var st in Y=Y||this.div,q)q.hasOwnProperty(st)&&(Y.style[st]=q[st])},it.prototype.formatStyle=function(q,Y){return q===0?0:q+Y},Q.prototype=p(it.prototype),Q.prototype.constructor=Q,ut.prototype.move=function(q,Y){switch(Y=Y!==void 0?Y:this.lineHeight,q){case"+x":this.left+=Y,this.right+=Y;break;case"-x":this.left-=Y,this.right-=Y;break;case"+y":this.top+=Y,this.bottom+=Y;break;case"-y":this.top-=Y,this.bottom-=Y}},ut.prototype.overlaps=function(q){return this.left<q.right&&this.right>q.left&&this.top<q.bottom&&this.bottom>q.top},ut.prototype.overlapsAny=function(q){for(var Y=0;Y<q.length;Y++)if(this.overlaps(q[Y]))return!0;return!1},ut.prototype.within=function(q){return this.top>=q.top&&this.bottom<=q.bottom&&this.left>=q.left&&this.right<=q.right},ut.prototype.overlapsOppositeAxis=function(q,Y){switch(Y){case"+x":return this.left<q.left;case"-x":return this.right>q.right;case"+y":return this.top<q.top;case"-y":return this.bottom>q.bottom}},ut.prototype.intersectPercentage=function(q){return Math.max(0,Math.min(this.right,q.right)-Math.max(this.left,q.left))*Math.max(0,Math.min(this.bottom,q.bottom)-Math.max(this.top,q.top))/(this.height*this.width)},ut.prototype.toCSSCompatValues=function(q){return{top:this.top-q.top,bottom:q.bottom-this.bottom,left:this.left-q.left,right:q.right-this.right,height:this.height,width:this.width}},ut.getSimpleBoxPosition=function(q){var Y=q.div?q.div.offsetHeight:q.tagName?q.offsetHeight:0,st=q.div?q.div.offsetWidth:q.tagName?q.offsetWidth:0,It=q.div?q.div.offsetTop:q.tagName?q.offsetTop:0;return{left:(q=q.div?q.div.getBoundingClientRect():q.tagName?q.getBoundingClientRect():q).left,right:q.right,top:q.top||It,height:q.height||Y,bottom:q.bottom||It+(q.height||Y),width:q.width||st}},Dt.StringDecoder=function(){return{decode:function(q){if(!q)return"";if(typeof q!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(q))}}},Dt.convertCueToDOMTree=function(q,Y){return q&&Y?Mt(q,Y):null},Dt.processCues=function(q,Y,st){if(!q||!Y||!st)return null;for(;st.firstChild;)st.removeChild(st.firstChild);var It=q.document.createElement("div");if(It.style.position="absolute",It.style.left="0",It.style.right="0",It.style.top="0",It.style.bottom="0",It.style.margin="1.5%",st.appendChild(It),function(wt){for(var qt=0;qt<wt.length;qt++)if(wt[qt].hasBeenReset||!wt[qt].displayState)return!0;return!1}(Y)){var Ot=[],Tt=ut.getSimpleBoxPosition(It),Et={font:Math.round(.05*Tt.height*100)/100+"px sans-serif"};(function(){for(var wt,qt,Kt=0;Kt<Y.length;Kt++)qt=Y[Kt],wt=new Q(q,qt,Et),It.appendChild(wt.div),tt(0,wt,Tt,Ot),qt.displayState=wt.div,Ot.push(ut.getSimpleBoxPosition(wt))})()}else for(var Lt=0;Lt<Y.length;Lt++)It.appendChild(Y[Lt].displayState)},Dt.Parser=function(q,Y,st){st||(st=Y,Y={}),Y||(Y={}),this.window=q,this.vttjs=Y,this.state="INITIAL",this.buffer="",this.decoder=st||new TextDecoder("utf8"),this.regionList=[]},Dt.Parser.prototype={reportOrThrowError:function(q){if(!(q instanceof b))throw q;this.onparsingerror&&this.onparsingerror(q)},parse:function(q){var Y,st=this;function It(){for(var wt=st.buffer,qt=0;qt<wt.length&&wt[qt]!=="\r"&&wt[qt]!==`
`;)++qt;var Kt=wt.substr(0,qt);return wt[qt]==="\r"&&++qt,wt[qt]===`
`&&++qt,st.buffer=wt.substr(qt),Kt}q&&(st.buffer+=st.decoder.decode(q,{stream:!0}));try{var Ot;if(st.state==="INITIAL"){if(!/\r\n|\n/.test(st.buffer))return this;var Tt=(Ot=It()).match(/^WEBVTT([ \t].*)?$/);if(!Tt||!Tt[0])throw new b(b.Errors.BadSignature);st.state="HEADER"}for(var Et=!1;st.buffer;){if(!/\r\n|\n/.test(st.buffer))return this;switch(Et?Et=!1:Ot=It(),st.state){case"HEADER":/:/.test(Ot)?(Y=Ot).match(/X-TIMESTAMP-MAP/)?P(Y,function(wt,qt){wt==="X-TIMESTAMP-MAP"&&function(Kt){var be=new E;P(Kt,function(ee,Ee){switch(ee){case"MPEGT":be.integer(ee+"S",Ee);break;case"LOCA":be.set(ee+"L",m(Ee))}},/[^\d]:/,/,/),st.ontimestampmap&&st.ontimestampmap({MPEGTS:be.get("MPEGTS"),LOCAL:be.get("LOCAL")})}(qt)},/=/):P(Y,function(wt,qt){wt==="Region"&&function(Kt){var be=new E;if(P(Kt,function(Ee,de){switch(Ee){case"id":be.set(Ee,de);break;case"width":be.percent(Ee,de);break;case"lines":be.integer(Ee,de);break;case"regionanchor":case"viewportanchor":var xe=de.split(",");if(xe.length!==2)break;var Bt=new E;if(Bt.percent("x",xe[0]),Bt.percent("y",xe[1]),!Bt.has("x")||!Bt.has("y"))break;be.set(Ee+"X",Bt.get("x")),be.set(Ee+"Y",Bt.get("y"));break;case"scroll":be.alt(Ee,de,["up"])}},/=/,/\s/),be.has("id")){var ee=new(st.vttjs.VTTRegion||st.window.VTTRegion);ee.width=be.get("width",100),ee.lines=be.get("lines",3),ee.regionAnchorX=be.get("regionanchorX",0),ee.regionAnchorY=be.get("regionanchorY",100),ee.viewportAnchorX=be.get("viewportanchorX",0),ee.viewportAnchorY=be.get("viewportanchorY",100),ee.scroll=be.get("scroll",""),st.onregion&&st.onregion(ee),st.regionList.push({id:be.get("id"),region:ee})}}(qt)},/:/):Ot||(st.state="ID");continue;case"NOTE":Ot||(st.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Ot)){st.state="NOTE";break}if(!Ot)continue;st.cue=new(st.vttjs.VTTCue||st.window.VTTCue)(0,0,"");try{st.cue.align="center"}catch{st.cue.align="middle"}if(st.state="CUE",Ot.indexOf("-->")===-1){st.cue.id=Ot;continue}case"CUE":try{$(Ot,st.cue,st.regionList)}catch(wt){st.reportOrThrowError(wt),st.cue=null,st.state="BADCUE";continue}st.state="CUETEXT";continue;case"CUETEXT":var Lt=Ot.indexOf("-->")!==-1;if(!Ot||Lt&&(Et=!0)){st.oncue&&st.oncue(st.cue),st.cue=null,st.state="ID";continue}st.cue.text&&(st.cue.text+=`
`),st.cue.text+=Ot.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":Ot||(st.state="ID");continue}}}catch(wt){st.reportOrThrowError(wt),st.state==="CUETEXT"&&st.cue&&st.oncue&&st.oncue(st.cue),st.cue=null,st.state=st.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var q=this;try{if(q.buffer+=q.decoder.decode(),(q.cue||q.state==="HEADER")&&(q.buffer+=`

`,q.parse()),q.state==="INITIAL")throw new b(b.Errors.BadSignature)}catch(Y){q.reportOrThrowError(Y)}return q.onflush&&q.onflush(),this}},S.exports=Dt},2980:S=>{var x={"":1,lr:1,rl:1},u={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function y(b){return typeof b=="string"&&!!u[b.toLowerCase()]&&b.toLowerCase()}function p(b,m,E){this.hasBeenReset=!1;var P="",$=!1,j=b,G=m,M=E,nt=null,pt="",Mt=!0,rt="auto",ft="start",B="auto",it="auto",Q=100,ut="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return P},set:function(tt){P=""+tt}},pauseOnExit:{enumerable:!0,get:function(){return $},set:function(tt){$=!!tt}},startTime:{enumerable:!0,get:function(){return j},set:function(tt){if(typeof tt!="number")throw new TypeError("Start time must be set to a number.");j=tt,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return G},set:function(tt){if(typeof tt!="number")throw new TypeError("End time must be set to a number.");G=tt,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return M},set:function(tt){M=""+tt,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return nt},set:function(tt){nt=tt,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return pt},set:function(tt){var Dt=function(q){return typeof q=="string"&&!!x[q.toLowerCase()]&&q.toLowerCase()}(tt);if(Dt===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");pt=Dt,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Mt},set:function(tt){Mt=!!tt,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return rt},set:function(tt){if(typeof tt!="number"&&tt!=="auto")throw new SyntaxError("Line: an invalid number or illegal string was specified.");rt=tt,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return ft},set:function(tt){var Dt=y(tt);Dt?(ft=Dt,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return B},set:function(tt){if(tt<0||tt>100)throw new Error("Position must be between 0 and 100.");B=tt,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return it},set:function(tt){var Dt=y(tt);Dt?(it=Dt,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Q},set:function(tt){if(tt<0||tt>100)throw new Error("Size must be between 0 and 100.");Q=tt,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return ut},set:function(tt){var Dt=y(tt);if(!Dt)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");ut=Dt,this.hasBeenReset=!0}}}),this.displayState=void 0}p.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},S.exports=p},6791:S=>{var x={"":!0,up:!0};function u(y){return typeof y=="number"&&y>=0&&y<=100}S.exports=function(){var y=100,p=3,b=0,m=100,E=0,P=100,$="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return y},set:function(j){if(!u(j))throw new Error("Width must be between 0 and 100.");y=j}},lines:{enumerable:!0,get:function(){return p},set:function(j){if(typeof j!="number")throw new TypeError("Lines must be set to a number.");p=j}},regionAnchorY:{enumerable:!0,get:function(){return m},set:function(j){if(!u(j))throw new Error("RegionAnchorX must be between 0 and 100.");m=j}},regionAnchorX:{enumerable:!0,get:function(){return b},set:function(j){if(!u(j))throw new Error("RegionAnchorY must be between 0 and 100.");b=j}},viewportAnchorY:{enumerable:!0,get:function(){return P},set:function(j){if(!u(j))throw new Error("ViewportAnchorY must be between 0 and 100.");P=j}},viewportAnchorX:{enumerable:!0,get:function(){return E},set:function(j){if(!u(j))throw new Error("ViewportAnchorX must be between 0 and 100.");E=j}},scroll:{enumerable:!0,get:function(){return $},set:function(j){var G=function(M){return typeof M=="string"&&!!x[M.toLowerCase()]&&M.toLowerCase()}(j);G===!1?console.warn("Scroll: an invalid or illegal string was specified."):$=G}}})}},5303:(S,x,u)=>{var y;(function(){function p(K,at,Nt){return K.call.apply(K.bind,arguments)}function b(K,at,Nt){if(!K)throw Error();if(2<arguments.length){var Vt=Array.prototype.slice.call(arguments,2);return function(){var Ht=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ht,Vt),K.apply(at,Ht)}}return function(){return K.apply(at,arguments)}}function m(K,at,Nt){return(m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:b).apply(null,arguments)}var E=Date.now||function(){return+new Date};function P(K,at){this.a=K,this.o=at||K,this.c=this.o.document}var $=!!window.FontFace;function j(K,at,Nt,Vt){if(at=K.c.createElement(at),Nt)for(var Ht in Nt)Nt.hasOwnProperty(Ht)&&(Ht=="style"?at.style.cssText=Nt[Ht]:at.setAttribute(Ht,Nt[Ht]));return Vt&&at.appendChild(K.c.createTextNode(Vt)),at}function G(K,at,Nt){(K=K.c.getElementsByTagName(at)[0])||(K=document.documentElement),K.insertBefore(Nt,K.lastChild)}function M(K){K.parentNode&&K.parentNode.removeChild(K)}function nt(K,at,Nt){at=at||[],Nt=Nt||[];for(var Vt=K.className.split(/\s+/),Ht=0;Ht<at.length;Ht+=1){for(var Oe=!1,ye=0;ye<Vt.length;ye+=1)if(at[Ht]===Vt[ye]){Oe=!0;break}Oe||Vt.push(at[Ht])}for(at=[],Ht=0;Ht<Vt.length;Ht+=1){for(Oe=!1,ye=0;ye<Nt.length;ye+=1)if(Vt[Ht]===Nt[ye]){Oe=!0;break}Oe||at.push(Vt[Ht])}K.className=at.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function pt(K,at){for(var Nt=K.className.split(/\s+/),Vt=0,Ht=Nt.length;Vt<Ht;Vt++)if(Nt[Vt]==at)return!0;return!1}function Mt(K,at,Nt){function Vt(){ve&&Ht&&Oe&&(ve(ye),ve=null)}at=j(K,"link",{rel:"stylesheet",href:at,media:"all"});var Ht=!1,Oe=!0,ye=null,ve=Nt||null;$?(at.onload=function(){Ht=!0,Vt()},at.onerror=function(){Ht=!0,ye=Error("Stylesheet failed to load"),Vt()}):setTimeout(function(){Ht=!0,Vt()},0),G(K,"head",at)}function rt(K,at,Nt,Vt){var Ht=K.c.getElementsByTagName("head")[0];if(Ht){var Oe=j(K,"script",{src:at}),ye=!1;return Oe.onload=Oe.onreadystatechange=function(){ye||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(ye=!0,Nt&&Nt(null),Oe.onload=Oe.onreadystatechange=null,Oe.parentNode.tagName=="HEAD"&&Ht.removeChild(Oe))},Ht.appendChild(Oe),setTimeout(function(){ye||(ye=!0,Nt&&Nt(Error("Script load timeout")))},Vt||5e3),Oe}return null}function ft(){this.a=0,this.c=null}function B(K){return K.a++,function(){K.a--,Q(K)}}function it(K,at){K.c=at,Q(K)}function Q(K){K.a==0&&K.c&&(K.c(),K.c=null)}function ut(K){this.a=K||"-"}function tt(K,at){this.c=K,this.f=4,this.a="n";var Nt=(at||"n4").match(/^([nio])([1-9])$/i);Nt&&(this.a=Nt[1],this.f=parseInt(Nt[2],10))}function Dt(K){var at=[];K=K.split(/,\s*/);for(var Nt=0;Nt<K.length;Nt++){var Vt=K[Nt].replace(/['"]/g,"");Vt.indexOf(" ")!=-1||/^\d/.test(Vt)?at.push("'"+Vt+"'"):at.push(Vt)}return at.join(",")}function q(K){return K.a+K.f}function Y(K){var at="normal";return K.a==="o"?at="oblique":K.a==="i"&&(at="italic"),at}function st(K){var at=4,Nt="n",Vt=null;return K&&((Vt=K.match(/(normal|oblique|italic)/i))&&Vt[1]&&(Nt=Vt[1].substr(0,1).toLowerCase()),(Vt=K.match(/([1-9]00|normal|bold)/i))&&Vt[1]&&(/bold/i.test(Vt[1])?at=7:/[1-9]00/.test(Vt[1])&&(at=parseInt(Vt[1].substr(0,1),10)))),Nt+at}function It(K,at){this.c=K,this.f=K.o.document.documentElement,this.h=at,this.a=new ut("-"),this.j=at.events!==!1,this.g=at.classes!==!1}function Ot(K){if(K.g){var at=pt(K.f,K.a.c("wf","active")),Nt=[],Vt=[K.a.c("wf","loading")];at||Nt.push(K.a.c("wf","inactive")),nt(K.f,Nt,Vt)}Tt(K,"inactive")}function Tt(K,at,Nt){K.j&&K.h[at]&&(Nt?K.h[at](Nt.c,q(Nt)):K.h[at]())}function Et(){this.c={}}function Lt(K,at){this.c=K,this.f=at,this.a=j(this.c,"span",{"aria-hidden":"true"},this.f)}function wt(K){G(K.c,"body",K.a)}function qt(K){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+Dt(K.c)+";font-style:"+Y(K)+";font-weight:"+K.f+"00;"}function Kt(K,at,Nt,Vt,Ht,Oe){this.g=K,this.j=at,this.a=Vt,this.c=Nt,this.f=Ht||3e3,this.h=Oe||void 0}function be(K,at,Nt,Vt,Ht,Oe,ye){this.v=K,this.B=at,this.c=Nt,this.a=Vt,this.s=ye||"BESbswy",this.f={},this.w=Ht||3e3,this.u=Oe||null,this.m=this.j=this.h=this.g=null,this.g=new Lt(this.c,this.s),this.h=new Lt(this.c,this.s),this.j=new Lt(this.c,this.s),this.m=new Lt(this.c,this.s),K=qt(K=new tt(this.a.c+",serif",q(this.a))),this.g.a.style.cssText=K,K=qt(K=new tt(this.a.c+",sans-serif",q(this.a))),this.h.a.style.cssText=K,K=qt(K=new tt("serif",q(this.a))),this.j.a.style.cssText=K,K=qt(K=new tt("sans-serif",q(this.a))),this.m.a.style.cssText=K,wt(this.g),wt(this.h),wt(this.j),wt(this.m)}ut.prototype.c=function(K){for(var at=[],Nt=0;Nt<arguments.length;Nt++)at.push(arguments[Nt].replace(/[\W_]+/g,"").toLowerCase());return at.join(this.a)},Kt.prototype.start=function(){var K=this.c.o.document,at=this,Nt=E(),Vt=new Promise(function(ye,ve){(function Ne(){E()-Nt>=at.f?ve():K.fonts.load(function(Te){return Y(Te)+" "+Te.f+"00 300px "+Dt(Te.c)}(at.a),at.h).then(function(Te){1<=Te.length?ye():setTimeout(Ne,25)},function(){ve()})})()}),Ht=null,Oe=new Promise(function(ye,ve){Ht=setTimeout(ve,at.f)});Promise.race([Oe,Vt]).then(function(){Ht&&(clearTimeout(Ht),Ht=null),at.g(at.a)},function(){at.j(at.a)})};var ee={D:"serif",C:"sans-serif"},Ee=null;function de(){if(Ee===null){var K=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);Ee=!!K&&(536>parseInt(K[1],10)||parseInt(K[1],10)===536&&11>=parseInt(K[2],10))}return Ee}function xe(K,at,Nt){for(var Vt in ee)if(ee.hasOwnProperty(Vt)&&at===K.f[ee[Vt]]&&Nt===K.f[ee[Vt]])return!0;return!1}function Bt(K){var at,Nt=K.g.a.offsetWidth,Vt=K.h.a.offsetWidth;(at=Nt===K.f.serif&&Vt===K.f["sans-serif"])||(at=de()&&xe(K,Nt,Vt)),at?E()-K.A>=K.w?de()&&xe(K,Nt,Vt)&&(K.u===null||K.u.hasOwnProperty(K.a.c))?le(K,K.v):le(K,K.B):function(Ht){setTimeout(m(function(){Bt(this)},Ht),50)}(K):le(K,K.v)}function le(K,at){setTimeout(m(function(){M(this.g.a),M(this.h.a),M(this.j.a),M(this.m.a),at(this.a)},K),0)}function Qe(K,at,Nt){this.c=K,this.a=at,this.f=0,this.m=this.j=!1,this.s=Nt}be.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=E(),Bt(this)};var di=null;function $t(K){--K.f==0&&K.j&&(K.m?((K=K.a).g&&nt(K.f,[K.a.c("wf","active")],[K.a.c("wf","loading"),K.a.c("wf","inactive")]),Tt(K,"active")):Ot(K.a))}function Ce(K){this.j=K,this.a=new Et,this.h=0,this.f=this.g=!0}function Xe(K,at,Nt,Vt,Ht){var Oe=--K.h==0;(K.f||K.g)&&setTimeout(function(){var ye=Ht||null,ve=Vt||{};if(Nt.length===0&&Oe)Ot(at.a);else{at.f+=Nt.length,Oe&&(at.j=Oe);var Ne,Te=[];for(Ne=0;Ne<Nt.length;Ne++){var hi=Nt[Ne],Zi=ve[hi.c],L=at.a,U=hi;if(L.g&&nt(L.f,[L.a.c("wf",U.c,q(U).toString(),"loading")]),Tt(L,"fontloading",U),L=null,di===null)if(window.FontFace){U=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var J=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);di=U?42<parseInt(U[1],10):!J}else di=!1;L=di?new Kt(m(at.g,at),m(at.h,at),at.c,hi,at.s,Zi):new be(m(at.g,at),m(at.h,at),at.c,hi,at.s,ye,Zi),Te.push(L)}for(Ne=0;Ne<Te.length;Ne++)Te[Ne].start()}},0)}function Ni(K,at){this.c=K,this.a=at}function li(K,at){this.c=K,this.a=at}function Pt(K,at){this.c=K||xt,this.a=[],this.f=[],this.g=at||""}Qe.prototype.g=function(K){var at=this.a;at.g&&nt(at.f,[at.a.c("wf",K.c,q(K).toString(),"active")],[at.a.c("wf",K.c,q(K).toString(),"loading"),at.a.c("wf",K.c,q(K).toString(),"inactive")]),Tt(at,"fontactive",K),this.m=!0,$t(this)},Qe.prototype.h=function(K){var at=this.a;if(at.g){var Nt=pt(at.f,at.a.c("wf",K.c,q(K).toString(),"active")),Vt=[],Ht=[at.a.c("wf",K.c,q(K).toString(),"loading")];Nt||Vt.push(at.a.c("wf",K.c,q(K).toString(),"inactive")),nt(at.f,Vt,Ht)}Tt(at,"fontinactive",K),$t(this)},Ce.prototype.load=function(K){this.c=new P(this.j,K.context||this.j),this.g=K.events!==!1,this.f=K.classes!==!1,function(at,Nt,Vt){var Ht=[],Oe=Vt.timeout;(function(ve){ve.g&&nt(ve.f,[ve.a.c("wf","loading")]),Tt(ve,"loading")})(Nt),Ht=function(ve,Ne,Te){var hi,Zi=[];for(hi in Ne)if(Ne.hasOwnProperty(hi)){var L=ve.c[hi];L&&Zi.push(L(Ne[hi],Te))}return Zi}(at.a,Vt,at.c);var ye=new Qe(at.c,Nt,Oe);for(at.h=Ht.length,Nt=0,Vt=Ht.length;Nt<Vt;Nt++)Ht[Nt].load(function(ve,Ne,Te){Xe(at,ye,ve,Ne,Te)})}(this,new It(this.c,K),K)},Ni.prototype.load=function(K){function at(){if(Oe["__mti_fntLst"+Vt]){var ye,ve=Oe["__mti_fntLst"+Vt](),Ne=[];if(ve)for(var Te=0;Te<ve.length;Te++){var hi=ve[Te].fontfamily;ve[Te].fontStyle!=null&&ve[Te].fontWeight!=null?(ye=ve[Te].fontStyle+ve[Te].fontWeight,Ne.push(new tt(hi,ye))):Ne.push(new tt(hi))}K(Ne)}else setTimeout(function(){at()},50)}var Nt=this,Vt=Nt.a.projectId,Ht=Nt.a.version;if(Vt){var Oe=Nt.c.o;rt(this.c,(Nt.a.api||"https://fast.fonts.net/jsapi")+"/"+Vt+".js"+(Ht?"?v="+Ht:""),function(ye){ye?K([]):(Oe["__MonotypeConfiguration__"+Vt]=function(){return Nt.a},at())}).id="__MonotypeAPIScript__"+Vt}else K([])},li.prototype.load=function(K){var at,Nt,Vt=this.a.urls||[],Ht=this.a.families||[],Oe=this.a.testStrings||{},ye=new ft;for(at=0,Nt=Vt.length;at<Nt;at++)Mt(this.c,Vt[at],B(ye));var ve=[];for(at=0,Nt=Ht.length;at<Nt;at++)if((Vt=Ht[at].split(":"))[1])for(var Ne=Vt[1].split(","),Te=0;Te<Ne.length;Te+=1)ve.push(new tt(Vt[0],Ne[Te]));else ve.push(new tt(Vt[0]));it(ye,function(){K(ve,Oe)})};var xt="https://fonts.googleapis.com/css";function Wt(K){this.f=K,this.a=[],this.c={}}var Ut={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},Jt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ge={i:"i",italic:"i",n:"n",normal:"n"},ui=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function oi(K,at){this.c=K,this.a=at}var Ze={Arimo:!0,Cousine:!0,Tinos:!0};function vi(K,at){this.c=K,this.a=at}function Je(K,at){this.c=K,this.f=at,this.a=[]}oi.prototype.load=function(K){var at=new ft,Nt=this.c,Vt=new Pt(this.a.api,this.a.text),Ht=this.a.families;(function(ye,ve){for(var Ne=ve.length,Te=0;Te<Ne;Te++){var hi=ve[Te].split(":");hi.length==3&&ye.f.push(hi.pop());var Zi="";hi.length==2&&hi[1]!=""&&(Zi=":"),ye.a.push(hi.join(Zi))}})(Vt,Ht);var Oe=new Wt(Ht);(function(ye){for(var ve=ye.f.length,Ne=0;Ne<ve;Ne++){var Te=ye.f[Ne].split(":"),hi=Te[0].replace(/\+/g," "),Zi=["n4"];if(2<=Te.length){var L;if(L=[],U=Te[1])for(var U,J=(U=U.split(",")).length,bt=0;bt<J;bt++){var Xt;if((Xt=U[bt]).match(/^[\w-]+$/))if((Se=ui.exec(Xt.toLowerCase()))==null)Xt="";else{if(Xt=(Xt=Se[2])==null||Xt==""?"n":ge[Xt],(Se=Se[1])==null||Se=="")Se="4";else var Se=Jt[Se]||(isNaN(Se)?"4":Se.substr(0,1));Xt=[Xt,Se].join("")}else Xt="";Xt&&L.push(Xt)}0<L.length&&(Zi=L),Te.length==3&&(L=[],0<(Te=(Te=Te[2])?Te.split(","):L).length&&(Te=Ut[Te[0]])&&(ye.c[hi]=Te))}for(ye.c[hi]||(Te=Ut[hi])&&(ye.c[hi]=Te),Te=0;Te<Zi.length;Te+=1)ye.a.push(new tt(hi,Zi[Te]))}})(Oe),Mt(Nt,function(ye){if(ye.a.length==0)throw Error("No fonts to load!");if(ye.c.indexOf("kit=")!=-1)return ye.c;for(var ve=ye.a.length,Ne=[],Te=0;Te<ve;Te++)Ne.push(ye.a[Te].replace(/ /g,"+"));return ve=ye.c+"?family="+Ne.join("%7C"),0<ye.f.length&&(ve+="&subset="+ye.f.join(",")),0<ye.g.length&&(ve+="&text="+encodeURIComponent(ye.g)),ve}(Vt),B(at)),it(at,function(){K(Oe.a,Oe.c,Ze)})},vi.prototype.load=function(K){var at=this.a.id,Nt=this.c.o;at?rt(this.c,(this.a.api||"https://use.typekit.net")+"/"+at+".js",function(Vt){if(Vt)K([]);else if(Nt.Typekit&&Nt.Typekit.config&&Nt.Typekit.config.fn){Vt=Nt.Typekit.config.fn;for(var Ht=[],Oe=0;Oe<Vt.length;Oe+=2)for(var ye=Vt[Oe],ve=Vt[Oe+1],Ne=0;Ne<ve.length;Ne++)Ht.push(new tt(ye,ve[Ne]));try{Nt.Typekit.load({events:!1,classes:!1,async:!0})}catch{}K(Ht)}},2e3):K([])},Je.prototype.load=function(K){var at=this.f.id,Nt=this.c.o,Vt=this;at?(Nt.__webfontfontdeckmodule__||(Nt.__webfontfontdeckmodule__={}),Nt.__webfontfontdeckmodule__[at]=function(Ht,Oe){for(var ye=0,ve=Oe.fonts.length;ye<ve;++ye){var Ne=Oe.fonts[ye];Vt.a.push(new tt(Ne.name,st("font-weight:"+Ne.weight+";font-style:"+Ne.style)))}K(Vt.a)},rt(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(Ht){return Ht.o.location.hostname||Ht.a.location.hostname}(this.c)+"/"+at+".js",function(Ht){Ht&&K([])})):K([])};var Pe=new Ce(window);Pe.a.c.custom=function(K,at){return new li(at,K)},Pe.a.c.fontdeck=function(K,at){return new Je(at,K)},Pe.a.c.monotype=function(K,at){return new Ni(at,K)},Pe.a.c.typekit=function(K,at){return new vi(at,K)},Pe.a.c.google=function(K,at){return new oi(at,K)};var Ue={load:m(Pe.load,Pe)};(y=function(){return Ue}.call(x,u,x,S))===void 0||(S.exports=y)})()},4626:()=>{},8304:S=>{function x(){return S.exports=x=Object.assign?Object.assign.bind():function(u){for(var y=1;y<arguments.length;y++){var p=arguments[y];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(u[b]=p[b])}return u},S.exports.__esModule=!0,S.exports.default=S.exports,x.apply(this,arguments)}S.exports=x,S.exports.__esModule=!0,S.exports.default=S.exports},6606:(S,x)=>{var u={607:function(E,P,$){var j=this&&this.__importDefault||function(pt){return pt&&pt.__esModule?pt:{default:pt}};Object.defineProperty(P,"__esModule",{value:!0}),P.defaultProfiles=P.cldAdaptiveStreamProfile=P.cldLoopingProfile=P.cldDefaultProfile=void 0;const G=j($(704)),M=j($(83)),nt=j($(832));P.cldDefaultProfile={name:"cld-default",isDefault:!0,config:G.default},P.cldLoopingProfile={name:"cld-looping",isDefault:!0,config:M.default},P.cldAdaptiveStreamProfile={name:"cld-adaptive-stream",isDefault:!0,config:nt.default},P.defaultProfiles=[P.cldDefaultProfile,P.cldLoopingProfile,P.cldAdaptiveStreamProfile]},832:E=>{E.exports=JSON.parse('{"playerOptions":{"fluid":true,"controls":true,"controlBar":{"fullscreenToggle":false},"showJumpControls":true,"hideContextMenu":false,"floatingWhenNotVisible":"none"},"sourceOptions":{"chapters":true,"sourceTypes":["hls"],"transformation":[{"effect":["volume:auto"]}]}}')},704:E=>{E.exports=JSON.parse('{"playerOptions":{},"sourceOptions":{}}')},83:E=>{E.exports=JSON.parse('{"playerOptions":{"fluid":true,"controls":false,"muted":true,"floatingWhenNotVisible":"none","hideContextMenu":false,"autoplay":true,"loop":true},"sourceOptions":{}}')}},y={},p=function E(P){var $=y[P];if($!==void 0)return $.exports;var j=y[P]={exports:{}};return u[P].call(j.exports,j,j.exports,E),j.exports}(607),b=x;for(var m in p)b[m]=p[m];p.__esModule&&Object.defineProperty(b,"__esModule",{value:!0})},4728:(S,x,u)=>{u.d(x,{Bu:()=>j,K9:()=>$,Z2:()=>p,gJ:()=>b,qw:()=>P,vo:()=>y,wL:()=>m});const y={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},p="cloudinary-a.akamaihd.net",b="res.cloudinary.com",m={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialHeight:"ih",initialWidth:"iw",initial_duration:"idu",initialDuration:"idu",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},E="(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?",P=RegExp(`^${E}$`),$=RegExp(`(${E})\\.\\.(${E})`),j={font_weight:"normal",font_style:"normal",text_decoration:"none",text_align:"",stroke:"none"}},4870:(S,x,u)=>{u.d(x,{D:()=>p});var y=u(4728);function p(b,m,E,P,$,j,G,M){let nt;if(m.indexOf("/")===0)return"/res"+m;let pt=!E;return G?(M!=null&&M!==y.Z2||(M=E?m+"-res.cloudinary.com":y.gJ),pt==null&&(pt=M===y.gJ),nt="https://"+M):nt=j?"http://"+j:"http://"+[E?m+"-":"","res",".cloudinary.com"].join(""),pt&&(nt+="/"+m),nt}}},Uh={};function ai(S){var x=Uh[S];if(x!==void 0)return x.exports;var u=Uh[S]={id:S,loaded:!1,exports:{}};return jh[S].call(u.exports,u,u.exports,ai),u.loaded=!0,u.exports}ai.m=jh,Fs=[],ai.O=(S,x,u,y)=>{if(!x){var p=1/0;for(P=0;P<Fs.length;P++){for(var[x,u,y]=Fs[P],b=!0,m=0;m<x.length;m++)(!1&y||p>=y)&&Object.keys(ai.O).every(M=>ai.O[M](x[m]))?x.splice(m--,1):(b=!1,y<p&&(p=y));if(b){Fs.splice(P--,1);var E=u();E!==void 0&&(S=E)}}return S}y=y||0;for(var P=Fs.length;P>0&&Fs[P-1][2]>y;P--)Fs[P]=Fs[P-1];Fs[P]=[x,u,y]},ai.n=S=>{var x=S&&S.__esModule?()=>S.default:()=>S;return ai.d(x,{a:x}),x},ai.d=(S,x)=>{for(var u in x)ai.o(x,u)&&!ai.o(S,u)&&Object.defineProperty(S,u,{enumerable:!0,get:x[u]})},ai.f={},ai.e=S=>Promise.all(Object.keys(ai.f).reduce((x,u)=>(ai.f[u](S,x),x),[])),ai.u=S=>({33:"playlist",40:"debug",330:"ima",367:"dash",404:"interaction-areas",410:"recommendations-overlay",525:"shoppable",625:"chapters"})[S]+".js",ai.miniCssF=S=>{},ai.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ai.o=(S,x)=>Object.prototype.hasOwnProperty.call(S,x),Xr={},ai.l=(S,x,u,y)=>{if(Xr[S])Xr[S].push(x);else{var p,b;if(u!==void 0)for(var m=document.getElementsByTagName("script"),E=0;E<m.length;E++){var P=m[E];if(P.getAttribute("src")==S){p=P;break}}p||(b=!0,(p=document.createElement("script")).type="module",p.charset="utf-8",p.timeout=120,ai.nc&&p.setAttribute("nonce",ai.nc),p.src=S),Xr[S]=[x];var $=(G,M)=>{p.onerror=p.onload=null,clearTimeout(j);var nt=Xr[S];if(delete Xr[S],p.parentNode&&p.parentNode.removeChild(p),nt&&nt.forEach(pt=>pt(M)),G)return G(M)},j=setTimeout($.bind(null,void 0,{type:"timeout",target:p}),12e4);p.onerror=$.bind(null,p.onerror),p.onload=$.bind(null,p.onload),b&&document.head.appendChild(p)}},ai.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},ai.nmd=S=>(S.paths=[],S.children||(S.children=[]),S),ai.p="",(()=>{var S={278:0,869:0};ai.f.j=(y,p)=>{var b=ai.o(S,y)?S[y]:void 0;if(b!==0)if(b)p.push(b[2]);else if(y!=869){var m=new Promise(($,j)=>b=S[y]=[$,j]);p.push(b[2]=m);var E=ai.p+ai.u(y),P=new Error;ai.l(E,$=>{if(ai.o(S,y)&&((b=S[y])!==0&&(S[y]=void 0),b)){var j=$&&($.type==="load"?"missing":$.type),G=$&&$.target&&$.target.src;P.message="Loading chunk "+y+` failed.
(`+j+": "+G+")",P.name="ChunkLoadError",P.type=j,P.request=G,b[1](P)}},"chunk-"+y,y)}else S[y]=0},ai.O.j=y=>S[y]===0;var x=(y,p)=>{var b,m,[E,P,$]=p,j=0;if(E.some(M=>S[M]!==0)){for(b in P)ai.o(P,b)&&(ai.m[b]=P[b]);if($)var G=$(ai)}for(y&&y(p);j<E.length;j++)m=E[j],ai.o(S,m)&&S[m]&&S[m][0](),S[m]=0;return ai.O(G)},u=self.cloudinaryVideoPlayerChunkLoading=self.cloudinaryVideoPlayerChunkLoading||[];u.forEach(x.bind(null,0)),u.push=x.bind(null,u.push.bind(u))})();var Ca=ai.O(void 0,[869],()=>ai(2962));(Ca=ai.O(Ca)).Ay;Ca.OC;Ca.xY;Ca.Iy;document.addEventListener("DOMContentLoaded",S=>{const x="ABCDEFGHIJKLMNOPQRSTUVWXYZ",u=document.querySelector("#changing_text"),y=["Pharmacometricians","Clinical Pharmacologists","Quantitative System Pharmacologists","Data Scientists"];let p=0,b=!1,m,E=Date.now();const P=10,$=()=>{b=!0;let j=0;const G=y[p],M=()=>{let nt=Date.now(),pt=nt-E;pt>P&&(u.innerText=G.split("").map((Mt,rt)=>rt<j?G[rt]:Mt==" "?" ":x[Math.floor(Math.random()*22)]).join(""),j+=1/3,E=nt-pt%P),j<u.innerText.length&&b&&(m=requestAnimationFrame(M))};m=requestAnimationFrame(M)};$(),setInterval(()=>{p=(p+1)%y.length,document.hidden||$()},4e3),document.addEventListener("visibilitychange",function(){document.hidden?(b=!1,cancelAnimationFrame(m)):$()})})});export default tm();
