var Dm=(T,C)=>()=>(C||T((C={exports:{}}).exports,C),C.exports);var Rm=Dm((Sa,wa)=>{/*! For license information please see cld-video-player.js.LICENSE.txt */var jn,$r,wd={3314:(T,C)=>{function l(y,m){return m===void 0&&(m=Object),m&&typeof m.freeze=="function"?m.freeze(y):y}var g=l({HTML:"text/html",isHTML:function(y){return y===g.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),u=l({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(y){return y===u.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});C.assign=function(y,m){if(y===null||typeof y!="object")throw new TypeError("target is not an object");for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(y[E]=m[E]);return y},C.find=function(y,m,E){if(E===void 0&&(E=Array.prototype),y&&typeof E.find=="function")return E.find.call(y,m);for(var I=0;I<y.length;I++)if(Object.prototype.hasOwnProperty.call(y,I)){var F=y[I];if(m.call(void 0,F,I,y))return F}},C.freeze=l,C.MIME_TYPE=g,C.NAMESPACE=u},6404:(T,C,l)=>{var g=l(3314),u=l(6278),y=l(251),m=l(8654),E=u.DOMImplementation,I=g.NAMESPACE,F=m.ParseError,D=m.XMLReader;function X($){return $.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function R($){this.options=$||{locator:{}}}function Z(){this.cdata=!1}function dt($,et){et.lineNumber=$.lineNumber,et.columnNumber=$.columnNumber}function Dt($){if($)return`
@`+($.systemId||"")+"#[line:"+$.lineNumber+",col:"+$.columnNumber+"]"}function rt($,et,Q){return typeof $=="string"?$.substr(et,Q):$.length>=et+Q||et?new java.lang.String($,et,Q)+"":$}function pt($,et){$.currentElement?$.currentElement.appendChild(et):$.doc.appendChild(et)}R.prototype.parseFromString=function($,et){var Q=this.options,ct=new D,K=Q.domBuilder||new Z,Mt=Q.errorHandler,B=Q.locator,W=Q.xmlns||{},at=/\/x?html?$/.test(et),At=at?y.HTML_ENTITIES:y.XML_ENTITIES;B&&K.setDocumentLocator(B),ct.errorHandler=function(vt,It,Rt){if(!vt){if(It instanceof Z)return It;vt=It}var Et={},Bt=vt instanceof Function;function Qt(he){var Zt=vt[he];!Zt&&Bt&&(Zt=vt.length==2?function(ge){vt(he,ge)}:vt),Et[he]=Zt&&function(ge){Zt("[xmldom "+he+"]	"+ge+Dt(Rt))}||function(){}}return Rt=Rt||{},Qt("warning"),Qt("error"),Qt("fatalError"),Et}(Mt,K,B),ct.domBuilder=Q.domBuilder||K,at&&(W[""]=I.HTML),W.xml=W.xml||I.XML;var Ot=Q.normalizeLineEndings||X;return $&&typeof $=="string"?ct.parse(Ot($),W,At):ct.errorHandler.error("invalid doc source"),K.doc},Z.prototype={startDocument:function(){this.doc=new E().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function($,et,Q,ct){var K=this.doc,Mt=K.createElementNS($,Q||et),B=ct.length;pt(this,Mt),this.currentElement=Mt,this.locator&&dt(this.locator,Mt);for(var W=0;W<B;W++){$=ct.getURI(W);var at=ct.getValue(W),At=(Q=ct.getQName(W),K.createAttributeNS($,Q));this.locator&&dt(ct.getLocator(W),At),At.value=At.nodeValue=at,Mt.setAttributeNode(At)}},endElement:function($,et,Q){var ct=this.currentElement;ct.tagName,this.currentElement=ct.parentNode},startPrefixMapping:function($,et){},endPrefixMapping:function($){},processingInstruction:function($,et){var Q=this.doc.createProcessingInstruction($,et);this.locator&&dt(this.locator,Q),pt(this,Q)},ignorableWhitespace:function($,et,Q){},characters:function($,et,Q){if($=rt.apply(this,arguments)){if(this.cdata)var ct=this.doc.createCDATASection($);else ct=this.doc.createTextNode($);this.currentElement?this.currentElement.appendChild(ct):/^\s*$/.test($)&&this.doc.appendChild(ct),this.locator&&dt(this.locator,ct)}},skippedEntity:function($){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function($){(this.locator=$)&&($.lineNumber=0)},comment:function($,et,Q){$=rt.apply(this,arguments);var ct=this.doc.createComment($);this.locator&&dt(this.locator,ct),pt(this,ct)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function($,et,Q){var ct=this.doc.implementation;if(ct&&ct.createDocumentType){var K=ct.createDocumentType($,et,Q);this.locator&&dt(this.locator,K),pt(this,K),this.doc.doctype=K}},warning:function($){console.warn("[xmldom warning]	"+$,Dt(this.locator))},error:function($){console.error("[xmldom error]	"+$,Dt(this.locator))},fatalError:function($){throw new F($,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function($){Z.prototype[$]=function(){return null}}),C.DOMParser=R},6278:(T,C,l)=>{var g=l(3314),u=g.find,y=g.NAMESPACE;function m(P){return P!==""}function E(P,N){return P.hasOwnProperty(N)||(P[N]=!0),P}function I(P){if(!P)return[];var N=function(J){return J?J.split(/[\t\n\f\r ]+/).filter(m):[]}(P);return Object.keys(N.reduce(E,{}))}function F(P,N){for(var J in P)Object.prototype.hasOwnProperty.call(P,J)&&(N[J]=P[J])}function D(P,N){var J=P.prototype;if(!(J instanceof N)){let zt=function(){};var bt=zt;zt.prototype=N.prototype,F(J,zt=new zt),P.prototype=J=zt}J.constructor!=P&&(typeof P!="function"&&console.error("unknown Class:"+P),J.constructor=P)}var X={},R=X.ELEMENT_NODE=1,Z=X.ATTRIBUTE_NODE=2,dt=X.TEXT_NODE=3,Dt=X.CDATA_SECTION_NODE=4,rt=X.ENTITY_REFERENCE_NODE=5,pt=X.ENTITY_NODE=6,$=X.PROCESSING_INSTRUCTION_NODE=7,et=X.COMMENT_NODE=8,Q=X.DOCUMENT_NODE=9,ct=X.DOCUMENT_TYPE_NODE=10,K=X.DOCUMENT_FRAGMENT_NODE=11,Mt=X.NOTATION_NODE=12,B={},W={},at=(B.INDEX_SIZE_ERR=(W[1]="Index size error",1),B.DOMSTRING_SIZE_ERR=(W[2]="DOMString size error",2),B.HIERARCHY_REQUEST_ERR=(W[3]="Hierarchy request error",3)),At=(B.WRONG_DOCUMENT_ERR=(W[4]="Wrong document",4),B.INVALID_CHARACTER_ERR=(W[5]="Invalid character",5),B.NO_DATA_ALLOWED_ERR=(W[6]="No data allowed",6),B.NO_MODIFICATION_ALLOWED_ERR=(W[7]="No modification allowed",7),B.NOT_FOUND_ERR=(W[8]="Not found",8)),Ot=(B.NOT_SUPPORTED_ERR=(W[9]="Not supported",9),B.INUSE_ATTRIBUTE_ERR=(W[10]="Attribute in use",10));function vt(P,N){if(N instanceof Error)var J=N;else J=this,Error.call(this,W[P]),this.message=W[P],Error.captureStackTrace&&Error.captureStackTrace(this,vt);return J.code=P,N&&(this.message=this.message+": "+N),J}function It(){}function Rt(P,N){this._node=P,this._refresh=N,Et(this)}function Et(P){var N=P._node._inc||P._node.ownerDocument._inc;if(P._inc!==N){var J=P._refresh(P._node);if(pi(P,"length",J.length),!P.$$length||J.length<P.$$length)for(var bt=J.length;bt in P;bt++)Object.prototype.hasOwnProperty.call(P,bt)&&delete P[bt];F(J,P),P._inc=N}}function Bt(){}function Qt(P,N){for(var J=P.length;J--;)if(P[J]===N)return J}function he(P,N,J,bt){if(bt?N[Qt(N,bt)]=J:N[N.length++]=J,P){J.ownerElement=P;var zt=P.ownerDocument;zt&&(bt&&Ke(zt,P,bt),function(fe,mi,ui){fe&&fe._inc++,ui.namespaceURI===y.XMLNS&&(mi._nsMap[ui.prefix?ui.localName:""]=ui.value)}(zt,P,J))}}function Zt(P,N,J){var bt=Qt(N,J);if(!(bt>=0))throw new vt(At,new Error(P.tagName+"@"+J));for(var zt=N.length-1;bt<zt;)N[bt]=N[++bt];if(N.length=zt,P){var fe=P.ownerDocument;fe&&(Ke(fe,P,J),J.ownerElement=null)}}function ge(){}function ae(){}function Te(P){return(P=="<"?"&lt;":P==">"&&"&gt;")||P=="&"&&"&amp;"||P=='"'&&"&quot;"||"&#"+P.charCodeAt()+";"}function Ae(P,N){if(N(P))return!0;if(P=P.firstChild)do if(Ae(P,N))return!0;while(P=P.nextSibling)}function Ie(){this.ownerDocument=this}function Ke(P,N,J,bt){P&&P._inc++,J.namespaceURI===y.XMLNS&&delete N._nsMap[J.prefix?J.localName:""]}function Kt(P,N,J){if(P&&P._inc){P._inc++;var bt=N.childNodes;if(J)bt[bt.length++]=J;else{for(var zt=N.firstChild,fe=0;zt;)bt[fe++]=zt,zt=zt.nextSibling;bt.length=fe,delete bt[bt.length]}}}function ze(P,N){var J=N.previousSibling,bt=N.nextSibling;return J?J.nextSibling=bt:P.firstChild=bt,bt?bt.previousSibling=J:P.lastChild=J,N.parentNode=null,N.previousSibling=null,N.nextSibling=null,Kt(P.ownerDocument,P),N}function ei(P){return P&&P.nodeType===ae.DOCUMENT_TYPE_NODE}function We(P){return P&&P.nodeType===ae.ELEMENT_NODE}function Di(P){return P&&P.nodeType===ae.TEXT_NODE}function Qe(P,N){var J=P.childNodes||[];if(u(J,We)||ei(N))return!1;var bt=u(J,ei);return!(N&&bt&&J.indexOf(bt)>J.indexOf(N))}function Pt(P,N){var J=P.childNodes||[];if(u(J,function(zt){return We(zt)&&zt!==N}))return!1;var bt=u(J,ei);return!(N&&bt&&J.indexOf(bt)>J.indexOf(N))}function Ct(P,N,J){var bt=P.childNodes||[],zt=N.childNodes||[];if(N.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var fe=zt.filter(We);if(fe.length>1||u(zt,Di))throw new vt(at,"More than one element or text in fragment");if(fe.length===1&&!Qe(P,J))throw new vt(at,"Element in fragment can not be inserted before doctype")}if(We(N)&&!Qe(P,J))throw new vt(at,"Only one element can be added and only after doctype");if(ei(N)){if(u(bt,ei))throw new vt(at,"Only one doctype is allowed");var mi=u(bt,We);if(J&&bt.indexOf(mi)<bt.indexOf(J))throw new vt(at,"Doctype can only be inserted before an element");if(!J&&mi)throw new vt(at,"Doctype can not be appended since element is present")}}function Nt(P,N,J){var bt=P.childNodes||[],zt=N.childNodes||[];if(N.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var fe=zt.filter(We);if(fe.length>1||u(zt,Di))throw new vt(at,"More than one element or text in fragment");if(fe.length===1&&!Pt(P,J))throw new vt(at,"Element in fragment can not be inserted before doctype")}if(We(N)&&!Pt(P,J))throw new vt(at,"Only one element can be added and only after doctype");if(ei(N)){let Ci=function(Ne){return ei(Ne)&&Ne!==J};var ui=Ci;if(u(bt,Ci))throw new vt(at,"Only one doctype is allowed");var mi=u(bt,We);if(J&&bt.indexOf(mi)<bt.indexOf(J))throw new vt(at,"Doctype can only be inserted before an element")}}function Ft(P,N,J,bt){(function(Ci,Ne,Ri){if(!function(vi){return vi&&(vi.nodeType===ae.DOCUMENT_NODE||vi.nodeType===ae.DOCUMENT_FRAGMENT_NODE||vi.nodeType===ae.ELEMENT_NODE)}(Ci))throw new vt(at,"Unexpected parent node type "+Ci.nodeType);if(Ri&&Ri.parentNode!==Ci)throw new vt(At,"child not in parent");if(!function(vi){return vi&&(We(vi)||Di(vi)||ei(vi)||vi.nodeType===ae.DOCUMENT_FRAGMENT_NODE||vi.nodeType===ae.COMMENT_NODE||vi.nodeType===ae.PROCESSING_INSTRUCTION_NODE)}(Ne)||ei(Ne)&&Ci.nodeType!==ae.DOCUMENT_NODE)throw new vt(at,"Unexpected node type "+Ne.nodeType+" for parent node type "+Ci.nodeType)})(P,N,J),P.nodeType===ae.DOCUMENT_NODE&&(bt||Ct)(P,N,J);var zt=N.parentNode;if(zt&&zt.removeChild(N),N.nodeType===K){var fe=N.firstChild;if(fe==null)return N;var mi=N.lastChild}else fe=mi=N;var ui=J?J.previousSibling:P.lastChild;fe.previousSibling=ui,mi.nextSibling=J,ui?ui.nextSibling=fe:P.firstChild=fe,J==null?P.lastChild=mi:J.previousSibling=mi;do fe.parentNode=P;while(fe!==mi&&(fe=fe.nextSibling));return Kt(P.ownerDocument||P,P),N.nodeType==K&&(N.firstChild=N.lastChild=null),N}function ft(){this._nsMap={}}function ce(){}function oi(){}function di(){}function ii(){}function fi(){}function Ge(){}function $e(){}function He(){}function Y(){}function ot(){}function Ut(){}function $t(){}function Ht(P,N){var J=[],bt=this.nodeType==9&&this.documentElement||this,zt=bt.prefix,fe=bt.namespaceURI;if(fe&&zt==null&&(zt=bt.lookupPrefix(fe))==null)var mi=[{namespace:fe,prefix:null}];return se(this,J,P,N,mi),J.join("")}function ke(P,N,J){var bt=P.prefix||"",zt=P.namespaceURI;if(!zt||bt==="xml"&&zt===y.XML||zt===y.XMLNS)return!1;for(var fe=J.length;fe--;){var mi=J[fe];if(mi.prefix===bt)return mi.namespace!==zt}return!0}function le(P,N,J){P.push(" ",N,'="',J.replace(/[<>&"\t\n\r]/g,Te),'"')}function se(P,N,J,bt,zt){if(zt||(zt=[]),bt){if(!(P=bt(P)))return;if(typeof P=="string")return void N.push(P)}switch(P.nodeType){case R:var fe=P.attributes,mi=fe.length,ui=P.firstChild,Ci=P.tagName,Ne=Ci;if(!(J=y.isHTML(P.namespaceURI)||J)&&!P.prefix&&P.namespaceURI){for(var Ri,vi=0;vi<fe.length;vi++)if(fe.item(vi).name==="xmlns"){Ri=fe.item(vi).value;break}if(!Ri){for(var cs=zt.length-1;cs>=0;cs--)if((si=zt[cs]).prefix===""&&si.namespace===P.namespaceURI){Ri=si.namespace;break}}if(Ri!==P.namespaceURI)for(cs=zt.length-1;cs>=0;cs--){var si;if((si=zt[cs]).namespace===P.namespaceURI){si.prefix&&(Ne=si.prefix+":"+Ci);break}}}N.push("<",Ne);for(var ns=0;ns<mi;ns++)(ts=fe.item(ns)).prefix=="xmlns"?zt.push({prefix:ts.localName,namespace:ts.value}):ts.nodeName=="xmlns"&&zt.push({prefix:"",namespace:ts.value});for(ns=0;ns<mi;ns++){var ts,us,Ys;ke(ts=fe.item(ns),0,zt)&&(le(N,(us=ts.prefix||"")?"xmlns:"+us:"xmlns",Ys=ts.namespaceURI),zt.push({prefix:us,namespace:Ys})),se(ts,N,J,bt,zt)}if(Ci===Ne&&ke(P,0,zt)&&(le(N,(us=P.prefix||"")?"xmlns:"+us:"xmlns",Ys=P.namespaceURI),zt.push({prefix:us,namespace:Ys})),ui||J&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ci)){if(N.push(">"),J&&/^script$/i.test(Ci))for(;ui;)ui.data?N.push(ui.data):se(ui,N,J,bt,zt.slice()),ui=ui.nextSibling;else for(;ui;)se(ui,N,J,bt,zt.slice()),ui=ui.nextSibling;N.push("</",Ne,">")}else N.push("/>");return;case Q:case K:for(ui=P.firstChild;ui;)se(ui,N,J,bt,zt.slice()),ui=ui.nextSibling;return;case Z:return le(N,P.name,P.value);case dt:return N.push(P.data.replace(/[<&>]/g,Te));case Dt:return N.push("<![CDATA[",P.data,"]]>");case et:return N.push("<!--",P.data,"-->");case ct:var vn=P.publicId,Cs=P.systemId;if(N.push("<!DOCTYPE ",P.name),vn)N.push(" PUBLIC ",vn),Cs&&Cs!="."&&N.push(" ",Cs),N.push(">");else if(Cs&&Cs!=".")N.push(" SYSTEM ",Cs,">");else{var bn=P.internalSubset;bn&&N.push(" [",bn,"]"),N.push(">")}return;case $:return N.push("<?",P.target," ",P.data,"?>");case rt:return N.push("&",P.nodeName,";");default:N.push("??",P.nodeName)}}function Oe(P,N,J){var bt;switch(N.nodeType){case R:(bt=N.cloneNode(!1)).ownerDocument=P;case K:break;case Z:J=!0}if(bt||(bt=N.cloneNode(!1)),bt.ownerDocument=P,bt.parentNode=null,J)for(var zt=N.firstChild;zt;)bt.appendChild(Oe(P,zt,J)),zt=zt.nextSibling;return bt}function _e(P,N,J){var bt=new N.constructor;for(var zt in N)if(Object.prototype.hasOwnProperty.call(N,zt)){var fe=N[zt];typeof fe!="object"&&fe!=bt[zt]&&(bt[zt]=fe)}switch(N.childNodes&&(bt.childNodes=new It),bt.ownerDocument=P,bt.nodeType){case R:var mi=N.attributes,ui=bt.attributes=new Bt,Ci=mi.length;ui._ownerElement=bt;for(var Ne=0;Ne<Ci;Ne++)bt.setAttributeNode(_e(P,mi.item(Ne),!0));break;case Z:J=!0}if(J)for(var Ri=N.firstChild;Ri;)bt.appendChild(_e(P,Ri,J)),Ri=Ri.nextSibling;return bt}function pi(P,N,J){P[N]=J}B.INVALID_STATE_ERR=(W[11]="Invalid state",11),B.SYNTAX_ERR=(W[12]="Syntax error",12),B.INVALID_MODIFICATION_ERR=(W[13]="Invalid modification",13),B.NAMESPACE_ERR=(W[14]="Invalid namespace",14),B.INVALID_ACCESS_ERR=(W[15]="Invalid access",15),vt.prototype=Error.prototype,F(B,vt),It.prototype={length:0,item:function(P){return P>=0&&P<this.length?this[P]:null},toString:function(P,N){for(var J=[],bt=0;bt<this.length;bt++)se(this[bt],J,P,N);return J.join("")},filter:function(P){return Array.prototype.filter.call(this,P)},indexOf:function(P){return Array.prototype.indexOf.call(this,P)}},Rt.prototype.item=function(P){return Et(this),this[P]||null},D(Rt,It),Bt.prototype={length:0,item:It.prototype.item,getNamedItem:function(P){for(var N=this.length;N--;){var J=this[N];if(J.nodeName==P)return J}},setNamedItem:function(P){var N=P.ownerElement;if(N&&N!=this._ownerElement)throw new vt(Ot);var J=this.getNamedItem(P.nodeName);return he(this._ownerElement,this,P,J),J},setNamedItemNS:function(P){var N,J=P.ownerElement;if(J&&J!=this._ownerElement)throw new vt(Ot);return N=this.getNamedItemNS(P.namespaceURI,P.localName),he(this._ownerElement,this,P,N),N},removeNamedItem:function(P){var N=this.getNamedItem(P);return Zt(this._ownerElement,this,N),N},removeNamedItemNS:function(P,N){var J=this.getNamedItemNS(P,N);return Zt(this._ownerElement,this,J),J},getNamedItemNS:function(P,N){for(var J=this.length;J--;){var bt=this[J];if(bt.localName==N&&bt.namespaceURI==P)return bt}return null}},ge.prototype={hasFeature:function(P,N){return!0},createDocument:function(P,N,J){var bt=new Ie;if(bt.implementation=this,bt.childNodes=new It,bt.doctype=J||null,J&&bt.appendChild(J),N){var zt=bt.createElementNS(P,N);bt.appendChild(zt)}return bt},createDocumentType:function(P,N,J){var bt=new Ge;return bt.name=P,bt.nodeName=P,bt.publicId=N||"",bt.systemId=J||"",bt}},ae.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(P,N){return Ft(this,P,N)},replaceChild:function(P,N){Ft(this,P,N,Nt),N&&this.removeChild(N)},removeChild:function(P){return ze(this,P)},appendChild:function(P){return this.insertBefore(P,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(P){return _e(this.ownerDocument||this,this,P)},normalize:function(){for(var P=this.firstChild;P;){var N=P.nextSibling;N&&N.nodeType==dt&&P.nodeType==dt?(this.removeChild(N),P.appendData(N.data)):(P.normalize(),P=N)}},isSupported:function(P,N){return this.ownerDocument.implementation.hasFeature(P,N)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(P){for(var N=this;N;){var J=N._nsMap;if(J){for(var bt in J)if(Object.prototype.hasOwnProperty.call(J,bt)&&J[bt]===P)return bt}N=N.nodeType==Z?N.ownerDocument:N.parentNode}return null},lookupNamespaceURI:function(P){for(var N=this;N;){var J=N._nsMap;if(J&&Object.prototype.hasOwnProperty.call(J,P))return J[P];N=N.nodeType==Z?N.ownerDocument:N.parentNode}return null},isDefaultNamespace:function(P){return this.lookupPrefix(P)==null}},F(X,ae),F(X,ae.prototype),Ie.prototype={nodeName:"#document",nodeType:Q,doctype:null,documentElement:null,_inc:1,insertBefore:function(P,N){if(P.nodeType==K){for(var J=P.firstChild;J;){var bt=J.nextSibling;this.insertBefore(J,N),J=bt}return P}return Ft(this,P,N),P.ownerDocument=this,this.documentElement===null&&P.nodeType===R&&(this.documentElement=P),P},removeChild:function(P){return this.documentElement==P&&(this.documentElement=null),ze(this,P)},replaceChild:function(P,N){Ft(this,P,N,Nt),P.ownerDocument=this,N&&this.removeChild(N),We(P)&&(this.documentElement=P)},importNode:function(P,N){return Oe(this,P,N)},getElementById:function(P){var N=null;return Ae(this.documentElement,function(J){if(J.nodeType==R&&J.getAttribute("id")==P)return N=J,!0}),N},getElementsByClassName:function(P){var N=I(P);return new Rt(this,function(J){var bt=[];return N.length>0&&Ae(J.documentElement,function(zt){if(zt!==J&&zt.nodeType===R){var fe=zt.getAttribute("class");if(fe){var mi=P===fe;if(!mi){var ui=I(fe);mi=N.every((Ci=ui,function(Ne){return Ci&&Ci.indexOf(Ne)!==-1}))}mi&&bt.push(zt)}}var Ci}),bt})},createElement:function(P){var N=new ft;return N.ownerDocument=this,N.nodeName=P,N.tagName=P,N.localName=P,N.childNodes=new It,(N.attributes=new Bt)._ownerElement=N,N},createDocumentFragment:function(){var P=new ot;return P.ownerDocument=this,P.childNodes=new It,P},createTextNode:function(P){var N=new di;return N.ownerDocument=this,N.appendData(P),N},createComment:function(P){var N=new ii;return N.ownerDocument=this,N.appendData(P),N},createCDATASection:function(P){var N=new fi;return N.ownerDocument=this,N.appendData(P),N},createProcessingInstruction:function(P,N){var J=new Ut;return J.ownerDocument=this,J.tagName=J.nodeName=J.target=P,J.nodeValue=J.data=N,J},createAttribute:function(P){var N=new ce;return N.ownerDocument=this,N.name=P,N.nodeName=P,N.localName=P,N.specified=!0,N},createEntityReference:function(P){var N=new Y;return N.ownerDocument=this,N.nodeName=P,N},createElementNS:function(P,N){var J=new ft,bt=N.split(":"),zt=J.attributes=new Bt;return J.childNodes=new It,J.ownerDocument=this,J.nodeName=N,J.tagName=N,J.namespaceURI=P,bt.length==2?(J.prefix=bt[0],J.localName=bt[1]):J.localName=N,zt._ownerElement=J,J},createAttributeNS:function(P,N){var J=new ce,bt=N.split(":");return J.ownerDocument=this,J.nodeName=N,J.name=N,J.namespaceURI=P,J.specified=!0,bt.length==2?(J.prefix=bt[0],J.localName=bt[1]):J.localName=N,J}},D(Ie,ae),ft.prototype={nodeType:R,hasAttribute:function(P){return this.getAttributeNode(P)!=null},getAttribute:function(P){var N=this.getAttributeNode(P);return N&&N.value||""},getAttributeNode:function(P){return this.attributes.getNamedItem(P)},setAttribute:function(P,N){var J=this.ownerDocument.createAttribute(P);J.value=J.nodeValue=""+N,this.setAttributeNode(J)},removeAttribute:function(P){var N=this.getAttributeNode(P);N&&this.removeAttributeNode(N)},appendChild:function(P){return P.nodeType===K?this.insertBefore(P,null):function(N,J){return J.parentNode&&J.parentNode.removeChild(J),J.parentNode=N,J.previousSibling=N.lastChild,J.nextSibling=null,J.previousSibling?J.previousSibling.nextSibling=J:N.firstChild=J,N.lastChild=J,Kt(N.ownerDocument,N,J),J}(this,P)},setAttributeNode:function(P){return this.attributes.setNamedItem(P)},setAttributeNodeNS:function(P){return this.attributes.setNamedItemNS(P)},removeAttributeNode:function(P){return this.attributes.removeNamedItem(P.nodeName)},removeAttributeNS:function(P,N){var J=this.getAttributeNodeNS(P,N);J&&this.removeAttributeNode(J)},hasAttributeNS:function(P,N){return this.getAttributeNodeNS(P,N)!=null},getAttributeNS:function(P,N){var J=this.getAttributeNodeNS(P,N);return J&&J.value||""},setAttributeNS:function(P,N,J){var bt=this.ownerDocument.createAttributeNS(P,N);bt.value=bt.nodeValue=""+J,this.setAttributeNode(bt)},getAttributeNodeNS:function(P,N){return this.attributes.getNamedItemNS(P,N)},getElementsByTagName:function(P){return new Rt(this,function(N){var J=[];return Ae(N,function(bt){bt===N||bt.nodeType!=R||P!=="*"&&bt.tagName!=P||J.push(bt)}),J})},getElementsByTagNameNS:function(P,N){return new Rt(this,function(J){var bt=[];return Ae(J,function(zt){zt===J||zt.nodeType!==R||P!=="*"&&zt.namespaceURI!==P||N!=="*"&&zt.localName!=N||bt.push(zt)}),bt})}},Ie.prototype.getElementsByTagName=ft.prototype.getElementsByTagName,Ie.prototype.getElementsByTagNameNS=ft.prototype.getElementsByTagNameNS,D(ft,ae),ce.prototype.nodeType=Z,D(ce,ae),oi.prototype={data:"",substringData:function(P,N){return this.data.substring(P,P+N)},appendData:function(P){P=this.data+P,this.nodeValue=this.data=P,this.length=P.length},insertData:function(P,N){this.replaceData(P,0,N)},appendChild:function(P){throw new Error(W[at])},deleteData:function(P,N){this.replaceData(P,N,"")},replaceData:function(P,N,J){J=this.data.substring(0,P)+J+this.data.substring(P+N),this.nodeValue=this.data=J,this.length=J.length}},D(oi,ae),di.prototype={nodeName:"#text",nodeType:dt,splitText:function(P){var N=this.data,J=N.substring(P);N=N.substring(0,P),this.data=this.nodeValue=N,this.length=N.length;var bt=this.ownerDocument.createTextNode(J);return this.parentNode&&this.parentNode.insertBefore(bt,this.nextSibling),bt}},D(di,oi),ii.prototype={nodeName:"#comment",nodeType:et},D(ii,oi),fi.prototype={nodeName:"#cdata-section",nodeType:Dt},D(fi,oi),Ge.prototype.nodeType=ct,D(Ge,ae),$e.prototype.nodeType=Mt,D($e,ae),He.prototype.nodeType=pt,D(He,ae),Y.prototype.nodeType=rt,D(Y,ae),ot.prototype.nodeName="#document-fragment",ot.prototype.nodeType=K,D(ot,ae),Ut.prototype.nodeType=$,D(Ut,ae),$t.prototype.serializeToString=function(P,N,J){return Ht.call(P,N,J)},ae.prototype.toString=Ht;try{if(Object.defineProperty){let P=function(N){switch(N.nodeType){case R:case K:var J=[];for(N=N.firstChild;N;)N.nodeType!==7&&N.nodeType!==8&&J.push(P(N)),N=N.nextSibling;return J.join("");default:return N.nodeValue}};var Ji=P;Object.defineProperty(Rt.prototype,"length",{get:function(){return Et(this),this.$$length}}),Object.defineProperty(ae.prototype,"textContent",{get:function(){return P(this)},set:function(N){switch(this.nodeType){case R:case K:for(;this.firstChild;)this.removeChild(this.firstChild);(N||String(N))&&this.appendChild(this.ownerDocument.createTextNode(N));break;default:this.data=N,this.value=N,this.nodeValue=N}}}),pi=function(N,J,bt){N["$$"+J]=bt}}}catch{}C.DocumentType=Ge,C.DOMException=vt,C.DOMImplementation=ge,C.Element=ft,C.Node=ae,C.NodeList=It,C.XMLSerializer=$t},251:(T,C,l)=>{var g=l(3314).freeze;C.XML_ENTITIES=g({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),C.HTML_ENTITIES=g({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),C.entityMap=C.HTML_ENTITIES},2854:(T,C,l)=>{var g=l(6278);g.DOMImplementation,g.XMLSerializer,C.DOMParser=l(6404).DOMParser},8654:(T,C,l)=>{var g=l(3314).NAMESPACE,u=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=new RegExp("[\\-\\.0-9"+u.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),m=new RegExp("^"+u.source+y.source+"*(?::"+u.source+y.source+"*)?$");function E($,et){this.message=$,this.locator=et,Error.captureStackTrace&&Error.captureStackTrace(this,E)}function I(){}function F($,et){return et.lineNumber=$.lineNumber,et.columnNumber=$.columnNumber,et}function D($,et,Q,ct,K,Mt){function B(It,Rt,Et){Q.attributeNames.hasOwnProperty(It)&&Mt.fatalError("Attribute "+It+" redefined"),Q.addValue(It,Rt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,K),Et)}for(var W,at=++et,At=0;;){var Ot=$.charAt(at);switch(Ot){case"=":if(At===1)W=$.slice(et,at),At=3;else{if(At!==2)throw new Error("attribute equal must after attrName");At=3}break;case"'":case'"':if(At===3||At===1){if(At===1&&(Mt.warning('attribute value must after "="'),W=$.slice(et,at)),et=at+1,!((at=$.indexOf(Ot,et))>0))throw new Error("attribute value no end '"+Ot+"' match");B(W,vt=$.slice(et,at),et-1),At=5}else{if(At!=4)throw new Error('attribute value must after "="');B(W,vt=$.slice(et,at),et),Mt.warning('attribute "'+W+'" missed start quot('+Ot+")!!"),et=at+1,At=5}break;case"/":switch(At){case 0:Q.setTagName($.slice(et,at));case 5:case 6:case 7:At=7,Q.closed=!0;case 4:case 1:break;case 2:Q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Mt.error("unexpected end of input"),At==0&&Q.setTagName($.slice(et,at)),at;case">":switch(At){case 0:Q.setTagName($.slice(et,at));case 5:case 6:case 7:break;case 4:case 1:(vt=$.slice(et,at)).slice(-1)==="/"&&(Q.closed=!0,vt=vt.slice(0,-1));case 2:At===2&&(vt=W),At==4?(Mt.warning('attribute "'+vt+'" missed quot(")!'),B(W,vt,et)):(g.isHTML(ct[""])&&vt.match(/^(?:disabled|checked|selected)$/i)||Mt.warning('attribute "'+vt+'" missed value!! "'+vt+'" instead!!'),B(vt,vt,et));break;case 3:throw new Error("attribute value missed!!")}return at;case"":Ot=" ";default:if(Ot<=" ")switch(At){case 0:Q.setTagName($.slice(et,at)),At=6;break;case 1:W=$.slice(et,at),At=2;break;case 4:var vt=$.slice(et,at);Mt.warning('attribute "'+vt+'" missed quot(")!!'),B(W,vt,et);case 5:At=6}else switch(At){case 2:Q.tagName,g.isHTML(ct[""])&&W.match(/^(?:disabled|checked|selected)$/i)||Mt.warning('attribute "'+W+'" missed value!! "'+W+'" instead2!!'),B(W,W,et),et=at,At=1;break;case 5:Mt.warning('attribute space is required"'+W+'"!!');case 6:At=1,et=at;break;case 3:At=4,et=at;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}at++}}function X($,et,Q){for(var ct=$.tagName,K=null,Mt=$.length;Mt--;){var B=$[Mt],W=B.qName,at=B.value;if((It=W.indexOf(":"))>0)var At=B.prefix=W.slice(0,It),Ot=W.slice(It+1),vt=At==="xmlns"&&Ot;else Ot=W,At=null,vt=W==="xmlns"&&"";B.localName=Ot,vt!==!1&&(K==null&&(K={},dt(Q,Q={})),Q[vt]=K[vt]=at,B.uri=g.XMLNS,et.startPrefixMapping(vt,at))}for(Mt=$.length;Mt--;)(At=(B=$[Mt]).prefix)&&(At==="xml"&&(B.uri=g.XML),At!=="xmlns"&&(B.uri=Q[At||""]));var It;(It=ct.indexOf(":"))>0?(At=$.prefix=ct.slice(0,It),Ot=$.localName=ct.slice(It+1)):(At=null,Ot=$.localName=ct);var Rt=$.uri=Q[At||""];if(et.startElement(Rt,Ot,ct,$),!$.closed)return $.currentNSMap=Q,$.localNSMap=K,!0;if(et.endElement(Rt,Ot,ct),K)for(At in K)Object.prototype.hasOwnProperty.call(K,At)&&et.endPrefixMapping(At)}function R($,et,Q,ct,K){if(/^(?:script|textarea)$/i.test(Q)){var Mt=$.indexOf("</"+Q+">",et),B=$.substring(et+1,Mt);if(/[&<]/.test(B))return/^script$/i.test(Q)?(K.characters(B,0,B.length),Mt):(B=B.replace(/&#?\w+;/g,ct),K.characters(B,0,B.length),Mt)}return et+1}function Z($,et,Q,ct){var K=ct[Q];return K==null&&((K=$.lastIndexOf("</"+Q+">"))<et&&(K=$.lastIndexOf("</"+Q)),ct[Q]=K),K<et}function dt($,et){for(var Q in $)Object.prototype.hasOwnProperty.call($,Q)&&(et[Q]=$[Q])}function Dt($,et,Q,ct){if($.charAt(et+2)==="-")return $.charAt(et+3)==="-"?(K=$.indexOf("-->",et+4))>et?(Q.comment($,et+4,K-et-4),K+3):(ct.error("Unclosed comment"),-1):-1;if($.substr(et+3,6)=="CDATA["){var K=$.indexOf("]]>",et+9);return Q.startCDATA(),Q.characters($,et+9,K-et-9),Q.endCDATA(),K+3}var Mt=function(vt,It){var Rt,Et=[],Bt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Bt.lastIndex=It,Bt.exec(vt);Rt=Bt.exec(vt);)if(Et.push(Rt),Rt[1])return Et}($,et),B=Mt.length;if(B>1&&/!doctype/i.test(Mt[0][0])){var W=Mt[1][0],at=!1,At=!1;B>3&&(/^public$/i.test(Mt[2][0])?(at=Mt[3][0],At=B>4&&Mt[4][0]):/^system$/i.test(Mt[2][0])&&(At=Mt[3][0]));var Ot=Mt[B-1];return Q.startDTD(W,at,At),Q.endDTD(),Ot.index+Ot[0].length}return-1}function rt($,et,Q){var ct=$.indexOf("?>",et);if(ct){var K=$.substring(et,ct).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return K?(K[0].length,Q.processingInstruction(K[1],K[2]),ct+2):-1}return-1}function pt(){this.attributeNames={}}E.prototype=new Error,E.prototype.name=E.name,I.prototype={parse:function($,et,Q){var ct=this.domBuilder;ct.startDocument(),dt(et,et={}),function(K,Mt,B,W,at){function At(Ft){var ft=Ft.slice(1,-1);return Object.hasOwnProperty.call(B,ft)?B[ft]:ft.charAt(0)==="#"?function(ce){if(ce>65535){var oi=55296+((ce-=65536)>>10),di=56320+(1023&ce);return String.fromCharCode(oi,di)}return String.fromCharCode(ce)}(parseInt(ft.substr(1).replace("x","0x"))):(at.error("entity not found:"+Ft),Ft)}function Ot(Ft){if(Ft>Zt){var ft=K.substring(Zt,Ft).replace(/&#?\w+;/g,At);Bt&&vt(Zt),W.characters(ft,0,Ft-Zt),Zt=Ft}}function vt(Ft,ft){for(;Ft>=Rt&&(ft=Et.exec(K));)It=ft.index,Rt=It+ft[0].length,Bt.lineNumber++;Bt.columnNumber=Ft-It+1}for(var It=0,Rt=0,Et=/.*(?:\r\n?|\n)|.*$/g,Bt=W.locator,Qt=[{currentNSMap:Mt}],he={},Zt=0;;){try{var ge=K.indexOf("<",Zt);if(ge<0){if(!K.substr(Zt).match(/^\s*$/)){var ae=W.doc,Te=ae.createTextNode(K.substr(Zt));ae.appendChild(Te),W.currentElement=Te}return}switch(ge>Zt&&Ot(ge),K.charAt(ge+1)){case"/":var Ae=K.indexOf(">",ge+3),Ie=K.substring(ge+2,Ae).replace(/[ \t\n\r]+$/g,""),Ke=Qt.pop();Ae<0?(Ie=K.substring(ge+2).replace(/[\s<].*/,""),at.error("end tag name: "+Ie+" is not complete:"+Ke.tagName),Ae=ge+1+Ie.length):Ie.match(/\s</)&&(Ie=Ie.replace(/[\s<].*/,""),at.error("end tag name: "+Ie+" maybe not complete"),Ae=ge+1+Ie.length);var Kt=Ke.localNSMap,ze=Ke.tagName==Ie;if(ze||Ke.tagName&&Ke.tagName.toLowerCase()==Ie.toLowerCase()){if(W.endElement(Ke.uri,Ke.localName,Ie),Kt)for(var ei in Kt)Object.prototype.hasOwnProperty.call(Kt,ei)&&W.endPrefixMapping(ei);ze||at.fatalError("end tag name: "+Ie+" is not match the current start tagName:"+Ke.tagName)}else Qt.push(Ke);Ae++;break;case"?":Bt&&vt(ge),Ae=rt(K,ge,W);break;case"!":Bt&&vt(ge),Ae=Dt(K,ge,W,at);break;default:Bt&&vt(ge);var We=new pt,Di=Qt[Qt.length-1].currentNSMap,Qe=(Ae=D(K,ge,We,Di,At,at),We.length);if(!We.closed&&Z(K,Ae,We.tagName,he)&&(We.closed=!0,B.nbsp||at.warning("unclosed xml attribute")),Bt&&Qe){for(var Pt=F(Bt,{}),Ct=0;Ct<Qe;Ct++){var Nt=We[Ct];vt(Nt.offset),Nt.locator=F(Bt,{})}W.locator=Pt,X(We,W,Di)&&Qt.push(We),W.locator=Bt}else X(We,W,Di)&&Qt.push(We);g.isHTML(We.uri)&&!We.closed?Ae=R(K,Ae,We.tagName,At,W):Ae++}}catch(Ft){if(Ft instanceof E)throw Ft;at.error("element parse error: "+Ft),Ae=-1}Ae>Zt?Zt=Ae:Ot(Math.max(ge,Zt)+1)}}($,et,Q,ct,this.errorHandler),ct.endDocument()}},pt.prototype={setTagName:function($){if(!m.test($))throw new Error("invalid tagName:"+$);this.tagName=$},addValue:function($,et,Q){if(!m.test($))throw new Error("invalid attribute:"+$);this.attributeNames[$]=this.length,this[this.length++]={qName:$,value:et,offset:Q}},length:0,getLocalName:function($){return this[$].localName},getLocator:function($){return this[$].locator},getQName:function($){return this[$].qName},getURI:function($){return this[$].uri},getValue:function($){return this[$].value}},C.XMLReader=I,C.ParseError=E},7878:T=>{const C=g=>{g.style.display="none"},l=g=>{g.style.display=""};T.exports={hide:C,show:l,setText:(g,u)=>{if(!u||u.length<=0)return g.innerText="",void C(g);g.innerText=u,l(g)}}},7668:(T,C,l)=>{l.d(C,{A:()=>m});var g=l(7938),u=l.n(g),y=l(608);const m={logoOnclickUrl:"https://cloudinary.com/",showLogo:!0,showJumpControls:!1,playsinline:u().browser.IS_IOS,skin:"dark",controls:!1,chaptersButton:!1,pictureInPictureToggle:!1,seekThumbnails:!0,aiHighlightsGraph:!1,preload:y.Am.AUTO,textTrackSettings:!1,loop:!1,muted:!1,posterOptions:{},sourceTypes:["auto"],contextMenu:{content:E=>{const I=E.loop(),F=E.paused(),D=E.muted(),X=E.isFullscreen(),R={class:"player-version",label:"Cloudinary Player v2.1.1"};return E.controls()?[{label:I?"Unloop":"Loop",listener:()=>{E.loop(!I)}},{label:F?"Play":"Pause",listener:()=>{F?E.play():E.pause()}},{label:D?"Unmute":"Mute",listener:()=>{E.muted(!D)}},{label:X?"Exit Fullscreen":"Fullscreen",listener:()=>{X?E.exitFullscreen():E.requestFullscreen()}},R]:[R]}},floatingWhenNotVisible:y.rT.NONE,hideContextMenu:!1,analytics:!1,cloudinaryAnalytics:!0,allowUsageReport:!0,playedEventPercents:[25,50,75,100]}},3978:(T,C,l)=>{l.d(C,{Ay:()=>In,OC:()=>An,xY:()=>kn,Iy:()=>_r});var g=l(7171),u=l.n(g),y=l(7938),m=l.n(y);const E={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var I,F=new Uint8Array(16);function D(){if(!I&&!(I=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(F)}for(var X=[],R=0;R<256;++R)X.push((R+256).toString(16).slice(1));const Z=function(q,O,j){if(E.randomUUID&&!O&&!q)return E.randomUUID();var U=(q=q||{}).random||(q.rng||D)();return U[6]=15&U[6]|64,U[8]=63&U[8]|128,function(ut,gt=0){return(X[ut[gt+0]]+X[ut[gt+1]]+X[ut[gt+2]]+X[ut[gt+3]]+"-"+X[ut[gt+4]]+X[ut[gt+5]]+"-"+X[ut[gt+6]]+X[ut[gt+7]]+"-"+X[ut[gt+8]]+X[ut[gt+9]]+"-"+X[ut[gt+10]]+X[ut[gt+11]]+X[ut[gt+12]]+X[ut[gt+13]]+X[ut[gt+14]]+X[ut[gt+15]]).toLowerCase()}(U)};var dt=l(5685),Dt=l.n(dt),rt=l(2832),pt=l.n(rt),$=l(8446),et=l.n($),Q=l(8953),ct=l.n(Q),K=l(7571),Mt=l.n(K);const B=m().getComponent("ClickableComponent");m().registerComponent("JumpForwardButton",class extends B{handleClick(q){super.handleClick(q),this.player().currentTime(this.player().currentTime()+10)}createEl(){return m().dom.createEl("button",{className:"vjs-control vjs-icon-skip-10-plus vjs-icon-forward-10 vjs-button",ariaLabel:"Jump forward 10 seconds"})}});const W=m().getComponent("ClickableComponent");m().registerComponent("JumpBackButton",class extends W{handleClick(q){super.handleClick(q),this.player().currentTime(this.player().currentTime()-10)}createEl(){return m().dom.createEl("button",{className:"vjs-control vjs-icon-skip-10-min vjs-icon-replay-10 vjs-button",ariaLabel:"Jump back 10 seconds"})}});const at=m().getComponent("ClickableComponent");m().registerComponent("logoButton",class extends at{createEl(){const q=this.options_.playerOptions,O=q.showLogo?"block":"none",j=q.logoImageUrl?`background-image: url(${q.logoImageUrl})`:"";return m().dom.createEl("a",{},{class:"vjs-control vjs-cloudinary-button vjs-button",href:q.logoOnclickUrl,target:"_blank",style:`display: ${O}; ${j}`,"aria-label":"Logo link"})}});const At=m().getComponent("Component");m().registerComponent("progressControlEventsBlocker",class extends At{constructor(q){super(q,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{})}createEl(){return super.createEl("div",{className:"vjs-progress-control-events-blocker"})}});var Ot=l(7878),vt=l.n(Ot);const It=m().dom||m(),Rt=m().getComponent("Component");m().registerComponent("titleBar",class extends Rt{constructor(q){super(q,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),this.on(q,"cldsourcechanged",(O,j)=>{let{source:U}=j;return this.setItem(U)})}setItem(q){if(!q)return this.setTitle(""),void this.setSubtitle("");const O=q.info();this.setTitle(O.title),this.setSubtitle(O.subtitle)}setTitle(q){return vt().setText(this.titleEl,q),this.refresh(),q}setSubtitle(q){return vt().setText(this.subtitleEl,q),this.refresh(),q}refresh(){this.titleEl.innerText||this.subtitleEl.innerText?this.show():this.hide()}createEl(){this.titleEl=It.createEl("div",{className:"vjs-title-bar-title"}),this.subtitleEl=It.createEl("div",{className:"vjs-title-bar-subtitle"});const q=super.createEl("div",{append:this.titleEl,className:"vjs-title-bar"});return q.appendChild(this.titleEl),q.appendChild(this.subtitleEl),q}});var Et="3.0.1";const Bt=m().getTech("Html5"),Qt=m().registerPlugin||m().plugin,he=["abort","emptied","loadstart","play"],Zt=["abort","emptied"],ge=["ad-playback","ads-ready?","postroll?","preroll?"];let ae=0;const Te=function(){const q=[];let O,j,U=!1,ut=!0;const gt=Wt=>function(Xt,de){if(this.perSourceBehaviors.disabled())return;const Yt=arguments.length===2,we=this.currentSrc(),te=[Xt],Ee=arguments[arguments.length-1],be=Yt?this:Xt,Ue=Ee.bind(be),Ve=(...Xe)=>{const Me=this.currentSrc()!==we;this.perSourceBehaviors.disabled()||((Me||Wt)&&this.off(...te),Me||Ue(...Xe))};return Ve.guid=Ue.guid=Ee.guid="psb-"+ ++ae,Yt||te.push(de),te.push(Ve),q.push(te),this.on(...te)};this.perSourceBehaviors={disable:function(){return this.clearTimeout(j),j=null,U=!0,U}.bind(this),disabled:()=>U,enable:()=>(U=!1,U),enabled:()=>!U,isSrcStable:()=>ut,VERSION:Et},this.onPerSrc=gt(),this.onePerSrc=gt(!0),this.on("dispose",()=>{q.length=0}),this.on(he,Wt=>{if(this.perSourceBehaviors.disabled()||j||((Yt,we)=>{return!!Yt.usingPlugin("ads")&&((Ee=>Ee.usingPlugin("ads")&&typeof Ee.ads.inAdBreak=="function")(Yt)?Yt.ads.isInAdMode()&&we.type!=="loadstart":(te=Yt.ads.state,ge.indexOf(te)>-1));var te})(this,Wt))return;ut&&Zt.indexOf(Wt.type)>-1&&(ut=!1,this.trigger("sourceunstable"));const Xt=[],de=Yt=>Xt.push({time:Date.now(),event:Yt});de(Wt),this.on(Bt.Events,de),j=this.setTimeout(()=>{const Yt=this.currentSrc();ut=!0,j=null,this.off(Bt.Events,de),Yt&&Yt!==O&&(q.forEach(we=>this.off(...we)),q.length=0,this.trigger("sourcechanged",{interimEvents:Xt,from:O,to:Yt}),O=Yt)},1)})};Te.VERSION=Et,Qt("perSourceBehaviors",Te);const Ae=m().getComponent("MenuItem"),Ie=m().getComponent("Component");class Ke extends Ae{constructor(O,j){j.selectable=!0,j.multiSelectable=!1,super(O,j)}handleClick(){const O=this.options_;super.handleClick();const j=[...this.player_.qualityLevels().levels_];for(const[U,ut]of j.entries())ut.enabled=O.index===j.length||O.index===U}update(){const O=this.player_.qualityLevels().selectedIndex;this.selected(this.options_.index===O)}}Ie.registerComponent("SourceMenuItem",Ke);const Kt=Ke,ze=m().getComponent("MenuButton"),ei=class extends ze{constructor(q,O){super(q,O);const j=this.player_.qualityLevels();if(O&&O.default){if(O.default==="low")for(const[U,ut]of j.entries())ut.enabled=U===0;else if(O.default==="high")for(let U=0;U<j.length;U++)j[U].enabled=U===j.length-1}this.player_.qualityLevels().on(["change","addqualitylevel","removequalitylevel"],m().bind(this,this.update))}createEl(){return m().dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})}buildCSSClass(){return ze.prototype.buildCSSClass.call(this)}update(){return ze.prototype.update.call(this)}createItems(){const q=[],O=this.player_.qualityLevels(),j=[];for(let U=O.length-1;U>=0;U--){const ut=U===O.selectedIndex;let gt=`${U}`,Wt=U;const Xt=O[U];Xt.height?(gt=`${Xt.height}p`,Wt=Number.parseInt(Xt.height,10)):Xt.bitrate&&(gt=`${Math.floor(Xt.bitrate/1e3)} kbps`,Wt=Number.parseInt(Xt.bitrate,10)),j.includes(gt)||(j.push(gt),q.push(new Kt(this.player_,{label:gt,index:U,selected:ut,sortValue:Wt})))}return O.length>1&&q.push(new Kt(this.player_,{label:"Auto",index:O.length,selected:!1,sortValue:999999})),q.sort(function(U,ut){return ut.options_.sortValue-U.options_.sortValue}),q}},We={},Di=m().getPlugin("plugin");(0,m().registerPlugin)("httpSourceSelector",class extends Di{constructor(q,O){m().registerComponent("SourceMenuButton",ei),m().registerComponent("SourceMenuItem",Kt);const j=(m().obj&&m().obj.merge||m().mergeOptions)(We,O);super(q,j),this.options_=j,this.player_=q,this.on(q,"ready",()=>{this.reset(),this.init()})}init(){this.player_.addClass("vjs-http-source-selector"),this.player_.videojsHTTPSouceSelectorInitialized=!0,this.player_.techName_==="Html5"?this.on(this.player_,"loadedmetadata",()=>{this.metadataLoaded()}):(console.error(this.player_.techName_+" tech is not supported"),this.reset())}reset(){this.player_.removeClass("vjs-http-source-selector"),this.player_.videojsHTTPSouceSelectorInitialized===!0&&(this.player_.controlBar.getChild("SourceMenuButton")||this.player_.controlBar.removeChild("SourceMenuButton",{}),this.player_.videojsHTTPSouceSelectorInitialized=!1)}metadataLoaded(){const q=this.player_.controlBar,O=q.getChild("fullscreenToggle");q.getChild("SourceMenuButton")||(O?q.el().insertBefore(q.addChild("SourceMenuButton").el(),O.el()):q.el().append(q.addChild("SourceMenuButton").el()))}});let Qe={};const Pt=function(){function q(O,j){return this.player=O,this.options=j,this.initializeHighlightsGraph(),this}return q.prototype.src=function(O){this.resetPlugin(),this.options.src=O,this.initializeHighlightsGraph()},q.prototype.detach=function(){this.resetPlugin()},q.prototype.resetPlugin=function(){this.graphHolder&&this.graphHolder.parentNode.removeChild(this.graphHolder),delete this.progressBar,delete this.graphHolder,delete this.lastStyle},q.prototype.initializeHighlightsGraph=function(){this.options.src&&fetch(this.options.src).then(O=>O.json()).then(O=>{this.setupHighlightsGraphElement(),this.graphHolder&&this.createHighlightsGraph(O)})},q.prototype.setupHighlightsGraphElement=function(){if(this.progressBar=this.player.$(".vjs-progress-control"),!this.progressBar)return;const O=this.player.$(".vjs-highlights-graph-display")||document.createElement("div");O.setAttribute("class","vjs-highlights-graph-display"),this.progressBar.appendChild(O),this.graphHolder=O},q.prototype.createPath=function(O,j,U){const ut=j/(O.length-1),gt=O.map((de,Yt)=>({x:Yt*ut,y:U-de*U})),Wt=document.createElementNS("http://www.w3.org/2000/svg","path");Wt.setAttribute("fill","lightblue");let Xt=`M ${gt[0].x},${gt[0].y}`;for(let de=0;de<gt.length-1;de++){const Yt=(gt[de].x+gt[de+1].x)/2,we=(gt[de].y+gt[de+1].y)/2;Xt+=` Q ${gt[de].x},${gt[de].y} ${Yt},${we}`}return Xt+=` Q ${gt[gt.length-1].x},${gt[gt.length-1].y} ${gt[gt.length-1].x},${gt[gt.length-1].y}`,Xt+=` L ${gt[gt.length-1].x},${U} L ${gt[0].x},${U} Z`,Wt.setAttribute("d",Xt),Wt},q.prototype.createHighlightsGraph=function(O){const j=O.data,U=this.player.$(".vjs-highlights-graph-display > svg")||document.createElementNS("http://www.w3.org/2000/svg","svg");U.setAttribute("viewBox","0 0 600 20"),U.setAttribute("preserveAspectRatio","none"),U.setAttribute("width",600),U.setAttribute("height",20),U.innerHTML="";const ut=this.createPath(j,600,20);U.appendChild(ut),this.graphHolder.appendChild(U)},q}();var Ct=l(5871),Nt=l(6827),Ft=l.n(Nt),ft=l(1104);const ce={percentsplayed:{percents:[25,50,75,100]}},oi={events:[ft.f.PERCENTS_PLAYED,ft.f.PAUSE_NO_SEEK,ft.f.SEEK,ft.f.MUTE,ft.f.UNMUTE,ft.f.QUALITY_CHANGED]};class di extends Ft(){constructor(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this.player=O;const U=m().obj.merge(oi,j);let ut={lastState:void 0},gt=0,Wt=0,Xt=!1,de=[],Yt=[],we=null,te=!1;const Ee=()=>{de=[],Yt=[]};this.events=ii(U.events,ce),ut={lastState:void 0},gt=Wt=0,Xt=!1,Ee(),this.player.on(ft.f.PLAY,(()=>{te&&(this.player.trigger("replay"),te=!1)}).bind(this)),this.player.on(ft.f.ENDED,(()=>{te=!0}).bind(this)),(this.events.percentsplayed||this.events.timeplayed||this.events.seek||this.events.totaltimeplayed)&&this.player.on(ft.f.TIME_UPDATE,(be=>{const Ue=this.player.currentTime(),Ve=this.player.duration(),Xe=(Me,Re)=>{Re.originalType="timeupdate",this.emit(Me,be,Re)};if(this.events.percentsplayed&&this.events.percentsplayed.percents.forEach(Me=>{fi(Ue,Ve,Me)&&de.indexOf(Me)===-1&&(de.push(Me),Xe(ft.f.PERCENTS_PLAYED,{percent:Me}))}),this.events.timeplayed){const Me=this.events.timeplayed;(Me.interval?[Math.floor(Ue/Me.interval)*Me.interval]:Me.times).forEach(Re=>{Ge(Ue,Re)&&Yt.indexOf(Re)===-1&&(Yt.push(Re),Xe(ft.f.TIME_PLAYED,{time:Re}))})}this.events.seek&&(gt=Wt,Wt=Ue,Math.abs(gt-Wt)>1&&(Xt=!0,Ee(),Xe(ft.f.SEEK,{seekStart:gt,seekEnd:Wt})))}).bind(this)),(this.events.mute||this.events.unmute)&&this.player.on(ft.f.VOLUME_CHANGE,(be=>{this.player.muted()&&ut.lastState!=="muted"?(ut.lastState="muted",this.emit(ft.f.MUTE,be)):this.player.muted()||ut.lastState==="unmuted"||(ut.lastState="unmuted",this.emit(ft.f.UNMUTE,be))}).bind(this)),this.events.pausenoseek&&(this.player.on(ft.f.PAUSE,(be=>{Math.round(this.player.currentTime())===Math.round(this.player.duration())||Xt||this.emit(ft.f.PAUSE_NO_SEEK,be)}).bind(this)),this.player.on(ft.f.PLAY,(()=>{Xt=!1}).bind(this))),this.player.on(ft.f.LOADED_METADATA,(()=>{this.player.currentSource().src!==we&&(Ee(),we=this.player.currentSource().src)}).bind(this)),this.player.on(ft.f.LOADED_DATA,(be=>{let Ue=this,Ve=this.player.textTracks(),Xe=null;for(let Re=0;Re<Ve.length;Re++)Ve[Re].label==="segment-metadata"&&(Xe=Ve[Re]);let Me=null;Xe&&Xe.on("cuechange",function(){let Re=Xe.activeCues[0];if(Re){let zi=Re.value.resolution;if(Me!==zi){let qn={from:Me,to:zi};Ue.emit(ft.f.QUALITY_CHANGED,be,qn)}Me=zi}})}).bind(this))}}const ii=(q,O)=>{let j=q;return q.constructor.name==="Array"&&(j=q.reduce((U,ut)=>{const gt=O[ut]||{};return ct()(ut)?U[ut.type]=Object.assign({},gt,ut):U[ut]=gt,U},{})),j},fi=function(q,O,j){return Ge(q,O*j/100,arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5)},Ge=function(q,O){let j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5;return q<=O+j&&q>=O-j},$e=di,He=[ft.f.PLAY,ft.f.PAUSE,ft.f.ENDED,ft.f.VOLUME_CHANGE,ft.f.RESIZE,ft.f.ERROR,ft.f.FULL_SCREEN_CHANGE,ft.f.START,ft.f.VIDEO_LOAD,ft.f.PERCENTS_PLAYED,ft.f.SEEK,ft.f.PLAYER_LOAD],Y={percentsplayed:{percents:[25,50,75,100]}},ot={events:He,category:"Video",defaultLabel:q=>q.cloudinary&&q.cloudinary.currentPublicId()||q.currentSource().src};class Ut{constructor(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.player=O,this.options=m().obj.merge(ot,j),this.events=ii(this.options.events,Y);const U=(0,Ct.sliceProperties)(this.events,ft.f.PERCENTS_PLAYED,ft.f.TIME_PLAYED,ft.f.PAUSE,ft.f.SEEK);U.pause&&(delete U.pause,U.pausenoseek={}),this._extendedEvents=new $e(O,{events:U}),this._currentSource=null,this._startTracked=null,this._endTracked=null,this.resetState()}init(){this.events.shoppable&&(this.player.on("productHover",((O,j)=>{this.track({action:"productHover",label:j.productName})}).bind(this)),this.player.on("productClick",((O,j)=>{this.track({action:"productClick",label:j.productName})}).bind(this)),this.player.on("productHoverPost",((O,j)=>{this.track({action:"productHoverPostPlay",label:j.productName})}).bind(this)),this.player.on("productClickPost",((O,j)=>{this.track({action:"productClickPostPlay",label:j.productName})}).bind(this)),this.player.on("productBarMin",(()=>{this.track({action:"shoppableBar",label:"closed"})}).bind(this)),this.player.on("productBarMax",(()=>{this.track({action:"shoppableBar",label:"opened"})}).bind(this)),this.player.on("replay",(()=>{this.track({action:"replay"})}).bind(this))),this.events.play&&this.player.on(ft.f.PLAY,(()=>{this.track({action:"Play"})}).bind(this)),this.events.ended&&this.player.on(ft.f.ENDED,(()=>{this._endTracked||(this.track({action:"Ended",nonInteraction:!0}),this._endTracked=!0)}).bind(this)),this.events.volumechange&&this.player.on(ft.f.VOLUME_CHANGE,(()=>{const O=this.player.muted()?0:this.player.volume();this.track({action:"Volume Change",value:O})}).bind(this)),this.events.resize&&this.player.on(ft.f.RESIZE,(()=>{const O=`Resize - ${this.player.width()}x${this.player.height()}}`;this.track({action:O})}).bind(this)),this.events.error&&this.player.on(ft.f.ERROR,(()=>{this.track({action:"Error",nonInteraction:!0})}).bind(this)),this.events.start&&this.player.on(ft.f.PLAYING,(()=>{this._startTracked&&(this.track({action:"Start"}),this._startTracked=!0)}).bind(this)),this.events.fullscreenchange&&this.player.on(ft.f.FULL_SCREEN_CHANGE,(()=>{const O=this.player.isFullscreen()?"Enter Fullscreen":"Exit Fullscreen";this.track({action:O})}).bind(this)),this.events.percentsplayed&&this._extendedEvents.on(ft.f.PERCENTS_PLAYED,((O,j)=>{const{percent:U}=j;this.track({action:`${U} Percents Played`,nonInteraction:!0})}).bind(this)),this.events.timeplayed&&this._extendedEvents.on(ft.f.TIME_PLAYED,((O,j)=>{const{time:U}=j;this.track({action:`${U} Seconds Played`,value:U,nonInteraction:!0})}).bind(this)),this.events.pause&&this._extendedEvents.on(ft.f.PAUSE_NO_SEEK,(()=>{this.track({action:"Pause"})}).bind(this)),this.events.seek&&this._extendedEvents.on(ft.f.SEEK,((O,j)=>{const{seekStart:U,seekEnd:ut}=j;this.track({action:"Seek Start",value:U}),this.track({action:"Seek End",value:ut})}).bind(this)),this.events.playerload&&this.track({action:"Player Load",label:window.location.href,nonInteraction:!0}),this.player.on(ft.f.LOADED_METADATA,this.loadedmetadata.bind(this))}track(O){let{action:j,label:U,value:ut=null,nonInteraction:gt=!1}=O;const Wt={eventCategory:this.options.category,eventAction:j,eventLabel:U||this.options.defaultLabel(this.player),eventValue:ut||Math.round(this.player.currentTime()),nonInteraction:gt};window.ga("send","event",Wt)}videoload(){this.track({action:"Video Load",nonInteraction:!0})}resetState(){this._currentSource="",this._startTracked=!1,this._endTracked=!1}loadedmetadata(){const O=this.player.currentSource().src;O!==this._currentSource&&(this.resetState(),this._currentSource=O,this.events.videoload&&this.videoload())}}var $t=l(3171);const Ht={fraction:.5,isMuted:!0};class ke{constructor(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j=Object.assign({},Ht,j),this.player=O;let U=(0,Ct.sliceProperties)(j,"fraction"),ut=!1,gt=!1,Wt=null,Xt=null;this.init=()=>{Ee(),te()};const de=()=>{window.removeEventListener("DOMContentLoaded",te,!1),window.removeEventListener("load",te,!1),window.removeEventListener("scroll",te,!1),window.removeEventListener("resize",te,!1),this.player.off("pause",Wt),this.player.off("play",Xt)},Yt=()=>{ut=!0,gt=!1,this.player.pause()},we=()=>{ut=!1,gt=!0,this.player.play()},te=()=>{(0,$t.isElementInViewport)(this.player.el(),{fraction:U.fraction})?this.player.paused()&&we():this.player.paused()||this.player.activePlugins_.floatingPlayer||Yt()},Ee=()=>{Wt=()=>{this.player.waiting||ut||de()},Xt=()=>{gt||de()},window.addEventListener("DOMContentLoaded",te,!1),window.addEventListener("load",te,!1),window.addEventListener("scroll",te,!1),window.addEventListener("resize",te,!1),this.player.on("pause",Wt),this.player.on("play",Xt)}}}var le=l(5004),se=l(9388),Oe=l(5381);const _e=class{constructor(q){this._emitter=q,this._eventHandlers=[]}on(q,O){this._eventHandlers.push({type:q,handler:O}),this._emitter.on(q,O)}one(q,O){var j=this;this._eventHandlers.push({type:q,handler:O,wrapper:function(){O(...arguments),j.off(q,O)}}),this._emitter.one(q,O)}off(q,O){const j=this._eventHandlers?.findIndex(ut=>ut.type===q&&ut.handler===O);if(j===-1)return;const U=this._eventHandlers[j];this._emitter.off(q,U.wrapper||U.handler),this._eventHandlers.splice(j,1)}removeAllListeners(){this._eventHandlers.forEach(q=>{this.off(q)})}};var pi=l(4650),Ji=l(7311);const P={format:"jpg",resource_type:"video",transformation:{flags:"waveform"}},N=RegExp(`\\.(${["mp3","ogg","wav","mp4"].join("|")})$$`),J={resource_type:"video",type:"upload",transformation:[]};class bt extends Oe.A{constructor(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};({publicId:O,options:j}=(0,se.a5)(O,j)),O=O.replace(N,""),j=Object.assign({},J,j);const{poster:U}=(0,Ct.sliceAndUnsetProperties)(j,"poster");super(O,j),this._poster=null,this._type=ft.x.AUDIO,this.poster(U)}getPoster(){return this._poster}poster(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O?O instanceof pi.A?(this._poster=O,this):({publicId:O,options:j}=(0,se.a5)(O,j,{tolerateMissingId:!0}),O||(O=this.publicId(),j=Object.assign({},j,P)),j.cloudinaryConfig=j.cloudinaryConfig||this.cloudinaryConfig(),this._poster=new pi.A(O,j),this):this._poster}generateSources(){return this.sourceTypes().map(O=>{if(O==="audio"){const j="mp3",U={},ut=this.sourceTransformation()[O]||[this.transformation()];ut&&(U.transformation=ut),Object.assign(U,{resource_type:"video",format:j});const gt=this.queryParams()?(0,Ji.y)(this.queryParams()):"";return{type:"video/mp4",src:`${this.config().url(this.publicId(),U)}${gt}`,cldSrc:this,poster:this.getPoster().url()}}return null},this)}}const zt=bt,fe={transformation:{},sourceTypes:[],sourceTransformation:[],posterOptions:{}},mi=["cloudinaryConfig","transformation","sourceTypes","sourceTransformation","posterOptions","autoShowRecommendations"];class ui{constructor(O){var j=this;let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,se.M6)(),this.player=O,U=Object.assign({},fe,U);let ut=null,gt=null,Wt=null,Xt=null,de=null,Yt=null,we=null,te=null,Ee=null,be=U.chainTarget,Ue=null,Ve=null,Xe=!1;this.source=function(me){let Gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Gt=Object.assign({},Gt),!me)return ut;let yi=null;if(me instanceof Oe.A)yi=me;else{let{publicId:Pi,options:Ni}=(0,se.a5)(me,Gt);yi=j.buildSource(Pi,Ni)}const $i=yi.recommendations();if($i&&$i.length){let Pi=null,Ni=!1;Gt.recommendationOptions&&({disableAutoShow:Ni,itemBuilder:Pi}=(0,Ct.sliceAndUnsetProperties)(Gt.recommendationOptions,"disableAutoShow","itemBuilder")),async function(qs){try{return qs.getChild("recommendationsOverlay")||(await Promise.all([l.e(869),l.e(410)]).then(l.bind(l,7604)),qs.addChild("recommendationsOverlay")),qs}catch($n){console.error("Failed to load plugin:",$n)}}(O).then(()=>{Me($i,{disableAutoShow:Ni,itemBuilder:Pi})})}else Re();return ut=yi,Gt.sourceTypes&&Gt.sourceTypes.some(Pi=>Pi.includes("dash"))?l.e(367).then(l.bind(l,6604)).then(()=>{zi()}):Gt.skipRefresh||zi(),j.player.trigger("cldsourcechanged",{source:yi}),be},this.buildSource=function(me){let Gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yi=null;return{publicId:me,options:Gt}=(0,se.a5)(me,Gt),Gt.cloudinaryConfig=(0,se.lP)(j.cloudinaryConfig(),Gt.cloudinaryConfig||{}),Gt.transformation=(0,se.N7)(j.transformation(),Gt.transformation||{}),Gt.sourceTransformation=Gt.sourceTransformation||j.sourceTransformation(),Gt.sourceTypes=Gt.sourceTypes||j.sourceTypes(),Gt.poster=Gt.poster||Jn(),Gt.queryParams=Object.assign(Gt.queryParams||{},Gt.usageReport?{_s:"vp-2.1.1"}:{}),yi=Gt.sourceTypes.indexOf("audio")>-1?new zt(me,Gt):new Oe.A(me,Gt),yi},this.posterOptions=me=>me?(de=me,be):de,this.disablePoster=me=>{this.player.poster(" "),this.player.posterImage.el().style.backgroundColor=me},this.cloudinaryConfig=me=>me?(Yt=me,be):Yt,this.transformation=me=>me?(we=me,be):we,this.sourceTypes=me=>me?(te=me,be):te,this.getCurrentSources=()=>gt,this.sourceTransformation=me=>me?(Ee=me,be):Ee,this.on=function(){return Ue.on(...arguments)},this.one=function(){return Ue.one(...arguments)},this.off=function(){return Ue.off(...arguments)},this.autoShowRecommendations=me=>me===void 0?Xe:(Xe=me,be),this.dispose=()=>{this.playlist&&this.playlist()&&this.disposePlaylist(),Re(),ut=void 0,Ue.removeAllListeners()};const Me=(me,Gt)=>{let{disableAutoShow:yi=!1,itemBuilder:$i=null}=Gt;if(Re(),!Array.isArray(me)&&typeof me!="function"&&!me.then)throw new Error('"recommendations" must be either an array or a function');Ve={},$i=$i||(Pi=>({source:Pi instanceof Oe.A?Pi:this.buildSource(Pi),action:()=>this.source(Pi)})),Ve.sourceChangedHandler=()=>{const Pi=Ni=>{if(Ni!==void 0&&Ni.length>0){const qs=Ni.map($n=>$i($n));this.player.trigger("recommendationschanged",{items:qs})}else this.player.trigger("recommendationsnoshow");Ve.sources=Ni};et()(me)?Pi(me()):me.then?me.then(Pi):Pi(me)},Ve.sourceChangedHandler(),Ve.endedHandler=()=>{!yi&&this.autoShowRecommendations()&&this.player.trigger("recommendationsshow")},this.on("ended",Ve.endedHandler)},Re=()=>{Ve&&(this.off("cldsourcechanged",Ve.sourceChangedHandler),this.off("ended",Ve.endedHandler),delete Ve.endedHandler,delete Ve.sourceChangedHandler),Ve=null},zi=()=>{const me=this.source(),Gt=Object.assign({},this.player.cloudinary.posterOptions(),me.getInitOptions().poster);Gt.posterColor?this.disablePoster(Gt.posterColor):me.poster()&&this.player.poster(me.poster().url()),gt=me.generateSources().reduce((yi,$i)=>{if($i.isAdaptive)if($i.type.split("; ")[1]&&"MediaSource"in window){let Pi=`video/mp4; ${$i.type.split("; ")[1]||""}`;qn(Pi)&&yi.push($i)}else yi.push($i);else yi.push($i);return yi},[]),this.player.src(gt),Wt=me,this.playlist&&(Xt=this.playlist())},qn=me=>document.createElement("video").canPlayType(me)||"MediaSource"in window&&MediaSource.isTypeSupported(me),Jn=()=>{const me=Object.assign({},this.posterOptions());me.transformation=me.transformation||{},!me.transformation.width&&!me.transformation.height||me.transformation.crop||(me.transformation.crop="scale");const Gt=this.player.el();if(Gt&&Gt.clientWidth&&Gt.clientHeight&&!(0,le.isKeyInTransformation)(me.transformation,"width")&&!(0,le.isKeyInTransformation)(me.transformation,"height")){const yi=$i=>100*Math.ceil($i/100);me.transformation=(0,se.N7)(me.transformation,{width:yi(Gt.clientWidth),height:yi(Gt.clientHeight),crop:"limit"})}return me};Ue=new _e(this.player);const Os=(0,Ct.sliceAndUnsetProperties)(U,...mi);var Ls,Zn;Ls=this,Zn=Os,Object.entries(Zn).forEach(me=>{let[Gt,yi]=me;Ls[Gt]&&typeof Ls[Gt]=="function"&&Ls[Gt](yi)}),this.on("sourcechanged",(me,Gt)=>{let yi=Gt.to;Wt&&Wt.contains(yi)?this.source()||(this.playlist&&Xt&&this.playlist(Xt),this.source(Wt,{skipRefresh:!0})):(this.player.trigger("cldsourcechanged",{}),this.dispose())})}currentSourceType(){return this.source().getType()}currentPublicId(){return this.source()&&this.source().publicId()}currentPoster(){return this.source()&&this.source().poster()}}var Ci=l(4679),Ne=l.n(Ci),Ri=l(4138);class vi{constructor(O,j){this.player=O,this.shouldUseCustomEvents=m().browser.IS_IOS,this.cloudinaryAnalytics=(0,Ri.connectCloudinaryAnalytics)(this.player.videoElement,{customEvents:this.shouldUseCustomEvents}),this.currentVideMetadata={cloudName:null,publicId:null},this.analyticsOptions=j}getMetadata=()=>({cloudName:this.player.cloudinary.cloudinaryConfig().cloud_name,publicId:this.player.cloudinary.currentPublicId()});sourceChanged=()=>{const O=this.getMetadata();O.cloudName&&O.publicId?(this.currentVideMetadata=O,this.cloudinaryAnalytics.startManualTracking(O,{...Ne()(this.analyticsOptions)?this.analyticsOptions:{},videoPlayerType:"cloudinary video player",videoPlayerVersion:"2.1.1"})):this.currentVideMetadata.cloudName===O.cloudName&&this.currentVideMetadata.publicId===O.publicId||this.cloudinaryAnalytics.stopManualTracking()};dispatchCustomEventOnVideoPlayer=(()=>{var O=this;return function(j){const U=new CustomEvent(`cld-custom-${j}`,{detail:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}});O.player.videoElement.dispatchEvent(U)}})();connectCustomEvents=()=>{this.player.on(ft.f.PLAY,()=>this.dispatchCustomEventOnVideoPlayer("play")),this.player.on(ft.f.PAUSE,()=>this.dispatchCustomEventOnVideoPlayer("pause")),this.player.on(ft.f.EMPTIED,()=>this.dispatchCustomEventOnVideoPlayer("emptied")),this.player.on(ft.f.LOADED_METADATA,()=>{const O=this.player.videoElement.duration||null;this.dispatchCustomEventOnVideoPlayer("loadedmetadata",{videoDuration:O})})};init(){this.shouldUseCustomEvents&&this.connectCustomEvents(),this.player.on(ft.f.CLD_SOURCE_CHANGED,this.sourceChanged)}}var cs=l(4500),si=l(7134);const ns=m().getComponent("MenuItem"),ts=class extends ns{handleClick(){super.handleClick(),this.options_.listener()}createEl(){const q=(0,si.n)("span",{class:"vjs-menu-item-text"+(this.options_.class?` ${this.options_.class}`:"")});return q.appendChild(document.createTextNode(this.localize(this.options_.label))),(0,si.n)("li",{class:"vjs-menu-item",tabIndex:-1},q)}},us=m().getComponent("Menu"),Ys=class extends us{constructor(q,O){var j;super(q,O),j=this,O.content.forEach(U=>{let ut=null;ut=et()(U.listener)?U.listener:typeof U.href=="string"?()=>window.open(U.href):()=>!0,this.addItem(new ts(q,{label:U.label,class:U.class,listener:function(){ut(...arguments),j.dispose()}}))})}setPosition(q,O){(0,$t.setPosition)(this.el(),q,O)}createEl(){const q=super.createEl();if(m().dom.addClass(q,"vjs-context-menu-ui"),this.options_.position){const{left:O,top:j}=this.options_.position;this.setPosition(O,j)}return q}},vn={cancel:!0,sensitivity:10,wait:500,disabled:!1},Cs="vjs-contextmenu";function bn(q,O){if(q.contextmenu.options.disabled)return q;const j={target:q,type:Cs};return["clientX","clientY","pageX","pageY","screenX","screenY"].forEach(U=>{j[U]=O[U]}),q.trigger(j)}function Xn(q){const O=this.contextmenu.current;if(!O)return;const j=this.contextmenu.options.wait;q.type==="touchend"&&new Date().getTime()-O.time>=j&&bn(this,q),this.contextmenu.current=null}function fr(q){const O=this.contextmenu.current;if(!O)return;const j=q.touches[0],U=this.contextmenu.options.sensitivity;(j.screenX-O.screenX>U||j.screenY-O.screenY>U)&&(this.contextmenu.current=null)}function Yn(q){if(this.contextmenu.current)return;const O=q.touches[0];this.contextmenu.current={screenX:O.screenX,screenY:O.screenY,time:new Date().getTime()}}function Hr(q){this.contextmenu.options.cancel&&!this.contextmenu.options.disabled&&q.preventDefault(),bn(this,q),this.off(["touchcancel","touchend"],Xn),this.off("touchmove",fr),this.off("touchstart",Yn)}m().registerPlugin("contextmenu",function(q){this.contextmenu.options=m().obj.merge(vn,q),this.on("contextmenu",Hr),this.on(["touchcancel","touchend"],Xn),this.on("touchmove",fr),this.on("touchstart",Yn),this.ready(()=>this.addClass(Cs))});const Tn={showNativeOnRecurringEvent:!1};class Un{constructor(O,j){if(!Array.isArray(j.content)&&!et()(j.content))throw new Error('"content" required');const U=Object.assign({},Tn,j);this.player=O;const ut=(0,Ct.sliceProperties)(U,"content","showNativeOnRecurringEvent");this.init=()=>{this.player.contextmenu(),this.player.on("vjs-contextmenu",Wt),this.player.ready(()=>this.player.addClass("vjs-context-menu"))};const gt=Xt=>{const de=this.menu.el();de.style.visibility="hidden",this.player.el().appendChild(de);const Yt=de.getBoundingClientRect();this.player.el().removeChild(de),de.style.visibility="visible";const we=(0,$t.getPointerPosition)(this.player.el(),Xt),te=this.player.el().getBoundingClientRect();let Ee=te.height-te.height*we.y+1,be=Math.round(te.width*we.x)+1,Ue=Ee,Ve=be;return Ee+Yt.height>te.height&&(Ue=Ee+Yt.height-te.height>Yt.height/2?Ee-Yt.height-1:te.height-Yt.height),be+Yt.width>te.width&&(Ve=be+Yt.width-te.width>Yt.width/2?be-Yt.width-1:te.width-Yt.width),Ue<Ee&&Ve<be&&(Ue=Ee-Yt.height-1,Ve=be-Yt.width-1),Ue=Math.max(0,Ue),Ve=Math.max(0,Ve),{left:Ve,top:Ue}},Wt=Xt=>{if(this.menu&&(this.menu.dispose(),ut.showNativeOnRecurringEvent))return;ut.showNativeOnRecurringEvent&&(this.player.contextmenu.options.cancel=!1),Xt.preventDefault();let de=ut.content;et()(de)&&(de=de(this.player)),this.menu=new Ys(this.player,{content:de});const{left:Yt,top:we}=gt(Xt);this.menu.setPosition(Yt,we);const te=Ee=>{(Ee.type!=="click"||Ee.which!==3&&Ee.button!==2)&&this.menu.dispose()};this.menu.on("dispose",()=>{this.player.contextmenu.options.cancel=!0,this.player.removeChild(this.menu),m().off(document,["click","tap"],te),delete this.menu}),this.player.addChild(this.menu),m().on(document,["click","tap"],te)}}}var _s=l(608);const Ks={fraction:.5,collapsedWidth:300,floatTo:"right"};class Sn{constructor(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j=Object.assign({},Ks,j),j.floatTo&&j.floatTo!==_s.rT.LEFT&&j.floatTo!==_s.rT.RIGHT&&(j.floatTo=Ks.floatTo),this.player=O;const U=this.player.el();let ut=(0,Ct.sliceProperties)(j,"fraction"),gt=null,Wt=!1,Xt=!1;this.init=()=>{te(),typeof this.player.ima=="object"&&Ee()};const de=Me=>{const Re=document.createElement("div");for(Me.appendChild(Re);Me.firstChild!==Re;)Re.appendChild(Me.firstChild);return Re},Yt=()=>{window.removeEventListener("DOMContentLoaded",Xe,!1),window.removeEventListener("load",Xe,!1),window.removeEventListener("scroll",Xe,!1),window.removeEventListener("resize",Xe,!1)},we=()=>{window.addEventListener("DOMContentLoaded",Xe,!1),window.addEventListener("load",Xe,!1),window.addEventListener("scroll",Xe,!1),window.addEventListener("resize",Xe,!1)},te=()=>{this.player.on("play",Xe),this.player.on("play",we),this.player.on("dispose",Yt)},Ee=()=>{const Me=U.getBoundingClientRect();gt=de(U);const Re=de(gt);Re.setAttribute("class","cld-video-player-floater-inner"),Re.setAttribute("style","padding-bottom: "+100*Me.height/Me.width+"%;");const zi=document.createElement("button");zi.setAttribute("class","cld-video-player-floater-close"),zi.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><polygon fill-rule="evenodd" points="370 7.41 368.59 6 364 10.59 359.41 6 358 7.41 362.59 12 358 16.59 359.41 18 364 13.41 368.59 18 370 16.59 365.41 12" transform="translate(-358 -6)"/></svg>',zi.onclick=()=>{Ue(),Ve()},gt.appendChild(zi)},be=()=>{const{ima:Me}=this.player;Me&&Me.adsActive&&Me.getAdsManager().resize(Wt?gt.clientWidth:U.clientWidth,Wt?gt.clientHeight:U.clientHeight)},Ue=()=>{gt.classList.remove("cld-video-player-floating"),Wt=!1,be()},Ve=()=>{Yt(),this.player.off("play",Xe),this.player.off("play",we)},Xe=()=>{(0,$t.isElementInViewport)(this.player.el(),{fraction:ut.fraction})?Wt&&Ue():Wt||(gt||Ee(),Xt||(()=>{const Me=U.getBoundingClientRect();gt.setAttribute("class",`cld-video-player-floater cld-video-player-floater-bottom-${j.floatTo}`),gt.setAttribute("style",["width: "+j.collapsedWidth+"px;","top: "+Me.top+"px;","left: "+Me.left+"px;","right: "+(document.documentElement.clientWidth-Me.right)+"px;","bottom: "+(document.documentElement.clientHeight-Me.bottom)+"px;"].join("")),Xt=!0})(),Wt=!0,setTimeout(()=>{gt.classList.add("cld-video-player-floating"),be()}))}}}let ln={},Qs={};const Vr=function(){function q(O,j){return this.player=O,this.options=j,this.initializeThumbnails(),this}return q.prototype.src=function(O){this.resetPlugin(),this.options.src=O,this.initializeThumbnails()},q.prototype.detach=function(){this.resetPlugin()},q.prototype.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},q.prototype.initializeThumbnails=function(){this.options.src&&fetch(this.options.src).then(O=>O.text()).then(O=>{this.vttData=this.processVtt(O),this.setupThumbnailElement()})},q.prototype.setupThumbnailElement=function(){if(!this.vttData[0])return;const O=this.player.$(".vjs-progress-holder .vjs-mouse-display");this.thumbnailHolder=this.player.$(".vjs-vtt-thumbnail-display")||m().dom.createEl("div",void 0,{class:"vjs-vtt-thumbnail-display",style:`width: ${this.vttData[0].css.width}`}),this.thumbnailHolder.innerHTML="",this.thumbnailHolder.setAttribute("class","vjs-vtt-thumbnail-display"),O.appendChild(this.thumbnailHolder);const j=parseInt(this.vttData[0].css.width,10)/2,U=this.updateThumbnailStyle.bind(this);this.player.getDescendant(["controlBar","progressControl","seekBar","mouseTimeDisplay"]).update=function(ut,gt){const Wt=gt*this.player_.duration(),Xt=ut.width;U(Wt),this.getChild("timeTooltip").updateTime(ut,gt,Wt,()=>{ut.width*gt<j?this.el_.style.left=`${j}px`:ut.width*gt+j>Xt?this.el_.style.left=ut.width-j+"px":this.el_.style.left=ut.width*gt+"px"}),this.getChild("timeTooltip").write(m().time.formatTime(Wt))}},q.prototype.getStyleForTime=function(O){for(let j=0;j<this.vttData.length;++j){let U=this.vttData[j];if(O>=U.start&&O<U.end){if(U.css.url&&!Qs[U.css.url]){let ut=new Image;ut.src=U.css.url,Qs[U.css.url]=ut}return U.css}}},q.prototype.updateThumbnailStyle=function(O){let j=this.getStyleForTime(O);if(j){if(this.thumbnailHolder.style.opacity="1",!this.lastStyle||this.lastStyle!==j){this.lastStyle=j;for(let U in j)Object.prototype.hasOwnProperty.call(j,U)&&(this.thumbnailHolder.style[U]=j[U])}}else this.thumbnailHolder.style.opacity="0"},q.prototype.processVtt=function(O){let j=[];return O.split(/[\r\n][\r\n]/i).forEach(U=>{if(U.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)){let ut=U.split(/[\r\n]/i),gt=ut[0].split(/ ?--> ?/i),Wt=gt[0],Xt=gt[1],de=ut[1].split("/").pop(),Yt=this.getVttCss(de);j.push({start:this.getSecondsFromTimestamp(Wt),end:this.getSecondsFromTimestamp(Xt),css:Yt})}}),j},q.prototype.getPropsFromDef=function(O){let j=O.split(/#xywh=/i),U=j[0],ut=j[1].match(/[0-9]+/gi);return{x:ut[0],y:ut[1],w:ut[2],h:ut[3],image:U}},q.prototype.getVttCss=function(O){let j={};O=[this.options.src.split(/([^\/]*)$/gi).shift().trim(),O.trim()].join("/");let U=this.getPropsFromDef(O);return j.background='url("'+U.image+'") no-repeat -'+U.x+"px -"+U.y+"px",j.width=U.w+"px",j.height=U.h+"px",j.url=U.image,j},q.prototype.getSecondsFromTimestamp=function(O){const[j,U,ut]=O.split(":").map(parseFloat);return 60*j*60+60*U+ut},q}();var gr=l(7588),wn=l(3066);const zr={aiHighlightsGraph:function(q){this.ready(()=>{(function(O,j){O.addClass("vjs-ai-highlights-graph"),O.aiHighlightsGraph=new Pt(O,j)})(this,m().obj.merge(Qe,q))})},analytics:function(){new Ut(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},autoplayOnScroll:function(){new ke(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},cloudinary:function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};q.chainTarget=q.chainTarget||this,this.cloudinary=new ui(this,q)},cloudinaryAnalytics:function(){new vi(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},colors:cs.A,contextMenu:function(){new Un(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},floatingPlayer:function(){new Sn(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()},pacedTranscript:function(q){const O=this,j=O.cloudinary.source(),U={kind:q.kind||"captions",label:q.label||"Captions",default:q.default,srclang:q.srclang||"en",src:q.src||(0,se.KA)(j.publicId(),(0,se.lP)(O.cloudinary.cloudinaryConfig(),{resource_type:"raw"}))+".transcript",maxWords:q.maxWords,wordHighlight:q.wordHighlight,timeOffset:q.timeOffset||0};O.textTrackDisplay.el().classList.add("cld-paced-text-tracks"),O.one("loadedmetadata",()=>{(async()=>{try{const ut=await fetch(U.src),gt=(Xt=>{const de=[],Yt=we=>{let{startTime:te,endTime:Ee,text:be}=we;de.push({startTime:te+U.timeOffset,endTime:Ee+U.timeOffset,text:be})};return Xt.forEach(we=>{const te=we.words,Ee=U.maxWords||te.length;for(let be=0;be<te.length;be+=Ee)U.wordHighlight?te.slice(be,Math.min(be+Ee,te.length)).forEach((Ue,Ve)=>{Yt({startTime:Ue.start_time,endTime:Ue.end_time,text:te.slice(be,be+Ee).map(Xe=>Xe===Ue?`<b>${Xe.word}</b>`:Xe.word).join(" ")}),te[Ve+1]&&Ue.end_time<te[Ve+1].start_time&&Yt({startTime:Ue.end_time,endTime:te[Ve+1].start_time,text:te.slice(be,be+Ee).map(Xe=>Xe.word).join(" ")})}):de.push({startTime:te[be].start_time,endTime:te[Math.min(be+Ee-1,te.length-1)].end_time,text:te.slice(be,be+Ee).map(Ue=>Ue.word).join(" ")})}),de})(await ut.json()),Wt=O.addRemoteTextTrack({kind:U.kind,label:U.label,srclang:U.srclang,default:U.default,mode:U.default?"showing":"disabled"});await new Promise(Xt=>setTimeout(Xt,100)),gt.forEach(Xt=>{Wt.track.addCue(new VTTCue(Xt.startTime,Xt.endTime,Xt.text))})}catch(ut){console.error("Error loading transcription file:",ut)}})()})},vttThumbnails:function(q){this.ready(()=>{(function(O,j){O.addClass("vjs-vtt-thumbnails"),O.vttThumbnails=new Vr(O,j)})(this,m().obj.merge(ln,q))})},chapters:async function(q){const O=this;try{const{default:j}=await Promise.all([l.e(869),l.e(625)]).then(l.bind(l,9234));O.ready(()=>j(q,O))}catch(j){console.error("Failed to load plugin:",j)}},imaPlugin:async function(q,O){await Promise.all([l.e(869),l.e(330)]).then(l.bind(l,2650));const j=et()(q.ads),U=typeof google=="object"&&typeof google.ima=="object";if(O.ads&&(!j||!U))return j||console.warn("contribAds is not loaded"),U||console.warn("imaSdk is not loaded"),!1;q.ima({id:q.el().id,adTagUrl:O.ads.adTagUrl,disableFlashAds:!0,prerollTimeout:O.ads.prerollTimeout||5e3,postrollTimeout:O.ads.postrollTimeout||5e3,showCountdown:O.ads.showCountdown!==!1,adLabel:O.ads.adLabel||"Advertisement",locale:O.ads.locale||"en",autoPlayAdBreaks:O.ads.autoPlayAdBreaks!==!1,debug:O.ads.denug}),Object.keys(O.ads).length>0&&typeof q.ima=="object"&&(O.ads.adsInPlaylist==="first-video"?q.one(ft.f.SOURCE_CHANGED,()=>{q.ima.playAdBreak()}):q.on(ft.f.SOURCE_CHANGED,()=>{q.ima.playAdBreak()}))},playlist:async function(q){const O=this;try{const{default:j}=await Promise.all([l.e(869),l.e(33)]).then(l.bind(l,5826)),U=j(O,q);return O.cloudinary.playlist=U,U}catch(j){console.error("Failed to load plugin:",j)}},shoppable:async function(q,O){const{default:j}=await Promise.all([l.e(869),l.e(525)]).then(l.bind(l,9987));new j(q,O.shoppable).init()},styledTextTracks:async function(q){const O=this;try{O.ready(()=>((j,U)=>{const ut={theme:j.theme||"default",fontFace:j.fontFace,fontSize:j.fontSize,gravity:j.gravity||"bottom",box:j.box,style:j.style,wordHighlightStyle:j.wordHighlightStyle},gt=document.createElement("style");U.el_.appendChild(gt);const Wt=U.textTrackDisplay.el().classList;Wt.forEach(Yt=>{Yt.startsWith("cld-styled-text-tracks")&&Wt.remove(Yt)}),Wt.add("cld-styled-text-tracks"),Wt.add(`cld-styled-text-tracks-theme-${ut.theme}`),ut.gravity.split("-").forEach(Yt=>{Wt.add(`cld-styled-text-tracks-gravity-${Yt}`)});const Xt=(Yt,we)=>{if(Object.entries(Yt)){const te=Object.entries(Yt).reduce((Ee,be)=>{let[Ue,Ve]=be;return Ee+`${Ue}: ${Ve} !important; `},"");gt.innerHTML+=`${we} { ${te} } `}},de=Yt=>{const we=`
      .${(0,wn.playerClassPrefix)(U)} .vjs-text-track-cue > div,
      .${(0,wn.playerClassPrefix)(U)} ::cue
    `;Xt(Yt,we)};if(ut.fontFace&&((0,gr.fontFace)(U.textTrackDisplay.el(),ut.fontFace),de({"font-family":ut.fontFace})),ut.box){const{x:Yt,y:we,width:te,height:Ee}=ut.box;(be=>{const Ue=`
      .${(0,wn.playerClassPrefix)(U)} .vjs-text-track-display.cld-styled-text-tracks,
      .${(0,wn.playerClassPrefix)(U)} ::-webkit-media-text-track-display
    `;Xt(be,Ue)})({translate:`${Yt||0} ${we||0}`,...te?{width:te}:void 0,...Ee?{height:Ee}:void 0})}ut.fontSize&&de({"font-size":ut.fontSize}),ut.style&&de(ut.style),ut.wordHighlightStyle&&(Xt(ut.wordHighlightStyle,`.${(0,wn.playerClassPrefix)(U)} .cld-paced-text-tracks .vjs-text-track-cue b`),Xt(ut.wordHighlightStyle,"video::cue(b)"))})(q,O))}catch(j){console.error("Failed to load plugin:",j)}},interactionAreas:async function(q,O,j){try{const{interactionAreasService:U}=await Promise.all([l.e(869),l.e(404)]).then(l.bind(l,1066));U(q,O,j)}catch(U){console.error("Failed to load plugin:",U)}}},Kn=zr;var rs=l(5104),En=l(7668);const Ii=q=>class extends q{constructor(){var O;super(),O=this;const j={data:{},handlers:{}};this.on=function(){for(var U=arguments.length,ut=new Array(U),gt=0;gt<U;gt++)ut[gt]=arguments[gt];const Wt=ut.length-1,Xt=ut[Wt];return j.handlers[Xt]=function(de){de.Player=O;for(var Yt=arguments.length,we=new Array(Yt>1?Yt-1:0),te=1;te<Yt;te++)we[te-1]=arguments[te];Xt(de,...we)},ut[Wt]=j.handlers[Xt],O.videojs.on(...ut)},this.one=function(){for(var U=arguments.length,ut=new Array(U),gt=0;gt<U;gt++)ut[gt]=arguments[gt];const Wt=ut.length-1,Xt=ut[Wt];return j.handlers[Xt]=function(de){de.Player=O;for(var Yt=arguments.length,we=new Array(Yt>1?Yt-1:0),te=1;te<Yt;te++)we[te-1]=arguments[te];Xt(de,...we),delete j.handlers[Xt]},ut[Wt]=j.handlers[Xt],O.videojs.one(...ut)},this.off=function(){for(var U=arguments.length,ut=new Array(U),gt=0;gt<U;gt++)ut[gt]=arguments[gt];const Wt=ut.length-1,Xt=ut[Wt];ut[Wt]=j.handlers[Xt];const de=O.videojs.off(...ut);return delete j.handlers[Xt],de},this.trigger=function(){O.videojs.trigger(...arguments)}}};var Xi=l(8838),xs=l(5779);const Yi=q=>!Dt()(q)||null,Bn=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{sourceTypes:q.sourceTypes,autoShowRecommendations:q.autoShowRecommendations,fontFace:q.fontFace,posterOptions:Yi(q.posterOptions),posterOptionsPublicId:q.posterOptions&&Yi(q.posterOptions.publicId)}},vs=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{chapters:q.chapters&&(q.chapters.url?"url":"inline-chapters"),recommendations:q.recommendations&&q.recommendations.length,shoppable:Yi(q.shoppable),shoppableProductsLength:q.shoppable&&q.shoppable.products&&q.shoppable.products.length,...q.info?{sourceInfoTitle:q.info.title,sourceInfoSubtitle:q.info.subtitle,sourceInfoDescription:q.info.description}:{},...q.textTracks?{textTracks:Yi(q.textTracks),pacedTextTracks:Yi(q.textTracks)&&JSON.stringify(q.textTracks||{}).includes('"maxWords":'),wordHighlight:Yi(q.textTracks)&&JSON.stringify(q.textTracks||{}).includes('"wordHighlight":'),...q.textTracks.options?{styledTextTracksTheme:q.textTracks.options.theme,styledTextTracksFont:q.textTracks.options.fontFace,styledTextTracksFontSize:q.textTracks.options.fontSize,styledTextTracksGravity:q.textTracks.options.gravity,styledTextTracksBox:Yi(q.textTracks.options.box),styledTextTracksStyle:Yi(q.textTracks.options.style),styledTextTracksWordHighlightStyle:Yi(q.textTracks.options.wordHighlightStyle)}:{}}:{}}},Cn=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{adsAdTagUrl:q.adTagUrl,adsShowCountdown:q.showCountdown,adsAdLabel:q.adLabel,adsLocale:q.locale,adsPrerollTimeout:q.prerollTimeout,adsPostrollTimeout:q.postrollTimeout,adsAdsInPlaylist:q.adsInPlaylist}},hs=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{playlistWidgetDirection:q.direction,playlistWidgetTotal:q.total}},ks={init:q=>{if(window.dashjs&&q&&q.qualityLevels&&q.dash&&q.dash.mediaPlayer){const O=dashjs.MediaPlayer;q.dash.qualityLevels=q.qualityLevels(),q.dash.mediaPlayer.getAutoSwitchQualityFor=j=>{const U=q.dash.mediaPlayer.getSettings();return!U||U.streaming.abr.autoSwitchBitrate[j]},q.dash.mediaPlayer.setAutoSwitchQualityFor=(j,U)=>{const ut=q.dash.mediaPlayer,gt={streaming:{abr:{autoSwitchBitrate:{}}}};gt.streaming.abr.autoSwitchBitrate[j]=U,ut.updateSettings(gt)},q.dash.mediaPlayer.on(O.events.PLAYBACK_METADATA_LOADED,()=>{const j=q.dash.mediaPlayer.getBitrateInfoListFor("video"),U=q.dash.mediaPlayer.getBitrateInfoListFor("audio");if(j.length>0){const ut=j[j.length-1].bitrate;q.dash.audioMapper=j.map(gt=>Math.round(gt.bitrate/ut*(U.length-1))),j.forEach(gt=>{q.dash.qualityLevels.addQualityLevel({id:gt.bitrate,width:gt.width,height:gt.height,bandwidth:gt.bitrate,selected:!0,enabled:function(Wt){if(Wt===void 0)return this.selected===void 0||this.selected;if(this.selected=Wt,Wt===!0){const Xt=q.qualityLevels().levels_?.findIndex(de=>de.id===this.id);q.qualityLevels().selectedIndex_=Xt,q.qualityLevels().trigger({type:"change",selectedIndex:Xt})}}})})}}),q.qualityLevels().on("change",j=>{q.dash.qualityLevels.levels_.filter(U=>U.enabled).length===1?(q.dash.mediaPlayer.setQualityFor("video",j.selectedIndex),q.dash.mediaPlayer.setQualityFor("audio",q.dash.audioMapper[j.selectedIndex])):q.dash.mediaPlayer.getAutoSwitchQualityFor("video")||(q.dash.mediaPlayer.setAutoSwitchQualityFor("video",!0),q.dash.mediaPlayer.setAutoSwitchQualityFor("audio",!0))})}},setVisibility:q=>{const O=q.controlBar.getChild("sourceMenuButton");if(O){const j=q.qualityLevels();if(j&&j.length>1){const U=j.levels_.filter(ut=>ut.enabled);if(U.length===1){const ut=j.levels_.findIndex(gt=>gt.id===U[0].id);O.children()[1].children()[ut].selected(!0)}else O.children()[1].children()[0].selected(!0),O.children()[1].children().forEach((ut,gt)=>{gt>0&&ut.selected(!1)});O.show()}else O.hide()}}},cn=ks;Object.keys(Kn).forEach(q=>{m().registerPlugin(q,Kn[q])}),(0,Xi.go)();class ds extends rs.A.mixin(Ii){static all(O){for(var j=arguments.length,U=new Array(j>1?j-1:0),ut=1;ut<j;ut++)U[ut-1]=arguments[ut];return[...document.querySelectorAll(O)].map(gt=>new ds(gt,...U))}get playerOptions(){return this.options.playerOptions}constructor(O,j,U){super(),this.nbCalls=0,this.videoElement=(0,Xi.iG)(O),this.options=(0,Xi.Wi)(this.videoElement,j),this._videojsOptions=this.options.videojsOptions,this.videoElement.classList.add("video-js"),rs.A.fontFace(this.videoElement,this.playerOptions.cloudinary.fontFace),this._videojsOptions.bigPlayButton==="init"&&(this.videoElement.classList.add("vjs-big-play-button-init-only"),this._videojsOptions.bigPlayButton=!0),this.videojs=m()(this.videoElement,this._videojsOptions),this._isPlayerConfigValid=!0,this.playerOptions.debug&&(0,xs.I6)(this.options).then(ut=>{if(!ut)return this._isPlayerConfigValid=!1,void this.videojs.error("invalid player configuration")}),this._videojsOptions.muted&&this.videojs.volume(.4),this.playerOptions.fluid&&this.fluid(this.playerOptions.fluid),this._setCssClasses(),this._initPlugins(),this._initJumpButtons(),this._initPictureInPicture(),this._setVideoJsListeners(U)}getVPInstanceId(){return this.vpInstanceId||(this.vpInstanceId=Z()),this.vpInstanceId}_sendInternalAnalytics(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const j=Object.assign({},this.playerOptions,this.options.videojsOptions,O);if(j.allowUsageReport)try{const gt=j._internalAnalyticsMetadata??{},Wt=(ut={aiHighlightsGraph:(U=j).aiHighlightsGraph,analytics:Yi(U.analytics),autoplay:U.autoplay,autoplayMode:U.autoplayMode,bigPlayButton:U.bigPlayButton,className:U.class,cloudinaryAnalytics:!!U.cloudinaryAnalytics,cloudinaryAnalyticsOptions:ct()(U.cloudinaryAnalytics),controls:U.controls,floatingWhenNotVisible:U.floatingWhenNotVisible,fluid:U.fluid,height:U.height,hideContextMenu:U.hideContextMenu,logoImageUrl:U.logoImageUrl,logoOnclickUrl:U.logoOnclickUrl,loop:U.loop,maxTries:U.maxTries,muted:U.muted,playbackRates:U.playbackRates,playedEventPercents:U.playedEventPercents,playedEventTimes:U.playedEventTimes,playsinline:U.playsinline,preload:U.preload,videoTimeout:U.videoTimeout,seekThumbnails:U.seekThumbnails,showJumpControls:U.showJumpControls,chaptersButton:U.chaptersButton,pictureInPictureToggle:U.pictureInPictureToggle,showLogo:U.showLogo,skin:U.skin,videoJS:Yi(U.videoJS),width:U.width,withCredentials:U.withCredentials,debug:U.debug,colors:U.colors&&JSON.stringify(U.colors),controlBar:JSON.stringify(U.controlBar)!==JSON.stringify(En.A.controlBar)&&JSON.stringify(U.controlBar),...Bn(U.cloudinary),...vs(U.source),...Cn(U.ads),...hs(U.playlistWidget)},Object.entries(ut).reduce((Yt,we)=>{let[te,Ee]=we;return Ee!==En.A[te]&&Ee!=null&&(Yt[te]=Ee),Yt},{})),Xt=new URLSearchParams(Wt).toString(),de=new URLSearchParams({vpVersion:"2.1.1",vpInstanceId:this.getVPInstanceId(),cloudName:j.cloudinary.cloudinaryConfig.cloud_name,...gt}).toString();fetch(`https://analytics-api-s.cloudinary.com/video_player_source?${Xt}&${de}`)}catch{}var U,ut}_clearTimeOut=()=>{this.videojs.clearTimeout(this.reTryId)};_setVideoJsListeners(O){this.videojs.on(ft.f.ERROR,()=>{const j=this.videojs.error();if(j){const U=this._isPlayerConfigValid&&this.videojs.cloudinary.currentSourceType();[j.code===3&&m().browser.IS_SAFARI,j.code===4].includes(!0)&&[ft.x.AUDIO,ft.x.VIDEO].includes(U)?(this.videojs.error(null),rs.A.handleCldError(this,this.playerOptions)):this._clearTimeOut()}}),this.videojs.tech_.on(ft.f.RETRY_PLAYLIST,()=>{pt()(this.videojs,"hls.stats.mediaRequestsErrored",0)>0&&(this._clearTimeOut(),rs.A.handleCldError(this,this.playerOptions))}),this.videojs.on(ft.f.PLAY,this._clearTimeOut),this.videojs.on(ft.f.CAN_PLAY_THROUGH,this._clearTimeOut),this.videojs.on(ft.f.CLD_SOURCE_CHANGED,this._onSourceChange.bind(this)),this.videojs.ready(()=>{this._onReady(),O&&O(this)})}_initPlugins(){this._initIma(),this._initAutoplay(),this._initContextMenu(),this._initPerSrcBehaviors(),this._initCloudinary(),this._initAnalytics(),this._initCloudinaryAnalytics(),this._initFloatingPlayer(),this._initColors(),this._initTextTracks(),this._initHighlightsGraph(),this._initSeekThumbs(),this._initChapters(),this._initInteractionAreas()}_isFullScreen(){return this.videojs.player().isFullscreen()}_initIma(){this.playerOptions.ads&&Object.keys(this.playerOptions.ads).length!==0&&Kn.imaPlugin(this.videojs,this.playerOptions)}setTextTracks(O){const j=this.videojs.remoteTextTracks();if(j)for(let U=j.tracks_.length-1;U>=0;U--)this.videojs.removeRemoteTextTrack(j.tracks_[U]);if(O){const U=Object.keys(O),ut=[];for(const gt of U)if(gt!=="options"){const Wt=Array.isArray(O[gt])?O[gt]:[O[gt]];for(const Xt of Wt)ut.push({...Xt,kind:gt,label:Xt.label,srclang:Xt.language,default:!!Xt.default,src:Xt.url})}rs.A.addTextTracks(ut,this.videojs),O.options&&this.videojs.styledTextTracks&&this.videojs.styledTextTracks(O.options)}}_initSeekThumbs(){this.playerOptions.seekThumbnails&&this.videojs.on(ft.f.CLD_SOURCE_CHANGED,(O,j)=>{let{source:U}=j;if(!U||U.getType()===ft.x.AUDIO||U.resourceConfig().type==="live"||(0,se.iT)(U.publicId())||this.videojs.activePlugins_&&this.videojs.activePlugins_.vr)return;const ut=U.publicId(),gt=Object.assign({},U.transformation());gt&&(delete gt.streaming_profile,delete gt.video_codec),gt.flags=gt.flags||[],gt.flags.push("sprite");const Wt=U.config().url(`${ut}.vtt`,{transformation:gt}).replace(/\.json$/,"");et()(this.videojs.vttThumbnails)?this.videojs.vttThumbnails({src:Wt}):this.videojs.vttThumbnails.src(Wt)})}_initHighlightsGraph(){this.playerOptions.aiHighlightsGraph&&this.videojs.on(ft.f.CLD_SOURCE_CHANGED,(O,j)=>{let{source:U}=j;if(!U||U.getType()===ft.x.AUDIO||(0,se.iT)(U.publicId()))return;const ut=U.publicId(),gt=u()(U.transformation(),["start_offset","end_offset","duration"]),Wt=Object.assign({},gt);Wt.effect="preview",Wt.flags=Wt.flags||[],Wt.flags.push("getinfo");const Xt=U.config().url(`${ut}`,{transformation:Wt}).replace(/\.json$/,"");et()(this.videojs.aiHighlightsGraph)?this.videojs.aiHighlightsGraph({src:Xt}):this.videojs.aiHighlightsGraph.src(Xt)})}_initChapters(){!this.playerOptions.chaptersButton&&this.videojs.controlBar&&this.videojs.controlBar.removeChild("chaptersButton"),this.videojs.on(ft.f.CLD_SOURCE_CHANGED,(O,j)=>{let{source:U}=j;Dt()(U._chapters)&&U._chapters!==!0||!this.videojs.chapters||(et()(this.videojs.chapters)?this.videojs.chapters(U._chapters):this.videojs.chapters.src(U._chapters))})}_initInteractionAreas(){this.videojs.on(ft.f.READY,async()=>{this.options.videojsOptions.interactionDisplay&&this.videojs.interactionAreas&&this.videojs.interactionAreas(this,this.playerOptions,this._videojsOptions)})}_initColors(){this.videojs.colors(this.playerOptions.colors?{colors:this.playerOptions.colors}:{})}_initQualitySelector(){this.videojs.controlBar&&this.playerOptions.qualitySelector!==!1&&(this.videojs.httpSourceSelector({default:"auto"}),this.videojs.on(ft.f.LOADED_METADATA,()=>{cn.init(this.videojs)}),this.videojs.on(ft.f.LOADED_DATA,()=>{cn.setVisibility(this.videojs)}))}_initTextTracks(){this.videojs.on(ft.f.CLD_SOURCE_CHANGED,(O,j)=>{let{source:U}=j;this.setTextTracks(U._textTracks)})}_initPerSrcBehaviors(){this.videojs.perSourceBehaviors&&this.videojs.perSourceBehaviors()}_initJumpButtons(){!this.playerOptions.showJumpControls&&this.videojs.controlBar&&(this.videojs.controlBar.removeChild("JumpForwardButton"),this.videojs.controlBar.removeChild("JumpBackButton"))}_initPictureInPicture(){!this.playerOptions.pictureInPictureToggle&&this.videojs.controlBar&&this.videojs.controlBar.removeChild("pictureInPictureToggle")}_initCloudinary(){const{cloudinaryConfig:O}=this.playerOptions.cloudinary;O.chainTarget=this,O.secure!==!1&&(0,se.lP)(O,{secure:!0}),this.videojs.cloudinary(this.playerOptions.cloudinary)}_initAnalytics(){const O=this.playerOptions.analytics;if(!window.ga&&O&&this.playerOptions.debug)console.error("Google Analytics script is missing");else if(O){const j=typeof O=="object"?O:{};this.videojs.analytics(j)}}_initCloudinaryAnalytics(){if(this.playerOptions.cloudinaryAnalytics){this.videojs.videoElement=this.videoElement;const O=ct()(this.playerOptions.cloudinaryAnalytics)?this.playerOptions.cloudinaryAnalytics:{};this.videojs.cloudinaryAnalytics(O)}}reTryVideo(O,j){if(!this.isVideoReady())if(this.nbCalls<O)this.nbCalls++,this.reTryId=this.videojs.setTimeout(()=>this.reTryVideo(O,j),j);else{let U=new Error("Video is not ready please try later");this.videojs.trigger("error",U)}}isVideoReady(){return this.videojs.readyState()>=(/iPad|iPhone|iPod/.test(navigator.userAgent)?1:4)&&(this.nbCalls=0,!0)}_initAutoplay(){this.playerOptions.autoplayMode==="on-scroll"&&this.videojs.autoplayOnScroll()}_initContextMenu(){this.playerOptions.hideContextMenu||this.videojs.contextMenu(En.A.contextMenu)}_initFloatingPlayer(){this.playerOptions.floatingWhenNotVisible!==_s.rT.NONE&&this.videojs.floatingPlayer({floatTo:this.playerOptions.floatingWhenNotVisible})}_setCssClasses(){this.videojs.addClass(rs.A.CLASS_PREFIX),this.videojs.addClass(rs.A.playerClassPrefix(this.videojs)),rs.A.setSkinClassPrefix(this.videojs,rs.A.skinClassPrefix(this.videojs))}_onReady(){this._setExtendedEvents();const O=this.playerOptions.source||this.playerOptions.publicId;O&&this.source(O,this.playerOptions)}_onSourceChange(){this._sendInternalAnalytics(),this._initQualitySelector()}_setExtendedEvents(){const O=[];this.playerOptions.playedEventPercents&&O.push({type:ft.f.PERCENTS_PLAYED,percents:this.playerOptions.playedEventPercents}),this.playerOptions.playedEventTimes&&O.push({type:ft.f.TIME_PLAYED,times:this.playerOptions.playedEventTimes}),O.push(ft.f.SEEK,ft.f.MUTE,ft.f.UNMUTE,ft.f.QUALITY_CHANGED);const j=new $e(this.videojs,{events:O});Object.keys(j.events).forEach(U=>{j.on(U,(ut,gt)=>{this.videojs.trigger({type:U,eventData:gt})})})}cloudinaryConfig(O){return this.videojs.cloudinary.cloudinaryConfig(O)}currentPublicId(){return this.videojs.cloudinary.currentPublicId()}currentSourceUrl(){return this.videojs.currentSource().src}currentPoster(){return this.videojs.cloudinary.currentPoster()}source(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if({publicId:O,options:j}=(0,se.a5)(O,j),!this._isPlayerConfigValid)return;if(this.playerOptions.debug&&(0,xs.Is)(j).then(gt=>{gt||this.videojs.error("invalid source configuration")}),this._sendInternalAnalytics({source:j}),O instanceof Oe.A)return this.videojs.cloudinary.source(O,j);j.shoppable&&this.videojs.shoppable&&this.videojs.shoppable(this.videojs,j),this.playerOptions.allowUsageReport&&(j.usageReport=!0),this.playerOptions.withCredentials&&(j.withCredentials=!0),clearTimeout(this.reTryId),this.nbCalls=0;const U=this.videojs.options_.maxTries||3,ut=this.videojs.options_.videoTimeout||55e3;return this.reTryVideo(U,ut),this.videojs.cloudinary.source(O,j)}posterOptions(O){return this.videojs.cloudinary.posterOptions(O)}skin(O){return O!==void 0&&Mt()(O)&&rs.A.setSkinClassPrefix(this.videojs,O),rs.A.skinClassPrefix(this.videojs)}playlist(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j=Object.assign({},j,{playlistWidget:this.playerOptions.playlistWidget}),this.videojs.one(ft.f.READY,async()=>{(await this.videojs.playlist(j))(O,j)}),this.videojs.cloudinary.playlist?this.videojs.cloudinary.playlist(O,j):this}playlistByTag(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j=Object.assign({},j,{playlistWidget:this.playerOptions.playlistWidget}),new Promise(U=>{this.videojs.one(ft.f.READY,async()=>{(await this.videojs.playlist(j))(await this.sourcesByTag(O,j),j),U(this)})})}sourcesByTag(O){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.videojs.cloudinary.sourcesByTag(O,j)}fluid(O){return O===void 0?this.videojs.fluid():(O?this.videojs.addClass(_s.gi):this.videojs.removeClass(_s.gi),this.videojs.fluid(O),this.videojs.trigger(ft.f.FLUID,O),this)}play(){return this.playWasCalled=!0,this.videojs.play(),this}stop(){return this.pause(),this.currentTime(0),this}playPrevious(){return this.playlist().playPrevious(),this}playNext(){return this.playlist().playNext(),this}transformation(O){return this.videojs.cloudinary.transformation(O)}sourceTypes(O){return this.videojs.cloudinary.sourceTypes(O)}sourceTransformation(O){return this.videojs.cloudinary.sourceTransformation(O)}autoShowRecommendations(O){return this.videojs.cloudinary.autoShowRecommendations(O)}duration(){return this.videojs.duration()}height(O){return O?(this.videojs.height(O),this):this.videojs.height()}width(O){return O?(this.videojs.width(O),this):this.videojs.width()}volume(O){return O?(this.videojs.volume(O),this):this.videojs.volume()}mute(){return this.isMuted()||this.videojs.muted(!0),this}unmute(){return this.isMuted()&&this.videojs.muted(!1),this}isMuted(){return this.videojs.muted()}pause(){return this.videojs.pause(),this}currentTime(O){return O||O===0?(this.videojs.currentTime(O),this):this.videojs.currentTime()}maximize(){return this.isMaximized()||this.videojs.requestFullscreen(),this}exitMaximize(){return this.isMaximized()&&this.videojs.exitFullscreen(),this}isMaximized(){return this.videojs.isFullscreen()}dispose(){this.videojs.dispose()}controls(O){return O===void 0?this.videojs.controls():(this.videojs.controls(O),this)}ima(){return{playAd:this.videojs.ima.playAd}}loop(O){return O===void 0?this.videojs.loop():(this.videojs.loop(O),this)}el(){return this.videojs.el()}}const Bs=ds;var As=l(6606),xn=l(4870);const Ki=q=>!!As.defaultProfiles.find(O=>{let{name:j}=O;return q===j}),je=async(q,O,j)=>{const{profile:U,...ut}=O;try{const gt=U?await(async(Yt,we)=>{if(Ki(Yt))return(be=>{const Ue=As.defaultProfiles.find(Ve=>{let{name:Xe}=Ve;return be===Xe});if(!Ue)throw new Error(`Default profile with name ${be} does not exist`);return Ue.config})(Yt);const te=(0,xn.D)(null,we.cloudName??we.cloud_name,we.private_cdn,we.cdn_subdomain,we.secure_cdn_subdomain,we.cname,we.secure??!0,we.secure_distribution),Ee=(0,se.iT)(Yt)?Yt:`${te}/_applet_/video_service/video_player_profiles/${Yt.replaceAll(" ","+")}.json`;return fetch(Ee,{method:"GET"}).then(be=>be.json())})(U,ut):{},Wt=Object.assign({},gt.playerOptions,ut,{_internalAnalyticsMetadata:{newPlayerMethod:!0,profile:Ki(U)?U:!!U}}),Xt=new Bs(q,Wt,j),de=Xt.source;return Xt.source=(Yt,we)=>{const te=Object.assign({},gt.sourceOptions,we);return de.call(Xt,Yt,te)},Xt}catch(gt){throw new Bs(q,ut).videojs.error("Invalid profile"),gt}};var Fn=l(5072),yr=l.n(Fn);const Js=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=arguments.length>1?arguments[1]:void 0;const j=u()((U=>{let ut={};for(const gt of Object.keys(U))ut[yr()(gt)]=U[gt];return ut})(q),_s._V);return Object.assign(q,{cloudinaryConfig:O||j})},Fs=q=>(O,j,U)=>new Bs(O,Js(j,q),U),Qn=q=>(O,j,U)=>Bs.all(O,Js(j,q),U),ps=Fs(),Is=Qn(),gi=(q,O,j)=>{const U=document.querySelectorAll(q),ut=Js(O,void 0);return[...U].map(gt=>je(gt,ut,j))},un={...window.cloudinary||{},videoPlayer:ps,videoPlayers:Is,player:(q,O,j)=>je(q,Js(O,void 0),j),players:gi,Cloudinary:{new:q=>(console.warn("Cloudinary.new() is deprecated and will be removed. Please use cloudinary.videoPlayer() instead."),{videoPlayer:Fs(q),videoPlayers:Qn(q)})}};window.cloudinary=un;const Ps=un,kn=Ps.videoPlayer,_r=Ps.videoPlayers,An=Ps.player,In=Ps},9388:(T,C,l)=>{l.d(C,{bo:()=>Ni,dC:()=>$n,ww:()=>qs,lP:()=>yi,KA:()=>$i,iT:()=>me,Nl:()=>Gt,N7:()=>Pi,a5:()=>Zn,M6:()=>Ca});var g=l(7938),u=l.n(g),y=l(4319),m=l.n(y),E=l(5871),I=l(8953),F=l.n(I),D=l(7571),X=l.n(D),R=l(5226);function Z(w){return typeof w=="object"&&w!==null}function dt(w){let b="";return b=typeof window<"u"?btoa(encodeURI(decodeURI(w))):global.Buffer.from(w).toString("base64"),b.replace(/\+/g,"-").replace(/\//g,"_")}var Dt=l(4728);function rt(w,b=/([^a-zA-Z0-9_.\-\/:]+)/g){return w.replace(b,function(H){return H.split("").map(function(it){return"%"+it.charCodeAt(0).toString(16).toUpperCase()}).join("")})}const pt=w=>w.replace(/[A-Z]/g,b=>`_${b.toLowerCase()}`);class ${constructor(b){this.options={},b!=null&&["resourceType","type","publicId","format"].forEach(H=>{var it;return this.options[H]=(it=b[H])!=null?it:b[pt(H)]})}resourceType(b){return this.options.resourceType=b,this}type(b){return this.options.type=b,this}publicId(b){return this.options.publicId=b,this}getPublicId(){var b;return(b=this.options.publicId)!=null?b.replace(/\//g,":"):void 0}getFullPublicId(){return this.options.format!=null?this.getPublicId()+"."+this.options.format:this.getPublicId()}format(b){return this.options.format=b,this}toString(){let b=[];if(this.options.publicId==null)throw"Must supply publicId";return this.options.resourceType!=="image"&&b.push(this.options.resourceType),this.options.type!=="upload"&&b.push(this.options.type),b.push(this.getFullPublicId()),b.filter(H=>!!H).join(":")}clone(){return new $(this.options)}}const et=$;function Q(w){return w==null||typeof w=="object"&&Object.keys(w).length===0||typeof w=="string"&&w.trim().length===0}const ct=function(w){return w!=null&&!isNaN(parseFloat(w))},K=class extends et{constructor(w){let b;super(w),b=["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","fontHinting","fontAntialiasing","text"],w!=null&&b.forEach(H=>{var it;return this.options[H]=(it=w[H])!=null?it:w[pt(H)]}),this.options.resourceType="text"}resourceType(w){throw"Cannot modify resourceType for text layers"}type(w){throw"Cannot modify type for text layers"}format(w){throw"Cannot modify format for text layers"}fontFamily(w){return this.options.fontFamily=w,this}fontSize(w){return this.options.fontSize=w,this}fontWeight(w){return this.options.fontWeight=w,this}fontStyle(w){return this.options.fontStyle=w,this}textDecoration(w){return this.options.textDecoration=w,this}textAlign(w){return this.options.textAlign=w,this}stroke(w){return this.options.stroke=w,this}letterSpacing(w){return this.options.letterSpacing=w,this}lineSpacing(w){return this.options.lineSpacing=w,this}fontHinting(w){return this.options.fontHinting=w,this}fontAntialiasing(w){return this.options.fontAntialiasing=w,this}text(w){return this.options.text=w,this}toString(){var w,b,H,it,Tt,Vt,Jt,ee,Be;if(Jt=this.textStyleIdentifier(),this.options.publicId!=null&&(H=this.getFullPublicId()),this.options.text!=null){if(w=!Q(H),b=!Q(Jt),w&&b||!w&&!b)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";for(it=/\$\([a-zA-Z]\w*\)/g,Vt=0,Be=rt(this.options.text,/[,\/]/g),ee="";Tt=it.exec(Be);)ee+=rt(Be.slice(Vt,Tt.index)),ee+=Tt[0],Vt=Tt.index+Tt[0].length;ee+=rt(Be.slice(Vt))}return[this.options.resourceType,Jt,H,ee].filter(Fe=>!!Fe).join(":")}textStyleIdentifier(){var w;if(w=[],this.options.fontWeight!=="normal"&&w.push(this.options.fontWeight),this.options.fontStyle!=="normal"&&w.push(this.options.fontStyle),this.options.textDecoration!=="none"&&w.push(this.options.textDecoration),w.push(this.options.textAlign),this.options.stroke!=="none"&&w.push(this.options.stroke),Q(this.options.letterSpacing)&&!ct(this.options.letterSpacing)||w.push("letter_spacing_"+this.options.letterSpacing),Q(this.options.lineSpacing)&&!ct(this.options.lineSpacing)||w.push("line_spacing_"+this.options.lineSpacing),Q(this.options.fontAntialiasing)||w.push("antialias_"+this.options.fontAntialiasing),Q(this.options.fontHinting)||w.push("hinting_"+this.options.fontHinting),!Q(w.filter(b=>!!b))){if(Q(this.options.fontFamily))throw`Must supply fontFamily. ${w}`;if(Q(this.options.fontSize)&&!ct(this.options.fontSize))throw"Must supply fontSize."}return w.unshift(this.options.fontFamily,this.options.fontSize),w.filter(b=>!!b).join("_")}};function Mt(w){const b=[];let H="";if(Object.keys(Dt.Bu).forEach(it=>{let Tt=Dt.Bu[it],Vt=w[it]||Tt;Vt!==Tt&&b.push(Vt)}),Object.keys(w).forEach(it=>{it!=="letter_spacing"&&it!=="line_spacing"||b.push(`${it}_${w[it]}`),it==="font_hinting"&&b.push(`${it.split("_").pop()}_${w[it]}`),it==="font_antialiasing"&&b.push(`antialias_${w[it]}`)}),w.hasOwnProperty("font_size")||!b||b.length===0){if(!w.font_size)throw"Must supply font_size for text in overlay/underlay";if(!w.font_family)throw"Must supply font_family for text in overlay/underlay";b.unshift(w.font_size),b.unshift(w.font_family),H=b.filter(it=>it).join("_")}return H}function B(w){if(w instanceof K||w instanceof et)return w.toString();let b="";if(Z(w))if(w.resource_type==="fetch"||w.url!=null)b=`fetch:${dt(w.url)}`;else{let H=w.public_id,it=w.format,Tt=w.resource_type||"image",Vt=w.type||"upload",Jt=w.text,ee=null,Be=[];const Fe=!H||H.length===0;if(Fe||(H=H.replace(new RegExp("/","g"),":"),it!=null&&(H=`${H}.${it}`)),Jt&&Jt.length!==0||Tt==="text"){if(Tt="text",Vt=null,ee=Mt(w),Jt&&Jt.length>=0){const xi=!ee;if(!Fe&&!xi||Fe&&xi)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay";let is=/\$\([a-zA-Z]\w*\)/g,ki=0,Se=rt(decodeURIComponent(Jt),/[,\/]/g);Jt="";for(let Le=is.exec(Se);Le;Le=is.exec(Se))Jt+=rt(Se.slice(ki,Le.index)),Jt+=Le[0],ki=Le.index+Le[0].length;Jt+=encodeURIComponent(Se.slice(ki))}}else{if(Fe)throw"Must supply public_id for resource_type layer_parameter";Tt==="subtitles"&&(ee=Mt(w))}Tt!=="image"&&Be.push(Tt),Vt!=="upload"&&Be.push(Vt),Be.push(ee),Be.push(H),Be.push(Jt),b=Be.filter(xi=>xi).join(":")}else b=/^fetch:.+/.test(w)?`fetch:${dt(w.substr(6))}`:w;return b}function W(w){if(typeof w!="string"||w.length===0||w.match(/^!.+!$/))return w&&w.toString();w=String(w);const b=new RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g");w=w.replace(b,Tt=>Dt.vo[Tt]);const H="("+Object.keys(Dt.wL).join("|")+")",it=new RegExp(`(\\$_*[^_ ]+)|${H}`,"g");return(w=w.replace(it,Tt=>Dt.wL[Tt]||Tt)).replace(/[ _]+/g,"_")}function at(w){switch(!0){case w==null:return[];case Array.isArray(w):return w;default:return[w]}}function At(w){if(!Z(w))return w;if(w.function_type==="remote"){const b=dt(w.source).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return[w.function_type,b].join(":")}return[w.function_type,w.source].join(":")}function Ot(w){switch(w&&w.constructor){case String:return Dt.K9.test(w)?w.split(".."):w;case Array:return[[w],w[w.length-1]];default:return[null,null]}}function vt(w){const b=String(w).match(Dt.qw);if(b){const H=b[5]?"p":"";return`${b[1]||b[4]}${H}`}return w}function It(w){switch(w&&w.constructor){case Object:{let b="";return"codec"in w&&(b=w.codec,"profile"in w&&(b+=":"+w.profile,"level"in w&&(b+=":"+w.level))),b}case String:return w;default:return null}}class Rt{constructor(b){this.expressions=[],b!=null&&this.expressions.push(Rt.normalize(b))}static new(b){return new this(b)}static normalize(b){var H,it,Tt;return b==null?b:(b=String(b),H=new RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^)(?=[ _]))","g"),b=b.replace(H,Vt=>Et[Vt]),it="("+Object.keys(Bt).join("|")+")",Tt=new RegExp(it,"g"),(b=b.replace(Tt,(Vt,Jt,ee)=>b[ee-1]==="$"?Vt:Bt[Vt])).replace(/[ _]+/g,"_"))}serialize(){return Rt.normalize(this.expressions.join("_"))}toString(){return this.serialize()}getParent(){return this.parent}setParent(b){return this.parent=b,this}predicate(b,H,it){return Et[H]!=null&&(H=Et[H]),this.expressions.push(`${b}_${H}_${it}`),this}and(){return this.expressions.push("and"),this}or(){return this.expressions.push("or"),this}then(){return this.getParent().if(this.toString())}height(b,H){return this.predicate("h",b,H)}width(b,H){return this.predicate("w",b,H)}aspectRatio(b,H){return this.predicate("ar",b,H)}pageCount(b,H){return this.predicate("pc",b,H)}faceCount(b,H){return this.predicate("fc",b,H)}value(b){return this.expressions.push(b),this}static variable(b,H){return new this(b).value(H)}static width(){return new this("width")}static height(){return new this("height")}static initialWidth(){return new this("initialWidth")}static initialHeight(){return new this("initialHeight")}static aspectRatio(){return new this("aspectRatio")}static initialAspectRatio(){return new this("initialAspectRatio")}static pageCount(){return new this("pageCount")}static faceCount(){return new this("faceCount")}static currentPage(){return new this("currentPage")}static tags(){return new this("tags")}static pageX(){return new this("pageX")}static pageY(){return new this("pageY")}}const Et={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},Bt={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp","preview:duration":"preview:duration",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_duration:"idu",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialDuration:"idu",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},Qt=Rt,he=class extends Qt{constructor(w){super(w)}height(w,b){return this.predicate("h",w,b)}width(w,b){return this.predicate("w",w,b)}aspectRatio(w,b){return this.predicate("ar",w,b)}pageCount(w,b){return this.predicate("pc",w,b)}faceCount(w,b){return this.predicate("fc",w,b)}duration(w,b){return this.predicate("du",w,b)}initialDuration(w,b){return this.predicate("idu",w,b)}};var Zt="__lodash_hash_undefined__",ge=9007199254740991,ae="[object Arguments]",Te="[object Boolean]",Ae="[object Date]",Ie="[object Function]",Ke="[object GeneratorFunction]",Kt="[object Map]",ze="[object Number]",ei="[object Object]",We="[object Promise]",Di="[object RegExp]",Qe="[object Set]",Pt="[object String]",Ct="[object Symbol]",Nt="[object WeakMap]",Ft="[object ArrayBuffer]",ft="[object DataView]",ce="[object Float32Array]",oi="[object Float64Array]",di="[object Int8Array]",ii="[object Int16Array]",fi="[object Int32Array]",Ge="[object Uint8Array]",$e="[object Uint8ClampedArray]",He="[object Uint16Array]",Y="[object Uint32Array]",ot=/\w*$/,Ut=/^\[object .+?Constructor\]$/,$t=/^(?:0|[1-9]\d*)$/,Ht={};Ht[ae]=Ht["[object Array]"]=Ht[Ft]=Ht[ft]=Ht[Te]=Ht[Ae]=Ht[ce]=Ht[oi]=Ht[di]=Ht[ii]=Ht[fi]=Ht[Kt]=Ht[ze]=Ht[ei]=Ht[Di]=Ht[Qe]=Ht[Pt]=Ht[Ct]=Ht[Ge]=Ht[$e]=Ht[He]=Ht[Y]=!0,Ht["[object Error]"]=Ht[Ie]=Ht[Nt]=!1;var ke=typeof global=="object"&&global&&global.Object===Object&&global,le=typeof self=="object"&&self&&self.Object===Object&&self,se=ke||le||Function("return this")(),Oe=typeof Sa=="object"&&Sa&&!Sa.nodeType&&Sa,_e=Oe&&typeof wa=="object"&&wa&&!wa.nodeType&&wa,pi=_e&&_e.exports===Oe;function Ji(w,b){return w.set(b[0],b[1]),w}function P(w,b){return w.add(b),w}function N(w,b,H,it){var Tt=-1,Vt=w?w.length:0;for(it;++Tt<Vt;)H=b(H,w[Tt],Tt,w);return H}function J(w){var b=!1;if(w!=null&&typeof w.toString!="function")try{b=!!`${w}`}catch{}return b}function bt(w){var b=-1,H=Array(w.size);return w.forEach(function(it,Tt){H[++b]=[Tt,it]}),H}function zt(w,b){return function(H){return w(b(H))}}function fe(w){var b=-1,H=Array(w.size);return w.forEach(function(it){H[++b]=it}),H}var mi,ui=Array.prototype,Ci=Function.prototype,Ne=Object.prototype,Ri=se["__core-js_shared__"],vi=(mi=/[^.]+$/.exec(Ri&&Ri.keys&&Ri.keys.IE_PROTO||""))?`Symbol(src)_1.${mi}`:"",cs=Ci.toString,si=Ne.hasOwnProperty,ns=Ne.toString,ts=RegExp(`^${cs.call(si).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")}$`),us=pi?se.Buffer:void 0,Ys=se.Symbol,vn=se.Uint8Array,Cs=zt(Object.getPrototypeOf,Object),bn=Object.create,Xn=Ne.propertyIsEnumerable,fr=ui.splice,Yn=Object.getOwnPropertySymbols,Hr=us?us.isBuffer:void 0,Tn=zt(Object.keys,Object),Un=ds(se,"DataView"),_s=ds(se,"Map"),Ks=ds(se,"Promise"),Sn=ds(se,"Set"),ln=ds(se,"WeakMap"),Qs=ds(Object,"create"),Vr=je(Un),gr=je(_s),wn=je(Ks),zr=je(Sn),Kn=je(ln),rs=Ys?Ys.prototype:void 0,En=rs?rs.valueOf:void 0;function Ii(w){var b=-1,H=w?w.length:0;for(this.clear();++b<H;){var it=w[b];this.set(it[0],it[1])}}function Xi(w){var b=-1,H=w?w.length:0;for(this.clear();++b<H;){var it=w[b];this.set(it[0],it[1])}}function xs(w){var b=-1,H=w?w.length:0;for(this.clear();++b<H;){var it=w[b];this.set(it[0],it[1])}}function Yi(w){this.__data__=new Xi(w)}function Bn(w,b,H){var it=w[b];si.call(w,b)&&yr(it,H)&&(H!==void 0||b in w)||(w[b]=H)}function vs(w,b){for(var H=w.length;H--;)if(yr(w[H][0],b))return H;return-1}function Cn(w,b,H,it,Tt,Vt,Jt){var ee;if(it&&(ee=Vt?it(w,Tt,Vt,Jt):it(w)),ee!==void 0)return ee;if(!Is(w))return w;var Be=Js(w);if(Be){if(ee=function(Se){var Le=Se.length,ni=Se.constructor(Le);return Le&&typeof Se[0]=="string"&&si.call(Se,"index")&&(ni.index=Se.index,ni.input=Se.input),ni}(w),!b)return function(Se,Le){var ni=-1,Wi=Se.length;for(Le||(Le=Array(Wi));++ni<Wi;)Le[ni]=Se[ni];return Le}(w,ee)}else{var Fe=As(w),xi=Fe==Ie||Fe==Ke;if(Qn(w))return function(Se,Le){if(Le)return Se.slice();var ni=new Se.constructor(Se.length);return Se.copy(ni),ni}(w,b);if(Fe==ei||Fe==ae||xi&&!Vt){if(J(w))return Vt?w:{};if(ee=function(Se){return typeof Se.constructor!="function"||Ki(Se)?{}:Is(Le=Cs(Se))?bn(Le):{};var Le}(xi?{}:w),!b)return function(Se,Le){return ks(Se,Bs(Se),Le)}(w,function(Se,Le){return Se&&ks(Le,gi(Le),Se)}(ee,w))}else{if(!Ht[Fe])return Vt?w:{};ee=function(Se,Le,ni,Wi){var Ui,ss=Se.constructor;switch(Le){case Ft:return hs(Se);case Te:case Ae:return new ss(+Se);case ft:return function(Ce,hi){var Mi=hi?hs(Ce.buffer):Ce.buffer;return new Ce.constructor(Mi,Ce.byteOffset,Ce.byteLength)}(Se,Wi);case ce:case oi:case di:case ii:case fi:case Ge:case $e:case He:case Y:return function(Ce,hi){var Mi=hi?hs(Ce.buffer):Ce.buffer;return new Ce.constructor(Mi,Ce.byteOffset,Ce.length)}(Se,Wi);case Kt:return function(Ce,hi,Mi){return N(hi?Mi(bt(Ce),!0):bt(Ce),Ji,new Ce.constructor)}(Se,Wi,ni);case ze:case Pt:return new ss(Se);case Di:return function(Ce){var hi=new Ce.constructor(Ce.source,ot.exec(Ce));return hi.lastIndex=Ce.lastIndex,hi}(Se);case Qe:return function(Ce,hi,Mi){return N(hi?Mi(fe(Ce),!0):fe(Ce),P,new Ce.constructor)}(Se,Wi,ni);case Ct:return Ui=Se,En?Object(En.call(Ui)):{}}}(w,Fe,Cn,b)}}Jt||(Jt=new Yi);var is=Jt.get(w);if(is)return is;if(Jt.set(w,ee),!Be)var ki=H?function(Se){return function(Le,ni,Wi){var Ui=ni(Le);return Js(Le)?Ui:function(ss,Ce){for(var hi=-1,Mi=Ce.length,Ds=ss.length;++hi<Mi;)ss[Ds+hi]=Ce[hi];return ss}(Ui,Wi(Le))}(Se,gi,Bs)}(w):gi(w);return function(Se,Le){for(var ni=-1,Wi=Se?Se.length:0;++ni<Wi&&Le(Se[ni],ni)!==!1;);}(ki||w,function(Se,Le){ki&&(Se=w[Le=Se]),Bn(ee,Le,Cn(Se,b,H,it,Le,w,Jt))}),ee}function hs(w){var b=new w.constructor(w.byteLength);return new vn(b).set(new vn(w)),b}function ks(w,b,H,it){H||(H={});for(var Tt=-1,Vt=b.length;++Tt<Vt;){var Jt=b[Tt],ee=void 0;Bn(H,Jt,ee===void 0?w[Jt]:ee)}return H}function cn(w,b){var H,it,Tt=w.__data__;return((it=typeof(H=b))=="string"||it=="number"||it=="symbol"||it=="boolean"?H!=="__proto__":H===null)?Tt[typeof b=="string"?"string":"hash"]:Tt.map}function ds(w,b){var H=function(it,Tt){return it?.[Tt]}(w,b);return function(it){return!(!Is(it)||(Tt=it,vi&&vi in Tt))&&(ps(it)||J(it)?ts:Ut).test(je(it));var Tt}(H)?H:void 0}Ii.prototype.clear=function(){this.__data__=Qs?Qs(null):{}},Ii.prototype.delete=function(w){return this.has(w)&&delete this.__data__[w]},Ii.prototype.get=function(w){var b=this.__data__;if(Qs){var H=b[w];return H===Zt?void 0:H}return si.call(b,w)?b[w]:void 0},Ii.prototype.has=function(w){var b=this.__data__;return Qs?b[w]!==void 0:si.call(b,w)},Ii.prototype.set=function(w,b){return this.__data__[w]=Qs&&b===void 0?Zt:b,this},Xi.prototype.clear=function(){this.__data__=[]},Xi.prototype.delete=function(w){var b=this.__data__,H=vs(b,w);return!(H<0||(H==b.length-1?b.pop():fr.call(b,H,1),0))},Xi.prototype.get=function(w){var b=this.__data__,H=vs(b,w);return H<0?void 0:b[H][1]},Xi.prototype.has=function(w){return vs(this.__data__,w)>-1},Xi.prototype.set=function(w,b){var H=this.__data__,it=vs(H,w);return it<0?H.push([w,b]):H[it][1]=b,this},xs.prototype.clear=function(){this.__data__={hash:new Ii,map:new(_s||Xi),string:new Ii}},xs.prototype.delete=function(w){return cn(this,w).delete(w)},xs.prototype.get=function(w){return cn(this,w).get(w)},xs.prototype.has=function(w){return cn(this,w).has(w)},xs.prototype.set=function(w,b){return cn(this,w).set(w,b),this},Yi.prototype.clear=function(){this.__data__=new Xi},Yi.prototype.delete=function(w){return this.__data__.delete(w)},Yi.prototype.get=function(w){return this.__data__.get(w)},Yi.prototype.has=function(w){return this.__data__.has(w)},Yi.prototype.set=function(w,b){var H=this.__data__;if(H instanceof Xi){var it=H.__data__;if(!_s||it.length<199)return it.push([w,b]),this;H=this.__data__=new xs(it)}return H.set(w,b),this};var Bs=Yn?zt(Yn,Object):function(){return[]},As=function(w){return ns.call(w)};function xn(w,b){return!!(b=b??ge)&&(typeof w=="number"||$t.test(w))&&w>-1&&w%1==0&&w<b}function Ki(w){var b=w&&w.constructor;return w===(typeof b=="function"&&b.prototype||Ne)}function je(w){if(w!=null){try{return cs.call(w)}catch{}try{return`${w}`}catch{}}return""}function Fn(w){return Cn(w,!0,!0)}function yr(w,b){return w===b||w!=w&&b!=b}(Un&&As(new Un(new ArrayBuffer(1)))!=ft||_s&&As(new _s)!=Kt||Ks&&As(Ks.resolve())!=We||Sn&&As(new Sn)!=Qe||ln&&As(new ln)!=Nt)&&(As=function(w){var b=ns.call(w),H=b==ei?w.constructor:void 0,it=H?je(H):void 0;if(it)switch(it){case Vr:return ft;case gr:return Kt;case wn:return We;case zr:return Qe;case Kn:return Nt}return b});var Js=Array.isArray;function Fs(w){return w!=null&&function(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=ge}(w.length)&&!ps(w)}var Qn=Hr||function(){return!1};function ps(w){var b=Is(w)?ns.call(w):"";return b==Ie||b==Ke}function Is(w){var b=typeof w;return!!w&&(b=="object"||b=="function")}function gi(w){return Fs(w)?function(b,H){var it=Js(b)||function(ee){return function(Be){return function(Fe){return!!Fe&&typeof Fe=="object"}(Be)&&Fs(Be)}(ee)&&si.call(ee,"callee")&&(!Xn.call(ee,"callee")||ns.call(ee)==ae)}(b)?function(ee,Be){for(var Fe=-1,xi=Array(ee);++Fe<ee;)xi[Fe]=Be(Fe);return xi}(b.length,String):[],Tt=it.length,Vt=!!Tt;for(var Jt in b)!si.call(b,Jt)||Vt&&(Jt=="length"||xn(Jt,Tt))||it.push(Jt);return it}(w):function(b){if(!Ki(b))return Tn(b);var H=[];for(var it in Object(b))si.call(b,it)&&it!="constructor"&&H.push(it);return H}(w)}const un=function(w){let b=w.match(_r);return b=b.map(H=>H.charAt(0).toLocaleUpperCase()+H.slice(1).toLocaleLowerCase()),b[0]=b[0].toLocaleLowerCase(),b.join("")};var Ps,kn,_r=(kn="[A-Z]",Ps="[a-z]+",RegExp(kn+"+(?="+kn+Ps+")|"+kn+"?"+Ps+"|"+kn+"+|[0-9]+","g"));function An(w){return w}function In(w,b){for(let H=0;H<w.length;H++)if(w[H]===b)return!0;return!1}const q=class extends K{constructor(w){super(w),this.options.resourceType="subtitles"}};function O(w){return typeof w=="string"||w instanceof String}const j=class extends et{constructor(w){super(w),O(w)?this.options.url=w:w?.url&&(this.options.url=w.url)}url(w){return this.options.url=w,this}toString(){return`fetch:${dt(this.options.url)}`}};function U(w){return w instanceof Function}const ut=["accessibility","api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","placeholder","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","signature","ssl_detected","type","url_suffix","use_root_path","version"];function gt(w,...b){return b.forEach(H=>{Object.keys(H).forEach(it=>{H[it]!=null&&(w[it]=H[it])})}),w}class Wt{constructor(b,H,it=An){this.name=b,this.shortName=H,this.process=it}set(b){return this.origValue=b,this}serialize(){var b,H;return b=this.value(),H=Array.isArray(b)||Z(b)||O(b)?!Q(b):b!=null,this.shortName!=null&&H?`${this.shortName}_${b}`:""}value(){return this.process(this.origValue)}static norm_color(b){return b?.replace(/^#/,"rgb:")}static build_array(b){return b==null?[]:Array.isArray(b)?b:[b]}static process_video_params(b){var H;switch(b.constructor){case Object:return H="","codec"in b&&(H=b.codec,"profile"in b&&(H+=":"+b.profile,"level"in b&&(H+=":"+b.level))),H;case String:return b;default:return null}}}class Xt extends Wt{constructor(b,H,it=".",Tt=void 0){super(b,H,Tt),this.sep=it}serialize(){if(this.shortName!=null){let b=this.value();if(Q(b))return"";if(O(b))return`${this.shortName}_${b}`;{let H=b.map(it=>U(it.serialize)?it.serialize():it).join(this.sep);return`${this.shortName}_${H}`}}return""}value(){return Array.isArray(this.origValue)?this.origValue.map(b=>this.process(b)):this.process(this.origValue)}set(b){return b==null||Array.isArray(b)?super.set(b):super.set([b])}}class de extends Wt{constructor(b,H="t",it=".",Tt=void 0){super(b,H,Tt),this.sep=it}serialize(){let b="";const H=this.value();if(Q(H))return b;if((it=H).length&&it.every(O)){const Tt=H.join(this.sep);Q(Tt)||(b=`${this.shortName}_${Tt}`)}else b=H.map(Tt=>O(Tt)&&!Q(Tt)?`${this.shortName}_${Tt}`:U(Tt.serialize)?Tt.serialize():Z(Tt)&&!Q(Tt)?new Re(Tt).serialize():void 0).filter(Tt=>Tt);var it;return b}set(b){return this.origValue=b,Array.isArray(this.origValue)?super.set(this.origValue):super.set([this.origValue])}}class Yt extends Wt{constructor(b,H,it=Yt.norm_range_value){super(b,H,it)}static norm_range_value(b){let H=String(b).match(new RegExp("^(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?$"));if(H){let it=H[5]!=null?"p":"";b=(H[1]||H[4])+it}return b}}class we extends Wt{constructor(b,H,it=An){super(b,H,it)}serialize(){return this.value()}}class te extends Wt{value(){if(this.origValue==null)return"";let b;if(this.origValue instanceof et)b=this.origValue;else if(Z(this.origValue)){let H=function(it,Tt){var Vt,Jt;Vt={};for(let ee in it)Jt=it[ee],Tt&&(ee=Tt(ee)),Q(ee)||(Vt[ee]=Jt);return Vt}(this.origValue,un);b=H.resourceType==="text"||H.text!=null?new K(H):H.resourceType==="subtitles"?new q(H):H.resourceType==="fetch"||H.url!=null?new j(H):new et(H)}else b=O(this.origValue)?/^fetch:.+/.test(this.origValue)?new j(this.origValue.substr(6)):this.origValue:"";return b.toString()}static textStyle(b){return new K(b).textStyleIdentifier()}}class Ee{constructor(b){let H,it;H=void 0,it={},this.toOptions=Tt=>{let Vt={};if(Tt==null&&(Tt=!0),Object.keys(it).forEach(Jt=>Vt[Jt]=it[Jt].origValue),gt(Vt,this.otherOptions),Tt&&!Q(this.chained)){let Jt=this.chained.map(ee=>ee.toOptions());Jt.push(Vt),Vt={},gt(Vt,this.otherOptions),Vt.transformation=Jt}return Vt},this.setParent=Tt=>(H=Tt,Tt!=null&&this.fromOptions(typeof Tt.toOptions=="function"?Tt.toOptions():void 0),this),this.getParent=()=>H,this.param=(Tt,Vt,Jt,ee,Be)=>(Be==null&&(Be=U(ee)?ee:An),it[Vt]=new Wt(Vt,Jt,Be).set(Tt),this),this.rawParam=function(Tt,Vt,Jt,ee,Be){return Be=Xe(arguments),it[Vt]=new we(Vt,Jt,Be).set(Tt),this},this.rangeParam=function(Tt,Vt,Jt,ee,Be){return Be=Xe(arguments),it[Vt]=new Yt(Vt,Jt,Be).set(Tt),this},this.arrayParam=function(Tt,Vt,Jt,ee=":",Be=[],Fe=void 0){return Fe=Xe(arguments),it[Vt]=new Xt(Vt,Jt,ee,Fe).set(Tt),this},this.transformationParam=function(Tt,Vt,Jt,ee=".",Be=void 0,Fe=void 0){return Fe=Xe(arguments),it[Vt]=new de(Vt,Jt,ee,Fe).set(Tt),this},this.layerParam=function(Tt,Vt,Jt){return it[Vt]=new te(Vt,Jt).set(Tt),this},this.getValue=function(Tt){let Vt=it[Tt]&&it[Tt].value();return Vt??this.otherOptions[Tt]},this.get=function(Tt){return it[Tt]},this.remove=function(Tt){var Vt;switch(!1){case it[Tt]==null:return Vt=it[Tt],delete it[Tt],Vt.origValue;case this.otherOptions[Tt]==null:return Vt=this.otherOptions[Tt],delete this.otherOptions[Tt],Vt;default:return null}},this.keys=function(){var Tt;return function(){var Vt;for(Tt in Vt=[],it)Tt!=null&&Vt.push(Tt.match(be)?Tt:pt(Tt));return Vt}().sort()},this.toPlainObject=function(){var Tt,Vt,Jt;for(Vt in Tt={},it)Tt[Vt]=it[Vt].value(),Z(Tt[Vt])&&(Tt[Vt]=Fn(Tt[Vt]));return Q(this.chained)||((Jt=this.chained.map(ee=>ee.toPlainObject())).push(Tt),Tt={transformation:Jt}),Tt},this.chain=function(){var Tt;return Object.getOwnPropertyNames(it).length!==0&&(Tt=new this.constructor(this.toOptions(!1)),this.resetTransformations(),this.chained.push(Tt)),this},this.resetTransformations=function(){return it={},this},this.otherOptions={},this.chained=[],this.fromOptions(b)}fromOptions(b={}){if(b instanceof Ee)this.fromTransformation(b);else{(O(b)||Array.isArray(b))&&(b={transformation:b}),(b=Fn(b)).if&&(this.set("if",b.if),delete b.if);for(let H in b){let it=b[H];it!=null&&(H.match(be)?H!=="$attr"&&this.set("variable",H,it):this.set(H,it))}}return this}fromTransformation(b){return b instanceof Ee&&b.keys().forEach(H=>this.set(H,b.get(H).origValue)),this}set(b,...H){let it;return it=un(b),In(zi,it)?this[it].apply(this,H):this.otherOptions[b]=H[0],this}hasLayer(){return this.getValue("overlay")||this.getValue("underlay")}serialize(){var b,H,it,Tt,Vt,Jt,ee,Be,Fe,xi,is,ki,Se,Le,ni,Wi,Ui,ss;for(xi=this.chained.map(Ce=>Ce.serialize()),Tt=this.keys(),Le=(Vt=this.get("transformation"))!=null?Vt.serialize():void 0,b=(Jt=this.get("if"))!=null?Jt.serialize():void 0,Wi=function(Ce){var hi,Mi,Ds,Gi,Zs;if(Array.isArray(Ce)){for(Gi=[],hi=0,Mi=Ce.length;hi<Mi;hi++)[Ds,Zs]=Ce[hi],Gi.push(`${Ds}_${Qt.normalize(Zs)}`);return Gi}return Ce}((ee=this.get("variables"))!=null?ee.value():void 0),ss=["transformation","if","variables"],Tt=Tt.filter(Ce=>!ss.includes(Ce)),Ui=[],ki=[],H=0,it=Tt.length;H<it;H++)(is=Tt[H]).match(be)?Ui.push(is+"_"+Qt.normalize((Be=this.get(is))!=null?Be.value():void 0)):ki.push((Fe=this.get(is))!=null?Fe.serialize():void 0);switch(!1){case!O(Le):ki.push(Le);break;case!Array.isArray(Le):xi=xi.concat(Le)}return ki=function(){var Ce,hi,Mi;for(Mi=[],Ce=0,hi=ki.length;Ce<hi;Ce++)ni=ki[Ce],(Array.isArray(ni)&&!Q(ni)||!Array.isArray(ni)&&ni)&&Mi.push(ni);return Mi}(),ki=Ui.sort().concat(Wi).concat(ki.sort()),b==="if_end"?ki.push(b):Q(b)||ki.unshift(b),Q(Se=ki.filter(Ce=>!!Ce).join(Ve))||xi.push(Se),xi.filter(Ce=>!!Ce).join(Ue)}static listNames(){return zi}toHtmlAttributes(){let b,H,it,Tt,Vt,Jt,ee,Be;return it={},Object.keys(this.otherOptions).forEach(Fe=>{Jt=this.otherOptions[Fe],Be=pt(Fe),In(qn,Be)||In(ut,Be)||(b=/^html_/.test(Fe)?Fe.slice(5):Fe,it[b]=Jt)}),this.keys().forEach(Fe=>{/^html_/.test(Fe)&&(it[un(Fe.slice(5))]=this.getValue(Fe))}),this.hasLayer()||this.getValue("angle")||In(["fit","limit","lfill"],this.getValue("crop"))||(ee=(Tt=this.get("width"))!=null?Tt.origValue:void 0,H=(Vt=this.get("height"))!=null?Vt.origValue:void 0,parseFloat(ee)>=1&&it.width==null&&(it.width=ee),parseFloat(H)>=1&&it.height==null&&(it.height=H)),it}static isValidParamName(b){return zi.indexOf(un(b))>=0}toHtml(){var b;return(b=this.getParent())!=null&&typeof b.toHtml=="function"?b.toHtml():void 0}toString(){return this.serialize()}clone(){return new Ee(this.toOptions(!0))}}const be=/^\$[a-zA-Z0-9]+$/,Ue="/",Ve=",";function Xe(w){var b;return U(b=w?.[w.length-1])?b:void 0}function Me({function_type:w,source:b}){return w==="remote"?[w,btoa(b)].join(":"):w==="wasm"?[w,b].join(":"):void 0}class Re extends Ee{constructor(b){super(b)}static new(b){return new Re(b)}angle(b){return this.arrayParam(b,"angle","a",".",Qt.normalize),this}audioCodec(b){return this.param(b,"audio_codec","ac"),this}audioFrequency(b){return this.param(b,"audio_frequency","af"),this}aspectRatio(b){return this.param(b,"aspect_ratio","ar",Qt.normalize),this}background(b){return this.param(b,"background","b",Wt.norm_color),this}bitRate(b){return this.param(b,"bit_rate","br"),this}border(b){return this.param(b,"border","bo",H=>Z(H)?`${(H=Object.assign({},{color:"black",width:2},H)).width}px_solid_${Wt.norm_color(H.color)}`:H)}color(b){return this.param(b,"color","co",Wt.norm_color),this}colorSpace(b){return this.param(b,"color_space","cs"),this}crop(b){return this.param(b,"crop","c"),this}customFunction(b){return this.param(b,"custom_function","fn",()=>Me(b))}customPreFunction(b){if(!this.get("custom_function"))return this.rawParam(b,"custom_function","",()=>(b=Me(b))?`fn_pre:${b}`:b)}defaultImage(b){return this.param(b,"default_image","d"),this}delay(b){return this.param(b,"delay","dl"),this}density(b){return this.param(b,"density","dn"),this}duration(b){return this.rangeParam(b,"duration","du"),this}dpr(b){return this.param(b,"dpr","dpr",H=>(H=H.toString())!=null&&H.match(/^\d+$/)?H+".0":Qt.normalize(H))}effect(b){return this.arrayParam(b,"effect","e",":",Qt.normalize),this}else(){return this.if("else")}endIf(){return this.if("end")}endOffset(b){return this.rangeParam(b,"end_offset","eo"),this}fallbackContent(b){return this.param(b,"fallback_content"),this}fetchFormat(b){return this.param(b,"fetch_format","f"),this}format(b){return this.param(b,"format"),this}flags(b){return this.arrayParam(b,"flags","fl","."),this}gravity(b){return this.param(b,"gravity","g"),this}fps(b){return this.param(b,"fps","fps",H=>O(H)?H:Array.isArray(H)?H.join("-"):H)}height(b){return this.param(b,"height","h",()=>this.getValue("crop")||this.getValue("overlay")||this.getValue("underlay")?Qt.normalize(b):null)}htmlHeight(b){return this.param(b,"html_height"),this}htmlWidth(b){return this.param(b,"html_width"),this}if(b=""){var H,it,Tt,Vt,Jt;switch(b){case"else":return this.chain(),this.param(b,"if","if");case"end":for(this.chain(),H=Tt=this.chained.length-1;Tt>=0&&(it=this.chained[H].getValue("if"))!=="end"&&(it==null||(Vt=Re.new().if(it),this.chained[H].remove("if"),Jt=this.chained[H],this.chained[H]=Re.new().transformation([Vt,Jt]),it==="else"));H=Tt+=-1);return this.param(b,"if","if");case"":return he.new().setParent(this);default:return this.param(b,"if","if",ee=>he.new(ee).toString())}}keyframeInterval(b){return this.param(b,"keyframe_interval","ki"),this}ocr(b){return this.param(b,"ocr","ocr"),this}offset(b){var H,it;if([it,H]=U(b?.split)?b.split(".."):Array.isArray(b)?b:[null,null],it!=null&&this.startOffset(it),H!=null)return this.endOffset(H)}opacity(b){return this.param(b,"opacity","o",Qt.normalize),this}overlay(b){return this.layerParam(b,"overlay","l"),this}page(b){return this.param(b,"page","pg"),this}poster(b){return this.param(b,"poster"),this}prefix(b){return this.param(b,"prefix","p"),this}quality(b){return this.param(b,"quality","q",Qt.normalize),this}radius(b){return this.arrayParam(b,"radius","r",":",Qt.normalize),this}rawTransformation(b){return this.rawParam(b,"raw_transformation"),this}size(b){let H,it;if(U(b?.split))return[it,H]=b.split("x"),this.width(it),this.height(H)}sourceTypes(b){return this.param(b,"source_types"),this}sourceTransformation(b){return this.param(b,"source_transformation")}startOffset(b){return this.rangeParam(b,"start_offset","so"),this}streamingProfile(b){return this.param(b,"streaming_profile","sp"),this}transformation(b){return this.transformationParam(b,"transformation","t"),this}underlay(b){return this.layerParam(b,"underlay","u"),this}variable(b,H){return this.param(H,b,b),this}variables(b){return this.arrayParam(b,"variables"),this}videoCodec(b){return this.param(b,"video_codec","vc",Wt.process_video_params),this}videoSampling(b){return this.param(b,"video_sampling","vs"),this}width(b){return this.param(b,"width","w",()=>this.getValue("crop")||this.getValue("overlay")||this.getValue("underlay")?Qt.normalize(b):null),this}x(b){return this.param(b,"x","x",Qt.normalize),this}y(b){return this.param(b,"y","y",Qt.normalize),this}zoom(b){return this.param(b,"zoom","z",Qt.normalize),this}}const zi=["angle","audioCodec","audioFrequency","aspectRatio","background","bitRate","border","color","colorSpace","crop","customFunction","customPreFunction","defaultImage","delay","density","duration","dpr","effect","else","endIf","endOffset","fallbackContent","fetchFormat","format","flags","gravity","fps","height","htmlHeight","htmlWidth","if","keyframeInterval","ocr","offset","opacity","overlay","page","poster","prefix","quality","radius","rawTransformation","size","sourceTypes","sourceTransformation","startOffset","streamingProfile","transformation","underlay","variable","variables","videoCodec","videoSampling","width","x","y","zoom"],qn=zi.map(pt).concat(["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version","externalLibraries","max_timeout_ms"]),Jn=Re;function Os(w){if(typeof w=="string")return w;if(w instanceof Jn)return w.toString();if(Array.isArray(w))return w.map(pe=>Os(pe)).filter(pe=>pe).join("/");let b,H;const it=w.size,Tt=w.overlay||w.underlay,Vt=w.crop,Jt=at(w.angle).join("."),ee=(w.background||"").replace(/^#/,"rgb:"),Be=(w.color||"").replace(/^#/,"rgb:"),Fe=at(w.flags||[]).join("."),xi=w.dpr===void 0?w.dpr:function(pe){let Pe=pe.toString();return Pe?.match(/^\d+$/)?Pe+".0":Qt.normalize(Pe)}(w.dpr),is=B(w.overlay),ki=function(pe){let Pe=pe;if(!Pe)return Pe;if(Array.isArray(Pe)||(Pe=[Pe]),Pe.length===0||Pe.length>4)throw new Error("Radius array should contain between 1 and 4 values");if(Pe.findIndex(bs=>bs===null)>=0)throw new Error("Corner: Cannot be null");return Pe.map(W).join(":")}(w.radius),Se=B(w.underlay),Le=function(pe){return pe&&"if_"+W(pe)}(w.if),ni=At(w.custom_function),Wi=function(pe){const Pe=At(pe);return typeof Pe=="string"?`pre:${Pe}`:null}(w.custom_pre_function);let Ui=w.fps,ss=[],Ce=at(w.transformation||[]),hi=w.effect;const Mi=Tt||Jt||Vt==="fit"||Vt==="limit";if(it){const[pe,Pe]=it.split("x");b=pe,H=Pe}else b=w.width,H=w.height;b&&(b.toString().indexOf("auto")===0||Mi||parseFloat(b.toString())<1)&&delete w.width,H&&(Mi||parseFloat(H.toString())<1)&&delete w.height,Ce.some(pe=>typeof pe=="object")?Ce=Ce.map(pe=>Z(pe)?Os(pe):Os({transformation:pe})).filter(pe=>pe):(ss=Ce.join("."),Ce=[]),Array.isArray(hi)?hi=hi.join(":"):Z(hi)&&(hi=Object.entries(hi).map(([pe,Pe])=>`${pe}:${Pe}`));let Gi=w.border;Z(Gi)?Gi=`${Gi.width!=null?Gi.width:2}px_solid_${(Gi.color!=null?Gi.color:"black").replace(/^#/,"rgb:")}`:/^\d+$/.exec(Gi)&&(w.border=Gi,Gi=void 0),Array.isArray(Ui)&&(Ui=Ui.join("-"));const Zs={a:W(Jt),ar:W(w.aspect_ratio),b:ee,bo:Gi,c:Vt,co:Be,dpr:W(xi),e:W(hi),fl:Fe,fn:ni||Wi,fps:Ui,h:W(H),ki:W(w.keyframe_interval),l:is,o:W(w.opacity),q:W(w.quality),r:ki,t:ss,u:Se,w:W(b),x:W(w.x),y:W(w.y),z:W(w.zoom),ac:w.audio_codec,af:w.audio_frequency,br:w.bit_rate,cs:w.color_space,d:w.default_image,dl:w.delay,dn:w.density,du:vt(w.duration),eo:vt(w.end_offset||ct(w.end_offset)?w.end_offset:Ot(w.offset)[1]),f:w.fetch_format,g:w.gravity,pg:w.page,p:w.prefix,so:vt(w.start_offset||ct(w.start_offset)?w.start_offset:Ot(w.offset)[0]),sp:w.streaming_profile,vc:It(w.video_codec),vs:w.video_sampling},Je=[Le,Object.entries(w).filter(([pe,Pe])=>pe.startsWith("$")).map(([pe,Pe])=>`${pe}_${W(Pe)}`).sort().concat((w.variables||[]).map(([pe,Pe])=>`${pe}_${W(Pe)}`)).join(","),Object.entries(Zs).filter(([pe,Pe])=>!(Pe==null||typeof Pe=="string"&&Pe.length===0||Array.isArray(Pe)&&Pe.length===0)).map(([pe,Pe])=>`${pe}_${Pe}`).sort().join(","),w.raw_transformation].filter(pe=>pe).join(",");return Je&&Ce.push(Je),Ce.join("/")}var Ls=l(4870);const Zn=function(w,b){let{tolerateMissingId:H=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(F()(w)){const it=Object.assign({},w);if(w=(0,E.sliceAndUnsetProperties)(it,"publicId").publicId,!X()(w)&&!H)throw new Error("Source is missing 'publicId'.");b&&(b=Object.assign({},it,b))}return{publicId:w,options:b}},me=w=>R.P8.test(w),Gt=(w,b)=>{let H=w,it=b;return typeof w=="object"&&(H=w.src),typeof b=="object"&&(it=b.src),/^\/\//.test(H)&&(it=it.slice(it.indexOf("//"))),/^\/\//.test(it)&&(H=H.slice(H.indexOf("//"))),H===it},yi=(w,b)=>Object.assign(w,b),$i=(w,b)=>function(H,it){let Tt;it.type==="fetch"&&it.fetch_format==null&&(it.fetch_format=it.format);let Vt=it.type,Jt=it.resource_type||"image",ee=it.version;const Be=typeof it.force_version!="boolean"||it.force_version,Fe=(it.long_url_signature,it.format),xi=it.cloud_name;if(!xi)throw"cloud_name must be provided in the configuration";const is=it.private_cdn,ki=it.secure_distribution,Se=it.secure,Le=it.cdn_subdomain,ni=it.secure_cdn_subdomain,Wi=it.cname,Ui=it.shorten,ss=it.sign_url,Ce=(it.api_secret,it.url_suffix),hi=it.use_root_path,Mi=it.auth_token,Ds=/^(image|raw)\/([a-z0-9_]+)\/v(\d+)\/([^#]+)$/.exec(H);Ds&&(Jt=Ds[1],Vt=Ds[2],ee=Ds[3],H=Ds[4]);const Gi=H;if(H==null||(H=H.toString(),Vt===null&&H.match(/^https?:\//i)))return Gi;[Jt,Vt]=function(Je,pe,Pe,bs,xo){if(pe==null&&(pe="upload"),Pe!=null)if(Je==="image"&&pe==="upload")Je="images",pe=null;else if(Je==="image"&&pe==="private")Je="private_images",pe=null;else if(Je==="image"&&pe==="authenticated")Je="authenticated_images",pe=null;else if(Je==="raw"&&pe==="upload")Je="files",pe=null;else{if(Je!=="video"||pe!=="upload")throw new Error("URL Suffix only supported for image/upload, image/private, image/authenticated, video/upload and raw/upload");Je="videos",pe=null}if(bs){if(!(Je==="image"&&pe==="upload"||Je==="images"&&pe==null))throw new Error("Root path only supported for image/upload");Je=null,pe=null}return xo&&Je==="image"&&pe==="upload"&&(Je="iu",pe=null),[Je,pe]}(Jt,Vt,Ce,hi,Ui),[H,Tt]=function(Je,pe,Pe){let bs;if((Je=Je.replace(/([^:])\/\//g,"$1/")).match(/^https?:\//i))bs=Je=rt(Je);else{if(bs=Je=encodeURIComponent(decodeURIComponent(Je)).replace(/%3A/g,":").replace(/%2F/g,"/"),Pe){if(Pe.match(/[\.\/]/))throw new Error("url_suffix should not include . or /");Je=Je+"/"+Pe}pe!=null&&(Je=Je+"."+pe,bs=bs+"."+pe)}return[Je,bs]}(H,Fe,Ce),ee==null&&Be&&Tt.indexOf("/")>=0&&!Tt.match(/^v[0-9]+/)&&!Tt.match(/^https?:\//)&&(ee=1),ee=ee!=null?`v${ee}`:null;const Zs=Os(Fn(it)).replace(/([^:])\/\//g,"$1/");if(ss&&!Mi){let Je=[Zs,Tt].filter(function(pe){return pe!=null&&pe!==""}).join("/");try{for(let pe=0;Je!==decodeURIComponent(Je)&&pe<10;pe++)Je=decodeURIComponent(Je)}catch{}}return[(0,Ls.D)(H,xi,is,Le,ni,Wi,Se,ki),Jt,Vt,Zs,ee,H].filter(function(Je){return Je!=null&&Je!==""}).join("/").replace(" ","%20")}(w,m()(b,["chainTarget"])),Pi=(w,b)=>{const H=(it=>it.constructor.name==="Transformation"&&it.toOptions)(w)?w.toOptions():w;return new Jn(H).fromOptions(b).toOptions()},Ni={NO_SUPPORTED_MEDIA:6,CUSTOM:10,UNKNOWN_CUSTOMER:11,RESOURCE_NOT_FOUND:12,PRIVATE_RESOURCE:13,UNAUTHENTICATED:14},qs=w=>{let{errorMsg:b,publicId:H,cloudName:it,statusCode:Tt}=w;const Vt="Video cannot be played";let Jt={code:Ni.CUSTOM,message:`${Vt}${b?"- "+b:""}`,statusCode:Tt},ee=b.toLowerCase();return ee.startsWith("unknown customer")&&(Jt.code=Ni.UNKNOWN_CUSTOMER,Jt.message=`${Vt} Unknown cloud-name ${it}`),ee.startsWith("resource not found")&&(Jt.code=Ni.RESOURCE_NOT_FOUND,Jt.message=`${Vt} Public ID ${H} not found`),ee.startsWith("private resource")&&(Jt.code=Ni.PRIVATE_RESOURCE,Jt.message=`${Vt} Private video`),ee.startsWith("unauthenticated access")&&(Jt.message=`${Vt} Requires authentication`,Jt.code=Ni.UNAUTHENTICATED),Jt},$n={VP9:"vp9",HEV1:"hev1",H265:"h265",H264:"h264"},Ca=()=>{u().use("video/auto",()=>({async setSource(w,b){const{headers:H}=await fetch(w.src,{method:"HEAD",credentials:w.withCredentials?"include":"omit"});return b(null,{src:w.src,type:H.get("content-type")})}}))}},6770:(T,C,l)=>{l.d(C,{A:()=>m});var g=l(9388),u=l(5871),y=l(7311);const m=class{_transformation=null;constructor(E){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{publicId:F,options:D}=(0,g.a5)(E,I),{cloudinaryConfig:X}=(0,u.sliceAndUnsetProperties)(D,"cloudinaryConfig"),{transformation:R}=(0,u.sliceAndUnsetProperties)(D,"transformation"),{queryParams:Z}=(0,u.sliceAndUnsetProperties)(D,"queryParams");if(!X)throw new Error('Source is missing "cloudinaryConfig".');this.publicId=()=>F,this.cloudinaryConfig=()=>X,this.resourceConfig=()=>D,this.queryParams=()=>Z,this.getType=()=>this._type,this.transformation(R)}transformation(E){return E&&(this._transformation=E),this._transformation}config(){const E=this.cloudinaryConfig();return{cloud_name:E.cloudName,url:(I,F)=>{if((0,g.iT)(I))return I;const D=(0,g.N7)(this.resourceConfig(),F);return(0,g.KA)(I,{...E,...D})}}}url(){let{transformation:E}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return`${this.config().url(this.publicId(),{transformation:E||this.transformation()})}${this.queryParams()?(0,y.y)(this.queryParams()):""}`}}},4650:(T,C,l)=>{l.d(C,{A:()=>I});var g=l(6770),u=l(9388);const y=RegExp(`\\.(${["jpg","png","gif","webp"].join("|")})$$`),m={resource_type:"image",type:"upload",transformation:[]};class E extends g.A{constructor(D){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};({publicId:D,options:X}=(0,u.a5)(D,X)),D=D.replace(y,""),X=Object.assign({},m,X),super(D,X),this._type="ImageSource"}}const I=E},5226:(T,C,l)=>{l.d(C,{IH:()=>F,P8:()=>m,Tf:()=>u,XY:()=>E,cE:()=>y,uf:()=>I,vD:()=>g});const g={format:"jpg",resource_type:"video"},u={resource_type:"video",type:"upload",transformation:[],sourceTransformation:{},sourceTypes:["auto"],recommendations:null,info:{},interactionAreas:{},chapters:{}},y=RegExp(`\\.(${["3g2","3gp","avi","flv","m3u8","ts","m2ts","mts","mov","mkv","mp4","mpeg","mpd","mxf","ogv","webm","wmv"].join("|")})$$`),m=RegExp("https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)"),E={hls:"application/x-mpegURL",dash:"application/dash+xml",opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},I=["hls","dash","mpd","m3u8"],F={hls:"m3u8",dash:"mpd"}},5381:(T,C,l)=>{l.d(C,{A:()=>$});var g=l(5871),u=l(7311),y=l(2160),m=l.n(y),E=l(1104),I=l(5226),F=l(9388),D=l(7571),X=l.n(D),R=l(5004);const Z=et=>{return!!et&&(X()(et)?(Q=et)&&Object.values(F.dC).some(ct=>Q.includes(ct)):!!(ct=>["video_codec","streaming_profile"].some(K=>(0,R.isKeyInTransformation)(ct,K)))(et)||!!et.some?.(ct=>Z(ct)));var Q};var dt=l(6770),Dt=l(4650);let rt=0;class pt extends dt.A{constructor(Q){let ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const K=(0,F.iT)(Q);let{publicId:Mt,options:B}=(0,F.a5)(Q,ct);K||(Mt=Mt.replace(I.cE,"")),B=Object.assign({},I.Tf,B),B.poster||(B.poster=Object.assign({publicId:Mt},I.vD));const{poster:W,sourceTypes:at,sourceTransformation:At,info:Ot,recommendations:vt,textTracks:It,withCredentials:Rt,interactionAreas:Et,chapters:Bt}=(0,g.sliceAndUnsetProperties)(B,"poster","sourceTypes","sourceTransformation","info","recommendations","textTracks","withCredentials","interactionAreas","chapters");super(Mt,B),this._sourceTypes=null,this._recommendations=null,this._textTracks=null,this._poster=null,this._info=null,this._sourceTransformation=null,this._interactionAreas=null,this._chapters=null,this._type=E.x.VIDEO,this.isRawUrl=K,this.isLiveStream=B.type==="live",this._rawTransformation=B.raw_transformation,this.withCredentials=!!Rt,this.getInitOptions=()=>ct,this.poster(W),this.sourceTypes(at),this.sourceTransformation(At),this.info(Ot),this.interactionAreas(Et),this.chapters(Bt),this.recommendations(vt),this.textTracks(It),this.objectId=rt++}textTracks(Q){return Q===void 0?this._textTracks:(this._textTracks=Q,this)}recommendations(Q){return Q===void 0?this._recommendations:(this._recommendations=Q,this)}sourceTypes(Q){return Q?(this._sourceTypes=Q,this):this._sourceTypes}info(Q){return Q?(this._info=Q,this):this._info}interactionAreas(Q){return Q?(this._interactionAreas=Q,this):this._interactionAreas}chapters(Q){return Q?(this._chapters=Q,this):this._chapters}sourceTransformation(Q){return Q?(this._sourceTransformation=Q,this):this._sourceTransformation}poster(Q){let ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Q?Q instanceof Dt.A?(this._poster=Q,this):({publicId:Q,options:ct}=(0,F.a5)(Q,ct,{tolerateMissingId:!0}),!Q&&this.isRawUrl||this.isLiveStream?null:(Q||(Q=this.publicId(),ct=Object.assign({},ct,I.vD)),ct.cloudinaryConfig=ct.cloudinaryConfig||this.cloudinaryConfig(),this._poster=new Dt.A(Q,ct),this)):this._poster}contains(Q){return this.generateSources().some(ct=>(0,F.Nl)(ct,Q))}generateSources(){if(this.isRawUrl){const Q=this.sourceTypes()[0]==="auto"?null:this.sourceTypes()[0];return[this.generateRawSource(this.publicId(),Q)]}return this.sourceTypes().map(Q=>{const ct=this.sourceTransformation()[Q]||this.transformation(),K=function(It){It=It.toLowerCase().split("/").shift();let Rt=I.IH[It];return Rt||(Rt=It.split("/").shift()),Rt}(Q),Mt=I.uf.includes(K),B={};ct&&(B.transformation=m()(ct)),Object.assign(B,{resource_type:"video",format:K});const[W,at]=function(It){const[Rt,Et]=It.toLowerCase().split("/"),Bt=I.XY[Rt]||`video/${Rt}`;let Qt=[Bt];return Et&&(Qt=[Bt,{video_codec:Et}]),Qt}(Q);!at||Z(B.transformation)||Z(this._rawTransformation)||(B.transformation=(0,F.N7)(B.transformation,at)),B.format==="auto"&&(delete B.format,B.transformation=(0,F.N7)(B.transformation,{fetch_format:"auto:video"})),Mt&&(JSON.stringify(B.transformation||{}).includes('"streaming_profile":')||this.isLiveStream||(B.transformation=(0,F.N7)(B.transformation,{streaming_profile:"auto"})));const At=this.queryParams()?(0,u.y)(this.queryParams()):"",Ot=this.config().url(this.publicId(),B),vt=Ot.indexOf("?")>-1?At.replace("?","&"):At;return{type:W,src:Ot+vt,cldSrc:this,isAdaptive:Mt,withCredentials:this.withCredentials}})}generateRawSource(Q,ct){ct=ct||Q.split(".").pop();const K=I.uf.includes(ct);return{type:ct=I.XY[ct]?I.XY[ct]:ct?`video/${ct}`:null,src:Q,cldSrc:this,isAdaptive:K,withCredentials:this.withCredentials}}getInteractionAreas(){return this._interactionAreas}}const $=pt},4500:(T,C,l)=>{l.d(C,{A:()=>I,w:()=>m});var g=l(3066),u=l(8838);const y={colorsDark:{base:"#000000",accent:"#0D9AFF",text:"#FFFFFF"},colorsLight:{base:"#FFFFFF",accent:"#0D9AFF",text:"#000000"}},m=F=>(0,u.T4)(F)?y.colorsLight:y.colorsDark;class E{constructor(D){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.player=D;const R=m(this.player.options_);X.colors=Object.assign({},R,X.colors),this.init=()=>{Z(Dt(`
  .PLAYER-CLASS-PREFIX {
    --color-accent: --accent-color;
    --color-base: --base-color;
    --color-text: --text-color;

    color: --text-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-time-tooltip,
  .PLAYER-CLASS-PREFIX .vjs-mouse-display:after,
  .PLAYER-CLASS-PREFIX .vjs-play-progress:after {
    color: --text-color;
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-slider {
    background-color: rgba(--text-color, 0.2);
  }

  .PLAYER-CLASS-PREFIX .vjs-load-progress {
    background: rgba(--text-color, 0.3);
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-level {
    background: --text-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-play-progress {
    background: --accent-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-vertical {
    background-color: rgba(--base-color, 0.7);
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-panel-horizontal .vjs-control:before {
    border-color: transparent transparent rgba(--accent-color, 0.4) transparent;
  }

  .PLAYER-CLASS-PREFIX .vjs-volume-panel-horizontal .vjs-volume-level:before {
    border-color: transparent transparent --accent-color transparent;
  }

  .PLAYER-CLASS-PREFIX .vjs-progress-control:before {
    color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-highlights-graph-display {
    color: rgba(--text-color, 0.3);
  }

  .PLAYER-CLASS-PREFIX .vjs-title-bar {
    color: --text-color;
    background-image: linear-gradient(rgba(--base-color, 0.4), rgba(255, 255, 255, 0) 100%);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay {
    color: --text-color;
    background-color: rgba(--base-color, 0.4);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item {
    box-shadow: 0 0.5em 1.2em 0px --base-color;
    color: --text-color;
    border: 1px solid --text-color !important;
    position: relative;
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item:active,
  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item:hover {
    border: 1px solid --accent-color !important;
  }

  .PLAYER-CLASS-PREFIX .vjs-menu-content .vjs-menu-item:active,
  .PLAYER-CLASS-PREFIX .vjs-menu-content .vjs-menu-item:focus,
  .PLAYER-CLASS-PREFIX .vjs-menu-content .vjs-menu-item:hover {
    color: --text-color;
    background-color: rgba(--text-color, 0.2);
  }

  .PLAYER-CLASS-PREFIX.vjs-ad-playing .vjs-progress-control .vjs-play-progress {
    background: --base-color;
  }

  .PLAYER-CLASS-PREFIX.cld-plw-layout {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .cld-plw-item-info-wrap {
    color: --text-color;
  }

  .PLAYER-CLASS-PREFIX .cld-video-player-floater-close polygon {
    fill: --base-color;
  }

  .PLAYER-CLASS-PREFIX .cld-spbl-product-hotspot:after {
    background: --base-color;
    box-shadow: 0 0 0 4px --accent-color, 0 0 0 8px rgba(--text-color, 0.24);
  }

  .PLAYER-CLASS-PREFIX .cld-spbl-product-tooltip {
    color: --base-color;
    background: --text-color;
  }

  .PLAYER-CLASS-PREFIX .base-color-semi-bg {
    background: rgba(--base-color, 0.7);
  }

  .PLAYER-CLASS-PREFIX .text-color-semi-bg {
    background: rgba(--text-color, 0.7);
  }

  .PLAYER-CLASS-PREFIX .text-color-text {
    color: --text-color;
  }

  .PLAYER-CLASS-PREFIX .base-color-text {
    color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .accent-color-text {
    color: --accent-color;
  }
`)),this.player.options_.skin==="light"?Z(Dt(`
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .base-color-bg,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-control-bar,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-big-play-button,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-light .vjs-menu-button .vjs-menu-content {
    background-color: rgba(--base-color, 0.8);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary .vjs-recommendations-overlay-item-primary-content {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary:active .vjs-recommendations-overlay-item-primary-content,
  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary:hover .vjs-recommendations-overlay-item-primary-content {
    color: --base-color;
    background-color: rgba(--accent-color, 0.8);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary:active div,
  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary:hover div {
    color: --base-color;
    background-color: rgba(--accent-color, 0.8);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary div {
    background: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video {
    border: 1px solid --text-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video .vjs-upcoming-video-bar {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content {
    background-color: --base-color;
  }

  .PLAYER-CLASS-PREFIX .cld-plw-item-info-wrap {
    color: --text-color;
  }

  @media only screen and (max-width: 768px) {
    .PLAYER-CLASS-PREFIX.cld-plw-vertical .cld-plw-item-info-wrap {
      color: --accent-color;
    }
  }
`)):Z(Dt(`
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .base-color-bg,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-control-bar,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-big-play-button,
  .PLAYER-CLASS-PREFIX.cld-video-player-skin-dark .vjs-menu-button .vjs-menu-content {
    background-color: rgba(--base-color, 0.6);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-primary .vjs-recommendations-overlay-item-primary-content {
    background-color: rgba(--base-color, 0.6);
  }

  .PLAYER-CLASS-PREFIX .vjs-recommendations-overlay .vjs-recommendations-overlay-item.vjs-recommendations-overlay-item-secondary div {
    background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent 80%);
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video {
    border: 1px solid rgba(--text-color, 0.5);
  }

  .PLAYER-CLASS-PREFIX .vjs-upcoming-video .vjs-upcoming-video-bar {
    background-color: rgba(--base-color, 0.6);
  }

  .PLAYER-CLASS-PREFIX .vjs-context-menu-ui .vjs-menu-content {
    background-color: rgba(--base-color, 0.6);
  }
`))};const Z=rt=>{const pt=document.createElement("style");pt.innerHTML=rt,this.player.el_.appendChild(pt)},dt=rt=>{rt=rt.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function($,et,Q,ct){return et+et+Q+Q+ct+ct});const pt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(rt);return pt?parseInt(pt[1],16)+", "+parseInt(pt[2],16)+", "+parseInt(pt[3],16):null},Dt=rt=>rt.replace(/PLAYER\-CLASS\-PREFIX/g,(0,g.playerClassPrefix)(this.player)).replace(/rgba\(\-\-base\-color/g,"rgba("+dt(X.colors.base)).replace(/rgba\(\-\-accent\-color/g,"rgba("+dt(X.colors.accent)).replace(/rgba\(\-\-text\-color/g,"rgba("+dt(X.colors.text)).replace(/\-\-base\-color/g,X.colors.base).replace(/\-\-accent\-color/g,X.colors.accent).replace(/\-\-text\-color/g,X.colors.text)}}function I(){new E(this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).init()}},5004:(T,C,l)=>{l.r(C),l.d(C,{addTextTracks:()=>F,handleCldError:()=>E,isKeyInTransformation:()=>I});var g=l(9388),u=l(9339);const y={method:"head"},m={method:"get",credentials:"include",headers:{"Content-Range":"bytes=0-0"}},E=(D,X)=>{const R=X.fetchErrorUsingGet?m:y,Z=D.videojs.cloudinary.getCurrentSources();Z.length>0?Promise.all(Z.map(dt=>fetch(dt.src,R))).then(dt=>{const Dt=(pt=>pt.reduce(($,et)=>{if(et.status>=200&&et.status<399&&et.url!==""){const Q=new URL(et.url);$.push(Q.host+Q.pathname)}return $},[]))(dt),rt=dt[0];if(Dt.length){const pt=(($,et)=>$.filter(Q=>{const ct=new URL(Q.src);return et.indexOf(ct.host+ct.pathname)!==-1&&Q.try!==!0}))(Z,Dt);pt&&pt.length?(($,et)=>{$.options.playerOptions.debug&&console.log("Trying sources: ",et),et.forEach(Q=>{Q.try=!0}),$.videojs.autoplay($.videojs.autoplay()||$.playWasCalled),$.videojs.src(et)})(D,pt):D.videojs.error({code:g.bo.NO_SUPPORTED_MEDIA,message:"No supported media sources",statusCode:dt.status})}else((pt,$)=>{pt.videojs.error((0,g.ww)({errorMsg:$.headers.get("x-cld-error")||"",publicId:pt.currentPublicId(),cloudName:pt.cloudinaryConfig().cloud_name,error:$,statusCode:$.status}))})(D,rt)}).catch(dt=>{D.videojs.error({code:7,message:dt&&dt.message?dt.message:"Failed to test sources"})}):D.videojs.error({code:g.bo.NO_SUPPORTED_MEDIA,message:"No supported media sources"})},I=(D,X)=>!!(D&&X&&(Array.isArray(D)?(0,u.I)(D,R=>I(R,X)):D.getValue?D.getValue(X):D[X])),F=(D,X)=>{D.forEach(R=>{R.src?fetch(R.src,y).then(Z=>{Z.status>=200&&Z.status<=399&&X.addRemoteTextTrack(R,!0)}):X.pacedTranscript&&X.pacedTranscript(R)})}},1104:(T,C,l)=>{l.d(C,{f:()=>g,x:()=>u});const g={READY:"ready",PLAY:"play",PLAYING:"playing",PAUSE:"pause",SEEK:"seek",SEEKING:"seeking",MUTE:"mute",UNMUTE:"unmute",PAUSE_NO_SEEK:"pausenoseek",ERROR:"error",TIME_UPDATE:"timeupdate",EMPTIED:"emptied",RETRY_PLAYLIST:"retryplaylist",CAN_PLAY_THROUGH:"canplaythrough",CLD_SOURCE_CHANGED:"cldsourcechanged",SOURCE_CHANGED:"sourcechanged",LOADED_METADATA:"loadedmetadata",LOADED_DATA:"loadeddata",REFRESH_TEXT_TRACKS:"refreshTextTracks",PLAYLIST_CREATED:"playlistcreated",UP_COMING_VIDEO_SHOW:"upcomingvideoshow",UP_COMING_VIDEO_HIDE:"upcomingvideohide",PLAYLIST_ITEM_CHANGED:"playlistitemchanged",VOLUME_CHANGE:"volumechange",FLUID:"fluid",PLAYLIST_PANEL:"PlaylistPanel",ENDED:"ended",RESIZE:"resize",START:"start",VIDEO_LOAD:"videoload",PRODUCT_BAR_MIN:"productBarMin",SHOW_PRODUCTS_OVERLAY:"showProductsOverlay",SHOPPABLE_ITEM_CHANGED:"shoppableitemchanged",FULL_SCREEN_CHANGE:"fullscreenchange",PERCENTS_PLAYED:"percentsplayed",TIME_PLAYED:"timeplayed",PLAYER_LOAD:"playerload",DISPOSE:"dispose",QUALITY_CHANGED:"qualitychanged"},u={AUDIO:"AudioSource",VIDEO:"VideoSource"}},3066:(T,C,l)=>{l.r(C),l.d(C,{CLASS_PREFIX:()=>y,playerClassPrefix:()=>E,setSkinClassPrefix:()=>D,skinClass:()=>I,skinClassPrefix:()=>F});var g=l(7668),u=l(9339);const y="cld-video-player",m=`${y}-skin-`,E=X=>`${y}-${X.id_}`,I=X=>`${m}${X}`,F=X=>(0,u.I)(X.el().classList,R=>R.startsWith(m)),D=(X,R)=>{const Z=F(X),dt=!!R&&R.replace(m,"");let Dt="";Dt=dt?I(dt):X.options_.skin?I(X.options_.skin):I(g.A.skin),Dt!==Z&&(Z&&X.removeClass(Z),X.addClass(Dt)),dt&&X.options_.skin!==dt&&(X.options_.skin=dt)}},7134:(T,C,l)=>{l.d(C,{It:()=>D,cu:()=>F,n:()=>E,q2:()=>X});var g=l(2160),u=l.n(g),y=l(9040),m=l.n(y);const E=function(R){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=arguments.length>2?arguments[2]:void 0;const Dt=document.createElement(R);for(let rt in Z)Object.prototype.hasOwnProperty.call(Z,rt)&&Dt.setAttribute(rt,Z[rt]);return u()(dt).forEach(rt=>I(rt,Dt)),Dt},I=(R,Z)=>{if(m()(R))Z.appendChild(R);else if(R&&typeof R!="object"){const dt=document.createTextNode(R);Z.appendChild(dt)}},F=(R,Z)=>{for(let dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&(R.style[dt]=Z[dt]);return R},D=R=>{const Z=Array.isArray(R.children)?R.children.map(D):R.children,dt=m()(R)?R:E(R.tag,R.attr,Z);return R.onClick&&(R.event={name:"click",callback:R.onClick}),R.event&&dt.addEventListener(R.event.name,R.event.callback,!1),R.style&&F(dt,R.style),dt},X=(R,Z,dt)=>(R.addEventListener(Z,dt,!1),()=>{R.removeEventListener(Z,dt,!1)})},9339:(T,C,l)=>{function g(u,y){return Array.prototype.find&&Array.isArray(u)?u.find(y):function(m,E){for(let I=0;I<m.length;I++){const F=m[I];if(E(F,I,m))return[F,I]}return[void 0,-1]}(u,y)[0]}l.d(C,{I:()=>g})},7588:(T,C,l)=>{l.r(C),l.d(C,{fontFace:()=>y});var g=l(5303),u=l.n(g);const y=(m,E)=>{E===void 0&&(E="Inter"),E&&E!=="inherit"?(u().load({google:{families:[E]}}),m.style.fontFamily=E):E==="inherit"&&(m.style.fontFamily="inherit")}},5104:(T,C,l)=>{l.d(C,{A:()=>pt});var g={};l.r(g),l.d(g,{mixin:()=>I});var u={};l.r(u),l.d(u,{normalizeAttributes:()=>rt});var y=l(5871),m=l(3171),E=l(5004);function I(){for(var $=arguments.length,et=new Array($),Q=0;Q<$;Q++)et[Q]=arguments[Q];return et.reduce((ct,K)=>K(ct),class{})}var F=l(7588),D=l(3066),X=l(3686),R=l.n(X);const Z=/^(data-cld-)(\w+)/,dt={},Dt=$=>function(et){let Q=null;if(et==="")return!0;try{Q=JSON.parse(et)}catch{}return Q||(Q=Number(et),Q||et)}($),rt=$=>{const et={};if($&&$.attributes&&$.attributes.length>0){const Q=$.attributes;for(let ct=Q.length-1;ct>=0;ct--){let K=Q[ct].name,Mt=Q[ct].value;K.match(Z)&&(K=R()(K.replace(Z,"$2"))),Mt=typeof $[K]=="boolean"?Mt!==null:(dt[K]||Dt)(Mt),et[K]=Mt}}return et},pt=Object.assign({},y,m,E,F,g,D,u)},3171:(T,C,l)=>{function g(E){const I=E.getBoundingClientRect(),F=document.body,D=document.documentElement,X=window.pageYOffset||D.scrollTop||F.scrollTop,R=window.pageXOffset||D.scrollLeft||F.scrollLeft,Z=D.clientTop||F.clientTop||0,dt=D.clientLeft||F.clientLeft||0,Dt=I.top+X-Z,rt=I.left+R-dt;return{top:Math.round(Dt),left:Math.round(rt)}}function u(E,I){const F={},D=g(E),X=E.offsetWidth,R=E.offsetHeight,Z=D.top,dt=D.left;let Dt=I.pageY,rt=I.pageX;return I.changedTouches&&(rt=I.changedTouches[0].pageX,Dt=I.changedTouches[0].pageY),F.y=Math.max(0,Math.min(1,(Z-Dt+R)/R)),F.x=Math.max(0,Math.min(1,(rt-dt)/X)),F}function y(E,I){let{fraction:F}=I;const D=g(E),X=D.left,R=D.top,Z=E.offsetHeight,dt=E.offsetWidth,Dt=X+dt,rt=R+Z;return Math.max(0,Math.min(dt,window.pageXOffset+window.innerWidth-X,Dt-window.pageXOffset))*Math.max(0,Math.min(dt,window.pageYOffset+window.innerHeight-R,rt-window.pageYOffset))/(dt*Z)>F}function m(E,I,F){E.style.left=`${I}px`,E.style.top=`${F}px`}l.r(C),l.d(C,{getPointerPosition:()=>u,isElementInViewport:()=>y,setPosition:()=>m})},7311:(T,C,l)=>{l.d(C,{y:()=>g});const g=u=>{const y=Object.keys(u);return y.length?`?${y.map(m=>`${m}=${u[m]}`).join("&")}`:""}},5871:(T,C,l)=>{function g(m,E){for(var I=arguments.length,F=new Array(I>2?I-2:0),D=2;D<I;D++)F[D-2]=arguments[D];return F.reduce((X,R)=>(Object.prototype.hasOwnProperty.call(m,R)&&(X[R]=m[R],E&&delete m[R]),X),{})}function u(m){for(var E=arguments.length,I=new Array(E>1?E-1:0),F=1;F<E;F++)I[F-1]=arguments[F];return g(m,!1,...I)}function y(m){for(var E=arguments.length,I=new Array(E>1?E-1:0),F=1;F<E;F++)I[F-1]=arguments[F];return g(m,!0,...I)}l.r(C),l.d(C,{sliceAndUnsetProperties:()=>y,sliceProperties:()=>u})},5779:(T,C,l)=>{l.d(C,{I6:()=>D,Is:()=>X,O6:()=>E,QF:()=>I});var g=l(8446),u=l.n(g),y=l(8953),m=l.n(y);const E=R=>u()(R)?R():R,I=(R,Z,dt)=>{const Dt=E(R),rt=Dt.value(Z);return rt||console.error(`cloudinary video player: ${Dt.message(dt)}`),rt},F=(R,Z)=>{if(m()(Z)){for(let dt in R)if(Object.prototype.hasOwnProperty.call(Z,dt)){const Dt=R[dt],rt=Z[dt],pt=m()(Dt);if(pt&&!F(Dt,rt)||!pt&&!I(rt,Dt,dt))return!1}}return!0},D=async R=>l.e(40).then(l.bind(l,9754)).then(Z=>{let{playerValidators:dt}=Z;return F(R,dt)}),X=R=>l.e(40).then(l.bind(l,9754)).then(Z=>{let{sourceValidators:dt}=Z;return F(R,dt)})},608:(T,C,l)=>{l.d(C,{Am:()=>Z,HJ:()=>D,KE:()=>R,_V:()=>E,gi:()=>F,jK:()=>m,jV:()=>I,rT:()=>X,uy:()=>y});var g=l(7938),u=l.n(g);const y=["cloudinaryConfig","transformation","sourceTypes","sourceTransformation","posterOptions","autoShowRecommendations","fontFace","secure"],m=y.concat(["_internalAnalyticsMetadata","debug","publicId","source","autoplayMode","playedEventPercents","playedEventTimes","analytics","cloudinaryAnalytics","allowUsageReport","fluid","ima","playlistWidget","hideContextMenu","colors","floatingWhenNotVisible","ads","showJumpControls","chaptersButton","pictureInPictureToggle","textTracks","qualitySelector","fetchErrorUsingGet","withCredentials","seekThumbnails","aiHighlightsGraph","chapters","queryParams"]),E=["cloud_name","secure","private_cdn","secure_distribution","cdn_subdomain","secure_cdn_subdomain","cname","shorten","sign_url","api_secret","url_suffix","use_root_path","auth_token"],I={html5:{handlePartialData:!1,vhs:{overrideNative:!u()||!u().browser||!u().browser.IS_IOS&&!u().browser.IS_SAFARI}}},F="cld-fluid",D={ALWAYS:"always",ON_SCROLL:"on-scroll",NEVER:"never"},X={LEFT:"left",RIGHT:"right",NONE:"none"},R={FIRST_VIDEO:"first-video",EVERY_VIDEO:"every-video"},Z={AUTO:"auto",METADATA:"metadata",NONE:"none"}},8838:(T,C,l)=>{l.d(C,{T4:()=>Z,Wi:()=>Dt,eo:()=>R,go:()=>rt,iG:()=>dt});var g=l(7938),u=l.n(g),y=l(5104),m=l(7668),E=l(608),I=l(7571),F=l.n(I),D=l(3337),X=l.n(D);const R=(pt,$)=>pt.addRemoteTextTrack({kind:"metadata",srclang:"en",src:$,default:!0},!0).track,Z=pt=>pt.class.indexOf("cld-video-player-skin-light")>-1||pt.skin==="light",dt=pt=>{if(F()(pt)){let $=pt;$.indexOf("#")===0&&($=$.slice(1));try{pt=document.querySelector(`#${X()($)}`)||u().getPlayer($)}catch{pt=null}if(!pt)throw new Error(`Could not find element with id ${$}`)}if(!pt.tagName)throw new Error("Must specify either an element or an element id.");if(pt.tagName!=="VIDEO")throw new Error("Element is not a video tag.");return pt},Dt=(pt,$)=>{const et=y.A.normalizeAttributes(pt);(u().dom.hasClass(pt,E.gi)||u().dom.hasClass(pt,"vjs-fluid"))&&($.fluid=!0),(ct=>{const K=ct.autoplayMode;if(K)switch(K){case E.HJ.ALWAYS:ct.autoplay=!0;break;case E.HJ.ON_SCROLL:case E.HJ.NEVER:default:ct.autoplay=!1}})($=Object.assign({},E.jV,m.A,et,$));const Q=y.A.sliceAndUnsetProperties($,...E.jK);return Q.cloudinary=y.A.sliceAndUnsetProperties(Q,...E.uy),$.videojs&&(Object.assign($,$.videojs),delete $.videojs),{playerOptions:Q,videojsOptions:$}},rt=()=>{let pt=u().getComponent("Player").prototype.options_.children;pt.push("titleBar");const $=u().getComponent("ControlBar");$&&(pt=$.prototype.options_.children,pt.splice(pt.indexOf("progressControl"),0,"spacer","progressControlEventsBlocker"),pt.splice(pt.indexOf("playToggle"),1,"playToggle","JumpBackButton","JumpForwardButton"),pt.push("logoButton"),pt.splice(pt.indexOf("skipForward"),1),pt.splice(pt.indexOf("skipBackward"),1));const et=u().getComponent("SeekBar");et&&!et.prototype.options_.children.includes("mouseTimeDisplay")&&et.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}},4138:T=>{T.exports=(()=>{var C={805:y=>{y.exports=F,y.exports.isMobile=F,y.exports.default=F;const m=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,E=/CrOS/,I=/android|ipad|playbook|silk/i;function F(D){D||(D={});let X=D.ua;if(X||typeof navigator>"u"||(X=navigator.userAgent),X&&X.headers&&typeof X.headers["user-agent"]=="string"&&(X=X.headers["user-agent"]),typeof X!="string")return!1;let R=m.test(X)&&!E.test(X)||!!D.tablet&&I.test(X);return!R&&D.tablet&&D.featureDetect&&navigator&&navigator.maxTouchPoints>1&&X.indexOf("Macintosh")!==-1&&X.indexOf("Safari")!==-1&&(R=!0),R}}},l={};function g(y){var m=l[y];if(m!==void 0)return m.exports;var E=l[y]={exports:{}};return C[y](E,E.exports,g),E.exports}g.d=(y,m)=>{for(var E in m)g.o(m,E)&&!g.o(y,E)&&Object.defineProperty(y,E,{enumerable:!0,get:m[E]})},g.o=(y,m)=>Object.prototype.hasOwnProperty.call(y,m),g.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var u={};return(()=>{g.r(u),g.d(u,{connectCloudinaryAnalytics:()=>Qe});var y=g(805);function m(Pt){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},m(Pt)}var E="play",I="pause",F="loadMetadata",D="cld-custom-",X=function(Pt,Ct){var Nt=function(){Ct(E,{})};return Pt.addEventListener("play",Nt),function(){Pt.removeEventListener("play",Nt)}},R=function(Pt,Ct){var Nt=function(){Ct(E,{})};return Pt.addEventListener("".concat(D,"play"),Nt),function(){Pt.removeEventListener("".concat(D,"play"),Nt)}},Z=function(Pt,Ct){var Nt=function(){Ct(I,{})};Pt.addEventListener("pause",Nt);var Ft=function(){Ct(I,{})};return Pt.addEventListener("emptied",Ft),function(){Pt.removeEventListener("pause",Nt),Pt.removeEventListener("emptied",Ft)}},dt=function(Pt,Ct){var Nt=function(){Ct(I,{})};Pt.addEventListener("".concat(D,"pause"),Nt);var Ft=function(){Ct(I,{})};return Pt.addEventListener("".concat(D,"emptied"),Ft),function(){Pt.removeEventListener("".concat(D,"pause"),Nt),Pt.removeEventListener("".concat(D,"emptied"),Ft)}},Dt=function(Pt){var Ct=Pt.duration,Nt=Number.isNaN(Ct)?null:Ct;return{videoDuration:Number.POSITIVE_INFINITY===Nt?"Infinity":Nt}},rt=function(Pt,Ct){var Nt=function(){var Ft=Dt(Pt);Ct(F,{videoDuration:Ft.videoDuration})};return Pt.addEventListener("loadedmetadata",Nt),Pt.addEventListener("loadedmetadata_after_init",Nt),function(){Pt.removeEventListener("loadedmetadata",Nt),Pt.removeEventListener("loadedmetadata_after_init",Nt)}},pt=function(Pt,Ct){var Nt=function(ft){var ce=Dt(Pt),oi=ft.detail.videoDuration||ce.videoDuration;Ct(F,{videoDuration:oi})};Pt.addEventListener("".concat(D,"loadedmetadata"),Nt);var Ft=function(ft){Ct(F,{videoDuration:typeof ft.detail.videoDuration!="number"&&ft.detail.videoDuration>0?null:ft.detail.videoDuration})};return Pt.addEventListener("".concat(D,"loadedmetadata_after_init"),Ft),function(){Pt.removeEventListener("".concat(D,"loadedmetadata"),Nt),Pt.removeEventListener("".concat(D,"loadedmetadata_after_init"),Ft)}},$=function(Pt,Ct){return{eventName:Pt,eventTime:Date.now(),eventDetails:Ct}};function et(Pt,Ct){(Ct==null||Ct>Pt.length)&&(Ct=Pt.length);for(var Nt=0,Ft=new Array(Ct);Nt<Ct;Nt++)Ft[Nt]=Pt[Nt];return Ft}var Q=function(Pt,Ct){var Nt={},Ft={};return function(ft,ce){Nt[ft]=[],Ft[ft]=[ce];var oi=Nt[ft],di=Ft[ft],ii=function(Ge,$e){return di.push($(Ge,$e))},fi=Ct?[R(Pt,ii),dt(Pt,ii),pt(Pt,ii)]:[X(Pt,ii),Z(Pt,ii),rt(Pt,ii)];return function(Ge,$e){if(Ge.readyState>0){var He=$e?"".concat(D,"loadedmetadata_after_init"):"loadedmetadata_after_init",Y=new CustomEvent(He);Ge.dispatchEvent(Y)}}(Pt,Ct),{flushEvents:function(){var Ge=di.splice(0,di.length);return oi.splice.apply(oi,[oi.length,0].concat(function($e){return function(He){if(Array.isArray(He))return et(He)}($e)||function(He){if(typeof Symbol<"u"&&He[Symbol.iterator]!=null||He["@@iterator"]!=null)return Array.from(He)}($e)||function(He,Y){if(He){if(typeof He=="string")return et(He,Y);var ot=Object.prototype.toString.call(He).slice(8,-1);return ot==="Object"&&He.constructor&&(ot=He.constructor.name),ot==="Map"||ot==="Set"?Array.from(He):ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot)?et(He,Y):void 0}}($e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(Ge))),Ge},getAllEvents:function(){return oi},destroy:function(){fi.forEach(function(Ge){return Ge()})}}}};const ct={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let K;const Mt=new Uint8Array(16);function B(){if(!K&&(K=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!K))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return K(Mt)}const W=[];for(let Pt=0;Pt<256;++Pt)W.push((Pt+256).toString(16).slice(1));const at=function(Pt,Ct,Nt){if(ct.randomUUID&&!Ct&&!Pt)return ct.randomUUID();const Ft=(Pt=Pt||{}).random||(Pt.rng||B)();return Ft[6]=15&Ft[6]|64,Ft[8]=63&Ft[8]|128,function(ft,ce=0){return(W[ft[ce+0]]+W[ft[ce+1]]+W[ft[ce+2]]+W[ft[ce+3]]+"-"+W[ft[ce+4]]+W[ft[ce+5]]+"-"+W[ft[ce+6]]+W[ft[ce+7]]+"-"+W[ft[ce+8]]+W[ft[ce+9]]+"-"+W[ft[ce+10]]+W[ft[ce+11]]+W[ft[ce+12]]+W[ft[ce+13]]+W[ft[ce+14]]+W[ft[ce+15]]).toLowerCase()}(Ft)};var At=function(){return at().replace(/-/g,"")},Ot="cld-analytics-user-id",vt=function(){var Pt=window.localStorage.getItem(Ot);if(Pt)return Pt;var Ct=at().replace(/-/g,"");return window.localStorage.setItem(Ot,Ct),Ct};function It(Pt){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},It(Pt)}var Rt=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,Et="native",Bt=[Et,"cloudinary video player"];function Qt(Pt){return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},Qt(Pt)}function he(Pt,Ct){var Nt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(Pt);Ct&&(Ft=Ft.filter(function(ft){return Object.getOwnPropertyDescriptor(Pt,ft).enumerable})),Nt.push.apply(Nt,Ft)}return Nt}function Zt(Pt){for(var Ct=1;Ct<arguments.length;Ct++){var Nt=arguments[Ct]!=null?arguments[Ct]:{};Ct%2?he(Object(Nt),!0).forEach(function(Ft){ge(Pt,Ft,Nt[Ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(Nt)):he(Object(Nt)).forEach(function(Ft){Object.defineProperty(Pt,Ft,Object.getOwnPropertyDescriptor(Nt,Ft))})}return Pt}function ge(Pt,Ct,Nt){return(Ct=function(Ft){var ft=function(ce,oi){if(Qt(ce)!=="object"||ce===null)return ce;var di=ce[Symbol.toPrimitive];if(di!==void 0){var ii=di.call(ce,"string");if(Qt(ii)!=="object")return ii;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ce)}(Ft);return Qt(ft)==="symbol"?ft:String(ft)}(Ct))in Pt?Object.defineProperty(Pt,Ct,{value:Nt,enumerable:!0,configurable:!0,writable:!0}):Pt[Ct]=Nt,Pt}var ae=function(Pt,Ct,Nt){var Ft,ft,ce,oi=function(Ge){var $e=typeof Ge=="function"?Ge():Ge;if(It($e)==="object"&&$e!==null&&!Array.isArray($e)){var He=function(Y){return Array.from({length:5}).reduce(function(ot,Ut,$t){var Ht="customData".concat($t+1);return typeof Y[Ht]=="string"&&(ot[Ht]=Y[Ht]),ot},{})}($e);return Object.keys(He).length>0?He:null}return null}(Nt?.customData),di=function(Ge){return Ge!==null&&JSON.stringify(Ge).length<=1e3}(oi),ii=Nt!=null&&Nt.customVideoUrlFallback?function(Ge,$e){try{var He=$e(Ge);return{cloudName:He.cloudName,publicId:He.publicId}}catch{return null}}(Pt,Nt.customVideoUrlFallback):null,fi=(Ft=ii)!==null&&It(Ft)==="object"&&typeof Ft.cloudName=="string"&&Ft.cloudName&&typeof Ft.publicId=="string"&&Ft.publicId?{cloudName:Ft.cloudName,publicId:Ft.publicId}:null;return $("viewStart",Zt(Zt({videoUrl:Pt,analyticsModuleVersion:"1.7.1",videoPlayer:{type:(ce=Nt?.videoPlayerType,Bt.includes(ce)?ce:Et),version:(ft=Nt?.videoPlayerVersion,typeof ft=="string"&&Rt.test(ft)?ft:null)}},Ct),{},{customerData:Zt(Zt({},di?{providedData:oi}:{}),fi?{videoData:fi}:{})}))};function Te(Pt,Ct){(Ct==null||Ct>Pt.length)&&(Ct=Pt.length);for(var Nt=0,Ft=new Array(Ct);Nt<Ct;Nt++)Ft[Nt]=Pt[Nt];return Ft}var Ae=function(Pt){var Ct=function(Nt){return function(Ft){if(Array.isArray(Ft))return Te(Ft)}(Nt)||function(Ft){if(typeof Symbol<"u"&&Ft[Symbol.iterator]!=null||Ft["@@iterator"]!=null)return Array.from(Ft)}(Nt)||function(Ft,ft){if(Ft){if(typeof Ft=="string")return Te(Ft,ft);var ce=Object.prototype.toString.call(Ft).slice(8,-1);return ce==="Object"&&Ft.constructor&&(ce=Ft.constructor.name),ce==="Map"||ce==="Set"?Array.from(Ft):ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce)?Te(Ft,ft):void 0}}(Nt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(Pt);return Ct.push($("viewEnd",{})),JSON.stringify(Ct)};function Ie(Pt){return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},Ie(Pt)}function Ke(Pt,Ct){var Nt=Object.keys(Pt);if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(Pt);Ct&&(Ft=Ft.filter(function(ft){return Object.getOwnPropertyDescriptor(Pt,ft).enumerable})),Nt.push.apply(Nt,Ft)}return Nt}function Kt(Pt){for(var Ct=1;Ct<arguments.length;Ct++){var Nt=arguments[Ct]!=null?arguments[Ct]:{};Ct%2?Ke(Object(Nt),!0).forEach(function(Ft){ze(Pt,Ft,Nt[Ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pt,Object.getOwnPropertyDescriptors(Nt)):Ke(Object(Nt)).forEach(function(Ft){Object.defineProperty(Pt,Ft,Object.getOwnPropertyDescriptor(Nt,Ft))})}return Pt}function ze(Pt,Ct,Nt){return(Ct=function(Ft){var ft=function(ce,oi){if(Ie(ce)!=="object"||ce===null)return ce;var di=ce[Symbol.toPrimitive];if(di!==void 0){var ii=di.call(ce,"string");if(Ie(ii)!=="object")return ii;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ce)}(Ft);return Ie(ft)==="symbol"?ft:String(ft)}(Ct))in Pt?Object.defineProperty(Pt,Ct,{value:Nt,enumerable:!0,configurable:!0,writable:!0}):Pt[Ct]=Nt,Pt}var ei=function(Pt,Ct,Nt,Ft){var ft=function(){var ii=Ct();if(ii.length>0){var fi=Ae(ii);Nt(Kt(Kt({},Pt),{},{events:fi}))}},ce=function(){return ft()},oi=function(){document.visibilityState==="hidden"&&ft()},di=function(){return ft()};return window.addEventListener("beforeunload",ce,{once:!0}),Ft&&(window.addEventListener("pagehide",di),document.addEventListener("visibilitychange",oi)),function(){window.removeEventListener("beforeunload",ce),window.removeEventListener("pagehide",di),document.removeEventListener("visibilitychange",oi),ft()}},We=function(Pt){return Pt.currentSrc};function Di(Pt){return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},Di(Pt)}var Qe=function(Pt){var Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ct&&Di(Ct)!=="object")throw"Options property must be an object";var Nt=null,Ft=Ct.customEvents===!0,ft=(0,y.isMobile)({tablet:!0,featureDetect:!0}),ce=Q(Pt,Ft),oi=function(ii){return function(fi,Ge){var $e=Object.keys(Ge).reduce(function(He,Y){return He.append(Y,Ge[Y]),He},new FormData);return typeof window.navigator.sendBeacon!="function"?window.fetch(fi,{method:"POST",mode:"no-cors",body:$e,keepalive:!0}):window.navigator.sendBeacon(fi,$e)}("https://video-analytics-api.cloudinary.com/v1/video-analytics",ii)},di=function(){Nt&&(Nt.clear(),Nt=null)};return{startManualTracking:function(ii){var fi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ge=function($t){return m($t)!=="object"?{isValid:!1,errorMessage:"Metadata param needs to be an object"}:typeof $t.cloudName!="string"?{isValid:!1,errorMessage:"You need to provide proper cloud name of your Cloudinary account [cloudName: string]"}:typeof $t.publicId!="string"?{isValid:!1,errorMessage:"You need to provide proper video public ID of your video on your Cloudinary cloud [videoPublicId: string]"}:{isValid:!0}}(ii);if(!Ge.isValid)throw"Cloudinary video analytics tracking called without necessary data (".concat(Ge.errorMessage,")");if(fi&&Di(fi)!=="object")throw"Options property must be an object";fi.customVideoUrlFallback=function(){return ii},di();var $e=At(),He=We(Pt),Y=ae(He,{trackingType:"manual"},fi),ot=ce($e,Y),Ut=ei({userId:vt(),viewId:$e},ot.flushEvents,oi,ft);Nt={viewId:$e,clear:function(){ot.destroy(),Ut()}}},stopManualTracking:di,startAutoTracking:function(){var ii=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Nt)throw"Cloudinary video analytics tracking is already connected with this HTML Video Element";if(ii&&Di(ii)!=="object")throw"Options property must be an object";var fi=function(){var He=We(Pt);if(He===window.location.href||!He)return null;var Y=At(),ot=ae(He,{trackingType:"auto"},ii),Ut=ce(Y,ot),$t=ei({userId:vt(),viewId:Y},Ut.flushEvents,oi,ft);Nt={viewId:Y,clear:function(){Ut.destroy(),$t()}}},Ge=Ft?"".concat(D,"loadstart"):"loadstart",$e=Ft?"".concat(D,"emptied"):"emptied";Pt.addEventListener(Ge,function(){Nt||fi()}),Pt.addEventListener($e,function(){di()}),fi()}}}})(),u})()},3337:function(T,C,l){var g;g=l.g!==void 0?l.g:this,T.exports=function(u){if(u.CSS&&u.CSS.escape)return u.CSS.escape;var y=function(m){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var E,I=String(m),F=I.length,D=-1,X="",R=I.charCodeAt(0);++D<F;)(E=I.charCodeAt(D))!=0?X+=E>=1&&E<=31||E==127||D==0&&E>=48&&E<=57||D==1&&E>=48&&E<=57&&R==45?"\\"+E.toString(16)+" ":D==0&&F==1&&E==45||!(E>=128||E==45||E==95||E>=48&&E<=57||E>=65&&E<=90||E>=97&&E<=122)?"\\"+I.charAt(D):I.charAt(D):X+="�";return X};return u.CSS||(u.CSS={}),u.CSS.escape=y,y}(g)},6827:T=>{var C,l=typeof Reflect=="object"?Reflect:null,g=l&&typeof l.apply=="function"?l.apply:function(rt,pt,$){return Function.prototype.apply.call(rt,pt,$)};C=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(rt){return Object.getOwnPropertyNames(rt).concat(Object.getOwnPropertySymbols(rt))}:function(rt){return Object.getOwnPropertyNames(rt)};var u=Number.isNaN||function(rt){return rt!=rt};function y(){y.init.call(this)}T.exports=y,T.exports.once=function(rt,pt){return new Promise(function($,et){function Q(K){rt.removeListener(pt,ct),et(K)}function ct(){typeof rt.removeListener=="function"&&rt.removeListener("error",Q),$([].slice.call(arguments))}Dt(rt,pt,ct,{once:!0}),pt!=="error"&&function(K,Mt,B){typeof K.on=="function"&&Dt(K,"error",Mt,{once:!0})}(rt,Q)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var m=10;function E(rt){if(typeof rt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof rt)}function I(rt){return rt._maxListeners===void 0?y.defaultMaxListeners:rt._maxListeners}function F(rt,pt,$,et){var Q,ct,K,Mt;if(E($),(ct=rt._events)===void 0?(ct=rt._events=Object.create(null),rt._eventsCount=0):(ct.newListener!==void 0&&(rt.emit("newListener",pt,$.listener?$.listener:$),ct=rt._events),K=ct[pt]),K===void 0)K=ct[pt]=$,++rt._eventsCount;else if(typeof K=="function"?K=ct[pt]=et?[$,K]:[K,$]:et?K.unshift($):K.push($),(Q=I(rt))>0&&K.length>Q&&!K.warned){K.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(pt)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=rt,B.type=pt,B.count=K.length,Mt=B,console&&console.warn&&console.warn(Mt)}return rt}function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function X(rt,pt,$){var et={fired:!1,wrapFn:void 0,target:rt,type:pt,listener:$},Q=D.bind(et);return Q.listener=$,et.wrapFn=Q,Q}function R(rt,pt,$){var et=rt._events;if(et===void 0)return[];var Q=et[pt];return Q===void 0?[]:typeof Q=="function"?$?[Q.listener||Q]:[Q]:$?function(ct){for(var K=new Array(ct.length),Mt=0;Mt<K.length;++Mt)K[Mt]=ct[Mt].listener||ct[Mt];return K}(Q):dt(Q,Q.length)}function Z(rt){var pt=this._events;if(pt!==void 0){var $=pt[rt];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}function dt(rt,pt){for(var $=new Array(pt),et=0;et<pt;++et)$[et]=rt[et];return $}function Dt(rt,pt,$,et){if(typeof rt.on=="function")et.once?rt.once(pt,$):rt.on(pt,$);else{if(typeof rt.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof rt);rt.addEventListener(pt,function Q(ct){et.once&&rt.removeEventListener(pt,Q),$(ct)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(rt){if(typeof rt!="number"||rt<0||u(rt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+rt+".");m=rt}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(rt){if(typeof rt!="number"||rt<0||u(rt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+rt+".");return this._maxListeners=rt,this},y.prototype.getMaxListeners=function(){return I(this)},y.prototype.emit=function(rt){for(var pt=[],$=1;$<arguments.length;$++)pt.push(arguments[$]);var et=rt==="error",Q=this._events;if(Q!==void 0)et=et&&Q.error===void 0;else if(!et)return!1;if(et){var ct;if(pt.length>0&&(ct=pt[0]),ct instanceof Error)throw ct;var K=new Error("Unhandled error."+(ct?" ("+ct.message+")":""));throw K.context=ct,K}var Mt=Q[rt];if(Mt===void 0)return!1;if(typeof Mt=="function")g(Mt,this,pt);else{var B=Mt.length,W=dt(Mt,B);for($=0;$<B;++$)g(W[$],this,pt)}return!0},y.prototype.addListener=function(rt,pt){return F(this,rt,pt,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(rt,pt){return F(this,rt,pt,!0)},y.prototype.once=function(rt,pt){return E(pt),this.on(rt,X(this,rt,pt)),this},y.prototype.prependOnceListener=function(rt,pt){return E(pt),this.prependListener(rt,X(this,rt,pt)),this},y.prototype.removeListener=function(rt,pt){var $,et,Q,ct,K;if(E(pt),(et=this._events)===void 0)return this;if(($=et[rt])===void 0)return this;if($===pt||$.listener===pt)--this._eventsCount==0?this._events=Object.create(null):(delete et[rt],et.removeListener&&this.emit("removeListener",rt,$.listener||pt));else if(typeof $!="function"){for(Q=-1,ct=$.length-1;ct>=0;ct--)if($[ct]===pt||$[ct].listener===pt){K=$[ct].listener,Q=ct;break}if(Q<0)return this;Q===0?$.shift():function(Mt,B){for(;B+1<Mt.length;B++)Mt[B]=Mt[B+1];Mt.pop()}($,Q),$.length===1&&(et[rt]=$[0]),et.removeListener!==void 0&&this.emit("removeListener",rt,K||pt)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(rt){var pt,$,et;if(($=this._events)===void 0)return this;if($.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):$[rt]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete $[rt]),this;if(arguments.length===0){var Q,ct=Object.keys($);for(et=0;et<ct.length;++et)(Q=ct[et])!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(pt=$[rt])=="function")this.removeListener(rt,pt);else if(pt!==void 0)for(et=pt.length-1;et>=0;et--)this.removeListener(rt,pt[et]);return this},y.prototype.listeners=function(rt){return R(this,rt,!0)},y.prototype.rawListeners=function(rt){return R(this,rt,!1)},y.listenerCount=function(rt,pt){return typeof rt.listenerCount=="function"?rt.listenerCount(pt):Z.call(rt,pt)},y.prototype.listenerCount=Z,y.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]}},7938:(T,C,l)=>{var g=l(6914);l(8364).videojs=g,T.exports=g},3432:(T,C,l)=>{var g=l(2579);l(8364).videojs=g,T.exports=g},1401:(T,C,l)=>{var g=l(8496);l(8364).videojs=g,T.exports=g},8677:(T,C,l)=>{var g=l(6342);l(8364).videojs=g,T.exports=g},6527:(T,C,l)=>{var g=l(4378);l(8364).videojs=g,T.exports=g},8364:(T,C,l)=>{T.exports=function(){if(typeof globalThis=="object")return globalThis;var g;try{g=this||new Function("return this")()}catch{if(typeof window=="object")return window;if(typeof self=="object")return self;if(l.g!==void 0)return l.g}return g}()},7509:(T,C,l)=>{var g,u=l.g!==void 0?l.g:typeof window<"u"?window:{},y=l(4626);typeof document<"u"?g=document:(g=u["__GLOBAL_DOCUMENT_CACHE@4"])||(g=u["__GLOBAL_DOCUMENT_CACHE@4"]=y),T.exports=g},5204:(T,C,l)=>{var g;g=typeof window<"u"?window:l.g!==void 0?l.g:typeof self<"u"?self:{},T.exports=g},8716:T=>{T.exports=function(l){if(!l)return!1;var g=C.call(l);return g==="[object Function]"||typeof l=="function"&&g!=="[object RegExp]"||typeof window<"u"&&(l===window.setTimeout||l===window.alert||l===window.confirm||l===window.prompt)};var C=Object.prototype.toString},1416:(T,C,l)=>{var g=l(9138)(l(1433),"DataView");T.exports=g},9073:(T,C,l)=>{var g=l(2316),u=l(6458),y=l(2149),m=l(4297),E=l(3121);function I(F){var D=-1,X=F==null?0:F.length;for(this.clear();++D<X;){var R=F[D];this.set(R[0],R[1])}}I.prototype.clear=g,I.prototype.delete=u,I.prototype.get=y,I.prototype.has=m,I.prototype.set=E,T.exports=I},2707:(T,C,l)=>{var g=l(9714),u=l(3812),y=l(4727),m=l(8379),E=l(8291);function I(F){var D=-1,X=F==null?0:F.length;for(this.clear();++D<X;){var R=F[D];this.set(R[0],R[1])}}I.prototype.clear=g,I.prototype.delete=u,I.prototype.get=y,I.prototype.has=m,I.prototype.set=E,T.exports=I},1955:(T,C,l)=>{var g=l(9138)(l(1433),"Map");T.exports=g},369:(T,C,l)=>{var g=l(2092),u=l(9626),y=l(9925),m=l(6809),E=l(4385);function I(F){var D=-1,X=F==null?0:F.length;for(this.clear();++D<X;){var R=F[D];this.set(R[0],R[1])}}I.prototype.clear=g,I.prototype.delete=u,I.prototype.get=y,I.prototype.has=m,I.prototype.set=E,T.exports=I},2616:(T,C,l)=>{var g=l(9138)(l(1433),"Promise");T.exports=g},157:(T,C,l)=>{var g=l(9138)(l(1433),"Set");T.exports=g},6469:(T,C,l)=>{var g=l(2707),u=l(1848),y=l(7406),m=l(8569),E=l(3109),I=l(3389);function F(D){var X=this.__data__=new g(D);this.size=X.size}F.prototype.clear=u,F.prototype.delete=y,F.prototype.get=m,F.prototype.has=E,F.prototype.set=I,T.exports=F},2781:(T,C,l)=>{var g=l(1433).Symbol;T.exports=g},8944:(T,C,l)=>{var g=l(1433).Uint8Array;T.exports=g},8499:(T,C,l)=>{var g=l(9138)(l(1433),"WeakMap");T.exports=g},6701:T=>{T.exports=function(C,l,g){switch(g.length){case 0:return C.call(l);case 1:return C.call(l,g[0]);case 2:return C.call(l,g[0],g[1]);case 3:return C.call(l,g[0],g[1],g[2])}return C.apply(l,g)}},149:T=>{T.exports=function(C,l){for(var g=-1,u=C==null?0:C.length;++g<u&&l(C[g],g,C)!==!1;);return C}},1414:T=>{T.exports=function(C,l){for(var g=-1,u=C==null?0:C.length,y=0,m=[];++g<u;){var E=C[g];l(E,g,C)&&(m[y++]=E)}return m}},1163:(T,C,l)=>{var g=l(6204),u=l(1256),y=l(6397),m=l(492),E=l(2845),I=l(7995),F=Object.prototype.hasOwnProperty;T.exports=function(D,X){var R=y(D),Z=!R&&u(D),dt=!R&&!Z&&m(D),Dt=!R&&!Z&&!dt&&I(D),rt=R||Z||dt||Dt,pt=rt?g(D.length,String):[],$=pt.length;for(var et in D)!X&&!F.call(D,et)||rt&&(et=="length"||dt&&(et=="offset"||et=="parent")||Dt&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||E(et,$))||pt.push(et);return pt}},4272:T=>{T.exports=function(C,l){for(var g=-1,u=C==null?0:C.length,y=Array(u);++g<u;)y[g]=l(C[g],g,C);return y}},8740:T=>{T.exports=function(C,l){for(var g=-1,u=l.length,y=C.length;++g<u;)C[y+g]=l[g];return C}},2814:T=>{T.exports=function(C,l,g,u){var y=-1,m=C==null?0:C.length;for(u&&m&&(g=C[++y]);++y<m;)g=l(g,C[y],y,C);return g}},9174:T=>{T.exports=function(C){return C.split("")}},8273:T=>{var C=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;T.exports=function(l){return l.match(C)||[]}},2863:(T,C,l)=>{var g=l(4772),u=l(9316),y=Object.prototype.hasOwnProperty;T.exports=function(m,E,I){var F=m[E];y.call(m,E)&&u(F,I)&&(I!==void 0||E in m)||g(m,E,I)}},8301:(T,C,l)=>{var g=l(9316);T.exports=function(u,y){for(var m=u.length;m--;)if(g(u[m][0],y))return m;return-1}},1145:(T,C,l)=>{var g=l(2083),u=l(1178);T.exports=function(y,m){return y&&g(m,u(m),y)}},4306:(T,C,l)=>{var g=l(2083),u=l(5405);T.exports=function(y,m){return y&&g(m,u(m),y)}},4772:(T,C,l)=>{var g=l(8559);T.exports=function(u,y,m){y=="__proto__"&&g?g(u,y,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[y]=m}},2931:(T,C,l)=>{var g=l(6469),u=l(149),y=l(2863),m=l(1145),E=l(4306),I=l(7030),F=l(8835),D=l(859),X=l(6728),R=l(966),Z=l(9697),dt=l(1201),Dt=l(6785),rt=l(3283),pt=l(9181),$=l(6397),et=l(492),Q=l(422),ct=l(8953),K=l(3764),Mt=l(1178),B=l(5405),W="[object Arguments]",at="[object Function]",At="[object Object]",Ot={};Ot[W]=Ot["[object Array]"]=Ot["[object ArrayBuffer]"]=Ot["[object DataView]"]=Ot["[object Boolean]"]=Ot["[object Date]"]=Ot["[object Float32Array]"]=Ot["[object Float64Array]"]=Ot["[object Int8Array]"]=Ot["[object Int16Array]"]=Ot["[object Int32Array]"]=Ot["[object Map]"]=Ot["[object Number]"]=Ot[At]=Ot["[object RegExp]"]=Ot["[object Set]"]=Ot["[object String]"]=Ot["[object Symbol]"]=Ot["[object Uint8Array]"]=Ot["[object Uint8ClampedArray]"]=Ot["[object Uint16Array]"]=Ot["[object Uint32Array]"]=!0,Ot["[object Error]"]=Ot[at]=Ot["[object WeakMap]"]=!1,T.exports=function vt(It,Rt,Et,Bt,Qt,he){var Zt,ge=1&Rt,ae=2&Rt,Te=4&Rt;if(Et&&(Zt=Qt?Et(It,Bt,Qt,he):Et(It)),Zt!==void 0)return Zt;if(!ct(It))return It;var Ae=$(It);if(Ae){if(Zt=Dt(It),!ge)return F(It,Zt)}else{var Ie=dt(It),Ke=Ie==at||Ie=="[object GeneratorFunction]";if(et(It))return I(It,ge);if(Ie==At||Ie==W||Ke&&!Qt){if(Zt=ae||Ke?{}:pt(It),!ge)return ae?X(It,E(Zt,It)):D(It,m(Zt,It))}else{if(!Ot[Ie])return Qt?It:{};Zt=rt(It,Ie,ge)}}he||(he=new g);var Kt=he.get(It);if(Kt)return Kt;he.set(It,Zt),K(It)?It.forEach(function(ei){Zt.add(vt(ei,Rt,Et,ei,It,he))}):Q(It)&&It.forEach(function(ei,We){Zt.set(We,vt(ei,Rt,Et,We,It,he))});var ze=Ae?void 0:(Te?ae?Z:R:ae?B:Mt)(It);return u(ze||It,function(ei,We){ze&&(ei=It[We=ei]),y(Zt,We,vt(ei,Rt,Et,We,It,he))}),Zt}},3508:(T,C,l)=>{var g=l(8953),u=Object.create,y=function(){function m(){}return function(E){if(!g(E))return{};if(u)return u(E);m.prototype=E;var I=new m;return m.prototype=void 0,I}}();T.exports=y},1044:(T,C,l)=>{var g=l(8740),u=l(8031);T.exports=function y(m,E,I,F,D){var X=-1,R=m.length;for(I||(I=u),D||(D=[]);++X<R;){var Z=m[X];E>0&&I(Z)?E>1?y(Z,E-1,I,F,D):g(D,Z):F||(D[D.length]=Z)}return D}},7722:(T,C,l)=>{var g=l(7181),u=l(6729);T.exports=function(y,m){for(var E=0,I=(m=g(m,y)).length;y!=null&&E<I;)y=y[u(m[E++])];return E&&E==I?y:void 0}},4403:(T,C,l)=>{var g=l(8740),u=l(6397);T.exports=function(y,m,E){var I=m(y);return u(y)?I:g(I,E(y))}},7148:(T,C,l)=>{var g=l(2781),u=l(7903),y=l(1738),m=g?g.toStringTag:void 0;T.exports=function(E){return E==null?E===void 0?"[object Undefined]":"[object Null]":m&&m in Object(E)?u(E):y(E)}},809:T=>{T.exports=function(C,l){return C!=null&&l in Object(C)}},9250:(T,C,l)=>{var g=l(7148),u=l(2934);T.exports=function(y){return u(y)&&g(y)=="[object Arguments]"}},4800:(T,C,l)=>{var g=l(1201),u=l(2934);T.exports=function(y){return u(y)&&g(y)=="[object Map]"}},6567:(T,C,l)=>{var g=l(8446),u=l(8092),y=l(8953),m=l(1485),E=/^\[object .+?Constructor\]$/,I=Function.prototype,F=Object.prototype,D=I.toString,X=F.hasOwnProperty,R=RegExp("^"+D.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");T.exports=function(Z){return!(!y(Z)||u(Z))&&(g(Z)?R:E).test(m(Z))}},7866:(T,C,l)=>{var g=l(1201),u=l(2934);T.exports=function(y){return u(y)&&g(y)=="[object Set]"}},7129:(T,C,l)=>{var g=l(7148),u=l(3330),y=l(2934),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,T.exports=function(E){return y(E)&&u(E.length)&&!!m[g(E)]}},1452:(T,C,l)=>{var g=l(7499),u=l(9566),y=Object.prototype.hasOwnProperty;T.exports=function(m){if(!g(m))return u(m);var E=[];for(var I in Object(m))y.call(m,I)&&I!="constructor"&&E.push(I);return E}},1491:(T,C,l)=>{var g=l(8953),u=l(7499),y=l(8201),m=Object.prototype.hasOwnProperty;T.exports=function(E){if(!g(E))return y(E);var I=u(E),F=[];for(var D in E)(D!="constructor"||!I&&m.call(E,D))&&F.push(D);return F}},6733:(T,C,l)=>{var g=l(5576),u=l(8235);T.exports=function(y,m){return g(y,m,function(E,I){return u(y,I)})}},5576:(T,C,l)=>{var g=l(7722),u=l(8230),y=l(7181);T.exports=function(m,E,I){for(var F=-1,D=E.length,X={};++F<D;){var R=E[F],Z=g(m,R);I(Z,R)&&u(X,y(R,m),Z)}return X}},6764:T=>{T.exports=function(C){return function(l){return C?.[l]}}},8230:(T,C,l)=>{var g=l(2863),u=l(7181),y=l(2845),m=l(8953),E=l(6729);T.exports=function(I,F,D,X){if(!m(I))return I;for(var R=-1,Z=(F=u(F,I)).length,dt=Z-1,Dt=I;Dt!=null&&++R<Z;){var rt=E(F[R]),pt=D;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return I;if(R!=dt){var $=Dt[rt];(pt=X?X($,rt,Dt):void 0)===void 0&&(pt=m($)?$:y(F[R+1])?[]:{})}g(Dt,rt,pt),Dt=Dt[rt]}return I}},7310:(T,C,l)=>{var g=l(3122),u=l(8559),y=l(4796),m=u?function(E,I){return u(E,"toString",{configurable:!0,enumerable:!1,value:g(I),writable:!0})}:y;T.exports=m},9772:T=>{T.exports=function(C,l,g){var u=-1,y=C.length;l<0&&(l=-l>y?0:y+l),(g=g>y?y:g)<0&&(g+=y),y=l>g?0:g-l>>>0,l>>>=0;for(var m=Array(y);++u<y;)m[u]=C[u+l];return m}},6204:T=>{T.exports=function(C,l){for(var g=-1,u=Array(C);++g<C;)u[g]=l(g);return u}},6584:(T,C,l)=>{var g=l(2781),u=l(4272),y=l(6397),m=l(5414),E=g?g.prototype:void 0,I=E?E.toString:void 0;T.exports=function F(D){if(typeof D=="string")return D;if(y(D))return u(D,F)+"";if(m(D))return I?I.call(D):"";var X=D+"";return X=="0"&&1/D==-1/0?"-0":X}},41:T=>{T.exports=function(C){return function(l){return C(l)}}},5263:(T,C,l)=>{var g=l(7181),u=l(5342),y=l(8549),m=l(6729);T.exports=function(E,I){return I=g(I,E),(E=y(E,I))==null||delete E[m(u(I))]}},7181:(T,C,l)=>{var g=l(6397),u=l(3726),y=l(3614),m=l(3506);T.exports=function(E,I){return g(E)?E:u(E,I)?[E]:y(m(E))}},9270:(T,C,l)=>{var g=l(9772);T.exports=function(u,y,m){var E=u.length;return m=m===void 0?E:m,!y&&m>=E?u:g(u,y,m)}},7177:(T,C,l)=>{var g=l(8944);T.exports=function(u){var y=new u.constructor(u.byteLength);return new g(y).set(new g(u)),y}},7030:(T,C,l)=>{T=l.nmd(T);var g=l(1433),u=C&&!C.nodeType&&C,y=u&&T&&!T.nodeType&&T,m=y&&y.exports===u?g.Buffer:void 0,E=m?m.allocUnsafe:void 0;T.exports=function(I,F){if(F)return I.slice();var D=I.length,X=E?E(D):new I.constructor(D);return I.copy(X),X}},4893:(T,C,l)=>{var g=l(7177);T.exports=function(u,y){var m=y?g(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}},4021:T=>{var C=/\w*$/;T.exports=function(l){var g=new l.constructor(l.source,C.exec(l));return g.lastIndex=l.lastIndex,g}},1548:(T,C,l)=>{var g=l(2781),u=g?g.prototype:void 0,y=u?u.valueOf:void 0;T.exports=function(m){return y?Object(y.call(m)):{}}},9114:(T,C,l)=>{var g=l(7177);T.exports=function(u,y){var m=y?g(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}},8835:T=>{T.exports=function(C,l){var g=-1,u=C.length;for(l||(l=Array(u));++g<u;)l[g]=C[g];return l}},2083:(T,C,l)=>{var g=l(2863),u=l(4772);T.exports=function(y,m,E,I){var F=!E;E||(E={});for(var D=-1,X=m.length;++D<X;){var R=m[D],Z=I?I(E[R],y[R],R,E,y):void 0;Z===void 0&&(Z=y[R]),F?u(E,R,Z):g(E,R,Z)}return E}},859:(T,C,l)=>{var g=l(2083),u=l(8876);T.exports=function(y,m){return g(y,u(y),m)}},6728:(T,C,l)=>{var g=l(2083),u=l(8355);T.exports=function(y,m){return g(y,u(y),m)}},8109:(T,C,l)=>{var g=l(1433)["__core-js_shared__"];T.exports=g},7383:(T,C,l)=>{var g=l(9270),u=l(654),y=l(4092),m=l(3506);T.exports=function(E){return function(I){I=m(I);var F=u(I)?y(I):void 0,D=F?F[0]:I.charAt(0),X=F?g(F,1).join(""):I.slice(1);return D[E]()+X}}},6983:(T,C,l)=>{var g=l(2814),u=l(3768),y=l(7385),m=RegExp("['’]","g");T.exports=function(E){return function(I){return g(y(u(I).replace(m,"")),E,"")}}},7222:(T,C,l)=>{var g=l(4679);T.exports=function(u){return g(u)?void 0:u}},8795:(T,C,l)=>{var g=l(6764)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});T.exports=g},8559:(T,C,l)=>{var g=l(9138),u=function(){try{var y=g(Object,"defineProperty");return y({},"",{}),y}catch{}}();T.exports=u},9820:(T,C,l)=>{var g=l(3406),u=l(5265),y=l(6805);T.exports=function(m){return y(u(m,void 0,g),m+"")}},5380:(T,C,l)=>{var g=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g;T.exports=g},966:(T,C,l)=>{var g=l(4403),u=l(8876),y=l(1178);T.exports=function(m){return g(m,y,u)}},9697:(T,C,l)=>{var g=l(4403),u=l(8355),y=l(5405);T.exports=function(m){return g(m,y,u)}},5535:(T,C,l)=>{var g=l(5662);T.exports=function(u,y){var m=u.__data__;return g(y)?m[typeof y=="string"?"string":"hash"]:m.map}},9138:(T,C,l)=>{var g=l(6567),u=l(6772);T.exports=function(y,m){var E=u(y,m);return g(E)?E:void 0}},3347:(T,C,l)=>{var g=l(1019)(Object.getPrototypeOf,Object);T.exports=g},7903:(T,C,l)=>{var g=l(2781),u=Object.prototype,y=u.hasOwnProperty,m=u.toString,E=g?g.toStringTag:void 0;T.exports=function(I){var F=y.call(I,E),D=I[E];try{I[E]=void 0;var X=!0}catch{}var R=m.call(I);return X&&(F?I[E]=D:delete I[E]),R}},8876:(T,C,l)=>{var g=l(1414),u=l(3629),y=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols,E=m?function(I){return I==null?[]:(I=Object(I),g(m(I),function(F){return y.call(I,F)}))}:u;T.exports=E},8355:(T,C,l)=>{var g=l(8740),u=l(3347),y=l(8876),m=l(3629),E=Object.getOwnPropertySymbols?function(I){for(var F=[];I;)g(F,y(I)),I=u(I);return F}:m;T.exports=E},1201:(T,C,l)=>{var g=l(1416),u=l(1955),y=l(2616),m=l(157),E=l(8499),I=l(7148),F=l(1485),D="[object Map]",X="[object Promise]",R="[object Set]",Z="[object WeakMap]",dt="[object DataView]",Dt=F(g),rt=F(u),pt=F(y),$=F(m),et=F(E),Q=I;(g&&Q(new g(new ArrayBuffer(1)))!=dt||u&&Q(new u)!=D||y&&Q(y.resolve())!=X||m&&Q(new m)!=R||E&&Q(new E)!=Z)&&(Q=function(ct){var K=I(ct),Mt=K=="[object Object]"?ct.constructor:void 0,B=Mt?F(Mt):"";if(B)switch(B){case Dt:return dt;case rt:return D;case pt:return X;case $:return R;case et:return Z}return K}),T.exports=Q},6772:T=>{T.exports=function(C,l){return C?.[l]}},6866:(T,C,l)=>{var g=l(7181),u=l(1256),y=l(6397),m=l(2845),E=l(3330),I=l(6729);T.exports=function(F,D,X){for(var R=-1,Z=(D=g(D,F)).length,dt=!1;++R<Z;){var Dt=I(D[R]);if(!(dt=F!=null&&X(F,Dt)))break;F=F[Dt]}return dt||++R!=Z?dt:!!(Z=F==null?0:F.length)&&E(Z)&&m(Dt,Z)&&(y(F)||u(F))}},654:T=>{var C=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");T.exports=function(l){return C.test(l)}},5854:T=>{var C=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;T.exports=function(l){return C.test(l)}},2316:(T,C,l)=>{var g=l(4558);T.exports=function(){this.__data__=g?g(null):{},this.size=0}},6458:T=>{T.exports=function(C){var l=this.has(C)&&delete this.__data__[C];return this.size-=l?1:0,l}},2149:(T,C,l)=>{var g=l(4558),u=Object.prototype.hasOwnProperty;T.exports=function(y){var m=this.__data__;if(g){var E=m[y];return E==="__lodash_hash_undefined__"?void 0:E}return u.call(m,y)?m[y]:void 0}},4297:(T,C,l)=>{var g=l(4558),u=Object.prototype.hasOwnProperty;T.exports=function(y){var m=this.__data__;return g?m[y]!==void 0:u.call(m,y)}},3121:(T,C,l)=>{var g=l(4558);T.exports=function(u,y){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=g&&y===void 0?"__lodash_hash_undefined__":y,this}},6785:T=>{var C=Object.prototype.hasOwnProperty;T.exports=function(l){var g=l.length,u=new l.constructor(g);return g&&typeof l[0]=="string"&&C.call(l,"index")&&(u.index=l.index,u.input=l.input),u}},3283:(T,C,l)=>{var g=l(7177),u=l(4893),y=l(4021),m=l(1548),E=l(9114);T.exports=function(I,F,D){var X=I.constructor;switch(F){case"[object ArrayBuffer]":return g(I);case"[object Boolean]":case"[object Date]":return new X(+I);case"[object DataView]":return u(I,D);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return E(I,D);case"[object Map]":case"[object Set]":return new X;case"[object Number]":case"[object String]":return new X(I);case"[object RegExp]":return y(I);case"[object Symbol]":return m(I)}}},9181:(T,C,l)=>{var g=l(3508),u=l(3347),y=l(7499);T.exports=function(m){return typeof m.constructor!="function"||y(m)?{}:g(u(m))}},8031:(T,C,l)=>{var g=l(2781),u=l(1256),y=l(6397),m=g?g.isConcatSpreadable:void 0;T.exports=function(E){return y(E)||u(E)||!!(m&&E&&E[m])}},2845:T=>{var C=/^(?:0|[1-9]\d*)$/;T.exports=function(l,g){var u=typeof l;return!!(g=g??9007199254740991)&&(u=="number"||u!="symbol"&&C.test(l))&&l>-1&&l%1==0&&l<g}},3726:(T,C,l)=>{var g=l(6397),u=l(5414),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;T.exports=function(E,I){if(g(E))return!1;var F=typeof E;return!(F!="number"&&F!="symbol"&&F!="boolean"&&E!=null&&!u(E))||m.test(E)||!y.test(E)||I!=null&&E in Object(I)}},5662:T=>{T.exports=function(C){var l=typeof C;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?C!=="__proto__":C===null}},8092:(T,C,l)=>{var g,u=l(8109),y=(g=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";T.exports=function(m){return!!y&&y in m}},7499:T=>{var C=Object.prototype;T.exports=function(l){var g=l&&l.constructor;return l===(typeof g=="function"&&g.prototype||C)}},9714:T=>{T.exports=function(){this.__data__=[],this.size=0}},3812:(T,C,l)=>{var g=l(8301),u=Array.prototype.splice;T.exports=function(y){var m=this.__data__,E=g(m,y);return!(E<0||(E==m.length-1?m.pop():u.call(m,E,1),--this.size,0))}},4727:(T,C,l)=>{var g=l(8301);T.exports=function(u){var y=this.__data__,m=g(y,u);return m<0?void 0:y[m][1]}},8379:(T,C,l)=>{var g=l(8301);T.exports=function(u){return g(this.__data__,u)>-1}},8291:(T,C,l)=>{var g=l(8301);T.exports=function(u,y){var m=this.__data__,E=g(m,u);return E<0?(++this.size,m.push([u,y])):m[E][1]=y,this}},2092:(T,C,l)=>{var g=l(9073),u=l(2707),y=l(1955);T.exports=function(){this.size=0,this.__data__={hash:new g,map:new(y||u),string:new g}}},9626:(T,C,l)=>{var g=l(5535);T.exports=function(u){var y=g(this,u).delete(u);return this.size-=y?1:0,y}},9925:(T,C,l)=>{var g=l(5535);T.exports=function(u){return g(this,u).get(u)}},6809:(T,C,l)=>{var g=l(5535);T.exports=function(u){return g(this,u).has(u)}},4385:(T,C,l)=>{var g=l(5535);T.exports=function(u,y){var m=g(this,u),E=m.size;return m.set(u,y),this.size+=m.size==E?0:1,this}},9268:(T,C,l)=>{var g=l(4556);T.exports=function(u){var y=g(u,function(E){return m.size===500&&m.clear(),E}),m=y.cache;return y}},4558:(T,C,l)=>{var g=l(9138)(Object,"create");T.exports=g},9566:(T,C,l)=>{var g=l(1019)(Object.keys,Object);T.exports=g},8201:T=>{T.exports=function(C){var l=[];if(C!=null)for(var g in Object(C))l.push(g);return l}},3685:(T,C,l)=>{T=l.nmd(T);var g=l(5380),u=C&&!C.nodeType&&C,y=u&&T&&!T.nodeType&&T,m=y&&y.exports===u&&g.process,E=function(){try{return y&&y.require&&y.require("util").types||m&&m.binding&&m.binding("util")}catch{}}();T.exports=E},1738:T=>{var C=Object.prototype.toString;T.exports=function(l){return C.call(l)}},1019:T=>{T.exports=function(C,l){return function(g){return C(l(g))}}},5265:(T,C,l)=>{var g=l(6701),u=Math.max;T.exports=function(y,m,E){return m=u(m===void 0?y.length-1:m,0),function(){for(var I=arguments,F=-1,D=u(I.length-m,0),X=Array(D);++F<D;)X[F]=I[m+F];F=-1;for(var R=Array(m+1);++F<m;)R[F]=I[F];return R[m]=E(X),g(y,this,R)}}},8549:(T,C,l)=>{var g=l(7722),u=l(9772);T.exports=function(y,m){return m.length<2?y:g(y,u(m,0,-1))}},1433:(T,C,l)=>{var g=l(5380),u=typeof self=="object"&&self&&self.Object===Object&&self,y=g||u||Function("return this")();T.exports=y},6805:(T,C,l)=>{var g=l(7310),u=l(3983)(g);T.exports=u},3983:T=>{var C=Date.now;T.exports=function(l){var g=0,u=0;return function(){var y=C(),m=16-(y-u);if(u=y,m>0){if(++g>=800)return arguments[0]}else g=0;return l.apply(void 0,arguments)}}},1848:(T,C,l)=>{var g=l(2707);T.exports=function(){this.__data__=new g,this.size=0}},7406:T=>{T.exports=function(C){var l=this.__data__,g=l.delete(C);return this.size=l.size,g}},8569:T=>{T.exports=function(C){return this.__data__.get(C)}},3109:T=>{T.exports=function(C){return this.__data__.has(C)}},3389:(T,C,l)=>{var g=l(2707),u=l(1955),y=l(369);T.exports=function(m,E){var I=this.__data__;if(I instanceof g){var F=I.__data__;if(!u||F.length<199)return F.push([m,E]),this.size=++I.size,this;I=this.__data__=new y(F)}return I.set(m,E),this.size=I.size,this}},4092:(T,C,l)=>{var g=l(9174),u=l(654),y=l(4082);T.exports=function(m){return u(m)?y(m):g(m)}},3614:(T,C,l)=>{var g=l(9268),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,m=g(function(E){var I=[];return E.charCodeAt(0)===46&&I.push(""),E.replace(u,function(F,D,X,R){I.push(X?R.replace(y,"$1"):D||F)}),I});T.exports=m},6729:(T,C,l)=>{var g=l(5414);T.exports=function(u){if(typeof u=="string"||g(u))return u;var y=u+"";return y=="0"&&1/u==-1/0?"-0":y}},1485:T=>{var C=Function.prototype.toString;T.exports=function(l){if(l!=null){try{return C.call(l)}catch{}try{return l+""}catch{}}return""}},4082:T=>{var C="\\ud800-\\udfff",l="["+C+"]",g="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",u="\\ud83c[\\udffb-\\udfff]",y="[^"+C+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",I="(?:"+g+"|"+u+")?",F="[\\ufe0e\\ufe0f]?",D=F+I+"(?:\\u200d(?:"+[y,m,E].join("|")+")"+F+I+")*",X="(?:"+[y+g+"?",g,m,E,l].join("|")+")",R=RegExp(u+"(?="+u+")|"+X+D,"g");T.exports=function(Z){return Z.match(R)||[]}},5701:T=>{var C="\\ud800-\\udfff",l="\\u2700-\\u27bf",g="a-z\\xdf-\\xf6\\xf8-\\xff",u="A-Z\\xc0-\\xd6\\xd8-\\xde",y="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="["+y+"]",E="\\d+",I="["+l+"]",F="["+g+"]",D="[^"+C+y+E+l+g+u+"]",X="(?:\\ud83c[\\udde6-\\uddff]){2}",R="[\\ud800-\\udbff][\\udc00-\\udfff]",Z="["+u+"]",dt="(?:"+F+"|"+D+")",Dt="(?:"+Z+"|"+D+")",rt="(?:['’](?:d|ll|m|re|s|t|ve))?",pt="(?:['’](?:D|LL|M|RE|S|T|VE))?",$="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",et="[\\ufe0e\\ufe0f]?",Q=et+$+"(?:\\u200d(?:"+["[^"+C+"]",X,R].join("|")+")"+et+$+")*",ct="(?:"+[I,X,R].join("|")+")"+Q,K=RegExp([Z+"?"+F+"+"+rt+"(?="+[m,Z,"$"].join("|")+")",Dt+"+"+pt+"(?="+[m,Z+dt,"$"].join("|")+")",Z+"?"+dt+"+"+rt,Z+"+"+pt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",E,ct].join("|"),"g");T.exports=function(Mt){return Mt.match(K)||[]}},3686:(T,C,l)=>{var g=l(8756),u=l(6983)(function(y,m,E){return m=m.toLowerCase(),y+(E?g(m):m)});T.exports=u},8756:(T,C,l)=>{var g=l(3506),u=l(8580);T.exports=function(y){return u(g(y).toLowerCase())}},2160:(T,C,l)=>{var g=l(6397);T.exports=function(){if(!arguments.length)return[];var u=arguments[0];return g(u)?u:[u]}},3122:T=>{T.exports=function(C){return function(){return C}}},3768:(T,C,l)=>{var g=l(8795),u=l(3506),y=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,m=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");T.exports=function(E){return(E=u(E))&&E.replace(y,g).replace(m,"")}},9316:T=>{T.exports=function(C,l){return C===l||C!=C&&l!=l}},3406:(T,C,l)=>{var g=l(1044);T.exports=function(u){return u!=null&&u.length?g(u,1):[]}},2832:(T,C,l)=>{var g=l(7722);T.exports=function(u,y,m){var E=u==null?void 0:g(u,y);return E===void 0?m:E}},8235:(T,C,l)=>{var g=l(809),u=l(6866);T.exports=function(y,m){return y!=null&&u(y,m,g)}},4796:T=>{T.exports=function(C){return C}},1256:(T,C,l)=>{var g=l(9250),u=l(2934),y=Object.prototype,m=y.hasOwnProperty,E=y.propertyIsEnumerable,I=g(function(){return arguments}())?g:function(F){return u(F)&&m.call(F,"callee")&&!E.call(F,"callee")};T.exports=I},6397:T=>{var C=Array.isArray;T.exports=C},8330:(T,C,l)=>{var g=l(8446),u=l(3330);T.exports=function(y){return y!=null&&u(y.length)&&!g(y)}},492:(T,C,l)=>{T=l.nmd(T);var g=l(1433),u=l(659),y=C&&!C.nodeType&&C,m=y&&T&&!T.nodeType&&T,E=m&&m.exports===y?g.Buffer:void 0,I=(E?E.isBuffer:void 0)||u;T.exports=I},9040:(T,C,l)=>{var g=l(2934),u=l(4679);T.exports=function(y){return g(y)&&y.nodeType===1&&!u(y)}},5685:(T,C,l)=>{var g=l(1452),u=l(1201),y=l(1256),m=l(6397),E=l(8330),I=l(492),F=l(7499),D=l(7995),X=Object.prototype.hasOwnProperty;T.exports=function(R){if(R==null)return!0;if(E(R)&&(m(R)||typeof R=="string"||typeof R.splice=="function"||I(R)||D(R)||y(R)))return!R.length;var Z=u(R);if(Z=="[object Map]"||Z=="[object Set]")return!R.size;if(F(R))return!g(R).length;for(var dt in R)if(X.call(R,dt))return!1;return!0}},8446:(T,C,l)=>{var g=l(7148),u=l(8953);T.exports=function(y){if(!u(y))return!1;var m=g(y);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},3330:T=>{T.exports=function(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=9007199254740991}},422:(T,C,l)=>{var g=l(4800),u=l(41),y=l(3685),m=y&&y.isMap,E=m?u(m):g;T.exports=E},8953:T=>{T.exports=function(C){var l=typeof C;return C!=null&&(l=="object"||l=="function")}},2934:T=>{T.exports=function(C){return C!=null&&typeof C=="object"}},4679:(T,C,l)=>{var g=l(7148),u=l(3347),y=l(2934),m=Function.prototype,E=Object.prototype,I=m.toString,F=E.hasOwnProperty,D=I.call(Object);T.exports=function(X){if(!y(X)||g(X)!="[object Object]")return!1;var R=u(X);if(R===null)return!0;var Z=F.call(R,"constructor")&&R.constructor;return typeof Z=="function"&&Z instanceof Z&&I.call(Z)==D}},3764:(T,C,l)=>{var g=l(7866),u=l(41),y=l(3685),m=y&&y.isSet,E=m?u(m):g;T.exports=E},7571:(T,C,l)=>{var g=l(7148),u=l(6397),y=l(2934);T.exports=function(m){return typeof m=="string"||!u(m)&&y(m)&&g(m)=="[object String]"}},5414:(T,C,l)=>{var g=l(7148),u=l(2934);T.exports=function(y){return typeof y=="symbol"||u(y)&&g(y)=="[object Symbol]"}},7995:(T,C,l)=>{var g=l(7129),u=l(41),y=l(3685),m=y&&y.isTypedArray,E=m?u(m):g;T.exports=E},1178:(T,C,l)=>{var g=l(1163),u=l(1452),y=l(8330);T.exports=function(m){return y(m)?g(m):u(m)}},5405:(T,C,l)=>{var g=l(1163),u=l(1491),y=l(8330);T.exports=function(m){return y(m)?g(m,!0):u(m)}},5342:T=>{T.exports=function(C){var l=C==null?0:C.length;return l?C[l-1]:void 0}},4556:(T,C,l)=>{var g=l(369);function u(y,m){if(typeof y!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var E=function(){var I=arguments,F=m?m.apply(this,I):I[0],D=E.cache;if(D.has(F))return D.get(F);var X=y.apply(this,I);return E.cache=D.set(F,X)||D,X};return E.cache=new(u.Cache||g),E}u.Cache=g,T.exports=u},4319:(T,C,l)=>{var g=l(4272),u=l(2931),y=l(5263),m=l(7181),E=l(2083),I=l(7222),F=l(9820),D=l(9697),X=F(function(R,Z){var dt={};if(R==null)return dt;var Dt=!1;Z=g(Z,function(pt){return pt=m(pt,R),Dt||(Dt=pt.length>1),pt}),E(R,D(R),dt),Dt&&(dt=u(dt,7,I));for(var rt=Z.length;rt--;)y(dt,Z[rt]);return dt});T.exports=X},7171:(T,C,l)=>{var g=l(6733),u=l(9820)(function(y,m){return y==null?{}:g(y,m)});T.exports=u},5072:(T,C,l)=>{var g=l(6983)(function(u,y,m){return u+(m?"_":"")+y.toLowerCase()});T.exports=g},3629:T=>{T.exports=function(){return[]}},659:T=>{T.exports=function(){return!1}},3506:(T,C,l)=>{var g=l(6584);T.exports=function(u){return u==null?"":g(u)}},8580:(T,C,l)=>{var g=l(7383)("toUpperCase");T.exports=g},7385:(T,C,l)=>{var g=l(8273),u=l(5854),y=l(3506),m=l(5701);T.exports=function(E,I,F){return E=y(E),(I=F?void 0:I)===void 0?u(E)?m(E):g(E):E.match(I)||[]}},9910:(T,C,l)=>{var g=l(4390).getUint64;T.exports=function(u){var y=new DataView(u.buffer,u.byteOffset,u.byteLength),m={version:u[0],flags:new Uint8Array(u.subarray(1,4)),references:[],referenceId:y.getUint32(4),timescale:y.getUint32(8)},E=12;m.version===0?(m.earliestPresentationTime=y.getUint32(E),m.firstOffset=y.getUint32(E+4),E+=8):(m.earliestPresentationTime=g(u.subarray(E)),m.firstOffset=g(u.subarray(E+8)),E+=16),E+=2;var I=y.getUint16(E);for(E+=2;I>0;E+=12,I--)m.references.push({referenceType:(128&u[E])>>>7,referencedSize:2147483647&y.getUint32(E),subsegmentDuration:y.getUint32(E+4),startsWithSap:!!(128&u[E+8]),sapType:(112&u[E+8])>>>4,sapDeltaTime:268435455&y.getUint32(E+8)});return m}},6946:T=>{var C,l,g,u,y,m,E,I=9e4;C=function(F){return F*I},l=function(F,D){return F*D},g=function(F){return F/I},u=function(F,D){return F/D},y=function(F,D){return C(u(F,D))},m=function(F,D){return l(g(F),D)},E=function(F,D,X){return g(X?F:F-D)},T.exports={ONE_SECOND_IN_TS:I,secondsToVideoTs:C,secondsToAudioTs:l,videoTsToSeconds:g,audioTsToSeconds:u,audioTsToVideoTs:y,videoTsToAudioTs:m,metadataTsToSeconds:E}},4390:T=>{var C=Math.pow(2,32);T.exports={getUint64:function(l){var g,u=new DataView(l.buffer,l.byteOffset,l.byteLength);return u.getBigUint64?(g=u.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(g):g:u.getUint32(0)*C+u.getUint32(4)},MAX_UINT32:C}},613:T=>{T.exports=function(C,l){var g,u=null;try{g=JSON.parse(C,l)}catch(y){u=y}return[u,g]}},8726:function(T){var C,l,g,u,y;C=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,l=/^(?=([^\/?#]*))\1([^]*)$/,g=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,y={buildAbsoluteURL:function(m,E,I){if(I=I||{},m=m.trim(),!(E=E.trim())){if(!I.alwaysNormalize)return m;var F=y.parseURL(m);if(!F)throw new Error("Error trying to parse base URL.");return F.path=y.normalizePath(F.path),y.buildURLFromParts(F)}var D=y.parseURL(E);if(!D)throw new Error("Error trying to parse relative URL.");if(D.scheme)return I.alwaysNormalize?(D.path=y.normalizePath(D.path),y.buildURLFromParts(D)):E;var X=y.parseURL(m);if(!X)throw new Error("Error trying to parse base URL.");if(!X.netLoc&&X.path&&X.path[0]!=="/"){var R=l.exec(X.path);X.netLoc=R[1],X.path=R[2]}X.netLoc&&!X.path&&(X.path="/");var Z={scheme:X.scheme,netLoc:D.netLoc,path:null,params:D.params,query:D.query,fragment:D.fragment};if(!D.netLoc&&(Z.netLoc=X.netLoc,D.path[0]!=="/"))if(D.path){var dt=X.path,Dt=dt.substring(0,dt.lastIndexOf("/")+1)+D.path;Z.path=y.normalizePath(Dt)}else Z.path=X.path,D.params||(Z.params=X.params,D.query||(Z.query=X.query));return Z.path===null&&(Z.path=I.alwaysNormalize?y.normalizePath(D.path):D.path),y.buildURLFromParts(Z)},parseURL:function(m){var E=C.exec(m);return E?{scheme:E[1]||"",netLoc:E[2]||"",path:E[3]||"",params:E[4]||"",query:E[5]||"",fragment:E[6]||""}:null},normalizePath:function(m){for(m=m.split("").reverse().join("").replace(g,"");m.length!==(m=m.replace(u,"")).length;);return m.split("").reverse().join("")},buildURLFromParts:function(m){return m.scheme+m.netLoc+m.path+m.params+m.query+m.fragment}},T.exports=y},6914:(T,C,l)=>{l.r(C),l.d(C,{default:()=>_t});var g=l(5204),u=l.n(g),y=l(7509),m=l.n(y),E=l(613),I=l.n(E),F=l(1401),D=l.n(F),X=l(52),R=l.n(X);function Z(){return Z=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i])}return s},Z.apply(this,arguments)}var dt=l(8726),Dt=l.n(dt);const rt=function(s,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(s)&&(s=u().location&&u().location.href||"");var e=typeof u().URL=="function",i=/^\/\//.test(s),n=!u().location&&!/\/\//i.test(s);if(e?s=new(u()).URL(s,u().location||"http://example.com"):/\/\//i.test(s)||(s=Dt().buildAbsoluteURL(u().location&&u().location.href||"",s)),e){var r=new URL(t,s);return n?r.href.slice(18):i?r.href.slice(r.protocol.length):r.href}return Dt().buildAbsoluteURL(s,t)};var pt=function(){function s(){this.listeners={}}var t=s.prototype;return t.on=function(e,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i)},t.off=function(e,i){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(i);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var i=this.listeners[e];if(i)if(arguments.length===2)for(var n=i.length,r=0;r<n;++r)i[r].call(this,arguments[1]);else for(var a=Array.prototype.slice.call(arguments,1),c=i.length,p=0;p<c;++p)i[p].apply(this,a)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(i){e.push(i)})},s}();function $(s){for(var t,e=(t=s,u().atob?u().atob(t):Buffer.from(t,"base64").toString("binary")),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}class et extends pt{constructor(){super(),this.buffer=""}push(t){let e;for(this.buffer+=t,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}const Q="	",ct=function(s){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(s||""),e={};return t[1]&&(e.length=parseInt(t[1],10)),t[2]&&(e.offset=parseInt(t[2],10)),e},K=function(s){const t={};if(!s)return t;const e=s.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,n=e.length;for(;n--;)e[n]!==""&&(i=/([^=]*)=(.*)/.exec(e[n]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1]);return t};class Mt extends pt{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let e,i;(t=t.trim()).length!==0&&(t[0]==="#"?this.tagMappers.reduce((n,r)=>{const a=r(t);return a===t?n:n.concat([a])},[t]).forEach(n=>{for(let r=0;r<this.customParsers.length;r++)if(this.customParsers[r].call(this,n))return;if(n.indexOf("#EXT")===0)if(n=n.replace("\r",""),e=/^#EXTM3U/.exec(n),e)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(n),e)return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(n),e)return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-VERSION:([0-9.]*)?/.exec(n),e)return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(n),e)return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(n),e)return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(n),e)return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void this.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:(.*)?$/.exec(n),e)return i=Z(ct(e[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(n),e)return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-MAP:(.*)$/.exec(n),e){if(i={type:"tag",tagType:"map"},e[1]){const r=K(e[1]);r.URI&&(i.uri=r.URI),r.BYTERANGE&&(i.byterange=ct(r.BYTERANGE))}this.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:(.*)$/.exec(n),e){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=K(e[1]),i.attributes.RESOLUTION){const r=i.attributes.RESOLUTION.split("x"),a={};r[0]&&(a.width=parseInt(r[0],10)),r[1]&&(a.height=parseInt(r[1],10)),i.attributes.RESOLUTION=a}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:(.*)$/.exec(n),e)return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=K(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(n),e)this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(n),e)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(n),e)return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-KEY:(.*)$/.exec(n),e)return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=K(e[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(e=/^#EXT-X-START:(.*)$/.exec(n),e)return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=K(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(n),e)return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:(.*)?$/.exec(n),e)return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-CUE-IN:(.*)?$/.exec(n),e)return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i);if(e=/^#EXT-X-SKIP:(.*)$/.exec(n),e&&e[1])return i={type:"tag",tagType:"skip"},i.attributes=K(e[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Q)),void this.trigger("data",i);if(e=/^#EXT-X-PART:(.*)$/.exec(n),e&&e[1])return i={type:"tag",tagType:"part"},i.attributes=K(e[1]),["DURATION"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseFloat(i.attributes[r]))}),["INDEPENDENT","GAP"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=/YES/.test(i.attributes[r]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=ct(i.attributes.BYTERANGE)),void this.trigger("data",i);if(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(n),e&&e[1])return i={type:"tag",tagType:"server-control"},i.attributes=K(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseFloat(i.attributes[r]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=/YES/.test(i.attributes[r]))}),void this.trigger("data",i);if(e=/^#EXT-X-PART-INF:(.*)$/.exec(n),e&&e[1])return i={type:"tag",tagType:"part-inf"},i.attributes=K(e[1]),["PART-TARGET"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseFloat(i.attributes[r]))}),void this.trigger("data",i);if(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(n),e&&e[1])return i={type:"tag",tagType:"preload-hint"},i.attributes=K(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(r){if(i.attributes.hasOwnProperty(r)){i.attributes[r]=parseInt(i.attributes[r],10);const a=r==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[a]=i.attributes[r],delete i.attributes[r]}}),void this.trigger("data",i);if(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(n),e&&e[1])return i={type:"tag",tagType:"rendition-report"},i.attributes=K(e[1]),["LAST-MSN","LAST-PART"].forEach(function(r){i.attributes.hasOwnProperty(r)&&(i.attributes[r]=parseInt(i.attributes[r],10))}),void this.trigger("data",i);if(e=/^#EXT-X-DATERANGE:(.*)$/.exec(n),e&&e[1]){i={type:"tag",tagType:"daterange"},i.attributes=K(e[1]),["ID","CLASS"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=String(i.attributes[a]))}),["START-DATE","END-DATE"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=new Date(i.attributes[a]))}),["DURATION","PLANNED-DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["END-ON-NEXT"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/i.test(i.attributes[a]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=i.attributes[a].toString(16))});const r=/^X-([A-Z]+-)+[A-Z]+$/;for(const a in i.attributes){if(!r.test(a))continue;const c=/[0-9A-Fa-f]{6}/g.test(i.attributes[a]),p=/^\d+(\.\d+)?$/.test(i.attributes[a]);i.attributes[a]=c?i.attributes[a].toString(16):p?parseFloat(i.attributes[a]):String(i.attributes[a])}this.trigger("data",i)}else if(e=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(n),e)this.trigger("data",{type:"tag",tagType:"independent-segments"});else{if(e=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(n),e)return i={type:"tag",tagType:"content-steering"},i.attributes=K(e[1]),void this.trigger("data",i);this.trigger("data",{type:"tag",data:n.slice(4)})}}}}else this.trigger("data",{type:"comment",text:n.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))}addParser({expression:t,customType:e,dataParser:i,segment:n}){typeof i!="function"&&(i=r=>r),this.customParsers.push(r=>{if(t.exec(r))return this.trigger("data",{type:"custom",data:i(r),customType:e,segment:n}),!0})}addTagMapper({expression:t,map:e}){this.tagMappers.push(i=>t.test(i)?e(i):i)}}const B=function(s){const t={};return Object.keys(s).forEach(function(e){var i;t[i=e,i.toLowerCase().replace(/-(\w)/g,n=>n[1].toUpperCase())]=s[e]}),t},W=function(s){const{serverControl:t,targetDuration:e,partTargetDuration:i}=s;if(!t)return;const n="#EXT-X-SERVER-CONTROL",r="holdBack",a="partHoldBack",c=e&&3*e,p=i&&2*i;e&&!t.hasOwnProperty(r)&&(t[r]=c,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${c}).`})),c&&t[r]<c&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${t[r]}) to targetDuration * 3 (${c})`}),t[r]=c),i&&!t.hasOwnProperty(a)&&(t[a]=3*i,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[a]}).`})),i&&t[a]<p&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${t[a]}) to partTargetDuration * 2 (${p}).`}),t[a]=p)};class at extends pt{constructor(){super(),this.lineStream=new et,this.parseStream=new Mt,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const t=this,e=[];let i,n,r={},a=!1;const c=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let v=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let _=0,L=0;const k={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&n&&(r.key=n),r.timeline||typeof v!="number"||(r.timeline=v),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(A){let tt,z;({tag(){({version(){A.version&&(this.manifest.version=A.version)},"allow-cache"(){this.manifest.allowCache=A.allowed,"allowed"in A||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const lt={};"length"in A&&(r.byterange=lt,lt.length=A.length,"offset"in A||(A.offset=_)),"offset"in A&&(r.byterange=lt,lt.offset=A.offset),_=lt.offset+lt.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),A.title&&(r.title=A.title),A.duration>0&&(r.duration=A.duration),A.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=e},key(){if(A.attributes)if(A.attributes.METHOD!=="NONE")if(A.attributes.URI){if(A.attributes.KEYFORMAT==="com.apple.streamingkeydelivery")return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:A.attributes});if(A.attributes.KEYFORMAT==="com.microsoft.playready")return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:A.attributes.URI});if(A.attributes.KEYFORMAT==="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed")return["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(A.attributes.METHOD)===-1?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):(A.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),A.attributes.URI.substring(0,23)!=="data:text/plain;base64,"?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):A.attributes.KEYID&&A.attributes.KEYID.substring(0,2)==="0x"?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:A.attributes.KEYFORMAT,keyId:A.attributes.KEYID.substring(2)},pssh:$(A.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));A.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:A.attributes.METHOD||"AES-128",uri:A.attributes.URI},A.attributes.IV!==void 0&&(n.iv=A.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(A.number)?this.manifest.mediaSequence=A.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+A.number})},"discontinuity-sequence"(){isFinite(A.number)?(this.manifest.discontinuitySequence=A.number,v=A.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+A.number})},"playlist-type"(){/VOD|EVENT/.test(A.playlistType)?this.manifest.playlistType=A.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+A.playlist})},map(){i={},A.uri&&(i.uri=A.uri),A.byterange&&(i.byterange=A.byterange),n&&(i.key=n)},"stream-inf"(){this.manifest.playlists=e,this.manifest.mediaGroups=this.manifest.mediaGroups||p,A.attributes?(r.attributes||(r.attributes={}),Z(r.attributes,A.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,!(A.attributes&&A.attributes.TYPE&&A.attributes["GROUP-ID"]&&A.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const lt=this.manifest.mediaGroups[A.attributes.TYPE];lt[A.attributes["GROUP-ID"]]=lt[A.attributes["GROUP-ID"]]||{},tt=lt[A.attributes["GROUP-ID"]],z={default:/yes/i.test(A.attributes.DEFAULT)},z.default?z.autoselect=!0:z.autoselect=/yes/i.test(A.attributes.AUTOSELECT),A.attributes.LANGUAGE&&(z.language=A.attributes.LANGUAGE),A.attributes.URI&&(z.uri=A.attributes.URI),A.attributes["INSTREAM-ID"]&&(z.instreamId=A.attributes["INSTREAM-ID"]),A.attributes.CHARACTERISTICS&&(z.characteristics=A.attributes.CHARACTERISTICS),A.attributes.FORCED&&(z.forced=/yes/i.test(A.attributes.FORCED)),tt[A.attributes.NAME]=z},discontinuity(){v+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(e.length)},"program-date-time"(){this.manifest.dateTimeString===void 0&&(this.manifest.dateTimeString=A.dateTimeString,this.manifest.dateTimeObject=A.dateTimeObject),r.dateTimeString=A.dateTimeString,r.dateTimeObject=A.dateTimeObject;const{lastProgramDateTime:lt}=this;this.lastProgramDateTime=new Date(A.dateTimeString).getTime(),lt===null&&this.manifest.segments.reduceRight((st,mt)=>(mt.programDateTime=st-1e3*mt.duration,mt.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(A.duration)||A.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+A.duration}):(this.manifest.targetDuration=A.duration,W.call(this,this.manifest))},start(){A.attributes&&!isNaN(A.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:A.attributes["TIME-OFFSET"],precise:A.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=A.data},"cue-out-cont"(){r.cueOutCont=A.data},"cue-in"(){r.cueIn=A.data},skip(){this.manifest.skip=B(A.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",A.attributes,["SKIPPED-SEGMENTS"])},part(){a=!0;const lt=this.manifest.segments.length,st=B(A.attributes);r.parts=r.parts||[],r.parts.push(st),st.byterange&&(st.byterange.hasOwnProperty("offset")||(st.byterange.offset=L),L=st.byterange.offset+st.byterange.length);const mt=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${mt} for segment #${lt}`,A.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((yt,Lt)=>{yt.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${Lt} lacks required attribute(s): LAST-PART`})})},"server-control"(){const lt=this.manifest.serverControl=B(A.attributes);lt.hasOwnProperty("canBlockReload")||(lt.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),W.call(this,this.manifest),lt.canSkipDateranges&&!lt.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const lt=this.manifest.segments.length,st=B(A.attributes),mt=st.type&&st.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(st),st.byterange&&(st.byterange.hasOwnProperty("offset")||(st.byterange.offset=mt?L:0,mt&&(L=st.byterange.offset+st.byterange.length)));const yt=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${yt} for segment #${lt}`,A.attributes,["TYPE","URI"]),st.type)for(let Lt=0;Lt<r.preloadHints.length-1;Lt++){const wt=r.preloadHints[Lt];wt.type&&wt.type===st.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${yt} for segment #${lt} has the same TYPE ${st.type} as preload hint #${Lt}`})}},"rendition-report"(){const lt=B(A.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(lt);const st=this.manifest.renditionReports.length-1,mt=["LAST-MSN","URI"];a&&mt.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${st}`,A.attributes,mt)},"part-inf"(){this.manifest.partInf=B(A.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",A.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),W.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(B(A.attributes));const lt=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${lt}`,A.attributes,["ID","START-DATE"]);const st=this.manifest.dateRanges[lt];st.endDate&&st.startDate&&new Date(st.endDate)<new Date(st.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),st.duration&&st.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),st.plannedDuration&&st.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const mt=!!st.endOnNext;if(mt&&!st.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),mt&&(st.duration||st.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),st.duration&&st.endDate){const yt=st.startDate.getTime()+1e3*st.duration;this.manifest.dateRanges[lt].endDate=new Date(yt)}if(k[st.id]){for(const Lt in k[st.id])if(st[Lt]&&JSON.stringify(k[st.id][Lt])!==JSON.stringify(st[Lt])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const yt=this.manifest.dateRanges.findIndex(Lt=>Lt.id===st.id);this.manifest.dateRanges[yt]=Z(this.manifest.dateRanges[yt],st),k[st.id]=Z(k[st.id],st),this.manifest.dateRanges.pop()}else k[st.id]=st},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=B(A.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",A.attributes,["SERVER-URI"])}}[A.tagType]||c).call(t)},uri(){r.uri=A.uri,e.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),n&&(r.key=n),r.timeline=v,i&&(r.map=i),L=0,this.lastProgramDateTime!==null&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*r.duration),r={}},comment(){},custom(){A.segment?(r.custom=r.custom||{},r.custom[A.customType]=A.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[A.customType]=A.data)}})[A.type].call(t)})}warnOnMissingAttributes_(t,e,i){const n=[];i.forEach(function(r){e.hasOwnProperty(r)||n.push(r)}),n.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${n.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}var At,Ot,vt={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},It=["video","audio","text"],Rt=["Video","Audio","Text"],Et=function(s){return s&&s.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,i){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},Bt=function(s){s===void 0&&(s="");var t=s.split(","),e=[];return t.forEach(function(i){var n;i=i.trim(),It.forEach(function(r){var a=vt[r].exec(i.toLowerCase());if(a&&!(a.length<=1)){n=r;var c=i.substring(0,a[1].length),p=i.replace(c,"");e.push({type:c,details:p,mediaType:r})}}),n||e.push({type:i,details:"",mediaType:"unknown"})}),e},Qt=function(s){return s===void 0&&(s=""),vt.audio.test(s.trim().toLowerCase())},he=function(s){if(s&&typeof s=="string"){var t,e=s.toLowerCase().split(",").map(function(r){return Et(r.trim())}),i="video";e.length===1&&Qt(e[0])?i="audio":e.length===1&&((t=e[0])===void 0&&(t=""),vt.text.test(t.trim().toLowerCase()))&&(i="application");var n="mp4";return e.every(function(r){return vt.mp4.test(r)})?n="mp4":e.every(function(r){return vt.webm.test(r)})?n="webm":e.every(function(r){return vt.ogg.test(r)})&&(n="ogg"),i+"/"+n+';codecs="'+s+'"'}},Zt=function(s){return s===void 0&&(s=""),u().MediaSource&&u().MediaSource.isTypeSupported&&u().MediaSource.isTypeSupported(he(s))||!1},ge=function(s){return s===void 0&&(s=""),s.toLowerCase().split(",").every(function(t){t=t.trim();for(var e=0;e<Rt.length;e++)if(vt["muxer"+Rt[e]].test(t))return!0;return!1})},ae="mp4a.40.2",Te=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Ae=/^application\/dash\+xml/i,Ie=function(s){return Te.test(s)?"hls":Ae.test(s)?"dash":s==="application/vnd.videojs.vhs+json"?"vhs-json":null},Ke=function(s){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer},Kt=function(s){return s instanceof Uint8Array?s:(Array.isArray(s)||Ke(s)||s instanceof ArrayBuffer||(s=typeof s!="number"||typeof s=="number"&&s!=s?0:[s]),new Uint8Array(s&&s.buffer||s,s&&s.byteOffset||0,s&&s.byteLength||0))},ze=u().BigInt||Number,ei=[ze("0x1"),ze("0x100"),ze("0x10000"),ze("0x1000000"),ze("0x100000000"),ze("0x10000000000"),ze("0x1000000000000"),ze("0x100000000000000"),ze("0x10000000000000000")],We=(At=new Uint16Array([65484]),(Ot=new Uint8Array(At.buffer,At.byteOffset,At.byteLength))[0]===255||Ot[0],function(s,t){var e=t===void 0?{}:t,i=e.signed,n=i!==void 0&&i,r=e.le,a=r!==void 0&&r;s=Kt(s);var c=a?"reduce":"reduceRight",p=(s[c]?s[c]:Array.prototype[c]).call(s,function(_,L,k){var A=a?k:Math.abs(k+1-s.length);return _+ze(L)*ei[A]},ze(0));if(n){var v=ei[s.length]/ze(2)-ze(1);(p=ze(p))>v&&(p-=v,p-=v,p-=ze(2))}return Number(p)}),Di=function(s,t){if(typeof s!="string"&&s&&typeof s.toString=="function"&&(s=s.toString()),typeof s!="string")return new Uint8Array;t||(s=unescape(encodeURIComponent(s)));for(var e=new Uint8Array(s.length),i=0;i<s.length;i++)e[i]=s.charCodeAt(i);return e},Qe=function(s,t,e){var i=e===void 0?{}:e,n=i.offset,r=n===void 0?0:n,a=i.mask,c=a===void 0?[]:a;s=Kt(s);var p=(t=Kt(t)).every?t.every:Array.prototype.every;return t.length&&s.length-r>=t.length&&p.call(t,function(v,_){return v===(c[_]?c[_]&s[r+_]:s[r+_])})},Pt=l(2854);const Ct=s=>!!s&&typeof s=="object",Nt=(...s)=>s.reduce((t,e)=>(typeof e!="object"||Object.keys(e).forEach(i=>{Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=t[i].concat(e[i]):Ct(t[i])&&Ct(e[i])?t[i]=Nt(t[i],e[i]):t[i]=e[i]}),t),{}),Ft=s=>Object.keys(s).map(t=>s[t]),ft=s=>s.reduce((t,e)=>t.concat(e),[]),ce=s=>{if(!s.length)return[];const t=[];for(let e=0;e<s.length;e++)t.push(s[e]);return t},oi=({baseUrl:s="",source:t="",range:e="",indexRange:i=""})=>{const n={uri:t,resolvedUri:rt(s||"",t)};if(e||i){const r=(e||i).split("-");let a,c=u().BigInt?u().BigInt(r[0]):parseInt(r[0],10),p=u().BigInt?u().BigInt(r[1]):parseInt(r[1],10);c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c)),p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p)),a=typeof p=="bigint"||typeof c=="bigint"?u().BigInt(p)-u().BigInt(c)+u().BigInt(1):p-c+1,typeof a=="bigint"&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),n.byterange={length:a,offset:c}}return n},di=s=>(s&&typeof s!="number"&&(s=parseInt(s,10)),isNaN(s)?null:s),ii={static(s){const{duration:t,timescale:e=1,sourceDuration:i,periodDuration:n}=s,r=di(s.endNumber),a=t/e;return typeof r=="number"?{start:0,end:r}:typeof n=="number"?{start:0,end:n/a}:{start:0,end:i/a}},dynamic(s){const{NOW:t,clientOffset:e,availabilityStartTime:i,timescale:n=1,duration:r,periodStart:a=0,minimumUpdatePeriod:c=0,timeShiftBufferDepth:p=1/0}=s,v=di(s.endNumber),_=(t+e)/1e3,L=i+a,k=_+c-L,A=Math.ceil(k*n/r),tt=Math.floor((_-L-p)*n/r),z=Math.floor((_-L)*n/r);return{start:Math.max(0,tt),end:typeof v=="number"?v:Math.min(A,z)}}},fi=s=>{const{type:t,duration:e,timescale:i=1,periodDuration:n,sourceDuration:r}=s,{start:a,end:c}=ii[t](s),p=((v,_)=>{const L=[];for(let k=v;k<_;k++)L.push(k);return L})(a,c).map((v=>_=>{const{duration:L,timescale:k=1,periodStart:A,startNumber:tt=1}=v;return{number:tt+_,duration:L/k,timeline:A,time:_*L}})(s));if(t==="static"){const v=p.length-1,_=typeof n=="number"?n:r;p[v].duration=_-e/i*v}return p},Ge=s=>{const{baseUrl:t,initialization:e={},sourceDuration:i,indexRange:n="",periodStart:r,presentationTime:a,number:c=0,duration:p}=s;if(!t)throw new Error("NO_BASE_URL");const v=oi({baseUrl:t,source:e.sourceURL,range:e.range}),_=oi({baseUrl:t,source:t,indexRange:n});if(_.map=v,p){const L=fi(s);L.length&&(_.duration=L[0].duration,_.timeline=L[0].timeline)}else i&&(_.duration=i,_.timeline=r);return _.presentationTime=a||r,_.number=c,[_]},$e=(s,t,e)=>{const i=s.sidx.map?s.sidx.map:null,n=s.sidx.duration,r=s.timeline||0,a=s.sidx.byterange,c=a.offset+a.length,p=t.timescale,v=t.references.filter(lt=>lt.referenceType!==1),_=[],L=s.endList?"static":"dynamic",k=s.sidx.timeline;let A,tt=k,z=s.mediaSequence||0;A=typeof t.firstOffset=="bigint"?u().BigInt(c)+t.firstOffset:c+t.firstOffset;for(let lt=0;lt<v.length;lt++){const st=t.references[lt],mt=st.referencedSize,yt=st.subsegmentDuration;let Lt;Lt=typeof A=="bigint"?A+u().BigInt(mt)-u().BigInt(1):A+mt-1;const wt=Ge({baseUrl:e,timescale:p,timeline:r,periodStart:k,presentationTime:tt,number:z,duration:yt,sourceDuration:n,indexRange:`${A}-${Lt}`,type:L})[0];i&&(wt.map=i),_.push(wt),A+=typeof A=="bigint"?u().BigInt(mt):mt,tt+=yt/p,z++}return s.segments=_,s},He=["AUDIO","SUBTITLES"],Y=1/60,ot=s=>{return(t=s,e=({timeline:i})=>i,Ft(t.reduce((i,n)=>(n.forEach(r=>{i[e(r)]=r}),i),{}))).sort((i,n)=>i.timeline>n.timeline?1:-1);var t,e},Ut=s=>{let t=[];var e,i;return e=s,i=(n,r,a,c)=>{t=t.concat(n.playlists||[])},He.forEach(function(n){for(var r in e.mediaGroups[n])for(var a in e.mediaGroups[n][r]){var c=e.mediaGroups[n][r][a];i(c)}}),t},$t=({playlist:s,mediaSequence:t})=>{s.mediaSequence=t,s.segments.forEach((e,i)=>{e.number=s.mediaSequence+i})},Ht=s=>s&&s.uri+"-"+(t=>{let e;return e=typeof t.offset=="bigint"||typeof t.length=="bigint"?u().BigInt(t.offset)+u().BigInt(t.length)-u().BigInt(1):t.offset+t.length-1,`${t.offset}-${e}`})(s.byterange),ke=s=>{const t=s.reduce(function(i,n){return i[n.attributes.baseUrl]||(i[n.attributes.baseUrl]=[]),i[n.attributes.baseUrl].push(n),i},{});let e=[];return Object.values(t).forEach(i=>{const n=Ft(i.reduce((r,a)=>{const c=a.attributes.id+(a.attributes.lang||"");return r[c]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),r[c].segments.push(...a.segments)),a.attributes.contentProtection&&(r[c].attributes.contentProtection=a.attributes.contentProtection)):(r[c]=a,r[c].attributes.timelineStarts=[]),r[c].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),r},{}));e=e.concat(n)}),e.map(i=>{var n;return i.discontinuityStarts=(n=i.segments||[],n.reduce((r,a,c)=>(a.discontinuity&&r.push(c),r),[])),i})},le=(s,t)=>{const e=Ht(s.sidx),i=e&&t[e]&&t[e].sidx;return i&&$e(s,i,s.sidx.resolvedUri),s},se=(s,t={})=>{if(!Object.keys(t).length)return s;for(const e in s)s[e]=le(s[e],t);return s},Oe=({attributes:s,segments:t,sidx:e,discontinuityStarts:i})=>{const n={attributes:{NAME:s.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:s.width,height:s.height},CODECS:s.codecs,BANDWIDTH:s.bandwidth,"PROGRAM-ID":1},uri:"",endList:s.type==="static",timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,discontinuityStarts:i,timelineStarts:s.timelineStarts,segments:t};return s.frameRate&&(n.attributes["FRAME-RATE"]=s.frameRate),s.contentProtection&&(n.contentProtection=s.contentProtection),s.serviceLocation&&(n.attributes.serviceLocation=s.serviceLocation),e&&(n.sidx=e),n},_e=({attributes:s})=>s.mimeType==="video/mp4"||s.mimeType==="video/webm"||s.contentType==="video",pi=({attributes:s})=>s.mimeType==="audio/mp4"||s.mimeType==="audio/webm"||s.contentType==="audio",Ji=({attributes:s})=>s.mimeType==="text/vtt"||s.contentType==="text",P=s=>s?Object.keys(s).reduce((t,e)=>{const i=s[e];return t.concat(i.playlists)},[]):[],N=({dashPlaylists:s,locations:t,contentSteering:e,sidxMapping:i={},previousManifest:n,eventStream:r})=>{if(!s.length)return{};const{sourceDuration:a,type:c,suggestedPresentationDelay:p,minimumUpdatePeriod:v}=s[0].attributes,_=ke(s.filter(_e)).map(Oe),L=ke(s.filter(pi)),k=ke(s.filter(Ji)),A=s.map(ht=>ht.attributes.captionServices).filter(Boolean),tt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:se(_,i)};v>=0&&(tt.minimumUpdatePeriod=1e3*v),t&&(tt.locations=t),e&&(tt.contentSteering=e),c==="dynamic"&&(tt.suggestedPresentationDelay=p),r&&r.length>0&&(tt.eventStream=r);const z=tt.playlists.length===0,lt=L.length?((ht,St={},qt=!1)=>{let ve;const ye=ht.reduce((ne,xe)=>{const oe=xe.attributes.role&&xe.attributes.role.value||"",Ze=xe.attributes.lang||"";let ri=xe.attributes.label||"main";if(Ze&&!xe.attributes.label){const De=oe?` (${oe})`:"";ri=`${xe.attributes.lang}${De}`}ne[ri]||(ne[ri]={language:Ze,autoselect:!0,default:oe==="main",playlists:[],uri:""});const qe=le((({attributes:De,segments:bi,sidx:Qi,mediaSequence:fn,discontinuitySequence:sn,discontinuityStarts:js},lr)=>{const Gs={attributes:{NAME:De.id,BANDWIDTH:De.bandwidth,CODECS:De.codecs,"PROGRAM-ID":1},uri:"",endList:De.type==="static",timeline:De.periodStart,resolvedUri:De.baseUrl||"",targetDuration:De.duration,discontinuitySequence:sn,discontinuityStarts:js,timelineStarts:De.timelineStarts,mediaSequence:fn,segments:bi};return De.contentProtection&&(Gs.contentProtection=De.contentProtection),De.serviceLocation&&(Gs.attributes.serviceLocation=De.serviceLocation),Qi&&(Gs.sidx=Qi),lr&&(Gs.attributes.AUDIO="audio",Gs.attributes.SUBTITLES="subs"),Gs})(xe,qt),St);return ne[ri].playlists.push(qe),ve===void 0&&oe==="main"&&(ve=xe,ve.default=!0),ne},{});return ve||(ye[Object.keys(ye)[0]].default=!0),ye})(L,i,z):null,st=k.length?((ht,St={})=>ht.reduce((qt,ve)=>{const ye=ve.attributes.label||ve.attributes.lang||"text";return qt[ye]||(qt[ye]={language:ye,default:!1,autoselect:!1,playlists:[],uri:""}),qt[ye].playlists.push(le((({attributes:ne,segments:xe,mediaSequence:oe,discontinuityStarts:Ze,discontinuitySequence:ri})=>{xe===void 0&&(xe=[{uri:ne.baseUrl,timeline:ne.periodStart,resolvedUri:ne.baseUrl||"",duration:ne.sourceDuration,number:0}],ne.duration=ne.sourceDuration);const qe={NAME:ne.id,BANDWIDTH:ne.bandwidth,"PROGRAM-ID":1};ne.codecs&&(qe.CODECS=ne.codecs);const De={attributes:qe,uri:"",endList:ne.type==="static",timeline:ne.periodStart,resolvedUri:ne.baseUrl||"",targetDuration:ne.duration,timelineStarts:ne.timelineStarts,discontinuityStarts:Ze,discontinuitySequence:ri,mediaSequence:oe,segments:xe};return ne.serviceLocation&&(De.attributes.serviceLocation=ne.serviceLocation),De})(ve),St)),qt},{}))(k,i):null,mt=_.concat(P(lt),P(st)),yt=mt.map(({timelineStarts:ht})=>ht);var Lt,wt;return tt.timelineStarts=ot(yt),Lt=mt,wt=tt.timelineStarts,Lt.forEach(ht=>{ht.mediaSequence=0,ht.discontinuitySequence=wt.findIndex(function({timeline:St}){return St===ht.timeline}),ht.segments&&ht.segments.forEach((St,qt)=>{St.number=qt})}),lt&&(tt.mediaGroups.AUDIO.audio=lt),st&&(tt.mediaGroups.SUBTITLES.subs=st),A.length&&(tt.mediaGroups["CLOSED-CAPTIONS"].cc=A.reduce((ht,St)=>(St&&St.forEach(qt=>{const{channel:ve,language:ye}=qt;ht[ye]={autoselect:!1,default:!1,instreamId:ve,language:ye},qt.hasOwnProperty("aspectRatio")&&(ht[ye].aspectRatio=qt.aspectRatio),qt.hasOwnProperty("easyReader")&&(ht[ye].easyReader=qt.easyReader),qt.hasOwnProperty("3D")&&(ht[ye]["3D"]=qt["3D"])}),ht),{})),n?(({oldManifest:ht,newManifest:St})=>{const qt=ht.playlists.concat(Ut(ht)),ve=St.playlists.concat(Ut(St));return St.timelineStarts=ot([ht.timelineStarts,St.timelineStarts]),(({oldPlaylists:ye,newPlaylists:ne,timelineStarts:xe})=>{ne.forEach(oe=>{oe.discontinuitySequence=xe.findIndex(function({timeline:De}){return De===oe.timeline});const Ze=((De,bi)=>{for(let Qi=0;Qi<De.length;Qi++)if(De[Qi].attributes.NAME===bi)return De[Qi];return null})(ye,oe.attributes.NAME);if(!Ze||oe.sidx)return;const ri=oe.segments[0],qe=Ze.segments.findIndex(function(De){return Math.abs(De.presentationTime-ri.presentationTime)<Y});if(qe===-1)return $t({playlist:oe,mediaSequence:Ze.mediaSequence+Ze.segments.length}),oe.segments[0].discontinuity=!0,oe.discontinuityStarts.unshift(0),void((!Ze.segments.length&&oe.timeline>Ze.timeline||Ze.segments.length&&oe.timeline>Ze.segments[Ze.segments.length-1].timeline)&&oe.discontinuitySequence--);Ze.segments[qe].discontinuity&&!ri.discontinuity&&(ri.discontinuity=!0,oe.discontinuityStarts.unshift(0),oe.discontinuitySequence--),$t({playlist:oe,mediaSequence:Ze.segments[qe].number})})})({oldPlaylists:qt,newPlaylists:ve,timelineStarts:St.timelineStarts}),St})({oldManifest:n,newManifest:tt}):tt},J=(s,t,e)=>{const{NOW:i,clientOffset:n,availabilityStartTime:r,timescale:a=1,periodStart:c=0,minimumUpdatePeriod:p=0}=s,v=(i+n)/1e3+p-(r+c);return Math.ceil((v*a-t)/e)},bt=(s,t)=>{const{type:e,minimumUpdatePeriod:i=0,media:n="",sourceDuration:r,timescale:a=1,startNumber:c=1,periodStart:p}=s,v=[];let _=-1;for(let L=0;L<t.length;L++){const k=t[L],A=k.d,tt=k.r||0,z=k.t||0;let lt;if(_<0&&(_=z),z&&z>_&&(_=z),tt<0){const yt=L+1;lt=yt===t.length?e==="dynamic"&&i>0&&n.indexOf("$Number$")>0?J(s,_,A):(r*a-_)/A:(t[yt].t-_)/A}else lt=tt+1;const st=c+v.length+lt;let mt=c+v.length;for(;mt<st;)v.push({number:mt,duration:A/a,time:_,timeline:p}),_+=A,mt++}return v},zt=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,fe=(s,t)=>s.replace(zt,(e=>(i,n,r,a)=>{if(i==="$$")return"$";if(e[n]===void 0)return i;const c=""+e[n];return n==="RepresentationID"?c:(a=r?parseInt(a,10):1,c.length>=a?c:`${new Array(a-c.length+1).join("0")}${c}`)})(t)),mi=(s,t)=>{const e={RepresentationID:s.id,Bandwidth:s.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=s,n=oi({baseUrl:s.baseUrl,source:fe(i.sourceURL,e),range:i.range});return((a,c)=>a.duration||c?a.duration?fi(a):bt(a,c):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodStart}])(s,t).map(a=>{e.Number=a.number,e.Time=a.time;const c=fe(s.media||"",e),p=s.timescale||1,v=s.presentationTimeOffset||0,_=s.periodStart+(a.time-v)/p;return{uri:c,timeline:a.timeline,duration:a.duration,resolvedUri:rt(s.baseUrl||"",c),map:n,number:a.number,presentationTime:_}})},ui=(s,t)=>{const{duration:e,segmentUrls:i=[],periodStart:n}=s;if(!e&&!t||e&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");const r=i.map(c=>((p,v)=>{const{baseUrl:_,initialization:L={}}=p,k=oi({baseUrl:_,source:L.sourceURL,range:L.range}),A=oi({baseUrl:_,source:v.media,range:v.mediaRange});return A.map=k,A})(s,c));let a;return e&&(a=fi(s)),t&&(a=bt(s,t)),a.map((c,p)=>{if(r[p]){const v=r[p],_=s.timescale||1,L=s.presentationTimeOffset||0;return v.timeline=c.timeline,v.duration=c.duration,v.number=c.number,v.presentationTime=n+(c.time-L)/_,v}}).filter(c=>c)},Ci=({attributes:s,segmentInfo:t})=>{let e,i;t.template?(i=mi,e=Nt(s,t.template)):t.base?(i=Ge,e=Nt(s,t.base)):t.list&&(i=ui,e=Nt(s,t.list));const n={attributes:s};if(!i)return n;const r=i(e,t.segmentTimeline);if(e.duration){const{duration:a,timescale:c=1}=e;e.duration=a/c}else r.length?e.duration=r.reduce((a,c)=>Math.max(a,Math.ceil(c.duration)),0):e.duration=0;return n.attributes=e,n.segments=r,t.base&&e.indexRange&&(n.sidx=r[0],n.segments=[]),n},Ne=(s,t)=>ce(s.childNodes).filter(({tagName:e})=>e===t),Ri=s=>s.textContent.trim(),vi=s=>{const t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(s);if(!t)return 0;const[e,i,n,r,a,c]=t.slice(1);return 31536e3*parseFloat(e||0)+2592e3*parseFloat(i||0)+86400*parseFloat(n||0)+3600*parseFloat(r||0)+60*parseFloat(a||0)+parseFloat(c||0)},cs={mediaPresentationDuration:s=>vi(s),availabilityStartTime(s){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=s)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:s=>vi(s),suggestedPresentationDelay:s=>vi(s),type:s=>s,timeShiftBufferDepth:s=>vi(s),start:s=>vi(s),width:s=>parseInt(s,10),height:s=>parseInt(s,10),bandwidth:s=>parseInt(s,10),frameRate:s=>(t=>parseFloat(t.split("/").reduce((e,i)=>e/i)))(s),startNumber:s=>parseInt(s,10),timescale:s=>parseInt(s,10),presentationTimeOffset:s=>parseInt(s,10),duration(s){const t=parseInt(s,10);return isNaN(t)?vi(s):t},d:s=>parseInt(s,10),t:s=>parseInt(s,10),r:s=>parseInt(s,10),presentationTime:s=>parseInt(s,10),DEFAULT:s=>s},si=s=>s&&s.attributes?ce(s.attributes).reduce((t,e)=>{const i=cs[e.name]||cs.DEFAULT;return t[e.name]=i(e.value),t},{}):{},ns={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},ts=(s,t)=>t.length?ft(s.map(function(e){return t.map(function(i){const n=Ri(i),r=rt(e.baseUrl,n),a=Nt(si(i),{baseUrl:r});return r!==n&&!a.serviceLocation&&e.serviceLocation&&(a.serviceLocation=e.serviceLocation),a})})):s,us=s=>{const t=Ne(s,"SegmentTemplate")[0],e=Ne(s,"SegmentList")[0],i=e&&Ne(e,"SegmentURL").map(L=>Nt({tag:"SegmentURL"},si(L))),n=Ne(s,"SegmentBase")[0],r=e||t,a=r&&Ne(r,"SegmentTimeline")[0],c=e||n||t,p=c&&Ne(c,"Initialization")[0],v=t&&si(t);v&&p?v.initialization=p&&si(p):v&&v.initialization&&(v.initialization={sourceURL:v.initialization});const _={template:v,segmentTimeline:a&&Ne(a,"S").map(L=>si(L)),list:e&&Nt(si(e),{segmentUrls:i,initialization:si(p)}),base:n&&Nt(si(n),{initialization:si(p)})};return Object.keys(_).forEach(L=>{_[L]||delete _[L]}),_},Ys=s=>ft(Ne(s.node,"EventStream").map(t=>{const e=si(t),i=e.schemeIdUri;return Ne(t,"Event").map(n=>{const r=si(n),a=r.presentationTime||0,c=e.timescale||1,p=r.duration||0,v=a/c+s.attributes.start;return{schemeIdUri:i,value:e.value,id:r.id,start:v,end:v+p/c,messageData:Ri(n)||r.messageData,contentEncoding:e.contentEncoding,presentationTimeOffset:e.presentationTimeOffset||0}})})),vn=(s,t,e)=>i=>{const n=si(i),r=ts(t,Ne(i,"BaseURL")),a=Ne(i,"Role")[0],c={role:si(a)};let p=Nt(s,n,c);const v=Ne(i,"Accessibility")[0],_=(L=si(v)).schemeIdUri==="urn:scte:dash:cc:cea-608:2015"?(typeof L.value!="string"?[]:L.value.split(";")).map(st=>{let mt,yt;return yt=st,/^CC\d=/.test(st)?[mt,yt]=st.split("="):/^CC\d$/.test(st)&&(mt=st),{channel:mt,language:yt}}):L.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"?(typeof L.value!="string"?[]:L.value.split(";")).map(st=>{const mt={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(st)){const[yt,Lt=""]=st.split("=");mt.channel=yt,mt.language=st,Lt.split(",").forEach(wt=>{const[ht,St]=wt.split(":");ht==="lang"?mt.language=St:ht==="er"?mt.easyReader=Number(St):ht==="war"?mt.aspectRatio=Number(St):ht==="3D"&&(mt["3D"]=Number(St))})}else mt.language=st;return mt.channel&&(mt.channel="SERVICE"+mt.channel),mt}):void 0;var L;_&&(p=Nt(p,{captionServices:_}));const k=Ne(i,"Label")[0];if(k&&k.childNodes.length){const st=k.childNodes[0].nodeValue.trim();p=Nt(p,{label:st})}const A=Ne(i,"ContentProtection").reduce((st,mt)=>{const yt=si(mt);yt.schemeIdUri&&(yt.schemeIdUri=yt.schemeIdUri.toLowerCase());const Lt=ns[yt.schemeIdUri];if(Lt){st[Lt]={attributes:yt};const wt=Ne(mt,"cenc:pssh")[0];if(wt){const ht=Ri(wt);st[Lt].pssh=ht&&function(St){for(var qt,ve=(qt=St,u().atob?u().atob(qt):Buffer.from(qt,"base64").toString("binary")),ye=new Uint8Array(ve.length),ne=0;ne<ve.length;ne++)ye[ne]=ve.charCodeAt(ne);return ye}(ht)}}return st},{});Object.keys(A).length&&(p=Nt(p,{contentProtection:A}));const tt=us(i),z=Ne(i,"Representation"),lt=Nt(e,tt);return ft(z.map(((st,mt,yt)=>Lt=>{const wt=Ne(Lt,"BaseURL"),ht=ts(mt,wt),St=Nt(st,si(Lt)),qt=us(Lt);return ht.map(ve=>({segmentInfo:Nt(yt,qt),attributes:Nt(St,ve)}))})(p,r,lt)))},Cs=(s,t)=>(e,i)=>{const n=ts(t,Ne(e.node,"BaseURL")),r=Nt(s,{periodStart:e.attributes.start});typeof e.attributes.duration=="number"&&(r.periodDuration=e.attributes.duration);const a=Ne(e.node,"AdaptationSet"),c=us(e.node);return ft(a.map(vn(r,n,c)))},bn=(s,t)=>{if(s.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!s.length)return null;const e=Nt({serverURL:Ri(s[0])},si(s[0]));return e.queryBeforeStart=e.queryBeforeStart==="true",e},Xn=s=>{if(s==="")throw new Error("DASH_EMPTY_MANIFEST");const t=new Pt.DOMParser;let e,i;try{e=t.parseFromString(s,"application/xml"),i=e&&e.documentElement.tagName==="MPD"?e.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i};var fr=l(9910),Yn=l.n(fr),Hr=Kt([73,68,51]),Tn=function s(t,e){return e===void 0&&(e=0),(t=Kt(t)).length-e<10||!Qe(t,Hr,{offset:e})?e:(e+=function(i,n){n===void 0&&(n=0);var r=(i=Kt(i))[n+5],a=i[n+6]<<21|i[n+7]<<14|i[n+8]<<7|i[n+9];return(16&r)>>4?a+20:a+10}(t,e),s(t,e))},Un=function(s){return typeof s=="string"?Di(s):s},_s=function s(t,e,i){i===void 0&&(i=!1),e=function(_){return Array.isArray(_)?_.map(function(L){return Un(L)}):[Un(_)]}(e),t=Kt(t);var n=[];if(!e.length)return n;for(var r=0;r<t.length;){var a=(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0,c=t.subarray(r+4,r+8);if(a===0)break;var p=r+a;if(p>t.length){if(i)break;p=t.length}var v=t.subarray(r+8,p);Qe(c,e[0])&&(e.length===1?n.push(v):n.push.apply(n,s(v,e.slice(1),i))),r=p}return n},Ks={EBML:Kt([26,69,223,163]),DocType:Kt([66,130]),Segment:Kt([24,83,128,103]),SegmentInfo:Kt([21,73,169,102]),Tracks:Kt([22,84,174,107]),Track:Kt([174]),TrackNumber:Kt([215]),DefaultDuration:Kt([35,227,131]),TrackEntry:Kt([174]),TrackType:Kt([131]),FlagDefault:Kt([136]),CodecID:Kt([134]),CodecPrivate:Kt([99,162]),VideoTrack:Kt([224]),AudioTrack:Kt([225]),Cluster:Kt([31,67,182,117]),Timestamp:Kt([231]),TimestampScale:Kt([42,215,177]),BlockGroup:Kt([160]),BlockDuration:Kt([155]),Block:Kt([161]),SimpleBlock:Kt([163])},Sn=[128,64,32,16,8,4,2,1],ln=function(s,t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1);var n=function(a){for(var c=1,p=0;p<Sn.length&&!(a&Sn[p]);p++)c++;return c}(s[t]),r=s.subarray(t,t+n);return e&&((r=Array.prototype.slice.call(s,t,t+n))[0]^=Sn[n-1]),{length:n,value:We(r,{signed:i}),bytes:r}},Qs=function s(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(e){return s(e)}):typeof t=="number"?function(e,i){var n={}.le,r=n!==void 0&&n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!=e)&&(e=0);for(var a,c=(a=e=ze(e),Math.ceil(function(L){return L.toString(2).length}(a)/8)),p=new Uint8Array(new ArrayBuffer(c)),v=0;v<c;v++){var _=r?v:Math.abs(v+1-p.length);p[_]=Number(e/ei[v]&ze(255)),e<0&&(p[_]=Math.abs(~p[_]),p[_]-=v===0?1:2)}return p}(t):t},Vr=function s(t,e,i){if(i>=e.length)return e.length;var n=ln(e,i,!1);if(Qe(t.bytes,n.bytes))return i;var r=ln(e,i+n.length);return s(t,e,i+r.length+r.value+n.length)},gr=function s(t,e){e=function(_){return Array.isArray(_)?_.map(function(L){return Qs(L)}):[Qs(_)]}(e),t=Kt(t);var i=[];if(!e.length)return i;for(var n=0;n<t.length;){var r=ln(t,n,!1),a=ln(t,n+r.length),c=n+r.length+a.length;a.value===127&&(a.value=Vr(r,t,c),a.value!==t.length&&(a.value-=c));var p=c+a.value>t.length?t.length:c+a.value,v=t.subarray(c,p);Qe(e[0],r.bytes)&&(e.length===1?i.push(v):i=i.concat(s(v,e.slice(1)))),n+=r.length+a.length+v.length}return i},wn=Kt([0,0,0,1]),zr=Kt([0,0,1]),Kn=Kt([0,0,3]),rs=function(s){for(var t=[],e=1;e<s.length-2;)Qe(s.subarray(e,e+3),Kn)&&(t.push(e+2),e++),e++;if(t.length===0)return s;var i=s.length-t.length,n=new Uint8Array(i),r=0;for(e=0;e<i;r++,e++)r===t[0]&&(r++,t.shift()),n[e]=s[r];return n},En=function(s,t,e,i){s=Kt(s),e=[].concat(e);for(var n,r=0,a=0;r<s.length&&(a<i||n);){var c=void 0;if(Qe(s.subarray(r),wn)?c=4:Qe(s.subarray(r),zr)&&(c=3),c){if(a++,n)return rs(s.subarray(n,r));var p=void 0;t==="h264"?p=31&s[r+c]:t==="h265"&&(p=s[r+c]>>1&63),e.indexOf(p)!==-1&&(n=r+c),r+=c+(t==="h264"?1:2)}else r++}return s.subarray(0,0)},Ii={webm:Kt([119,101,98,109]),matroska:Kt([109,97,116,114,111,115,107,97]),flac:Kt([102,76,97,67]),ogg:Kt([79,103,103,83]),ac3:Kt([11,119]),riff:Kt([82,73,70,70]),avi:Kt([65,86,73]),wav:Kt([87,65,86,69]),"3gp":Kt([102,116,121,112,51,103]),mp4:Kt([102,116,121,112]),fmp4:Kt([115,116,121,112]),mov:Kt([102,116,121,112,113,116]),moov:Kt([109,111,111,118]),moof:Kt([109,111,111,102])},Xi={aac:function(s){var t=Tn(s);return Qe(s,[255,16],{offset:t,mask:[255,22]})},mp3:function(s){var t=Tn(s);return Qe(s,[255,2],{offset:t,mask:[255,6]})},webm:function(s){var t=gr(s,[Ks.EBML,Ks.DocType])[0];return Qe(t,Ii.webm)},mkv:function(s){var t=gr(s,[Ks.EBML,Ks.DocType])[0];return Qe(t,Ii.matroska)},mp4:function(s){return!Xi["3gp"](s)&&!Xi.mov(s)&&(!(!Qe(s,Ii.mp4,{offset:4})&&!Qe(s,Ii.fmp4,{offset:4}))||!(!Qe(s,Ii.moof,{offset:4})&&!Qe(s,Ii.moov,{offset:4}))||void 0)},mov:function(s){return Qe(s,Ii.mov,{offset:4})},"3gp":function(s){return Qe(s,Ii["3gp"],{offset:4})},ac3:function(s){var t=Tn(s);return Qe(s,Ii.ac3,{offset:t})},ts:function(s){if(s.length<189&&s.length>=1)return s[0]===71;for(var t=0;t+188<s.length&&t<188;){if(s[t]===71&&s[t+188]===71)return!0;t+=1}return!1},flac:function(s){var t=Tn(s);return Qe(s,Ii.flac,{offset:t})},ogg:function(s){return Qe(s,Ii.ogg)},avi:function(s){return Qe(s,Ii.riff)&&Qe(s,Ii.avi,{offset:8})},wav:function(s){return Qe(s,Ii.riff)&&Qe(s,Ii.wav,{offset:8})},h264:function(s){return function(t,e,i){return En(t,"h264",7,3)}(s).length},h265:function(s){return function(t,e,i){return En(t,"h265",[32,33],3)}(s).length}},xs=Object.keys(Xi).filter(function(s){return s!=="ts"&&s!=="h264"&&s!=="h265"}).concat(["ts","h264","h265"]);xs.forEach(function(s){var t=Xi[s];Xi[s]=function(e){return t(Kt(e))}});var Yi=Xi,Bn=function(s){s=Kt(s);for(var t=0;t<xs.length;t++){var e=xs[t];if(Yi[e](s))return e}return""},vs=l(6946),Cn="8.17.1";const hs={},ks=function(s,t){return hs[s]=hs[s]||[],t&&(hs[s]=hs[s].concat(t)),hs[s]},cn=function(s,t){const e=ks(s).indexOf(t);return!(e<=-1||(hs[s]=hs[s].slice(),hs[s].splice(e,1),0))},ds={prefixed:!0},Bs=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],As=Bs[0];let xn;for(let s=0;s<Bs.length;s++)if(Bs[s][1]in m()){xn=Bs[s];break}if(xn){for(let s=0;s<xn.length;s++)ds[As[s]]=xn[s];ds.prefixed=xn[0]!==As[0]}let Ki=[];const je=function s(t,e=":",i=""){let n,r="info";function a(...c){n("log",r,c)}return n=((c,p,v)=>(_,L,k)=>{const A=p.levels[L],tt=new RegExp(`^(${A})$`);let z=c;if(_!=="log"&&k.unshift(_.toUpperCase()+":"),v&&(z=`%c${c}`,k.unshift(v)),k.unshift(z+":"),Ki){Ki.push([].concat(k));const st=Ki.length-1e3;Ki.splice(0,st>0?st:0)}if(!u().console)return;let lt=u().console[_];lt||_!=="debug"||(lt=u().console.info||u().console.log),lt&&A&&tt.test(_)&&lt[Array.isArray(k)?"apply":"call"](u().console,k)})(t,a,i),a.createLogger=(c,p,v)=>{const _=p!==void 0?p:e;return s(`${t} ${_} ${c}`,_,v!==void 0?v:i)},a.createNewLogger=(c,p,v)=>s(c,p,v),a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},a.level=c=>{if(typeof c=="string"){if(!a.levels.hasOwnProperty(c))throw new Error(`"${c}" in not a valid log level`);r=c}return r},a.history=()=>Ki?[].concat(Ki):[],a.history.filter=c=>(Ki||[]).filter(p=>new RegExp(`.*${c}.*`).test(p[0])),a.history.clear=()=>{Ki&&(Ki.length=0)},a.history.disable=()=>{Ki!==null&&(Ki.length=0,Ki=null)},a.history.enable=()=>{Ki===null&&(Ki=[])},a.error=(...c)=>n("error",r,c),a.warn=(...c)=>n("warn",r,c),a.debug=(...c)=>n("debug",r,c),a}("VIDEOJS"),Fn=je.createLogger,yr=Object.prototype.toString,Js=function(s){return ps(s)?Object.keys(s):[]};function Fs(s,t){Js(s).forEach(e=>t(s[e],e))}function Qn(s,t,e=0){return Js(s).reduce((i,n)=>t(i,s[n],n),e)}function ps(s){return!!s&&typeof s=="object"}function Is(s){return ps(s)&&yr.call(s)==="[object Object]"&&s.constructor===Object}function gi(...s){const t={};return s.forEach(e=>{e&&Fs(e,(i,n)=>{Is(i)?(Is(t[n])||(t[n]={}),t[n]=gi(t[n],i)):t[n]=i})}),t}function un(s={}){const t=[];for(const e in s)if(s.hasOwnProperty(e)){const i=s[e];t.push(i)}return t}function Ps(s,t,e,i=!0){const n=a=>Object.defineProperty(s,t,{value:a,enumerable:!0,writable:!0}),r={configurable:!0,enumerable:!0,get(){const a=e();return n(a),a}};return i&&(r.set=n),Object.defineProperty(s,t,r)}var kn=Object.freeze({__proto__:null,each:Fs,reduce:Qn,isObject:ps,isPlain:Is,merge:gi,values:un,defineLazyProperty:Ps});let _r,An=!1,In=null,q=!1,O=!1,j=!1,U=!1,ut=!1,gt=null,Wt=null;const Xt=!!(u().cast&&u().cast.framework&&u().cast.framework.CastReceiverContext);let de=null,Yt=!1,we=!1,te=!1,Ee=!1,be=!1,Ue=!1,Ve=!1;const Xe=!!(Os()&&("ontouchstart"in u()||u().navigator.maxTouchPoints||u().DocumentTouch&&u().document instanceof u().DocumentTouch)),Me=u().navigator&&u().navigator.userAgentData;if(Me&&Me.platform&&Me.brands&&(q=Me.platform==="Android",j=!!Me.brands.find(s=>s.brand==="Microsoft Edge"),U=!!Me.brands.find(s=>s.brand==="Chromium"),ut=!j&&U,gt=Wt=(Me.brands.find(s=>s.brand==="Chromium")||{}).version||null,we=Me.platform==="Windows"),!U){const s=u().navigator&&u().navigator.userAgent||"";An=/iPod/i.test(s),In=function(){const t=s.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),q=/Android/i.test(s),_r=function(){const t=s.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return e&&i?parseFloat(t[1]+"."+t[2]):e||null}(),O=/Firefox/i.test(s),j=/Edg/i.test(s),U=/Chrome/i.test(s)||/CriOS/i.test(s),ut=!j&&U,gt=Wt=function(){const t=s.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),de=function(){const t=/MSIE\s(\d+)\.\d/.exec(s);let e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)&&(e=11),e}(),be=/Tizen/i.test(s),Ue=/Web0S/i.test(s),Ve=be||Ue,Yt=/Safari/i.test(s)&&!ut&&!q&&!j&&!Ve,we=/Windows/i.test(s),te=/iPad/i.test(s)||Yt&&Xe&&!/iPhone/i.test(s),Ee=/iPhone/i.test(s)&&!te}const Re=Ee||te||An,zi=(Yt||Re)&&!ut;var qn=Object.freeze({__proto__:null,get IS_IPOD(){return An},get IOS_VERSION(){return In},get IS_ANDROID(){return q},get ANDROID_VERSION(){return _r},get IS_FIREFOX(){return O},get IS_EDGE(){return j},get IS_CHROMIUM(){return U},get IS_CHROME(){return ut},get CHROMIUM_VERSION(){return gt},get CHROME_VERSION(){return Wt},IS_CHROMECAST_RECEIVER:Xt,get IE_VERSION(){return de},get IS_SAFARI(){return Yt},get IS_WINDOWS(){return we},get IS_IPAD(){return te},get IS_IPHONE(){return Ee},get IS_TIZEN(){return be},get IS_WEBOS(){return Ue},get IS_SMART_TV(){return Ve},TOUCH_ENABLED:Xe,IS_IOS:Re,IS_ANY_SAFARI:zi});function Jn(s){return typeof s=="string"&&!!s.trim()}function Os(){return m()===u().document}function Ls(s){return ps(s)&&s.nodeType===1}function Zn(){try{return u().parent!==u().self}catch{return!0}}function me(s){return function(t,e){if(!Jn(t))return m()[s](null);Jn(e)&&(e=m().querySelector(e));const i=Ls(e)?e:m();return i[s]&&i[s](t)}}function Gt(s="div",t={},e={},i){const n=m().createElement(s);return Object.getOwnPropertyNames(t).forEach(function(r){const a=t[r];r==="textContent"?yi(n,a):n[r]===a&&r!=="tabIndex"||(n[r]=a)}),Object.getOwnPropertyNames(e).forEach(function(r){n.setAttribute(r,e[r])}),i&&ki(n,i),n}function yi(s,t){return s.textContent===void 0?s.innerText=t:s.textContent=t,s}function $i(s,t){t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s)}function Pi(s,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),s.classList.contains(t)}function Ni(s,...t){return s.classList.add(...t.reduce((e,i)=>e.concat(i.split(/\s+/)),[])),s}function qs(s,...t){return s?(s.classList.remove(...t.reduce((e,i)=>e.concat(i.split(/\s+/)),[])),s):(je.warn("removeClass was called with an element that doesn't exist"),null)}function $n(s,t,e){return typeof e=="function"&&(e=e(s,t)),typeof e!="boolean"&&(e=void 0),t.split(/\s+/).forEach(i=>s.classList.toggle(i,e)),s}function Ca(s,t){Object.getOwnPropertyNames(t).forEach(function(e){const i=t[e];i==null||i===!1?s.removeAttribute(e):s.setAttribute(e,i===!0?"":i)})}function w(s){const t={},e=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(s&&s.attributes&&s.attributes.length>0){const i=s.attributes;for(let n=i.length-1;n>=0;n--){const r=i[n].name;let a=i[n].value;e.includes(r)&&(a=a!==null),t[r]=a}}return t}function b(s,t){return s.getAttribute(t)}function H(s,t,e){s.setAttribute(t,e)}function it(s,t){s.removeAttribute(t)}function Tt(){m().body.focus(),m().onselectstart=function(){return!1}}function Vt(){m().onselectstart=function(){return!0}}function Jt(s){if(s&&s.getBoundingClientRect&&s.parentNode){const t=s.getBoundingClientRect(),e={};return["bottom","height","left","right","top","width"].forEach(i=>{t[i]!==void 0&&(e[i]=t[i])}),e.height||(e.height=parseFloat(Ui(s,"height"))),e.width||(e.width=parseFloat(Ui(s,"width"))),e}}function ee(s){if(!s||s&&!s.offsetParent)return{left:0,top:0,width:0,height:0};const t=s.offsetWidth,e=s.offsetHeight;let i=0,n=0;for(;s.offsetParent&&s!==m()[ds.fullscreenElement];)i+=s.offsetLeft,n+=s.offsetTop,s=s.offsetParent;return{left:i,top:n,width:t,height:e}}function Be(s,t){const e={x:0,y:0};if(Re){let _=s;for(;_&&_.nodeName.toLowerCase()!=="html";){const L=Ui(_,"transform");if(/^matrix/.test(L)){const k=L.slice(7,-1).split(/,\s/).map(Number);e.x+=k[4],e.y+=k[5]}else if(/^matrix3d/.test(L)){const k=L.slice(9,-1).split(/,\s/).map(Number);e.x+=k[12],e.y+=k[13]}if(_.assignedSlot&&_.assignedSlot.parentElement&&u().WebKitCSSMatrix){const k=u().getComputedStyle(_.assignedSlot.parentElement).transform,A=new(u()).WebKitCSSMatrix(k);e.x+=A.m41,e.y+=A.m42}_=_.parentNode||_.host}}const i={},n=ee(t.target),r=ee(s),a=r.width,c=r.height;let p=t.offsetY-(r.top-n.top),v=t.offsetX-(r.left-n.left);return t.changedTouches&&(v=t.changedTouches[0].pageX-r.left,p=t.changedTouches[0].pageY+r.top,Re&&(v-=e.x,p-=e.y)),i.y=1-Math.max(0,Math.min(1,p/c)),i.x=Math.max(0,Math.min(1,v/a)),i}function Fe(s){return ps(s)&&s.nodeType===3}function xi(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s}function is(s){return typeof s=="function"&&(s=s()),(Array.isArray(s)?s:[s]).map(t=>(typeof t=="function"&&(t=t()),Ls(t)||Fe(t)?t:typeof t=="string"&&/\S/.test(t)?m().createTextNode(t):void 0)).filter(t=>t)}function ki(s,t){return is(t).forEach(e=>s.appendChild(e)),s}function Se(s,t){return ki(xi(s),t)}function Le(s){return s.button===void 0&&s.buttons===void 0||s.button===0&&s.buttons===void 0||s.type==="mouseup"&&s.button===0&&s.buttons===0||s.type==="mousedown"&&s.button===0&&s.buttons===0||s.button===0&&s.buttons===1}const ni=me("querySelector"),Wi=me("querySelectorAll");function Ui(s,t){if(!s||!t)return"";if(typeof u().getComputedStyle=="function"){let e;try{e=u().getComputedStyle(s)}catch{return""}return e?e.getPropertyValue(t)||e[t]:""}return""}function ss(s){[...m().styleSheets].forEach(t=>{try{const e=[...t.cssRules].map(n=>n.cssText).join(""),i=m().createElement("style");i.textContent=e,s.document.head.appendChild(i)}catch{const i=m().createElement("link");i.rel="stylesheet",i.type=t.type,i.media=t.media.mediaText,i.href=t.href,s.document.head.appendChild(i)}})}var Ce=Object.freeze({__proto__:null,isReal:Os,isEl:Ls,isInFrame:Zn,createEl:Gt,textContent:yi,prependTo:$i,hasClass:Pi,addClass:Ni,removeClass:qs,toggleClass:$n,setAttributes:Ca,getAttributes:w,getAttribute:b,setAttribute:H,removeAttribute:it,blockTextSelection:Tt,unblockTextSelection:Vt,getBoundingClientRect:Jt,findPosition:ee,getPointerPosition:Be,isTextNode:Fe,emptyEl:xi,normalizeContent:is,appendContent:ki,insertContent:Se,isSingleLeftClick:Le,$:ni,$$:Wi,computedStyle:Ui,copyStyleSheetsToWindow:ss});let hi,Mi=!1;const Ds=function(){if(hi.options.autoSetup===!1)return;const s=Array.prototype.slice.call(m().getElementsByTagName("video")),t=Array.prototype.slice.call(m().getElementsByTagName("audio")),e=Array.prototype.slice.call(m().getElementsByTagName("video-js")),i=s.concat(t,e);if(i&&i.length>0)for(let n=0,r=i.length;n<r;n++){const a=i[n];if(!a||!a.getAttribute){Gi(1);break}a.player===void 0&&a.getAttribute("data-setup")!==null&&hi(a)}else Mi||Gi(1)};function Gi(s,t){Os()&&(t&&(hi=t),u().setTimeout(Ds,s))}function Zs(){Mi=!0,u().removeEventListener("load",Zs)}Os()&&(m().readyState==="complete"?Zs():u().addEventListener("load",Zs));const Je=function(s){const t=m().createElement("style");return t.className=s,t},pe=function(s,t){s.styleSheet?s.styleSheet.cssText=t:s.textContent=t};var Pe=new WeakMap;let bs,xo=3;function $s(){return xo++}function sc(s,t){if(!Pe.has(s))return;const e=Pe.get(s);e.handlers[t].length===0&&(delete e.handlers[t],s.removeEventListener?s.removeEventListener(t,e.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+t,e.dispatcher)),Object.getOwnPropertyNames(e.handlers).length<=0&&(delete e.handlers,delete e.dispatcher,delete e.disabled),Object.getOwnPropertyNames(e).length===0&&Pe.delete(s)}function ko(s,t,e,i){e.forEach(function(n){s(t,n,i)})}function xa(s){if(s.fixed_)return s;function t(){return!0}function e(){return!1}if(!s||!s.isPropagationStopped||!s.isImmediatePropagationStopped){const i=s||u().event;s={};const n=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const r in i)n.includes(r)||r==="returnValue"&&i.preventDefault||(s[r]=i[r]);if(s.target||(s.target=s.srcElement||m()),s.relatedTarget||(s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement),s.preventDefault=function(){i.preventDefault&&i.preventDefault(),s.returnValue=!1,i.returnValue=!1,s.defaultPrevented=!0},s.defaultPrevented=!1,s.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),s.cancelBubble=!0,i.cancelBubble=!0,s.isPropagationStopped=t},s.isPropagationStopped=e,s.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),s.isImmediatePropagationStopped=t,s.stopPropagation()},s.isImmediatePropagationStopped=e,s.clientX!==null&&s.clientX!==void 0){const r=m().documentElement,a=m().body;s.pageX=s.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),s.pageY=s.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}s.which=s.charCode||s.keyCode,s.button!==null&&s.button!==void 0&&(s.button=1&s.button?0:4&s.button?1:2&s.button?2:0)}return s.fixed_=!0,s}const Ed=function(){if(typeof bs!="boolean"){bs=!1;try{const s=Object.defineProperty({},"passive",{get(){bs=!0}});u().addEventListener("test",null,s),u().removeEventListener("test",null,s)}catch{}}return bs},Cd=["touchstart","touchmove"];function Rs(s,t,e){if(Array.isArray(t))return ko(Rs,s,t,e);Pe.has(s)||Pe.set(s,{});const i=Pe.get(s);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),e.guid||(e.guid=$s()),i.handlers[t].push(e),i.dispatcher||(i.disabled=!1,i.dispatcher=function(n,r){if(i.disabled)return;n=xa(n);const a=i.handlers[n.type];if(a){const c=a.slice(0);for(let p=0,v=c.length;p<v&&!n.isImmediatePropagationStopped();p++)try{c[p].call(s,n,r)}catch(_){je.error(_)}}}),i.handlers[t].length===1)if(s.addEventListener){let n=!1;Ed()&&Cd.indexOf(t)>-1&&(n={passive:!0}),s.addEventListener(t,i.dispatcher,n)}else s.attachEvent&&s.attachEvent("on"+t,i.dispatcher)}function as(s,t,e){if(!Pe.has(s))return;const i=Pe.get(s);if(!i.handlers)return;if(Array.isArray(t))return ko(as,s,t,e);const n=function(a,c){i.handlers[c]=[],sc(a,c)};if(t===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&n(s,a);return}const r=i.handlers[t];if(r)if(e){if(e.guid)for(let a=0;a<r.length;a++)r[a].guid===e.guid&&r.splice(a--,1);sc(s,t)}else n(s,t)}function vr(s,t,e){const i=Pe.has(s)?Pe.get(s):{},n=s.parentNode||s.ownerDocument;if(typeof t=="string"?t={type:t,target:s}:t.target||(t.target=s),t=xa(t),i.dispatcher&&i.dispatcher.call(s,t,e),n&&!t.isPropagationStopped()&&t.bubbles===!0)vr.call(null,n,t,e);else if(!n&&!t.defaultPrevented&&t.target&&t.target[t.type]){Pe.has(t.target)||Pe.set(t.target,{});const r=Pe.get(t.target);t.target[t.type]&&(r.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),r.disabled=!1)}return!t.defaultPrevented}function ka(s,t,e){if(Array.isArray(t))return ko(ka,s,t,e);const i=function(){as(s,t,i),e.apply(this,arguments)};i.guid=e.guid=e.guid||$s(),Rs(s,t,i)}function Ao(s,t,e){const i=function(){as(s,t,i),e.apply(this,arguments)};i.guid=e.guid=e.guid||$s(),Rs(s,t,i)}var xd=Object.freeze({__proto__:null,fixEvent:xa,on:Rs,off:as,trigger:vr,one:ka,any:Ao});const Hs=30,Ai=function(s,t,e){t.guid||(t.guid=$s());const i=t.bind(s);return i.guid=e?e+"_"+t.guid:t.guid,i},hn=function(s,t){let e=u().performance.now();return function(...i){const n=u().performance.now();n-e>=t&&(s(...i),e=n)}},nc=function(s,t,e,i=u()){let n;const r=function(){const a=this,c=arguments;let p=function(){n=null,p=null,e||s.apply(a,c)};!n&&e&&s.apply(a,c),i.clearTimeout(n),n=i.setTimeout(p,t)};return r.cancel=()=>{i.clearTimeout(n),n=null},r};var kd=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Hs,bind_:Ai,throttle:hn,debounce:nc});let Wr;class Ns{on(t,e){const i=this.addEventListener;this.addEventListener=()=>{},Rs(this,t,e),this.addEventListener=i}off(t,e){as(this,t,e)}one(t,e){const i=this.addEventListener;this.addEventListener=()=>{},ka(this,t,e),this.addEventListener=i}any(t,e){const i=this.addEventListener;this.addEventListener=()=>{},Ao(this,t,e),this.addEventListener=i}trigger(t){const e=t.type||t;typeof t=="string"&&(t={type:e}),t=xa(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),vr(this,t)}queueTrigger(t){Wr||(Wr=new Map);const e=t.type||t;let i=Wr.get(this);i||(i=new Map,Wr.set(this,i));const n=i.get(e);i.delete(e),u().clearTimeout(n);const r=u().setTimeout(()=>{i.delete(e),i.size===0&&(i=null,Wr.delete(this)),this.trigger(t)},0);i.set(e,r)}}Ns.prototype.allowedEvents_={},Ns.prototype.addEventListener=Ns.prototype.on,Ns.prototype.removeEventListener=Ns.prototype.off,Ns.prototype.dispatchEvent=Ns.prototype.trigger;const Aa=s=>typeof s.name=="function"?s.name():typeof s.name=="string"?s.name:s.name_?s.name_:s.constructor&&s.constructor.name?s.constructor.name:typeof s,Pn=s=>s instanceof Ns||!!s.eventBusEl_&&["on","one","off","trigger"].every(t=>typeof s[t]=="function"),Io=s=>typeof s=="string"&&/\S/.test(s)||Array.isArray(s)&&!!s.length,Ia=(s,t,e)=>{if(!s||!s.nodeName&&!Pn(s))throw new Error(`Invalid target for ${Aa(t)}#${e}; must be a DOM node or evented object.`)},rc=(s,t,e)=>{if(!Io(s))throw new Error(`Invalid event type for ${Aa(t)}#${e}; must be a non-empty string or array.`)},ac=(s,t,e)=>{if(typeof s!="function")throw new Error(`Invalid listener for ${Aa(t)}#${e}; must be a function.`)},Po=(s,t,e)=>{const i=t.length<3||t[0]===s||t[0]===s.eventBusEl_;let n,r,a;return i?(n=s.eventBusEl_,t.length>=3&&t.shift(),[r,a]=t):[n,r,a]=t,Ia(n,s,e),rc(r,s,e),ac(a,s,e),a=Ai(s,a),{isTargetingSelf:i,target:n,type:r,listener:a}},tr=(s,t,e,i)=>{Ia(s,s,t),s.nodeName?xd[t](s,e,i):s[t](e,i)},Ad={on(...s){const{isTargetingSelf:t,target:e,type:i,listener:n}=Po(this,s,"on");if(tr(e,"on",i,n),!t){const r=()=>this.off(e,i,n);r.guid=n.guid;const a=()=>this.off("dispose",r);a.guid=n.guid,tr(this,"on","dispose",r),tr(e,"on","dispose",a)}},one(...s){const{isTargetingSelf:t,target:e,type:i,listener:n}=Po(this,s,"one");if(t)tr(e,"one",i,n);else{const r=(...a)=>{this.off(e,i,r),n.apply(null,a)};r.guid=n.guid,tr(e,"one",i,r)}},any(...s){const{isTargetingSelf:t,target:e,type:i,listener:n}=Po(this,s,"any");if(t)tr(e,"any",i,n);else{const r=(...a)=>{this.off(e,i,r),n.apply(null,a)};r.guid=n.guid,tr(e,"any",i,r)}},off(s,t,e){if(!s||Io(s))as(this.eventBusEl_,s,t);else{const i=s,n=t;Ia(i,this,"off"),rc(n,this,"off"),ac(e,this,"off"),e=Ai(this,e),this.off("dispose",e),i.nodeName?(as(i,n,e),as(i,"dispose",e)):Pn(i)&&(i.off(n,e),i.off("dispose",e))}},trigger(s,t){Ia(this.eventBusEl_,this,"trigger");const e=s&&typeof s!="string"?s.type:s;if(!Io(e))throw new Error(`Invalid event type for ${Aa(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return vr(this.eventBusEl_,s,t)}};function Oo(s,t={}){const{eventBusKey:e}=t;if(e){if(!s[e].nodeName)throw new Error(`The eventBusKey "${e}" does not refer to an element.`);s.eventBusEl_=s[e]}else s.eventBusEl_=Gt("span",{className:"vjs-event-bus"});return Object.assign(s,Ad),s.eventedCallbacks&&s.eventedCallbacks.forEach(i=>{i()}),s.on("dispose",()=>{s.off(),[s,s.el_,s.eventBusEl_].forEach(function(i){i&&Pe.has(i)&&Pe.delete(i)}),u().setTimeout(()=>{s.eventBusEl_=null},0)}),s}const Id={state:{},setState(s){let t;return typeof s=="function"&&(s=s()),Fs(s,(e,i)=>{this.state[i]!==e&&(t=t||{},t[i]={from:this.state[i],to:e}),this.state[i]=e}),t&&Pn(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function oc(s,t){return Object.assign(s,Id),s.state=Object.assign({},s.state,t),typeof s.handleStateChanged=="function"&&Pn(s)&&s.on("statechanged",s.handleStateChanged),s}const Gr=function(s){return typeof s!="string"?s:s.replace(/./,t=>t.toLowerCase())},Hi=function(s){return typeof s!="string"?s:s.replace(/./,t=>t.toUpperCase())},lc=function(s,t){return Hi(s)===Hi(t)};var Pd=Object.freeze({__proto__:null,toLowerCase:Gr,toTitleCase:Hi,titleCaseEquals:lc});class kt{constructor(t,e,i){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=gi({},this.options_),e=this.options_=gi(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){const n=t&&t.id&&t.id()||"no_player";this.id_=`${n}_component_${$s()}`}this.name_=e.name||null,e.el?this.el_=e.el:e.createEl!==!1&&(this.el_=this.createEl()),e.className&&this.el_&&e.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),e.evented!==!1&&(Oo(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),oc(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,e.initChildren!==!1&&this.initChildren(),this.ready(i),e.reportTouchActivity!==!1&&this.enableTouchActivity()}on(t,e){}off(t,e){}one(t,e){}any(t,e){}trigger(t,e){}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t?(this.options_=gi(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,e,i){return Gt(t,e,i)}localize(t,e,i=t){const n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[n],c=n&&n.split("-")[0],p=r&&r[c];let v=i;return a&&a[t]?v=a[t]:p&&p[t]&&(v=p[t]),e&&(v=v.replace(/\{(\d+)\}/g,function(_,L){const k=e[L-1];let A=k;return k===void 0&&(A=_),A})),v}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((i,n)=>i.concat(n),[]);let e=this;for(let i=0;i<t.length;i++)if(e=e.getChild(t[i]),!e||!e.getChild)return;return e}setIcon(t,e=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",n=Gt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=m().createElementNS(i,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const a=m().createElementNS(i,"use");return r.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${t}`),n.appendChild(r),this.iconIsSet_?e.replaceChild(n,e.querySelector(".vjs-icon-placeholder")):e.appendChild(n),this.iconIsSet_=!0,n}addChild(t,e={},i=this.children_.length){let n,r;if(typeof t=="string"){r=Hi(t);const a=e.componentClass||r;e.name=r;const c=kt.getComponent(a);if(!c)throw new Error(`Component ${a} does not exist`);if(typeof c!="function")return null;n=new c(this.player_||this,e)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),r=r||n.name&&Hi(n.name()),r&&(this.childNameIndex_[r]=n,this.childNameIndex_[Gr(r)]=n),typeof n.el=="function"&&n.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:Ls(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(n.el(),a)}return n}removeChild(t){if(typeof t=="string"&&(t=this.getChild(t)),!t||!this.children_)return;let e=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){e=!0,this.children_.splice(n,1);break}if(!e)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[Hi(t.name())]=null,this.childNameIndex_[Gr(t.name())]=null;const i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){const t=this.options_.children;if(t){const e=this.options_,i=a=>{const c=a.name;let p=a.opts;if(e[c]!==void 0&&(p=e[c]),p===!1)return;p===!0&&(p={}),p.playerOptions=this.options_.playerOptions;const v=this.addChild(c,p);v&&(this[c]=v)};let n;const r=kt.getComponent("Tech");n=Array.isArray(t)?t:Object.keys(t),n.concat(Object.keys(this.options_).filter(function(a){return!n.some(function(c){return typeof c=="string"?a===c:a===c.name})})).map(a=>{let c,p;return typeof a=="string"?(c=a,p=t[c]||this.options_[c]||{}):(c=a.name,p=a),{name:c,opts:p}}).filter(a=>{const c=kt.getComponent(a.opts.componentClass||Hi(a.name));return c&&!r.isTech(c)}).forEach(i)}}buildCSSClass(){return""}ready(t,e=!1){if(t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)}$(t,e){return ni(t,e||this.contentEl())}$$(t,e){return Wi(t,e||this.contentEl())}hasClass(t){return Pi(this.el_,t)}addClass(...t){Ni(this.el_,...t)}removeClass(...t){qs(this.el_,...t)}toggleClass(t,e){$n(this.el_,t,e)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return b(this.el_,t)}setAttribute(t,e){H(this.el_,t,e)}removeAttribute(t){it(this.el_,t)}width(t,e){return this.dimension("width",t,e)}height(t,e){return this.dimension("height",t,e)}dimensions(t,e){this.width(t,!0),this.height(e)}dimension(t,e,i){if(e!==void 0)return e!==null&&e==e||(e=0),(""+e).indexOf("%")!==-1||(""+e).indexOf("px")!==-1?this.el_.style[t]=e:this.el_.style[t]=e==="auto"?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;const n=this.el_.style[t],r=n.indexOf("px");return parseInt(r!==-1?n.slice(0,r):this.el_["offset"+Hi(t)],10)}currentDimension(t){let e=0;if(t!=="width"&&t!=="height")throw new Error("currentDimension only accepts width or height value");if(e=Ui(this.el_,t),e=parseFloat(e),e===0||isNaN(e)){const i=`offset${Hi(t)}`;e=this.el_[i]}return e}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const t=this.el_.getBoundingClientRect();return{boundingClientRect:{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},center:{x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(t.key==="Tab"||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t,e=0,i=null;this.on("touchstart",function(r){r.touches.length===1&&(i={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=u().performance.now(),t=!0)}),this.on("touchmove",function(r){if(r.touches.length>1)t=!1;else if(i){const a=r.touches[0].pageX-i.pageX,c=r.touches[0].pageY-i.pageY;Math.sqrt(a*a+c*c)>10&&(t=!1)}});const n=function(){t=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",function(r){i=null,t===!0&&u().performance.now()-e<200&&(r.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const t=Ai(this.player(),this.player().reportUserActivity);let e;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});const i=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(t,e){var i;return t=Ai(this,t),this.clearTimersOnDispose_(),i=u().setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),t()},e),this.setTimeoutIds_.add(i),i}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),u().clearTimeout(t)),t}setInterval(t,e){t=Ai(this,t),this.clearTimersOnDispose_();const i=u().setInterval(t,e);return this.setIntervalIds_.add(i),i}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),u().clearInterval(t)),t}requestAnimationFrame(t){var e;return this.clearTimersOnDispose_(),t=Ai(this,t),e=u().requestAnimationFrame(()=>{this.rafIds_.has(e)&&this.rafIds_.delete(e),t()}),this.rafIds_.add(e),e}requestNamedAnimationFrame(t,e){if(this.namedRafs_.has(t))return;this.clearTimersOnDispose_(),e=Ai(this,e);const i=this.requestAnimationFrame(()=>{e(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,i),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),u().cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,e])=>{this[t].forEach((i,n)=>this[e](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(t){return(t||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(t){function e(n){const r=u().getComputedStyle(n,null),a=r.getPropertyValue("visibility");return r.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(a)}return t||(t=this.el()),!!(function(n){if(n.offsetWidth+n.offsetHeight+n.getBoundingClientRect().height+n.getBoundingClientRect().width===0)return!1;const r={x:n.getBoundingClientRect().left+n.offsetWidth/2,y:n.getBoundingClientRect().top+n.offsetHeight/2};if(r.x<0||r.x>(m().documentElement.clientWidth||u().innerWidth)||r.y<0||r.y>(m().documentElement.clientHeight||u().innerHeight))return!1;let a=m().elementFromPoint(r.x,r.y);for(;a;){if(a===n)return!0;if(!a.parentNode)return!1;a=a.parentNode}}(t)&&(i=t,e(i.parentElement)&&e(i)&&i.style.opacity!=="0"&&u().getComputedStyle(i).height!=="0px"&&u().getComputedStyle(i).width!=="0px")&&(!t.parentElement||t.tabIndex>=0));var i}static registerComponent(t,e){if(typeof t!="string"||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);const i=kt.getComponent("Tech"),n=i&&i.isTech(e),r=kt===e||kt.prototype.isPrototypeOf(e.prototype);if(n||!r){let c;throw c=n?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${t}"; ${c}.`)}t=Hi(t),kt.components_||(kt.components_={});const a=kt.getComponent("Player");if(t==="Player"&&a&&a.players){const c=a.players,p=Object.keys(c);if(c&&p.length>0&&p.map(v=>c[v]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return kt.components_[t]=e,kt.components_[Gr(t)]=e,e}static getComponent(t){if(t&&kt.components_)return kt.components_[t]}}function cc(s,t,e,i){return function(n,r,a){if(typeof r!="number"||r<0||r>a)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${r}) is non-numeric or out of bounds (0-${a}).`)}(s,i,e.length-1),e[i][t]}function Lo(s){let t;return t=s===void 0||s.length===0?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:s.length,start:cc.bind(null,"start",0,s),end:cc.bind(null,"end",1,s)},u().Symbol&&u().Symbol.iterator&&(t[u().Symbol.iterator]=()=>(s||[]).values()),t}function tn(s,t){return Array.isArray(s)?Lo(s):s===void 0||t===void 0?Lo():Lo([[s,t]])}kt.registerComponent("Component",kt);const uc=function(s,t){s=s<0?0:s;let e=Math.floor(s%60),i=Math.floor(s/60%60),n=Math.floor(s/3600);const r=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(s)||s===1/0)&&(n=i=e="-"),n=n>0||a>0?n+":":"",i=((n||r>=10)&&i<10?"0"+i:i)+":",e=e<10?"0"+e:e,n+i+e};let Do=uc;function hc(s){Do=s}function dc(){Do=uc}function er(s,t=s){return Do(s,t)}var Od=Object.freeze({__proto__:null,createTimeRanges:tn,createTimeRange:tn,setFormatTime:hc,resetFormatTime:dc,formatTime:er});function pc(s,t){let e,i,n=0;if(!t)return 0;s&&s.length||(s=tn(0,0));for(let r=0;r<s.length;r++)e=s.start(r),i=s.end(r),i>t&&(i=t),n+=i-e;return n/t}function Bi(s){if(s instanceof Bi)return s;typeof s=="number"?this.code=s:typeof s=="string"?this.message=s:ps(s)&&(typeof s.code=="number"&&(this.code=s.code),Object.assign(this,s)),this.message||(this.message=Bi.defaultMessages[this.code]||"")}function Xr(s){return s!=null&&typeof s.then=="function"}function dn(s){Xr(s)&&s.then(null,t=>{})}Bi.prototype.code=0,Bi.prototype.message="",Bi.prototype.status=null,Bi.prototype.metadata=null,Bi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Bi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},Bi.MEDIA_ERR_CUSTOM=0,Bi.prototype.MEDIA_ERR_CUSTOM=0,Bi.MEDIA_ERR_ABORTED=1,Bi.prototype.MEDIA_ERR_ABORTED=1,Bi.MEDIA_ERR_NETWORK=2,Bi.prototype.MEDIA_ERR_NETWORK=2,Bi.MEDIA_ERR_DECODE=3,Bi.prototype.MEDIA_ERR_DECODE=3,Bi.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Bi.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Bi.MEDIA_ERR_ENCRYPTED=5,Bi.prototype.MEDIA_ERR_ENCRYPTED=5;const mc=function(s){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,e,i)=>(s[e]&&(t[e]=s[e]),t),{cues:s.cues&&Array.prototype.map.call(s.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},Ro="vjs-modal-dialog";class br extends kt{constructor(t,e){super(t,e),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Gt("div",{className:`${Ro}-content`},{role:"document"}),this.descEl_=Gt("p",{className:`${Ro}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),yi(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Ro} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(this.opened_)return void(this.options_.fillAlways&&this.fill());const t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if(typeof t=="boolean"){const e=this.closeable_=!!t;let i=this.getChild("closeButton");if(e&&!i){const n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close_)}!e&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){const e=this.contentEl(),i=e.parentNode,n=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(e),this.empty(),Se(e,t),this.trigger("modalfill"),n?i.insertBefore(e,n):i.appendChild(e);const r=this.getChild("closeButton");r&&i.appendChild(r.el_)}empty(){this.trigger("beforemodalempty"),xi(this.contentEl()),this.trigger("modalempty")}content(t){return t!==void 0&&(this.content_=t),this.content_}conditionalFocus_(){const t=m().activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(this.trigger({type:"modalKeydown",originalEvent:t,target:this,bubbles:!0}),t.stopPropagation(),t.key==="Escape"&&this.closeable())return t.preventDefault(),void this.close();if(t.key!=="Tab")return;const e=this.focusableEls_(),i=this.el_.querySelector(":focus");let n;for(let r=0;r<e.length;r++)if(i===e[r]){n=r;break}m().activeElement===this.el_&&(n=0),t.shiftKey&&n===0?(e[e.length-1].focus(),t.preventDefault()):t.shiftKey||n!==e.length-1||(e[0].focus(),t.preventDefault())}focusableEls_(){const t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,e=>(e instanceof u().HTMLAnchorElement||e instanceof u().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof u().HTMLInputElement||e instanceof u().HTMLSelectElement||e instanceof u().HTMLTextAreaElement||e instanceof u().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof u().HTMLIFrameElement||e instanceof u().HTMLObjectElement||e instanceof u().HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable"))}}br.prototype.options_={pauseOnOpen:!0,temporary:!0},kt.registerComponent("ModalDialog",br);class Tr extends Ns{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let e=0;e<t.length;e++)this.addTrack(t[e])}addTrack(t){const e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get(){return this.tracks_[e]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},Pn(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let e;for(let i=0,n=this.length;i<n;i++)if(this[i]===t){e=this[i],e.off&&e.off(),this.tracks_.splice(i,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})}getTrackById(t){let e=null;for(let i=0,n=this.length;i<n;i++){const r=this[i];if(r.id===t){e=r;break}}return e}}Tr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const s in Tr.prototype.allowedEvents_)Tr.prototype["on"+s]=null;const No=function(s,t){for(let e=0;e<s.length;e++)Object.keys(s[e]).length&&t.id!==s[e].id&&(s[e].enabled=!1)},Mo=function(s,t){for(let e=0;e<s.length;e++)Object.keys(s[e]).length&&t.id!==s[e].id&&(s[e].selected=!1)};class fc extends Tr{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Pa{constructor(t){Pa.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){const e=this.length||0;let i=0;const n=t.length;this.cues_=t,this.length_=t.length;const r=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(e<n)for(i=e;i<n;i++)r.call(this,i)}getCueById(t){let e=null;for(let i=0,n=this.length;i<n;i++){const r=this[i];if(r.id===t){e=r;break}}return e}}const Ld={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Dd={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Rd={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},gc={disabled:"disabled",hidden:"hidden",showing:"showing"};class jo extends Ns{constructor(t={}){super();const e={id:t.id||"vjs_track_"+$s(),kind:t.kind||"",language:t.language||""};let i=t.label||"";for(const n in e)Object.defineProperty(this,n,{get:()=>e[n],set(){}});Object.defineProperty(this,"label",{get:()=>i,set(n){n!==i&&(i=n,this.trigger("labelchange"))}})}}const Uo=function(s){return new URL(s,m().baseURI)},yc=function(s){return new URL(s,m().baseURI).href},Bo=function(s){if(typeof s=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(s);if(t)return t.pop().toLowerCase()}return""},Oa=function(s,t=u().location){return Uo(s).origin!==t.origin};var Nd=Object.freeze({__proto__:null,parseUrl:Uo,getAbsoluteURL:yc,getFileExtension:Bo,isCrossOrigin:Oa});const _c=function(s,t){const e=new(u()).WebVTT.Parser(u(),u().vttjs,u().WebVTT.StringDecoder()),i=[];e.oncue=function(n){t.addCue(n)},e.onparsingerror=function(n){i.push(n)},e.onflush=function(){t.trigger({type:"loadeddata",target:t})},e.parse(s),i.length>0&&(u().console&&u().console.groupCollapsed&&u().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),i.forEach(n=>je.error(n)),u().console&&u().console.groupEnd&&u().console.groupEnd()),e.flush()},vc=function(s,t){const e={uri:s},i=Oa(s);i&&(e.cors=i);const n=t.tech_.crossOrigin()==="use-credentials";n&&(e.withCredentials=n),D()(e,Ai(this,function(r,a,c){if(r)return je.error(r,a);t.loaded_=!0,typeof u().WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],p=>{if(p.type!=="vttjserror")return _c(c,t);je.error(`vttjs failed to load, stopping trying to process ${t.src}`)}):_c(c,t)}))};class Yr extends jo{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");const e=gi(t,{kind:Rd[t.kind]||"subtitles",language:t.language||t.srclang||""});let i=gc[e.mode]||"disabled";const n=e.default;e.kind!=="metadata"&&e.kind!=="chapters"||(i="hidden"),super(e),this.tech_=e.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const r=new Pa(this.cues_),a=new Pa(this.activeCues_);let c=!1;this.timeupdateHandler=Ai(this,function(p={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),p.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):p.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}),this.tech_.one("dispose",()=>{this.stopTracking()}),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>n,set(){}},mode:{get:()=>i,set(p){gc[p]&&i!==p&&(i=p,this.preload_||i==="disabled"||this.cues.length!==0||vc(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const p=this.tech_.currentTime(),v=[];for(let _=0,L=this.cues.length;_<L;_++){const k=this.cues[_];k.startTime<=p&&k.endTime>=p&&v.push(k)}if(c=!1,v.length!==this.activeCues_.length)c=!0;else for(let _=0;_<v.length;_++)this.activeCues_.indexOf(v[_])===-1&&(c=!0);return this.activeCues_=v,a.setCues_(this.activeCues_),a},set(){}}}),e.src?(this.src=e.src,this.preload_||(this.loaded_=!0),(this.preload_||e.kind!=="subtitles"&&e.kind!=="captions")&&vc(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let e=t;if(!("getCueAsHTML"in e)){e=new(u()).vttjs.VTTCue(t.startTime,t.endTime,t.text);for(const n in t)n in e||(e[n]=t[n]);e.id=t.id,e.originalCue_=t}const i=this.tech_.textTracks();for(let n=0;n<i.length;n++)i[n]!==this&&i[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)}removeCue(t){let e=this.cues_.length;for(;e--;){const i=this.cues_[e];if(i===t||i.originalCue_&&i.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}}}Yr.prototype.allowedEvents_={cuechange:"cuechange"};class bc extends jo{constructor(t={}){const e=gi(t,{kind:Dd[t.kind]||""});super(e);let i=!1;Object.defineProperty(this,"enabled",{get:()=>i,set(n){typeof n=="boolean"&&n!==i&&(i=n,this.trigger("enabledchange"))}}),e.enabled&&(this.enabled=e.enabled),this.loaded_=!0}}class Tc extends jo{constructor(t={}){const e=gi(t,{kind:Ld[t.kind]||""});super(e);let i=!1;Object.defineProperty(this,"selected",{get:()=>i,set(n){typeof n=="boolean"&&n!==i&&(i=n,this.trigger("selectedchange"))}}),e.selected&&(this.selected=e.selected)}}class On extends Ns{constructor(t={}){let e;super();const i=new Yr(t);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get:()=>e},track:{get:()=>i}}),e=On.NONE,i.addEventListener("loadeddata",()=>{e=On.LOADED,this.trigger({type:"load",target:this})})}}On.prototype.allowedEvents_={load:"load"},On.NONE=0,On.LOADING=1,On.LOADED=2,On.ERROR=3;const Vs={audio:{ListClass:class extends Tr{constructor(s=[]){for(let t=s.length-1;t>=0;t--)if(s[t].enabled){No(s,s[t]);break}super(s),this.changing_=!1}addTrack(s){s.enabled&&No(this,s),super.addTrack(s),s.addEventListener&&(s.enabledChange_=()=>{this.changing_||(this.changing_=!0,No(this,s),this.changing_=!1,this.trigger("change"))},s.addEventListener("enabledchange",s.enabledChange_))}removeTrack(s){super.removeTrack(s),s.removeEventListener&&s.enabledChange_&&(s.removeEventListener("enabledchange",s.enabledChange_),s.enabledChange_=null)}},TrackClass:bc,capitalName:"Audio"},video:{ListClass:class extends Tr{constructor(s=[]){for(let t=s.length-1;t>=0;t--)if(s[t].selected){Mo(s,s[t]);break}super(s),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(s){s.selected&&Mo(this,s),super.addTrack(s),s.addEventListener&&(s.selectedChange_=()=>{this.changing_||(this.changing_=!0,Mo(this,s),this.changing_=!1,this.trigger("change"))},s.addEventListener("selectedchange",s.selectedChange_))}removeTrack(s){super.removeTrack(s),s.removeEventListener&&s.selectedChange_&&(s.removeEventListener("selectedchange",s.selectedChange_),s.selectedChange_=null)}},TrackClass:Tc,capitalName:"Video"},text:{ListClass:fc,TrackClass:Yr,capitalName:"Text"}};Object.keys(Vs).forEach(function(s){Vs[s].getterName=`${s}Tracks`,Vs[s].privateName=`${s}Tracks_`});const Sr={remoteText:{ListClass:fc,TrackClass:Yr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(s=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,e=s.length;t<e;t++)this.addTrackElement_(s[t])}addTrackElement_(s){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(s)===-1&&this.trackElements_.push(s)}getTrackElementByTrack_(s){let t;for(let e=0,i=this.trackElements_.length;e<i;e++)if(s===this.trackElements_[e].track){t=this.trackElements_[e];break}return t}removeTrackElement_(s){for(let t=0,e=this.trackElements_.length;t<e;t++)if(s===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:On,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ms=Object.assign({},Vs,Sr);Sr.names=Object.keys(Sr),Vs.names=Object.keys(Vs),ms.names=[].concat(Sr.names).concat(Vs.names);class Ye extends kt{constructor(t={},e=function(){}){t.reportTouchActivity=!1,super(null,t,e),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ms.names.forEach(i=>{const n=ms[i];t&&t[n.getterName]&&(this[n.privateName]=t[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{t[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),t.nativeCaptions===!1||t.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:t.nativeCaptions!==!0&&t.nativeTextTracks!==!0||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=t.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ms.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ai(this,function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,e===1&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return tn(0,0)}bufferedPercent(){return pc(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Vs.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){(t=[].concat(t)).forEach(e=>{const i=this[`${e}Tracks`]()||[];let n=i.length;for(;n--;){const r=i[n];e==="text"&&this.removeRemoteTextTrack(r),i.removeTrack(r)}})}cleanupAutoTextTracks(){const t=this.autoRemoteTextTracks_||[];let e=t.length;for(;e--;){const i=t[e];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return t!==void 0&&(this.error_=new Bi(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?tn(0,0):tn()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Vs.names.forEach(t=>{const e=Vs[t],i=()=>{this.trigger(`${t}trackchange`)},n=this[e.getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),this.on("dispose",()=>{n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!u().WebVTT)if(m().body.contains(this.el())){if(!this.options_["vtt.js"]&&Is(R())&&Object.keys(R()).length>0)return void this.trigger("vttjsloaded");const t=m().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),u().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const t=this.textTracks(),e=this.remoteTextTracks(),i=c=>t.addTrack(c.track),n=c=>t.removeTrack(c.track);e.on("addtrack",i),e.on("removetrack",n),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),a=()=>{r();for(let c=0;c<t.length;c++){const p=t[c];p.removeEventListener("cuechange",r),p.mode==="showing"&&p.addEventListener("cuechange",r)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",function(){e.off("addtrack",i),e.off("removetrack",n),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(let c=0;c<t.length;c++)t[c].removeEventListener("cuechange",r)})}addTextTrack(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(n,r,a,c,p={}){const v=n.textTracks();p.kind=r,a&&(p.label=a),c&&(p.language=c),p.tech=n;const _=new ms.text.TrackClass(p);return v.addTrack(_),_}(this,t,e,i)}createRemoteTextTrack(t){const e=gi(t,{tech:this});return new Sr.remoteTextEl.TrackClass(e)}addRemoteTextTrack(t={},e){const i=this.createRemoteTextTrack(t);return typeof e!="boolean"&&(e=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),e===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(t){const e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){const e=$s();return!this.isReady_||this.paused()?(this.queuedHanders_.add(e),this.one("playing",()=>{this.queuedHanders_.has(e)&&(this.queuedHanders_.delete(e),t())})):this.requestNamedAnimationFrame(e,t),e}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,e){return Ye.canPlayType(t.type)}static isTech(t){return t.prototype instanceof Ye||t instanceof Ye||t===Ye}static registerTech(t,e){if(Ye.techs_||(Ye.techs_={}),!Ye.isTech(e))throw new Error(`Tech ${t} must be a Tech`);if(!Ye.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ye.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Hi(t),Ye.techs_[t]=e,Ye.techs_[Gr(t)]=e,t!=="Tech"&&Ye.defaultTechOrder_.push(t),e}static getTech(t){if(t)return Ye.techs_&&Ye.techs_[t]?Ye.techs_[t]:(t=Hi(t),u()&&u().videojs&&u().videojs[t]?(je.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),u().videojs[t]):void 0)}}ms.names.forEach(function(s){const t=ms[s];Ye.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Ye.prototype.featuresVolumeControl=!0,Ye.prototype.featuresMuteControl=!0,Ye.prototype.featuresFullscreenResize=!1,Ye.prototype.featuresPlaybackRate=!1,Ye.prototype.featuresProgressEvents=!1,Ye.prototype.featuresSourceset=!1,Ye.prototype.featuresTimeupdateEvents=!1,Ye.prototype.featuresNativeTextTracks=!1,Ye.prototype.featuresVideoFrameCallback=!1,Ye.withSourceHandlers=function(s){s.registerSourceHandler=function(t,e){let i=s.sourceHandlers;i||(i=s.sourceHandlers=[]),e===void 0&&(e=i.length),i.splice(e,0,t)},s.canPlayType=function(t){const e=s.sourceHandlers||[];let i;for(let n=0;n<e.length;n++)if(i=e[n].canPlayType(t),i)return i;return""},s.selectSourceHandler=function(t,e){const i=s.sourceHandlers||[];let n;for(let r=0;r<i.length;r++)if(n=i[r].canHandleSource(t,e),n)return i[r];return null},s.canPlaySource=function(t,e){const i=s.selectSourceHandler(t,e);return i?i.canHandleSource(t,e):""},["seekable","seeking","duration"].forEach(function(t){const e=this[t];typeof e=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},s.prototype),s.prototype.setSource=function(t){let e=s.selectSourceHandler(t,this.options_);e||(s.nativeSourceHandler?e=s.nativeSourceHandler:je.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),e!==s.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=e.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},s.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},kt.registerComponent("Tech",Ye),Ye.registerTech("Tech",Ye),Ye.defaultTechOrder_=[];const ir={},La={},Da={};function Md(s,t,e){s.setTimeout(()=>sr(t,ir[t.type],e,s),1)}function Sc(s,t,e,i=null){const n="call"+Hi(e),r=s.reduce(Fo(n),i),a=r===Da,c=a?null:t[e](r);return function(p,v,_,L){for(let k=p.length-1;k>=0;k--){const A=p[k];A[v]&&A[v](L,_)}}(s,e,c,a),c}const jd={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Ud={setCurrentTime:1,setMuted:1,setVolume:1},wc={play:1,pause:1};function Fo(s){return(t,e)=>t===Da?Da:e[s]?e[s](t):t}function sr(s={},t=[],e,i,n=[],r=!1){const[a,...c]=t;if(typeof a=="string")sr(s,ir[a],e,i,n,r);else if(a){const p=function(v,_){const L=La[v.id()];let k=null;if(L==null)return k=_(v),La[v.id()]=[[_,k]],k;for(let A=0;A<L.length;A++){const[tt,z]=L[A];tt===_&&(k=z)}return k===null&&(k=_(v),L.push([_,k])),k}(i,a);if(!p.setSource)return n.push(p),sr(s,c,e,i,n,r);p.setSource(Object.assign({},s),function(v,_){if(v)return sr(s,c,e,i,n,r);n.push(p),sr(_,s.type===_.type?c:ir[_.type],e,i,n,r)})}else c.length?sr(s,c,e,i,n,r):r?e(s,n):sr(s,ir["*"],e,i,n,!0)}const Bd={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ra=function(s=""){const t=Bo(s);return Bd[t.toLowerCase()]||""},Ec=function(s){if(Array.isArray(s)){let t=[];s.forEach(function(e){e=Ec(e),Array.isArray(e)?t=t.concat(e):ps(e)&&t.push(e)}),s=t}else s=typeof s=="string"&&s.trim()?[Cc({src:s})]:ps(s)&&typeof s.src=="string"&&s.src&&s.src.trim()?[Cc(s)]:[];return s};function Cc(s){if(!s.type){const t=Ra(s.src);t&&(s.type=t)}return s}const xc=be?10009:Ue?461:8,wr={codes:{play:415,pause:19,ff:417,rw:412,back:xc},names:{415:"play",19:"pause",417:"ff",412:"rw",[xc]:"back"},isEventKey(s,t){return t=t.toLowerCase(),!(!this.names[s.keyCode]||this.names[s.keyCode]!==t)},getEventName(s){if(this.names[s.keyCode])return this.names[s.keyCode];if(this.codes[s.code]){const t=this.codes[s.code];return this.names[t]}return null}};class Fd extends Ns{constructor(t){super(),this.player_=t,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0)}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(t){const e=t.originalEvent?t.originalEvent:t;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)){if(this.isPaused_)return;e.preventDefault();const i=e.key.substring(5).toLowerCase();this.move(i)}else if(wr.isEventKey(e,"play")||wr.isEventKey(e,"pause")||wr.isEventKey(e,"ff")||wr.isEventKey(e,"rw")){e.preventDefault();const i=wr.getEventName(e);this.performMediaAction_(i)}else wr.isEventKey(e,"Back")&&t.target&&t.target.closeable()&&(e.preventDefault(),t.target.close())}performMediaAction_(t){if(this.player_)switch(t){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(t){const e=t.relatedTarget;let i=null;const n=this.getCurrentComponent(t.target);e&&(i=!!e.closest(".video-js"),e.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(t.currentTarget.contains(t.relatedTarget)||i)&&e||(n.name()==="CloseButton"?this.refocusComponent():(this.pause(),n&&n.el()&&(this.lastFocusedComponent_=n)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const t=this.player_,e=[];function i(n){for(const r of n)r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&e.push(r),r.hasOwnProperty("children_")&&r.children_.length>0&&i(r.children_)}return t.children_.forEach(n=>{if(n.hasOwnProperty("el_")){if(n.getIsFocusable&&n.getIsAvailableToBeFocused&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el()))return void e.push(n);n.hasOwnProperty("children_")&&n.children_.length>0?i(n.children_):n.hasOwnProperty("items")&&n.items.length>0?i(n.items):this.findSuitableDOMChild(n)&&e.push(n)}}),this.focusableComponents=e,this.focusableComponents}findSuitableDOMChild(t){return function e(i){if(t.getIsFocusable(i)&&t.getIsAvailableToBeFocused(i))return i;for(let n=0;n<i.children.length;n++){const r=e(i.children[n]);if(r)return r}return null}(t.el())}getCurrentComponent(t){this.updateFocusableComponents();const e=t||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===e)return i}}add(t){const e=[...this.focusableComponents];t.hasOwnProperty("el_")&&t.getIsFocusable()&&t.getIsAvailableToBeFocused(t.el())&&e.push(t),this.focusableComponents=e,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(t){for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===t.name())return this.focusableComponents.splice(e,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(t){const e=this.getCurrentComponent();if(!e)return;const i=e.getPositions(),n=this.focusableComponents.filter(a=>a!==e&&this.isInDirection_(i.boundingClientRect,a.getPositions().boundingClientRect,t)),r=this.findBestCandidate_(i.center,n,t);r?this.focus(r):this.trigger({type:"endOfFocusableComponents",direction:t,focusedComponent:e})}findBestCandidate_(t,e,i){let n=1/0,r=null;for(const a of e){const c=a.getPositions().center,p=this.calculateDistance_(t,c,i);p<n&&(n=p,r=a)}return r}isInDirection_(t,e,i){switch(i){case"right":return e.left>=t.right;case"left":return e.right<=t.left;case"down":return e.top>=t.bottom;case"up":return e.bottom<=t.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[t])}else this.focus(this.updateFocusableComponents()[0])}focus(t){t.getIsAvailableToBeFocused(t.el())?t.focus():this.findSuitableDOMChild(t)&&this.findSuitableDOMChild(t).focus()}calculateDistance_(t,e,i){const n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);let a;switch(i){case"right":case"left":a=n+100*r;break;case"up":a=2*r+.5*n;break;case"down":a=5*r+n;break;default:a=n+r}return a}searchForTrackSelect_(){const t=this;for(const e of t.updateFocusableComponents())if(e.constructor.name==="TextTrackSelect"){t.focus(e);break}}}kt.registerComponent("MediaLoader",class extends kt{constructor(s,t,e){if(super(s,gi({createEl:!1},t),e),t.playerOptions.sources&&t.playerOptions.sources.length!==0)s.src(t.playerOptions.sources);else for(let i=0,n=t.playerOptions.techOrder;i<n.length;i++){const r=Hi(n[i]);let a=Ye.getTech(r);if(r||(a=kt.getComponent(r)),a&&a.isSupported()){s.loadTech_(r);break}}}});class Na extends kt{constructor(t,e){super(t,e),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(t="div",e={},i={}){e=Object.assign({className:this.buildCSSClass(),tabIndex:0},e),t==="button"&&je.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=e.tabIndex;const n=Gt(t,e,i);return this.player_.options_.experimentalSvgIcons||n.appendChild(Gt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=Gt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,e=this.el()){if(t===void 0)return this.controlText_||"Need Text";const i=this.localize(t);this.controlText_=t,yi(this.controlTextEl_,i),this.nonIconControl||this.player_.options_.noUITitleAttributes||e.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this.tabIndex_!==void 0&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this.tabIndex_!==void 0&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){t.key===" "||t.key==="Enter"?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}kt.registerComponent("ClickableComponent",Na);class qo extends Na{constructor(t,e){super(t,e),this.update(),this.update_=i=>this.update(i),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Gt("div",{className:"vjs-poster"})}crossOrigin(t){if(t===void 0)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;t===null||t==="anonymous"||t==="use-credentials"?this.$("img")&&(this.$("img").crossOrigin=t):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}update(t){const e=this.player().poster();this.setSrc(e),e?this.show():this.hide()}setSrc(t){t?(this.$("img")||this.el_.appendChild(Gt("picture",{className:"vjs-poster",tabIndex:-1},{},Gt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t):this.el_.textContent=""}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?dn(this.player_.play()):this.player_.pause())}}qo.prototype.crossorigin=qo.prototype.crossOrigin,kt.registerComponent("PosterImage",qo);const zs="#222",kc="#ccc",qd={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function $o(s,t){let e;if(s.length===4)e=s[1]+s[1]+s[2]+s[2]+s[3]+s[3];else{if(s.length!==7)throw new Error("Invalid color code provided, "+s+"; must be formatted as e.g. #f0e or #f604e2.");e=s.slice(1)}return"rgba("+parseInt(e.slice(0,2),16)+","+parseInt(e.slice(2,4),16)+","+parseInt(e.slice(4,6),16)+","+t+")"}function Kr(s,t,e){try{s.style[t]=e}catch{return}}function Ac(s){return s?`${s}px`:""}kt.registerComponent("TextTrackDisplay",class extends kt{constructor(s,t,e){super(s,t,e);const i=n=>{this.updateDisplayOverlay(),this.updateDisplay(n)};s.on("loadstart",n=>this.toggleDisplay(n)),s.on("texttrackchange",n=>this.updateDisplay(n)),s.on("loadedmetadata",n=>{this.updateDisplayOverlay(),this.preselectTrack(n)}),s.ready(Ai(this,function(){if(s.tech_&&s.tech_.featuresNativeTextTracks)return void this.hide();s.on("fullscreenchange",i),s.on("playerresize",i);const n=u().screen.orientation||u(),r=u().screen.orientation?"change":"orientationchange";n.addEventListener(r,i),s.on("dispose",()=>n.removeEventListener(r,i));const a=this.options_.playerOptions.tracks||[];for(let c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()}))}preselectTrack(){const s={captions:1,subtitles:1},t=this.player_.textTracks(),e=this.player_.cache_.selectedLanguage;let i,n,r;for(let a=0;a<t.length;a++){const c=t[a];e&&e.enabled&&e.language&&e.language===c.language&&c.kind in s?c.kind===e.kind?r=c:r||(r=c):e&&!e.enabled?(r=null,i=null,n=null):c.default&&(c.kind!=="descriptions"||i?c.kind in s&&!n&&(n=c):i=c)}r?r.mode="showing":n?n.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof u().WebVTT=="function"&&u().WebVTT.processCues(u(),[],this.el_)}updateDisplay(){const s=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const r=[];for(let a=0;a<s.length;++a){const c=s[a];c.mode==="showing"&&r.push(c)}return void this.updateForTrack(r)}let e=null,i=null,n=s.length;for(;n--;){const r=s[n];r.mode==="showing"&&(r.kind==="descriptions"?e=r:i=r)}i?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):e&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!u().CSS.supports("inset-inline: 10px"))return;const s=this.player_.currentWidth(),t=this.player_.currentHeight(),e=s/t,i=this.player_.videoWidth()/this.player_.videoHeight();let n=0,r=0;Math.abs(e-i)>.1&&(e>i?n=Math.round((s-t*i)/2):r=Math.round((t-s/i)/2)),Kr(this.el_,"insetInline",Ac(n)),Kr(this.el_,"insetBlock",Ac(r))}updateDisplayState(s){const t=this.player_.textTrackSettings.getValues(),e=s.activeCues;let i=e.length;for(;i--;){const n=e[i];if(!n)continue;const r=n.displayState;if(t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&Kr(r.firstChild,"color",$o(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Kr(r.firstChild,"backgroundColor",$o(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Kr(r,"backgroundColor",$o(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?r.firstChild.style.textShadow=`2px 2px 3px ${zs}, 2px 2px 4px ${zs}, 2px 2px 5px ${zs}`:t.edgeStyle==="raised"?r.firstChild.style.textShadow=`1px 1px ${zs}, 2px 2px ${zs}, 3px 3px ${zs}`:t.edgeStyle==="depressed"?r.firstChild.style.textShadow=`1px 1px ${kc}, 0 1px ${kc}, -1px -1px ${zs}, 0 -1px ${zs}`:t.edgeStyle==="uniform"&&(r.firstChild.style.textShadow=`0 0 4px ${zs}, 0 0 4px ${zs}, 0 0 4px ${zs}, 0 0 4px ${zs}`)),t.fontPercent&&t.fontPercent!==1){const a=u().parseFloat(r.style.fontSize);r.style.fontSize=a*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=qd[t.fontFamily])}}updateForTrack(s){if(Array.isArray(s)||(s=[s]),typeof u().WebVTT!="function"||s.every(e=>!e.activeCues))return;const t=[];for(let e=0;e<s.length;++e){const i=s[e];for(let n=0;n<i.activeCues.length;++n)t.push(i.activeCues[n])}u().WebVTT.processCues(u(),t,this.el_);for(let e=0;e<s.length;++e){const i=s[e];for(let n=0;n<i.activeCues.length;++n){const r=i.activeCues[n].displayState;Ni(r,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:e)),i.language&&H(r,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),kt.registerComponent("LoadingSpinner",class extends kt{createEl(){const s=this.player_.isAudio(),t=this.localize(s?"Audio Player":"Video Player"),e=Gt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(e),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class os extends Na{createEl(t,e={},i={}){const n=Gt("button",e=Object.assign({className:this.buildCSSClass()},e),i=Object.assign({type:"button"},i));return this.player_.options_.experimentalSvgIcons||n.appendChild(Gt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(t,e={}){const i=this.constructor.name;return je.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),kt.prototype.addChild.call(this,t,e)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){t.key!==" "&&t.key!=="Enter"?super.handleKeyDown(t):t.stopPropagation()}}kt.registerComponent("Button",os);class Ic extends os{constructor(t,e){super(t,e),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){const e=this.player_.play();if(this.mouseused_&&"clientX"in t&&"clientY"in t)return dn(e),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(!n)return void this.player_.tech(!0).focus();const r=()=>n.focus();Xr(e)?e.then(r,()=>{}):this.setTimeout(r,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}}Ic.prototype.controlText_="Play Video",kt.registerComponent("BigPlayButton",Ic),kt.registerComponent("CloseButton",class extends os{constructor(s,t){super(s,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(s){this.trigger({type:"close",bubbles:!1})}handleKeyDown(s){s.key==="Escape"?(s.preventDefault(),s.stopPropagation(),this.trigger("click")):super.handleKeyDown(s)}});class Pc extends os{constructor(t,e={}){super(t,e),e.replay=e.replay===void 0||e.replay,this.setIcon("play"),this.on(t,"play",i=>this.handlePlay(i)),this.on(t,"pause",i=>this.handlePause(i)),e.replay&&this.on(t,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?dn(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",e=>this.handleSeeked(e))}}Pc.prototype.controlText_="Play",kt.registerComponent("PlayToggle",Pc);class Er extends kt{constructor(t,e){super(t,e),this.on(t,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const t=this.buildCSSClass(),e=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),i=Gt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return e.appendChild(i),this.contentEl_=Gt("span",{className:`${t}-display`},{role:"presentation"}),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(t){(this.player_.options_.enableSmoothSeeking||t.type!=="seeking")&&this.updateContent(t)}updateTextNode_(t=0){t=er(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,je.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=m().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))}))}updateContent(t){}}Er.prototype.labelText_="Time",Er.prototype.controlText_="Time",kt.registerComponent("TimeDisplay",Er);class Ho extends Er{buildCSSClass(){return"vjs-current-time"}updateContent(t){let e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)}}Ho.prototype.labelText_="Current Time",Ho.prototype.controlText_="Current Time",kt.registerComponent("CurrentTimeDisplay",Ho);class Vo extends Er{constructor(t,e){super(t,e);const i=n=>this.updateContent(n);this.on(t,"durationchange",i),this.on(t,"loadstart",i),this.on(t,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(t){const e=this.player_.duration();this.updateTextNode_(e)}}Vo.prototype.labelText_="Duration",Vo.prototype.controlText_="Duration",kt.registerComponent("DurationDisplay",Vo),kt.registerComponent("TimeDivider",class extends kt{createEl(){const s=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),e=super.createEl("span",{textContent:"/"});return t.appendChild(e),s.appendChild(t),s}});class zo extends Er{constructor(t,e){super(t,e),this.on(t,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const t=super.createEl();return this.options_.displayNegative!==!1&&t.insertBefore(Gt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if(typeof this.player_.duration()!="number")return;let e;e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e)}}zo.prototype.labelText_="Remaining Time",zo.prototype.controlText_="Remaining Time",kt.registerComponent("RemainingTimeDisplay",zo),kt.registerComponent("LiveDisplay",class extends kt{constructor(s,t){super(s,t),this.updateShowing(),this.on(this.player(),"durationchange",e=>this.updateShowing(e))}createEl(){const s=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Gt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Gt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(m().createTextNode(this.localize("LIVE"))),s.appendChild(this.contentEl_),s}dispose(){this.contentEl_=null,super.dispose()}updateShowing(s){this.player().duration()===1/0?this.show():this.hide()}});class Oc extends os{constructor(t,e){super(t,e),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",t),this.textEl_=Gt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function Qr(s,t,e){return s=Number(s),Math.min(e,Math.max(t,isNaN(s)?t:s))}Oc.prototype.controlText_="Seek to live, currently playing live",kt.registerComponent("SeekToLive",Oc);var $d=Object.freeze({__proto__:null,clamp:Qr});class Wo extends kt{constructor(t,e){super(t,e),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,e={},i={}){return e.className=e.className+" vjs-slider",e=Object.assign({tabIndex:0},e),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(t,e,i)}handleMouseDown(t){const e=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type!=="touchstart"||ut||t.preventDefault(),Tt(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove_),this.on(e,"mouseup",this.handleMouseUp_),this.on(e,"touchmove",this.handleMouseMove_),this.on(e,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){const e=this.bar.el_.ownerDocument;Vt(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{const e=this.vertical()?"height":"width";this.bar.el().style[e]=(100*t).toFixed(2)+"%"})),t}getProgress(){return Number(Qr(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){const e=Be(this.el_,t);return this.vertical()?e.y:e.x}handleKeyDown(t){const e=this.options_.playerOptions.spatialNavigation,i=e&&e.enabled,n=e&&e.horizontalSeek;i?n&&t.key==="ArrowLeft"||!n&&t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):n&&t.key==="ArrowRight"||!n&&t.key==="ArrowUp"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t):t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):t.key==="ArrowUp"||t.key==="ArrowRight"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}kt.registerComponent("Slider",Wo);const Go=(s,t)=>Qr(s/t*100,0,100).toFixed(2)+"%";kt.registerComponent("LoadProgressBar",class extends kt{constructor(s,t){super(s,t),this.partEls_=[],this.on(s,"progress",e=>this.update(e))}createEl(){const s=super.createEl("div",{className:"vjs-load-progress"}),t=Gt("span",{className:"vjs-control-text"}),e=Gt("span",{textContent:this.localize("Loaded")}),i=m().createTextNode(": ");return this.percentageEl_=Gt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),s.appendChild(t),t.appendChild(e),t.appendChild(i),t.appendChild(this.percentageEl_),s}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(s){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,e=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),n=this.player_.bufferedEnd(),r=this.partEls_,a=Go(n,i);this.percent_!==a&&(this.el_.style.width=a,yi(this.percentageEl_,a),this.percent_=a);for(let c=0;c<e.length;c++){const p=e.start(c),v=e.end(c);let _=r[c];_||(_=this.el_.appendChild(Gt()),r[c]=_),_.dataset.start===p&&_.dataset.end===v||(_.dataset.start=p,_.dataset.end=v,_.style.left=Go(p,n),_.style.width=Go(v-p,n))}for(let c=r.length;c>e.length;c--)this.el_.removeChild(r[c-1]);r.length=e.length})}}),kt.registerComponent("TimeTooltip",class extends kt{constructor(s,t){super(s,t),this.update=hn(Ai(this,this.update),Hs)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(s,t,e){const i=ee(this.el_),n=Jt(this.player_.el()),r=s.width*t;if(!n||!i)return;let a=s.left-n.left+r,c=s.width-r+(n.right-s.right);c||(c=s.width-r,a=r);let p=i.width/2;a<p?p+=p-a:c<p&&(p=c),p<0?p=0:p>i.width&&(p=i.width),p=Math.round(p),this.el_.style.right=`-${p}px`,this.write(e)}write(s){yi(this.el_,s)}updateTime(s,t,e,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let n;const r=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const a=this.player_.liveTracker.liveWindow(),c=a-t*a;n=(c<1?"":"-")+er(c,a)}else n=er(e,r);this.update(s,t,n),i&&i()})}});class Xo extends kt{constructor(t,e){super(t,e),this.setIcon("circle"),this.update=hn(Ai(this,this.update),Hs)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,e){const i=this.getChild("timeTooltip");if(!i)return;const n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(t,e,n)}}Xo.prototype.options_={children:[]},Re||q||Xo.prototype.options_.children.push("timeTooltip"),kt.registerComponent("PlayProgressBar",Xo);class Lc extends kt{constructor(t,e){super(t,e),this.update=hn(Ai(this,this.update),Hs)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,e){const i=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,i,()=>{this.el_.style.left=t.width*e+"px"})}}Lc.prototype.options_={children:["timeTooltip"]},kt.registerComponent("MouseTimeDisplay",Lc);class Yo extends Wo{constructor(t,e){super(t,e),this.setEventHandlers_()}setEventHandlers_(){this.update_=Ai(this,this.update),this.update=hn(this.update_,Hs),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in m()&&"visibilityState"in m()&&this.on(m(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){m().visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Hs))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if(m().visibilityState==="hidden")return;const e=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.percent_!==e&&(this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.percent_=e),this.currentTime_===i&&this.duration_===r||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[er(i,r),er(r,r)],"{1} of {2}")),this.currentTime_=i,this.duration_=r),this.bar&&this.bar.update(Jt(this.el()),this.getProgress())}),e}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const t=this.getCurrentTime_();let e;const i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e}handleMouseDown(t){Le(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,e=!1){if(!Le(t)||isNaN(this.player_.duration()))return;let i;e||this.player_.scrubbing()||this.player_.scrubbing(!0);const n=this.calculateDistance(t),r=this.player_.liveTracker;if(r&&r.isLive()){if(n>=.99)return void r.seekToLiveEdge();const a=r.seekableStart(),c=r.liveCurrentTime();if(i=a+n*r.liveWindow(),i>=c&&(i=c),i<=a&&(i=a+.1),i===1/0)return}else i=n*this.player_.duration(),i===this.player_.duration()&&(i-=.1);this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();const t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?dn(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){const e=this.player_.liveTracker;if(t.key===" "||t.key==="Enter")t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(t.key==="Home")t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(t.key==="End")t.preventDefault(),t.stopPropagation(),e&&e.isLive()?this.userSeek_(e.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(t.key)){t.preventDefault(),t.stopPropagation();const i=.1*parseInt(t.key,10);e&&e.isLive()?this.userSeek_(e.seekableStart()+e.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else t.key==="PageDown"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):t.key==="PageUp"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in m()&&"visibilityState"in m()&&this.off(m(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Yo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Re||q||Yo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),kt.registerComponent("SeekBar",Yo);class Dc extends kt{constructor(t,e){super(t,e),this.handleMouseMove=hn(Ai(this,this.handleMouseMove),Hs),this.throttledHandleMouseSeek=hn(Ai(this,this.handleMouseSeek),Hs),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){const e=this.getChild("seekBar");if(!e)return;const i=e.getChild("playProgressBar"),n=e.getChild("mouseTimeDisplay");if(!i&&!n)return;const r=e.el(),a=ee(r);let c=Be(r,t).x;c=Qr(c,0,1),n&&n.update(a,c),i&&i.update(a,e.getProgress())}handleMouseSeek(t){const e=this.getChild("seekBar");e&&e.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach(t=>t.disable&&t.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&dn(this.player_.play())}}enable(){this.children().forEach(t=>t.enable&&t.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){const e=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const e=this.getChild("seekBar");e&&e.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}}Dc.prototype.options_={children:["seekBar"]},kt.registerComponent("ProgressControl",Dc);class Rc extends os{constructor(t,e){super(t,e),this.setIcon("picture-in-picture-enter"),this.on(t,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){m().pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in u()?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof m().exitPictureInPicture=="function"&&super.show()}}Rc.prototype.controlText_="Picture-in-Picture",kt.registerComponent("PictureInPictureToggle",Rc);class Nc extends os{constructor(t,e){super(t,e),this.setIcon("fullscreen-enter"),this.on(t,"fullscreenchange",i=>this.handleFullscreenChange(i)),m()[t.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Nc.prototype.controlText_="Fullscreen",kt.registerComponent("FullscreenToggle",Nc),kt.registerComponent("VolumeLevel",class extends kt{createEl(){const s=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",s),s.appendChild(super.createEl("span",{className:"vjs-control-text"})),s}}),kt.registerComponent("VolumeLevelTooltip",class extends kt{constructor(s,t){super(s,t),this.update=hn(Ai(this,this.update),Hs)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(s,t,e,i){if(!e){const n=Jt(this.el_),r=Jt(this.player_.el()),a=s.width*t;if(!r||!n)return;const c=s.left-r.left+a,p=s.width-a+(r.right-s.right);let v=n.width/2;c<v?v+=v-c:p<v&&(v=p),v<0?v=0:v>n.width&&(v=n.width),this.el_.style.right=`-${v}px`}this.write(`${i}%`)}write(s){yi(this.el_,s)}updateVolume(s,t,e,i,n){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(s,t,e,i.toFixed(0)),n&&n()})}});class Mc extends kt{constructor(t,e){super(t,e),this.update=hn(Ai(this,this.update),Hs)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,e,i){const n=100*e;this.getChild("volumeLevelTooltip").updateVolume(t,e,i,n,()=>{i?this.el_.style.bottom=t.height*e+"px":this.el_.style.left=t.width*e+"px"})}}Mc.prototype.options_={children:["volumeLevelTooltip"]},kt.registerComponent("MouseVolumeLevelDisplay",Mc);class Ma extends Wo{constructor(t,e){super(t,e),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(t,"volumechange",i=>this.updateARIAAttributes(i)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){Le(t)&&super.handleMouseDown(t)}handleMouseMove(t){const e=this.getChild("mouseVolumeLevelDisplay");if(e){const i=this.el(),n=Jt(i),r=this.vertical();let a=Be(i,t);a=r?a.y:a.x,a=Qr(a,0,1),e.update(n,a,r)}Le(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){const e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const t=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(t)})}}Ma.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Re||q||Ma.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Ma.prototype.playerEvent="volumechange",kt.registerComponent("VolumeBar",Ma);class jc extends kt{constructor(t,e={}){e.vertical=e.vertical||!1,(e.volumeBar===void 0||Is(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),super(t,e),function(i,n){n.tech_&&!n.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})}(this,t),this.throttledHandleMouseMove=hn(Ai(this,this.handleMouseMove),Hs),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){const e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}}jc.prototype.options_={children:["volumeBar"]},kt.registerComponent("VolumeControl",jc);class Uc extends os{constructor(t,e){super(t,e),function(i,n){n.tech_&&!n.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(n,"loadstart",function(){n.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})}(this,t),this.on(t,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){const e=this.player_.volume(),i=this.player_.lastVolume_();if(e===0){const n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const t=this.player_.volume();let e=3;this.setIcon("volume-high"),Re&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?(this.setIcon("volume-mute"),e=0):t<.33?(this.setIcon("volume-low"),e=1):t<.67&&(this.setIcon("volume-medium"),e=2),qs(this.el_,[0,1,2,3].reduce((i,n)=>i+`${n?" ":""}vjs-vol-${n}`,"")),Ni(this.el_,`vjs-vol-${e}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}Uc.prototype.controlText_="Mute",kt.registerComponent("MuteToggle",Uc);class Bc extends kt{constructor(t,e={}){e.inline!==void 0?e.inline=e.inline:e.inline=!0,(e.volumeControl===void 0||Is(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),super(t,e),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(t,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){t.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),Rs(m(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),as(m(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){t.key==="Escape"&&this.handleMouseOut()}}Bc.prototype.options_={children:["muteToggle","volumeControl"]},kt.registerComponent("VolumePanel",Bc);class Fc extends os{constructor(t,e){super(t,e),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipForwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(t){if(isNaN(this.player_.duration()))return;const e=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()?i.seekableEnd():this.player_.duration();let r;r=e+this.skipTime<=n?e+this.skipTime:n,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Fc.prototype.controlText_="Skip Forward",kt.registerComponent("SkipForward",Fc);class qc extends os{constructor(t,e){super(t,e),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipBackwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(t){const e=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()&&i.seekableStart();let r;r=n&&e-this.skipTime<=n?n:e>=this.skipTime?e-this.skipTime:0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}qc.prototype.controlText_="Skip Backward",kt.registerComponent("SkipBackward",qc);class $c extends kt{constructor(t,e){super(t,e),e&&(this.menuButton_=e.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(t){t instanceof kt&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof kt&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){const e=this.addChild(t);e&&this.addEventListenerForItem(e)}createEl(){const t=this.options_.contentElType||"ul";this.contentEl_=Gt(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const e=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),Rs(e,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),e}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){const e=t.relatedTarget||m().activeElement;if(!this.children().some(i=>i.el()===e)){const i=this.menuButton_;i&&i.buttonPressed_&&e!==i.el().firstChild&&i.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();const e=this.children();if(!Array.isArray(e))return;const i=e.filter(n=>n.el()===t.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(t){t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):t.key!=="ArrowRight"&&t.key!=="ArrowUp"||(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){const e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())}}kt.registerComponent("Menu",$c);class Ko extends kt{constructor(t,e={}){super(t,e),this.menuButton_=new os(t,e),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=os.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=r=>this.handleClick(r);this.handleMenuKeyUp_=r=>this.handleMenuKeyUp(r),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",r=>this.handleKeyDown(r)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Rs(m(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",r=>this.handleMouseLeave(r)),this.on("keydown",r=>this.handleSubmenuKeyDown(r))}update(){const t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const t=new $c(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const e=Gt("li",{className:"vjs-menu-title",textContent:Hi(this.options_.title),tabIndex:-1}),i=new kt(this.player_,{el:e});t.addItem(i)}if(this.items=this.createItems(),this.items)for(let e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(t){super.setIcon(t,this.menuButton_.el_)}buildWrapperCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${os.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,e=this.menuButton_.el()){return this.menuButton_.controlText(t,e)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),as(m(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){t.key==="Esc"||t.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus())):t.key!=="Up"&&(t.key!=="Down"||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(t.preventDefault(),this.pressButton())}handleMenuKeyUp(t){t.key!=="Esc"&&t.key!=="Tab"||this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){t.key!=="Esc"&&t.key!=="Tab"||(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Re&&Zn())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}kt.registerComponent("MenuButton",Ko);class Qo extends Ko{constructor(t,e){const i=e.tracks;if(super(t,e),this.items.length<=1&&this.hide(),!i)return;const n=Ai(this,this.update);i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),i.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n),i.removeEventListener("labelchange",n)})}}kt.registerComponent("TrackButton",Qo);class Jr extends Na{constructor(t,e){super(t,e),this.selectable=e.selectable,this.isSelected_=e.selected||!1,this.multiSelectable=e.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,e,i){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},e),i),r=Gt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?n.appendChild(r):n.replaceChild(r,n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(t){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(t.key)||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}kt.registerComponent("MenuItem",Jr);class Zr extends Jr{constructor(t,e){const i=e.track,n=t.textTracks();e.label=i.label||i.language||"Unknown",e.selected=i.mode==="showing",super(t,e),this.track=i,this.kinds=(e.kinds||[e.kind||this.track.kind]).filter(Boolean);const r=(...c)=>{this.handleTracksChange.apply(this,c)},a=(...c)=>{this.handleSelectedLanguageChange.apply(this,c)};if(t.on(["loadstart","texttrackchange"],r),n.addEventListener("change",r),n.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],r),n.removeEventListener("change",r),n.removeEventListener("selectedlanguagechange",a)}),n.onchange===void 0){let c;this.on(["tap","click"],function(){if(typeof u().Event!="object")try{c=new(u()).Event("change")}catch{}c||(c=m().createEvent("Event"),c.initEvent("change",!0,!0)),n.dispatchEvent(c)})}this.handleTracksChange()}handleClick(t){const e=this.track,i=this.player_.textTracks();if(super.handleClick(t),i)for(let n=0;n<i.length;n++){const r=i[n];this.kinds.indexOf(r.kind)!==-1&&(r===e?r.mode!=="showing"&&(r.mode="showing"):r.mode!=="disabled"&&(r.mode="disabled"))}}handleTracksChange(t){const e=this.track.mode==="showing";e!==this.isSelected_&&this.selected(e)}handleSelectedLanguageChange(t){if(this.track.mode==="showing"){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}kt.registerComponent("TextTrackMenuItem",Zr);class Hc extends Zr{constructor(t,e){e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,super(t,e)}handleTracksChange(t){const e=this.player().textTracks();let i=!0;for(let n=0,r=e.length;n<r;n++){const a=e[n];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(t){const e=this.player().textTracks();let i=!0;for(let n=0,r=e.length;n<r;n++){const a=e[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}kt.registerComponent("OffTextTrackMenuItem",Hc);class Cr extends Qo{constructor(t,e={}){e.tracks=t.textTracks(),super(t,e)}createItems(t=[],e=Zr){let i;this.label_&&(i=`${this.label_} off`),t.push(new Hc(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<n.length;r++){const a=n[r];if(this.kinds_.indexOf(a.kind)>-1){const c=new e(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass(`vjs-${a.kind}-menu-item`),t.push(c)}}return t}}kt.registerComponent("TextTrackButton",Cr);class Vc extends Jr{constructor(t,e){const i=e.track,n=e.cue,r=t.currentTime();e.selectable=!0,e.multiSelectable=!1,e.label=n.text,e.selected=n.startTime<=r&&r<n.endTime,super(t,e),this.track=i,this.cue=n}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}kt.registerComponent("ChaptersTrackMenuItem",Vc);class Jo extends Cr{constructor(t,e,i){super(t,e,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&t.track.kind!=="chapters")return;const e=this.findChaptersTrack();e!==this.track_?(this.setTrack(e),super.update()):(!this.items||e&&e.cues&&e.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const t=this.player_.textTracks()||[];for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Hi(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const t=[];if(!this.track_)return t;const e=this.track_.cues;if(!e)return t;for(let i=0,n=e.length;i<n;i++){const r=e[i],a=new Vc(this.player_,{track:this.track_,cue:r});t.push(a)}return t}}Jo.prototype.kind_="chapters",Jo.prototype.controlText_="Chapters",kt.registerComponent("ChaptersButton",Jo);class Zo extends Cr{constructor(t,e,i){super(t,e,i),this.setIcon("audio-description");const n=t.textTracks(),r=Ai(this,this.handleTracksChange);n.addEventListener("change",r),this.on("dispose",function(){n.removeEventListener("change",r)})}handleTracksChange(t){const e=this.player().textTracks();let i=!1;for(let n=0,r=e.length;n<r;n++){const a=e[n];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Zo.prototype.kind_="descriptions",Zo.prototype.controlText_="Descriptions",kt.registerComponent("DescriptionsButton",Zo);class tl extends Cr{constructor(t,e,i){super(t,e,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}tl.prototype.kind_="subtitles",tl.prototype.controlText_="Subtitles",kt.registerComponent("SubtitlesButton",tl);class el extends Zr{constructor(t,e){e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",super(t,e),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+e.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}kt.registerComponent("CaptionSettingsMenuItem",el);class il extends Cr{constructor(t,e,i){super(t,e,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new el(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}}il.prototype.kind_="captions",il.prototype.controlText_="Captions",kt.registerComponent("CaptionsButton",il);class zc extends Zr{createEl(t,e,i){const n=super.createEl(t,e,i),r=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",n):r.appendChild(Gt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Gt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}}kt.registerComponent("SubsCapsMenuItem",zc);class sl extends Cr{constructor(t,e={}){super(t,e),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Hi(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new el(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,zc),t}}sl.prototype.kinds_=["captions","subtitles"],sl.prototype.controlText_="Subtitles",kt.registerComponent("SubsCapsButton",sl);class Wc extends Jr{constructor(t,e){const i=e.track,n=t.audioTracks();e.label=i.label||i.language||"Unknown",e.selected=i.enabled,super(t,e),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const r=(...a)=>{this.handleTracksChange.apply(this,a)};n.addEventListener("change",r),this.on("dispose",()=>{n.removeEventListener("change",r)})}createEl(t,e,i){const n=super.createEl(t,e,i),r=n.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Gt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Gt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let i=0;i<e.length;i++){const n=e[i];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}}kt.registerComponent("AudioTrackMenuItem",Wc);class Gc extends Qo{constructor(t,e={}){e.tracks=t.audioTracks(),super(t,e),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;const e=this.player_.audioTracks();for(let i=0;i<e.length;i++){const n=e[i];t.push(new Wc(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t}}Gc.prototype.controlText_="Audio Track",kt.registerComponent("AudioTrackButton",Gc);class nl extends Jr{constructor(t,e){const i=e.rate,n=parseFloat(i,10);e.label=i,e.selected=n===t.playbackRate(),e.selectable=!0,e.multiSelectable=!1,super(t,e),this.label=i,this.rate=n,this.on(t,"ratechange",r=>this.update(r))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}}nl.prototype.contentElType="button",kt.registerComponent("PlaybackRateMenuItem",nl);class Xc extends Ko{constructor(t,e){super(t,e),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",i=>this.updateVisibility(i)),this.on(t,"ratechange",i=>this.updateLabel(i)),this.on(t,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Gt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const t=this.playbackRates(),e=[];for(let i=t.length-1;i>=0;i--)e.push(new nl(this.player(),{rate:t[i]+"x"}));return e}handlePlaybackRateschange(t){this.update()}playbackRates(){const t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Xc.prototype.controlText_="Playback Rate",kt.registerComponent("PlaybackRateMenuButton",Xc);class Yc extends kt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",e={},i={}){return e.className||(e.className=this.buildCSSClass()),super.createEl(t,e,i)}}kt.registerComponent("Spacer",Yc),kt.registerComponent("CustomControlSpacer",class extends Yc{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}});class Kc extends kt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Kc.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},kt.registerComponent("ControlBar",Kc);class Qc extends br{constructor(t,e){super(t,e),this.on(t,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const t=this.player().error();return t?this.localize(t.message):""}}Qc.prototype.options_=Object.assign({},br.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),kt.registerComponent("ErrorDisplay",Qc);class Jc extends kt{constructor(t,e={}){super(t,e),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Gt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const e=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${$s()}`)+"-"+t[1].replace(/\W+/g,""),i=Gt("option",{id:e,value:this.localize(t[0]),textContent:t[1]});return i.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${e}`),i}))}}kt.registerComponent("TextTrackSelect",Jc);class nr extends kt{constructor(t,e={}){super(t,e);const i=Gt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const n=this.options_.selects;for(const r of n){const a=this.options_.selectConfigs[r],c=a.className,p=a.id.replace("%s",this.options_.id_);let v=null;const _=`vjs_select_${$s()}`;if(this.options_.type==="colors"){v=Gt("span",{className:c});const k=Gt("label",{id:p,className:"vjs-label",textContent:a.label});k.setAttribute("for",_),v.appendChild(k)}const L=new Jc(t,{SelectOptions:a.options,legendId:this.options_.legendId,id:_,labelId:p});this.addChild(L),this.options_.type==="colors"&&(v.appendChild(L.el()),this.el().appendChild(v))}}createEl(){return Gt("fieldset",{className:this.options_.className})}}kt.registerComponent("TextTrackFieldset",nr);class Zc extends kt{constructor(t,e={}){super(t,e);const i=this.options_.textTrackComponentid,n=new nr(t,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(n);const r=new nr(t,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const a=new nr(t,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Gt("div",{className:"vjs-track-settings-colors"})}}kt.registerComponent("TextTrackSettingsColors",Zc);class tu extends kt{constructor(t,e={}){super(t,e);const i=this.options_.textTrackComponentid,n=new nr(t,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(n);const r=new nr(t,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const a=new nr(t,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Gt("div",{className:"vjs-track-settings-font"})}}kt.registerComponent("TextTrackSettingsFont",tu);class eu extends kt{constructor(t,e={}){super(t,e);const i=this.localize("restore all settings to the default values"),n=new os(t,{controlText:i,className:"vjs-default-button"});n.el().classList.remove("vjs-control","vjs-button"),n.el().textContent=this.localize("Reset"),this.addChild(n);const r=new os(t,{controlText:i,className:"vjs-done-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Done"),this.addChild(r)}createEl(){return Gt("div",{className:"vjs-track-settings-controls"})}}kt.registerComponent("TrackSettingsControls",eu);const rl="vjs-text-track-settings",iu=["#000","Black"],su=["#00F","Blue"],nu=["#0FF","Cyan"],ru=["#0F0","Green"],au=["#F0F","Magenta"],ou=["#F00","Red"],lu=["#FFF","White"],cu=["#FF0","Yellow"],al=["1","Opaque"],ol=["0.5","Semi-Transparent"],uu=["0","Transparent"],Hn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[iu,lu,ou,ru,su,cu,au,nu],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[al,ol,uu],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[lu,iu,ou,ru,su,cu,au,nu],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:s=>s==="1.00"?null:Number(s)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[al,ol],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[uu,ol,al],className:"vjs-window-opacity vjs-opacity"}};function hu(s,t){if(t&&(s=t(s)),s&&s!=="none")return s}Hn.windowColor.options=Hn.backgroundColor.options,kt.registerComponent("TextTrackSettings",class extends br{constructor(s,t){t.temporary=!1,super(s,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(s),this.endDialog=Gt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(s){const t=new Zc(s,{textTrackComponentid:this.id_,selectConfigs:Hn,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const e=new tu(s,{textTrackComponentid:this.id_,selectConfigs:Hn,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(e);const i=new eu(s);this.addChild(i)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Fs(Hn,s=>{this.on(this.$(s.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Qn(Hn,(s,t,e)=>{const i=(n=this.$(t.selector),r=t.parser,hu(n.options[n.options.selectedIndex].value,r));var n,r;return i!==void 0&&(s[e]=i),s},{})}setValues(s){Fs(Hn,(t,e)=>{(function(i,n,r){if(n){for(let a=0;a<i.options.length;a++)if(hu(i.options[a].value,r)===n){i.selectedIndex=a;break}}})(this.$(t.selector),s[e],t.parser)})}setDefaults(){Fs(Hn,s=>{const t=s.hasOwnProperty("default")?s.default:0;this.$(s.selector).selectedIndex=t})}restoreSettings(){let s;try{s=JSON.parse(u().localStorage.getItem(rl))}catch(t){je.warn(t)}s&&this.setValues(s)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const s=this.getValues();try{Object.keys(s).length?u().localStorage.setItem(rl,JSON.stringify(s)):u().localStorage.removeItem(rl)}catch(t){je.warn(t)}}updateDisplay(){const s=this.player_.getChild("textTrackDisplay");s&&s.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}),kt.registerComponent("ResizeManager",class extends kt{constructor(s,t){let e=t.ResizeObserver||u().ResizeObserver;t.ResizeObserver===null&&(e=!1),super(s,gi({createEl:!e,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||u().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=nc(()=>{this.resizeHandler()},100,!1,this),e?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(s.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const i=this.debouncedHandler_;let n=this.unloadListener_=function(){as(this,"resize",i),as(this,"unload",n),n=null};Rs(this.el_.contentWindow,"unload",n),Rs(this.el_.contentWindow,"resize",i)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const Hd={trackingThreshold:20,liveTolerance:15};kt.registerComponent("LiveTracker",class extends kt{constructor(s,t){super(s,gi(Hd,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",e=>this.handleDurationchange(e)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const s=this.player_.seekable();if(!s||!s.length)return;const t=Number(u().performance.now().toFixed(4)),e=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+e;const i=this.liveCurrentTime(),n=this.player_.currentTime();let r=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-n)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(r=!1),r!==this.behindLiveEdge_&&(this.behindLiveEdge_=r,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Hs),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const s=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&s>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const s=this.player_.seekable(),t=[];let e=s?s.length:0;for(;e--;)t.push(s.end(e));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const s=this.player_.seekable(),t=[];let e=s?s.length:0;for(;e--;)t.push(s.start(e));return t.length?t.sort()[0]:0}liveWindow(){const s=this.liveCurrentTime();return s===1/0?0:s-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const s=this.seekableEnd();return this.lastSeekEnd_!==-1&&s!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=s,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),kt.registerComponent("TitleBar",class extends kt{constructor(s,t){super(s,t),this.on("statechanged",e=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Gt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${$s()}`}),description:Gt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${$s()}`})},Gt("div",{className:"vjs-title-bar"},{},un(this.els))}updateDom_(){const s=this.player_.tech_,t=s&&s.el_,e={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const n=this.state[i],r=this.els[i],a=e[i];xi(r),n&&yi(r,n),t&&(t.removeAttribute(a),n&&t.setAttribute(a,r.id))}),this.state.title||this.state.description?this.show():this.hide()}update(s){this.setState(s)}dispose(){const s=this.player_.tech_,t=s&&s.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const Vd={initialDisplay:4e3,position:[],takeFocus:!1};kt.registerComponent("TransientButton",class extends os{constructor(s,t){super(s,t=gi(Vd,t)),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],e=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(s=>`vjs-${s}`).join(" ")}`}createEl(){const s=Gt("button",{},{type:"button",class:this.buildCSSClass()},Gt("span"));return this.controlTextEl_=s.querySelector("span"),s}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}});const ll=s=>{const t=s.el();if(t.hasAttribute("src"))return s.triggerSourceset(t.src),!0;const e=s.$$("source"),i=[];let n="";if(!e.length)return!1;for(let r=0;r<e.length;r++){const a=e[r].src;a&&i.indexOf(a)===-1&&i.push(a)}return!!i.length&&(i.length===1&&(n=i[0]),s.triggerSourceset(n),!0)},zd=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(s){const t=m().createElement(this.nodeName.toLowerCase());t.innerHTML=s;const e=m().createDocumentFragment();for(;t.childNodes.length;)e.appendChild(t.childNodes[0]);return this.innerText="",u().Element.prototype.appendChild.call(this,e),this.innerHTML}}),du=(s,t)=>{let e={};for(let i=0;i<s.length&&(e=Object.getOwnPropertyDescriptor(s[i],t),!(e&&e.set&&e.get));i++);return e.enumerable=!0,e.configurable=!0,e},pu=function(s){const t=s.el();if(t.resetSourceWatch_)return;const e={},i=(r=>du([r.el(),u().HTMLMediaElement.prototype,u().Element.prototype,zd],"innerHTML"))(s),n=r=>(...a)=>{const c=r.apply(t,a);return ll(s),c};["append","appendChild","insertAdjacentHTML"].forEach(r=>{t[r]&&(e[r]=t[r],t[r]=n(e[r]))}),Object.defineProperty(t,"innerHTML",gi(i,{set:n(i.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(e).forEach(r=>{t[r]=e[r]}),Object.defineProperty(t,"innerHTML",i)},s.one("sourceset",t.resetSourceWatch_)},Wd=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?yc(u().Element.prototype.getAttribute.call(this,"src")):""},set(s){return u().Element.prototype.setAttribute.call(this,"src",s),s}});class ue extends Ye{constructor(t,e){super(t,e);const i=t.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||t.tag&&t.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const r=this.el_.childNodes;let a=r.length;const c=[];for(;a--;){const p=r[a];p.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(p),this.remoteTextTracks().addTrack(p.track),this.textTracks().addTrack(p.track),n||this.el_.hasAttribute("crossorigin")||!Oa(p.src)||(n=!0)):c.push(p))}for(let p=0;p<c.length;p++)this.el_.removeChild(c[p])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&je.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Xe||Ee)&&t.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),ue.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){(function(t){if(!t.featuresSourceset)return;const e=t.el();if(e.resetSourceset_)return;const i=(a=>du([a.el(),u().HTMLMediaElement.prototype,Wd],"src"))(t),n=e.setAttribute,r=e.load;Object.defineProperty(e,"src",gi(i,{set:a=>{const c=i.set.call(e,a);return t.triggerSourceset(e.src),c}})),e.setAttribute=(a,c)=>{const p=n.call(e,a,c);return/src/i.test(a)&&t.triggerSourceset(e.src),p},e.load=()=>{const a=r.call(e);return ll(t)||(t.triggerSourceset(""),pu(t)),a},e.currentSrc?t.triggerSourceset(e.currentSrc):ll(t)||pu(t),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=n,Object.defineProperty(e,"src",i),e.resetSourceWatch_&&e.resetSourceWatch_()}})(this)}restoreMetadataTracksInIOSNativePlayer_(){const t=this.textTracks();let e;const i=()=>{e=[];for(let r=0;r<t.length;r++){const a=t[r];a.kind==="metadata"&&e.push({track:a,storedMode:a.mode})}};i(),t.addEventListener("change",i),this.on("dispose",()=>t.removeEventListener("change",i));const n=()=>{for(let r=0;r<e.length;r++){const a=e[r];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",i),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",i),t.addEventListener("change",i),t.removeEventListener("change",n)})}overrideNative_(t,e){if(e!==this[`featuresNative${t}Tracks`])return;const i=t.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(n=>{this.el()[`${i}Tracks`].removeEventListener(n,this[`${i}TracksListeners_`][n])}),this[`featuresNative${t}Tracks`]=!e,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){const e=Vs[t],i=this.el()[e.getterName],n=this[e.getterName]();if(!this[`featuresNative${e.capitalName}Tracks`]||!i||!i.addEventListener)return;const r={change:c=>{const p={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(p),t==="text"&&this[Sr.remoteText.getterName]().trigger(p)},addtrack(c){n.addTrack(c.track)},removetrack(c){n.removeTrack(c.track)}},a=function(){const c=[];for(let p=0;p<n.length;p++){let v=!1;for(let _=0;_<i.length;_++)if(i[_]===n[p]){v=!0;break}v||c.push(n[p])}for(;c.length;)n.removeTrack(c.shift())};this[e.getterName+"Listeners_"]=r,Object.keys(r).forEach(c=>{const p=r[c];i.addEventListener(c,p),this.on("dispose",v=>i.removeEventListener(c,p))}),this.on("loadstart",a),this.on("dispose",c=>this.off("loadstart",a))}proxyNativeTracks_(){Vs.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){const i=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(i,t),ue.disposeMediaElement(t),t=i}else{t=m().createElement("video");const i=gi({},this.options_.tag&&w(this.options_.tag));Xe&&this.options_.nativeControlsForTouch===!0||delete i.controls,Ca(t,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}this.options_.preload!==void 0&&H(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);const e=["loop","muted","playsinline","autoplay"];for(let i=0;i<e.length;i++){const n=e[i],r=this.options_[n];r!==void 0&&(r?H(t,n,n):it(t,n),t[n]=r)}return t}handleLateInit_(t){if(t.networkState===0||t.networkState===3)return;if(t.readyState===0){let i=!1;const n=function(){i=!0};this.on("loadstart",n);const r=function(){i||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),i||this.trigger("loadstart")})}const e=["loadstart"];e.push("loadedmetadata"),t.readyState>=2&&e.push("loadeddata"),t.readyState>=3&&e.push("canplay"),t.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(i){this.trigger(i)},this)})}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&zi?this.el_.fastSeek(t):this.el_.currentTime=t}catch(e){je(e,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&q&&ut&&this.el_.currentTime===0){const t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},e=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",e),this.on("dispose",()=>{this.off("webkitbeginfullscreen",e),this.off("webkitendfullscreen",t)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)dn(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(t===void 0)return this.el_.src;this.setSrc(t)}reset(){ue.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,e,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,i):super.addTextTrack(t,e,i)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);const e=m().createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e}addRemoteTextTrack(t,e){const i=super.addRemoteTextTrack(t,e);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){const e=this.$$("track");let i=e.length;for(;i--;)t!==e[i]&&t!==e[i].track||this.el().removeChild(e[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const t={};return this.el().webkitDroppedFrameCount!==void 0&&this.el().webkitDecodedFrameCount!==void 0&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),u().performance&&(t.creationTime=u().performance.now()),t}}Ps(ue,"TEST_VID",function(){if(!Os())return;const s=m().createElement("video"),t=m().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",s.appendChild(t),s}),ue.isSupported=function(){try{ue.TEST_VID.volume=.5}catch{return!1}return!(!ue.TEST_VID||!ue.TEST_VID.canPlayType)},ue.canPlayType=function(s){return ue.TEST_VID.canPlayType(s)},ue.canPlaySource=function(s,t){return ue.canPlayType(s.type)},ue.canControlVolume=function(){try{const s=ue.TEST_VID.volume;ue.TEST_VID.volume=s/2+.1;const t=s!==ue.TEST_VID.volume;return t&&Re?(u().setTimeout(()=>{ue&&ue.prototype&&(ue.prototype.featuresVolumeControl=s!==ue.TEST_VID.volume)}),!1):t}catch{return!1}},ue.canMuteVolume=function(){try{const s=ue.TEST_VID.muted;return ue.TEST_VID.muted=!s,ue.TEST_VID.muted?H(ue.TEST_VID,"muted","muted"):it(ue.TEST_VID,"muted"),s!==ue.TEST_VID.muted}catch{return!1}},ue.canControlPlaybackRate=function(){if(q&&ut&&Wt<58)return!1;try{const s=ue.TEST_VID.playbackRate;return ue.TEST_VID.playbackRate=s/2+.1,s!==ue.TEST_VID.playbackRate}catch{return!1}},ue.canOverrideAttributes=function(){try{const s=()=>{};Object.defineProperty(m().createElement("video"),"src",{get:s,set:s}),Object.defineProperty(m().createElement("audio"),"src",{get:s,set:s}),Object.defineProperty(m().createElement("video"),"innerHTML",{get:s,set:s}),Object.defineProperty(m().createElement("audio"),"innerHTML",{get:s,set:s})}catch{return!1}return!0},ue.supportsNativeTextTracks=function(){return zi||Re&&ut},ue.supportsNativeVideoTracks=function(){return!(!ue.TEST_VID||!ue.TEST_VID.videoTracks)},ue.supportsNativeAudioTracks=function(){return!(!ue.TEST_VID||!ue.TEST_VID.audioTracks)},ue.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([s,t]){Ps(ue.prototype,s,()=>ue[t](),!0)}),ue.prototype.featuresVolumeControl=ue.canControlVolume(),ue.prototype.movingMediaElementInDOM=!Re,ue.prototype.featuresFullscreenResize=!0,ue.prototype.featuresProgressEvents=!0,ue.prototype.featuresTimeupdateEvents=!0,ue.prototype.featuresVideoFrameCallback=!(!ue.TEST_VID||!ue.TEST_VID.requestVideoFrameCallback),ue.disposeMediaElement=function(s){if(s){for(s.parentNode&&s.parentNode.removeChild(s);s.hasChildNodes();)s.removeChild(s.firstChild);s.removeAttribute("src"),typeof s.load=="function"&&function(){try{s.load()}catch{}}()}},ue.resetMediaElement=function(s){if(!s)return;const t=s.querySelectorAll("source");let e=t.length;for(;e--;)s.removeChild(t[e]);s.removeAttribute("src"),typeof s.load=="function"&&function(){try{s.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(s){ue.prototype[s]=function(){return this.el_[s]||this.el_.hasAttribute(s)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(s){ue.prototype["set"+Hi(s)]=function(t){this.el_[s]=t,t?this.el_.setAttribute(s,s):this.el_.removeAttribute(s)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(s){ue.prototype[s]=function(){return this.el_[s]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(s){ue.prototype["set"+Hi(s)]=function(t){this.el_[s]=t}}),["pause","load","play"].forEach(function(s){ue.prototype[s]=function(){return this.el_[s]()}}),Ye.withSourceHandlers(ue),ue.nativeSourceHandler={},ue.nativeSourceHandler.canPlayType=function(s){try{return ue.TEST_VID.canPlayType(s)}catch{return""}},ue.nativeSourceHandler.canHandleSource=function(s,t){if(s.type)return ue.nativeSourceHandler.canPlayType(s.type);if(s.src){const e=Bo(s.src);return ue.nativeSourceHandler.canPlayType(`video/${e}`)}return""},ue.nativeSourceHandler.handleSource=function(s,t,e){t.setSrc(s.src)},ue.nativeSourceHandler.dispose=function(){},ue.registerSourceHandler(ue.nativeSourceHandler),Ye.registerTech("Html5",ue);const mu=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],cl={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ul=["tiny","xsmall","small","medium","large","xlarge","huge"],ja={};ul.forEach(s=>{const t=s.charAt(0)==="x"?`x-${s.substring(1)}`:s;ja[s]=`vjs-layout-${t}`});const Gd={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Oi extends kt{constructor(t,e,i){if(t.id=t.id||e.id||`vjs_video_${$s()}`,(e=Object.assign(Oi.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language){const a=t.closest("[lang]");a&&(e.language=a.getAttribute("lang"))}if(super(null,e,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=Fn(this.id_),this.fsApi_=ds,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&w(t),this.language(this.options_.language),e.languages){const a={};Object.getOwnPropertyNames(e.languages).forEach(function(c){a[c.toLowerCase()]=e.languages[c]}),this.languages_=a}else this.languages_=Oi.prototype.options_.languages;this.resetCache_(),this.poster_=e.poster||"",this.controls_=!!e.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Oo(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Rs(m(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=gi(this.options_);if(e.plugins&&Object.keys(e.plugins).forEach(a=>{this[a](e.plugins[a])}),e.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(e.playbackRates),e.experimentalSvgIcons){const a=new(u()).DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`,"image/svg+xml");if(a.querySelector("parsererror"))je.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const c=a.documentElement;c.style.display="none",this.el_.appendChild(c),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(t.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),e.spatialNavigation&&e.spatialNavigation.enabled&&(this.spatialNavigation=new Fd(this),this.addClass("vjs-spatial-navigation-enabled")),Xe&&this.addClass("vjs-touch-enabled"),Re||this.addClass("vjs-workinghover"),Oi.players[this.id_]=this;const r=Cn.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),as(m(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),as(m(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Oi.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),La.hasOwnProperty(this.id())&&delete La[this.id()],ms.names.forEach(t=>{const e=this[ms[t].getterName]();e&&e.off&&e.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t,e=this.tag,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const n=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:n||(t=this.el_=super.createEl("div"));const r=w(e);if(n){for(t=this.el_=e,e=this.tag=m().createElement("video");t.children.length;)e.appendChild(t.firstChild);Pi(t,"video-js")||Ni(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(p=>{try{e[p]=t[p]}catch{}})}e.setAttribute("tabindex","-1"),r.tabindex="-1",ut&&we&&(e.setAttribute("role","application"),r.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(p){n&&p==="class"||t.setAttribute(p,r[p]),n&&e.setAttribute(p,r[p])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(p=>qn[p]).map(p=>"vjs-device-"+p.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),u().VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Je("vjs-styles-dimensions");const p=ni(".vjs-styles-defaults"),v=ni("head");v.insertBefore(this.styleEl_,p?p.nextSibling:v.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const c=e.getElementsByTagName("a");for(let p=0;p<c.length;p++){const v=c.item(p);Ni(v,"vjs-hidden"),v.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),$i(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(t){if(t===void 0)return this.techGet_("crossOrigin");t===null||t==="anonymous"||t==="use-credentials"?(this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)):je.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,e){const i=t+"_";if(e===void 0)return this[i]||0;if(e===""||e==="auto")return this[i]=void 0,void this.updateStyleEl_();const n=parseFloat(e);isNaN(n)?je.error(`Improper value "${e}" supplied for for ${t}`):(this[i]=n,this.updateStyleEl_())}fluid(t){if(t===void 0)return!!this.fluid_;var e,i;this.fluid_=!!t,Pn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),i=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},Pn(e=this)?i():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(i))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(u().VIDEOJS_NO_DYNAMIC_STYLE===!0){const c=typeof this.width_=="number"?this.width_:this.options_.width,p=typeof this.height_=="number"?this.height_:this.options_.height,v=this.tech_&&this.tech_.el();return void(v&&(c>=0&&(v.width=c),p>=0&&(v.height=p)))}let t,e,i,n;i=this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const r=i.split(":"),a=r[1]/r[0];t=this.width_!==void 0?this.width_:this.height_!==void 0?this.height_/a:this.videoWidth()||300,e=this.height_!==void 0?this.height_:t*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),pe(this.styleEl_,`
      .${n} {
        width: ${t}px;
        height: ${e}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${100*a}%;
      }
    `)}loadTech_(t,e){this.tech_&&this.unloadTech_();const i=Hi(t),n=t.charAt(0).toLowerCase()+t.slice(1);i!=="Html5"&&this.tag&&(Ye.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let r=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(r=!1);const a={source:e,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ms.names.forEach(_=>{const L=ms[_];a[L.getterName]=this[L.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const c=Ye.getTech(t);if(!c)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);var p,v;this.tech_=new c(a),this.tech_.ready(Ai(this,this.handleTechReady_),!0),p=this.textTracksJson_||[],v=this.tech_,p.forEach(function(_){const L=v.addRemoteTextTrack(_).track;!_.src&&_.cues&&_.cues.forEach(k=>L.addCue(k))}),v.textTracks(),mu.forEach(_=>{this.on(this.tech_,_,L=>this[`handleTech${Hi(_)}_`](L))}),Object.keys(cl).forEach(_=>{this.on(this.tech_,_,L=>{this.tech_.playbackRate()===0&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${cl[_]}_`].bind(this),event:L}):this[`handleTech${cl[_]}_`](L)})}),this.on(this.tech_,"loadstart",_=>this.handleTechLoadStart_(_)),this.on(this.tech_,"sourceset",_=>this.handleTechSourceset_(_)),this.on(this.tech_,"waiting",_=>this.handleTechWaiting_(_)),this.on(this.tech_,"ended",_=>this.handleTechEnded_(_)),this.on(this.tech_,"seeking",_=>this.handleTechSeeking_(_)),this.on(this.tech_,"play",_=>this.handleTechPlay_(_)),this.on(this.tech_,"pause",_=>this.handleTechPause_(_)),this.on(this.tech_,"durationchange",_=>this.handleTechDurationChange_(_)),this.on(this.tech_,"fullscreenchange",(_,L)=>this.handleTechFullscreenChange_(_,L)),this.on(this.tech_,"fullscreenerror",(_,L)=>this.handleTechFullscreenError_(_,L)),this.on(this.tech_,"enterpictureinpicture",_=>this.handleTechEnterPictureInPicture_(_)),this.on(this.tech_,"leavepictureinpicture",_=>this.handleTechLeavePictureInPicture_(_)),this.on(this.tech_,"error",_=>this.handleTechError_(_)),this.on(this.tech_,"posterchange",_=>this.handleTechPosterChange_(_)),this.on(this.tech_,"textdata",_=>this.handleTechTextData_(_)),this.on(this.tech_,"ratechange",_=>this.handleTechRateChange_(_)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||i==="Html5"&&this.tag||$i(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ms.names.forEach(t=>{const e=ms[t];this[e.privateName]=this[e.getterName]()}),this.textTracksJson_=function(t){const e=t.$$("track"),i=Array.prototype.map.call(e,n=>n.track);return Array.prototype.map.call(e,function(n){const r=mc(n.track);return n.src&&(r.src=n.src),r}).concat(Array.prototype.filter.call(t.textTracks(),function(n){return i.indexOf(n)===-1}).map(mc))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return t===void 0&&je.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":Cn}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||typeof t!="string")return;const e=()=>{const n=this.muted();this.muted(!0);const r=()=>{this.muted(n)};this.playTerminatedQueue_.push(r);const a=this.play();if(Xr(a))return a.catch(c=>{throw r(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${c||""}`)})};let i;return t!=="any"||this.muted()?i=t!=="muted"||this.muted()?this.play():e():(i=this.play(),Xr(i)&&(i=i.catch(e))),Xr(i)?i.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})}):void 0}updateSourceCaches_(t=""){let e=t,i="";typeof e!="string"&&(e=t.src,i=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!i&&(i=((p,v)=>{if(!v)return"";if(p.cache_.source.src===v&&p.cache_.source.type)return p.cache_.source.type;const _=p.cache_.sources.filter(k=>k.src===v);if(_.length)return _[0].type;const L=p.$$("source");for(let k=0;k<L.length;k++){const A=L[k];if(A.type&&A.src&&A.src===v)return A.type}return Ra(v)})(this,e)),this.cache_.source=gi({},t,{src:e,type:i});const n=this.cache_.sources.filter(p=>p.src&&p.src===e),r=[],a=this.$$("source"),c=[];for(let p=0;p<a.length;p++){const v=w(a[p]);r.push(v),v.src&&v.src===e&&c.push(v.src)}c.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e}handleTechSourceset_(t){if(!this.changingSrc_){let e=r=>this.updateSourceCaches_(r);const i=this.currentSource().src,n=t.src;i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==i)&&(e=()=>{}),e(n),t.src||this.tech_.any(["sourceset","loadstart"],r=>{if(r.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const t=this.currentTime(),e=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",e))};this.on("timeupdate",e)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(this.options_!==void 0&&this.options_.userActions!==void 0&&this.options_.userActions.click!==void 0&&this.options_.userActions.click===!1||(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?dn(this.play()):this.pause()))}handleTechDoubleClick_(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),e=>e.contains(t.target))||this.options_!==void 0&&this.options_.userActions!==void 0&&this.options_.userActions.doubleClick!==void 0&&this.options_.userActions.doubleClick===!1||(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){const e=t.target.player;if(e&&e!==this)return;const i=this.el();let n=m()[this.fsApi_.fullscreenElement]===i;!n&&i.matches&&(n=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(t,e){e&&(e.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(e.isFullscreen))}handleTechFullscreenError_(t,e){this.trigger("fullscreenerror",e)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){const t=this.tech_.error();t&&this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,e){this.ready(function(){if(t in Ud)return function(i,n,r,a){return n[r](i.reduce(Fo(r),a))}(this.middleware_,this.tech_,t,e);if(t in wc)return Sc(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(i){throw je(i),i}},!0)}techGet_(t){if(this.tech_&&this.tech_.isReady_){if(t in jd)return function(e,i,n){return e.reduceRight(Fo(n),i[n]())}(this.middleware_,this.tech_,t);if(t in wc)return Sc(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){throw this.tech_[t]===void 0?(je(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,e),e):e.name==="TypeError"?(je(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,e),this.tech_.isReady_=!1,e):(je(e),e)}}}play(){return new Promise(t=>{this.play_(t)})}play_(t=dn){this.playCallbacks_.push(t);const e=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(zi||Re);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!e)return this.waitToPlay_=r=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!e&&i&&this.load());const n=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(e){e()})}runPlayCallbacks_(t){const e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(i){i(t)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||tn(0,0)}scrubbing(t){if(t===void 0)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){return t===void 0?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),this.cache_.initTime=0,void(isFinite(t)&&(this.cache_.currentTime=Number(t)))):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return t&&t.length||(t=tn(0,0)),t}seekable(){let t=this.techGet_("seekable");return t&&t.length||(t=tn(0,0)),t}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return pc(this.buffered(),this.duration())}bufferedEnd(){const t=this.buffered(),e=this.duration();let i=t.end(t.length-1);return i>e&&(i=e),i}volume(t){let e;return t!==void 0?(e=Math.max(0,Math.min(1,t)),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)}muted(t){if(t===void 0)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)}defaultMuted(t){return t!==void 0&&this.techCall_("setDefaultMuted",t),this.techGet_("defaultMuted")||!1}lastVolume_(t){if(t===void 0||t===0)return this.cache_.lastVolume;this.cache_.lastVolume=t}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(t!==void 0){const e=this.isFullscreen_;return this.isFullscreen_=!!t,this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();const e=this;return new Promise((i,n)=>{function r(){e.off("fullscreenerror",c),e.off("fullscreenchange",a)}function a(){r(),i()}function c(v,_){r(),n(_)}e.one("fullscreenchange",a),e.one("fullscreenerror",c);const p=e.requestFullscreenHelper_(t);p&&(p.then(r,r),p.then(i,n))})}requestFullscreenHelper_(t){let e;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(e=t)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](e);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==1?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const t=this;return new Promise((e,i)=>{function n(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){n(),e()}function a(p,v){n(),i(v)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);const c=t.exitFullscreenHelper_();c&&(c.then(n,n),c.then(e,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const t=m()[this.fsApi_.exitFullscreen]();return t&&dn(t.then(()=>this.isFullscreen(!1))),t}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==1?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=m().documentElement.style.overflow,Rs(m(),"keydown",this.boundFullWindowOnEscKey_),m().documentElement.style.overflow="hidden",Ni(m().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){t.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,as(m(),"keydown",this.boundFullWindowOnEscKey_),m().documentElement.style.overflow=this.docOrigOverflow,qs(m().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){return t!==void 0?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&u().documentPictureInPicture){const t=m().createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(Gt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),u().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(e=>(ss(e),this.el_.parentNode.insertBefore(t,this.el_),e.document.body.appendChild(this.el_),e.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:e}),e.addEventListener("pagehide",i=>{const n=i.target.querySelector(".video-js");t.parentNode.replaceChild(n,t),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),e))}return"pictureInPictureEnabled"in m()&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return u().documentPictureInPicture&&u().documentPictureInPicture.window?(u().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in m()?m().exitPictureInPicture():void 0}handleKeyDown(t){const{userActions:e}=this.options_;e&&e.hotkeys&&((i=>{const n=i.tagName.toLowerCase();return!!i.isContentEditable||(n==="input"?["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type)===-1:["textarea"].indexOf(n)!==-1)})(this.el_.ownerDocument.activeElement)||(typeof e.hotkeys=="function"?e.hotkeys.call(this,t):this.handleHotkeys(t)))}handleHotkeys(t){const e=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>t.key.toLowerCase()==="f",muteKey:n=a=>t.key.toLowerCase()==="m",playPauseKey:r=a=>t.key.toLowerCase()==="k"||t.key.toLowerCase()===" "}=e;if(i.call(this,t)){t.preventDefault(),t.stopPropagation();const a=kt.getComponent("FullscreenToggle");m()[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,t)}else n.call(this,t)?(t.preventDefault(),t.stopPropagation(),kt.getComponent("MuteToggle").prototype.handleClick.call(this,t)):r.call(this,t)&&(t.preventDefault(),t.stopPropagation(),kt.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let e;for(let i=0,n=this.options_.techOrder;i<n.length;i++){const r=n[i];let a=Ye.getTech(r);if(a||(a=kt.getComponent(r)),a){if(a.isSupported()&&(e=a.canPlayType(t),e))return e}else je.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(t){const e=this.options_.techOrder.map(c=>[c,Ye.getTech(c)]).filter(([c,p])=>p?p.isSupported():(je.error(`The "${c}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(c,p,v){let _;return c.some(L=>p.some(k=>{if(_=v(L,k),_)return!0})),_};let n;const r=([c,p],v)=>{if(p.canPlaySource(v,this.options_[c.toLowerCase()]))return{source:v,tech:c}};var a;return n=this.options_.sourceOrder?i(t,e,(a=r,(c,p)=>a(p,c))):i(e,t,r),n||!1}handleSrc_(t,e){if(t===void 0)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=Ec(t);if(i.length){if(this.changingSrc_=!0,e||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),Md(this,i[0],(n,r)=>{if(this.middleware_=r,e||(this.cache_.sources=i),this.updateSourceCaches_(n),this.src_(n))return i.length>1?this.handleSrc_(i.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());var a,c;a=r,c=this.tech_,a.forEach(p=>p.setTech&&p.setTech(c))}),i.length>1){const n=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},r=()=>{this.off("error",n)};this.one("error",n),this.one("playing",r),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",r)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(t){return this.handleSrc_(t,!1)}src_(t){const e=this.selectSource([t]);return!e||(lc(e.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(e.tech,e.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():dn(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Pn(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:t,durationDisplay:e,progressControl:i,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:r}=i||{};t&&t.updateContent(),e&&e.updateContent(),n&&n.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const t=this.currentSource(),e=[];return Object.keys(t).length!==0&&e.push(t),this.cache_.sources||e}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){return t!==void 0?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")}autoplay(t){if(t===void 0)return this.options_.autoplay||!1;let e;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),e=!1):this.options_.autoplay=!!t,e=e===void 0?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)}playsinline(t){return t!==void 0&&(this.techCall_("setPlaysinline",t),this.options_.playsinline=t),this.techGet_("playsinline")}loop(t){return t!==void 0?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")}poster(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(t===void 0)return this.error_||null;if(ks("beforeerror").forEach(e=>{const i=e(this,t);ps(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null?t=i:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&t.code===4){const e=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e),void this.one("loadstart",function(){this.off(["click","touchstart"],e)})}if(t===null)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Bi(t),this.addClass("vjs-error"),je.error(`(CODE:${this.error_.code} ${Bi.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),ks("error").forEach(e=>e(this,this.error_))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(t===void 0)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,e,i;const n=Ai(this,this.reportUserActivity),r=function(p){n(),this.clearInterval(t)};this.on("mousedown",function(){n(),this.clearInterval(t),t=this.setInterval(n,250)}),this.on("mousemove",function(p){p.screenX===e&&p.screenY===i||(e=p.screenX,i=p.screenY,n())}),this.on("mouseup",r),this.on("mouseleave",r);const a=this.getChild("controlBar");let c;!a||Re||q||(a.on("mouseenter",function(p){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),a.on("mouseleave",function(p){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(c);const p=this.options_.inactivityTimeout;p<=0||(c=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},p))},250)}playbackRate(t){if(t===void 0)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)}defaultPlaybackRate(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(t===void 0)return!!this.isAudio_;this.isAudio_=!!t}updatePlayerHeightOnAudioOnlyMode_(){const t=this.getChild("ControlBar");t&&this.audioOnlyCache_.controlBarHeight!==t.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=t.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const t=this.children(),e=this.getChild("ControlBar"),i=e&&e.currentHeight();t.forEach(n=>{n!==e&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return typeof t!="boolean"||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(t,e,i){if(this.tech_)return this.tech_.addTextTrack(t,e,i)}addRemoteTextTrack(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)}removeRemoteTextTrack(t={}){let{track:e}=t;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Pn(this)&&this.trigger("languagechange"))}languages(){return gi(Oi.prototype.options_.languages,this.languages_)}toJSON(){const t=gi(this.options_),e=t.tracks;t.tracks=[];for(let i=0;i<e.length;i++){let n=e[i];n=gi(n),n.player=void 0,t.tracks[i]=n}return t}createModal(t,e){(e=e||{}).content=t||"";const i=new br(this,e);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const t=this.currentBreakpoint(),e=this.currentWidth();for(let i=0;i<ul.length;i++){const n=ul[i];if(e<=this.breakpoints_[n]){if(t===n)return;t&&this.removeClass(ja[t]),this.addClass(ja[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return t===void 0||(this.breakpoint_="",this.breakpoints_=Object.assign({},Gd,t),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(t){return t===void 0?this.responsive_:(t=!!t)!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return ja[this.breakpoint_]||""}loadMedia(t,e){if(!t||typeof t!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=gi(t);const{artist:n,artwork:r,description:a,poster:c,src:p,textTracks:v,title:_}=this.cache_.media;!r&&c&&(this.cache_.media.artwork=[{src:c,type:Ra(c)}]),i&&this.crossOrigin(i),p&&this.src(p),c&&this.poster(c),Array.isArray(v)&&v.forEach(L=>this.addRemoteTextTrack(L,!1)),this.titleBar&&this.titleBar.update({title:_,description:a||n||""}),this.ready(e)}getMedia(){if(!this.cache_.media){const t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),i=>({kind:i.kind,label:i.label,language:i.language,src:i.src}))};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Ra(e.poster)}]),e}return gi(this.cache_.media)}static getTagSettings(t){const e={sources:[],tracks:[]},i=w(t),n=i["data-setup"];if(Pi(t,"vjs-fill")&&(i.fill=!0),Pi(t,"vjs-fluid")&&(i.fluid=!0),n!==null){const[r,a]=I()(n||"{}");r&&je.error(r),Object.assign(i,a)}if(Object.assign(e,i),t.hasChildNodes()){const r=t.childNodes;for(let a=0,c=r.length;a<c;a++){const p=r[a],v=p.nodeName.toLowerCase();v==="source"?e.sources.push(w(p)):v==="track"&&e.tracks.push(w(p))}}return e}debug(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(t===void 0)return this.cache_.playbackRates;Array.isArray(t)&&t.every(e=>typeof e=="number")&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}}ms.names.forEach(function(s){const t=ms[s];Oi.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Oi.prototype.crossorigin=Oi.prototype.crossOrigin,Oi.players={};const ta=u().navigator;Oi.prototype.options_={techOrder:Ye.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ta&&(ta.languages&&ta.languages[0]||ta.userLanguage||ta.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1},mu.forEach(function(s){Oi.prototype[`handleTech${Hi(s)}_`]=function(){return this.trigger(s)}}),kt.registerComponent("Player",Oi);const Ua="plugin",xr="activePlugins_",kr={},Ba=s=>kr.hasOwnProperty(s),Fa=s=>Ba(s)?kr[s]:void 0,fu=(s,t)=>{s[xr]=s[xr]||{},s[xr][t]=!0},qa=(s,t,e)=>{const i=(e?"before":"")+"pluginsetup";s.trigger(i,t),s.trigger(i+":"+t.name,t)},gu=(s,t)=>(t.prototype.name=s,function(...e){qa(this,{name:s,plugin:t,instance:null},!0);const i=new t(this,...e);return this[s]=()=>i,qa(this,i.getEventHash()),i});class Ts{constructor(t){if(this.constructor===Ts)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Oo(this),delete this.trigger,oc(this,this.constructor.defaultState),fu(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,e={}){return vr(this.eventBusEl_,t,this.getEventHash(e))}handleStateChanged(t){}dispose(){const{name:t,player:e}=this;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[xr][t]=!1,this.player=this.state=null,e[t]=gu(t,kr[t])}static isBasic(t){const e=typeof t=="string"?Fa(t):t;return typeof e=="function"&&!Ts.prototype.isPrototypeOf(e.prototype)}static registerPlugin(t,e){if(typeof t!="string")throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(Ba(t))je.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(Oi.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if(typeof e!="function")throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof e}.`);return kr[t]=e,t!==Ua&&(Ts.isBasic(e)?Oi.prototype[t]=function(i,n){const r=function(){qa(this,{name:i,plugin:n,instance:null},!0);const a=n.apply(this,arguments);return fu(this,i),qa(this,{name:i,plugin:n,instance:a}),a};return Object.keys(n).forEach(function(a){r[a]=n[a]}),r}(t,e):Oi.prototype[t]=gu(t,e)),e}static deregisterPlugin(t){if(t===Ua)throw new Error("Cannot de-register base plugin.");Ba(t)&&(delete kr[t],delete Oi.prototype[t])}static getPlugins(t=Object.keys(kr)){let e;return t.forEach(i=>{const n=Fa(i);n&&(e=e||{},e[i]=n)}),e}static getPluginVersion(t){const e=Fa(t);return e&&e.VERSION||""}}function en(s,t,e,i){return function(n,r){let a=!1;return function(...c){return a||je.warn(n),a=!0,r.apply(this,c)}}(`${t} is deprecated and will be removed in ${s}.0; please use ${e} instead.`,i)}Ts.getPlugin=Fa,Ts.BASE_PLUGIN_NAME=Ua,Ts.registerPlugin(Ua,Ts),Oi.prototype.usingPlugin=function(s){return!!this[xr]&&this[xr][s]===!0},Oi.prototype.hasPlugin=function(s){return!!Ba(s)};const yu=s=>s.indexOf("#")===0?s.slice(1):s;function _t(s,t,e){let i=_t.getPlayer(s);if(i)return t&&je.warn(`Player "${s}" is already initialised. Options will not be applied.`),e&&i.ready(e),i;const n=typeof s=="string"?ni("#"+yu(s)):s;if(!Ls(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");const r="getRootNode"in n&&n.getRootNode()instanceof u().ShadowRoot?n.getRootNode():n.ownerDocument.body;n.ownerDocument.defaultView&&r.contains(n)||je.warn("The element supplied is not included in the DOM"),(t=t||{}).restoreEl===!0&&(t.restoreEl=(n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),ks("beforesetup").forEach(c=>{const p=c(n,gi(t));ps(p)&&!Array.isArray(p)?t=gi(t,p):je.error("please return an object in beforesetup hooks")});const a=kt.getComponent("Player");return i=new a(n,t,e),ks("setup").forEach(c=>c(i)),i}if(_t.hooks_=hs,_t.hooks=ks,_t.hook=function(s,t){ks(s,t)},_t.hookOnce=function(s,t){ks(s,[].concat(t).map(e=>{const i=(...n)=>(cn(s,i),e(...n));return i}))},_t.removeHook=cn,u().VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Os()){let s=ni(".vjs-styles-defaults");if(!s){s=Je("vjs-styles-defaults");const t=ni("head");t&&t.insertBefore(s,t.firstChild),pe(s,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Gi(1,_t),_t.VERSION=Cn,_t.options=Oi.prototype.options_,_t.getPlayers=()=>Oi.players,_t.getPlayer=s=>{const t=Oi.players;let e;if(typeof s=="string"){const i=yu(s),n=t[i];if(n)return n;e=ni("#"+i)}else e=s;if(Ls(e)){const{player:i,playerId:n}=e;if(i||t[n])return i||t[n]}},_t.getAllPlayers=()=>Object.keys(Oi.players).map(s=>Oi.players[s]).filter(Boolean),_t.players=Oi.players,_t.getComponent=kt.getComponent,_t.registerComponent=(s,t)=>(Ye.isTech(t)&&je.warn(`The ${s} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),kt.registerComponent.call(kt,s,t)),_t.getTech=Ye.getTech,_t.registerTech=Ye.registerTech,_t.use=function(s,t){ir[s]=ir[s]||[],ir[s].push(t)},Object.defineProperty(_t,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(_t.middleware,"TERMINATOR",{value:Da,writeable:!1,enumerable:!0}),_t.browser=qn,_t.obj=kn,_t.mergeOptions=en(9,"videojs.mergeOptions","videojs.obj.merge",gi),_t.defineLazyProperty=en(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Ps),_t.bind=en(9,"videojs.bind","native Function.prototype.bind",Ai),_t.registerPlugin=Ts.registerPlugin,_t.deregisterPlugin=Ts.deregisterPlugin,_t.plugin=(s,t)=>(je.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ts.registerPlugin(s,t)),_t.getPlugins=Ts.getPlugins,_t.getPlugin=Ts.getPlugin,_t.getPluginVersion=Ts.getPluginVersion,_t.addLanguage=function(s,t){return s=(""+s).toLowerCase(),_t.options.languages=gi(_t.options.languages,{[s]:t}),_t.options.languages[s]},_t.log=je,_t.createLogger=Fn,_t.time=Od,_t.createTimeRange=en(9,"videojs.createTimeRange","videojs.time.createTimeRanges",tn),_t.createTimeRanges=en(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",tn),_t.formatTime=en(9,"videojs.formatTime","videojs.time.formatTime",er),_t.setFormatTime=en(9,"videojs.setFormatTime","videojs.time.setFormatTime",hc),_t.resetFormatTime=en(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",dc),_t.parseUrl=en(9,"videojs.parseUrl","videojs.url.parseUrl",Uo),_t.isCrossOrigin=en(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Oa),_t.EventTarget=Ns,_t.any=Ao,_t.on=Rs,_t.one=ka,_t.off=as,_t.trigger=vr,_t.xhr=D(),_t.TextTrack=Yr,_t.AudioTrack=bc,_t.VideoTrack=Tc,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(s=>{_t[s]=function(){return je.warn(`videojs.${s}() is deprecated; use videojs.dom.${s}() instead`),Ce[s].apply(null,arguments)}}),_t.computedStyle=en(9,"videojs.computedStyle","videojs.dom.computedStyle",Ui),_t.dom=Ce,_t.fn=kd,_t.num=$d,_t.str=Pd,_t.url=Nd,_t.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};class Xd{constructor(t){let e=this;return e.id=t.id,e.label=e.id,e.width=t.width,e.height=t.height,e.bitrate=t.bandwidth,e.frameRate=t.frameRate,e.enabled_=t.enabled,Object.defineProperty(e,"enabled",{get:()=>e.enabled_(),set(i){e.enabled_(i)}}),e}}class $a extends _t.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get:()=>t.selectedIndex_}),Object.defineProperty(t,"length",{get:()=>t.levels_.length}),t[Symbol.iterator]=()=>t.levels_.values(),t}addQualityLevel(t){let e=this.getQualityLevelById(t.id);if(e)return e;const i=this.levels_.length;return e=new Xd(t),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(e),this.trigger({qualityLevel:e,type:"addqualitylevel"}),e}removeQualityLevel(t){let e=null;for(let i=0,n=this.length;i<n;i++)if(this[i]===t){e=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return e&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),e}getQualityLevelById(t){for(let e=0,i=this.length;e<i;e++){const n=this[e];if(n.id===t)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}$a.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const s in $a.prototype.allowedEvents_)$a.prototype["on"+s]=null;var _u="4.1.0";const vu=function(s){return function(t,e){const i=t.qualityLevels,n=new $a,r=function(){n.dispose(),t.qualityLevels=i,t.off("dispose",r)};return t.on("dispose",r),t.qualityLevels=()=>n,t.qualityLevels.VERSION=_u,n}(this,_t.obj.merge({},s))};_t.registerPlugin("qualityLevels",vu),vu.VERSION=_u;const Ss=rt,Ha=(s,t)=>t&&t.responseURL&&s!==t.responseURL?t.responseURL:s,Ws=s=>_t.log.debug?_t.log.debug.bind(_t,"VHS:",`${s} >`):function(){};function _i(...s){const t=_t.obj||_t;return(t.merge||t.mergeOptions).apply(t,s)}function fs(...s){const t=_t.time||_t;return(t.createTimeRanges||t.createTimeRanges).apply(t,s)}const Ln=1/30,pn=.1,bu=function(s,t){const e=[];let i;if(s&&s.length)for(i=0;i<s.length;i++)t(s.start(i),s.end(i))&&e.push([s.start(i),s.end(i)]);return fs(e)},Ar=function(s,t){return bu(s,function(e,i){return e-pn<=t&&i+pn>=t})},Va=function(s,t){return bu(s,function(e){return e-Ln>=t})},Tu=s=>{const t=[];if(!s||!s.length)return"";for(let e=0;e<s.length;e++)t.push(s.start(e)+" => "+s.end(e));return t.join(", ")},rr=s=>{const t=[];for(let e=0;e<s.length;e++)t.push({start:s.start(e),end:s.end(e)});return t},hl=function(s){if(s&&s.length&&s.end)return s.end(s.length-1)},dl=function(s,t){let e=0;if(!s||!s.length)return e;for(let i=0;i<s.length;i++){const n=s.start(i),r=s.end(i);t>r||(e+=t>n&&t<=r?r-t:r-n)}return e},pl=(s,t)=>{if(!t.preload)return t.duration;let e=0;return(t.parts||[]).forEach(function(i){e+=i.duration}),(t.preloadHints||[]).forEach(function(i){i.type==="PART"&&(e+=s.partTargetDuration)}),e},ml=s=>(s.segments||[]).reduce((t,e,i)=>(e.parts?e.parts.forEach(function(n,r){t.push({duration:n.duration,segmentIndex:i,partIndex:r,part:n,segment:e})}):t.push({duration:e.duration,segmentIndex:i,partIndex:null,segment:e,part:null}),t),[]),Su=s=>{const t=s.segments&&s.segments.length&&s.segments[s.segments.length-1];return t&&t.parts||[]},wu=({preloadSegment:s})=>{if(!s)return;const{parts:t,preloadHints:e}=s;let i=(e||[]).reduce((n,r)=>n+(r.type==="PART"?1:0),0);return i+=t&&t.length?t.length:0,i},Eu=(s,t)=>{if(t.endList)return 0;if(s&&s.suggestedPresentationDelay)return s.suggestedPresentationDelay;const e=Su(t).length>0;return e&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:e&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Cu=function(s,t,e){if(t===void 0&&(t=s.mediaSequence+s.segments.length),t<s.mediaSequence)return 0;const i=function(r,a){let c=0,p=a-r.mediaSequence,v=r.segments[p];if(v){if(v.start!==void 0)return{result:v.start,precise:!0};if(v.end!==void 0)return{result:v.end-v.duration,precise:!0}}for(;p--;){if(v=r.segments[p],v.end!==void 0)return{result:c+v.end,precise:!0};if(c+=pl(r,v),v.start!==void 0)return{result:c+v.start,precise:!0}}return{result:c,precise:!1}}(s,t);if(i.precise)return i.result;const n=function(r,a){let c,p=0,v=a-r.mediaSequence;for(;v<r.segments.length;v++){if(c=r.segments[v],c.start!==void 0)return{result:c.start-p,precise:!0};if(p+=pl(r,c),c.end!==void 0)return{result:c.end-p,precise:!0}}return{result:-1,precise:!1}}(s,t);return n.precise?n.result:i.result+e},xu=function(s,t,e){if(!s)return 0;if(typeof e!="number"&&(e=0),t===void 0){if(s.totalDuration)return s.totalDuration;if(!s.endList)return u()[1/0]}return Cu(s,t,e)},ea=function({defaultDuration:s,durationList:t,startIndex:e,endIndex:i}){let n=0;if(e>i&&([e,i]=[i,e]),e<0){for(let r=e;r<Math.min(0,i);r++)n+=s;e=0}for(let r=e;r<i;r++)n+=t[r].duration;return n},ku=function(s,t,e,i){if(!s||!s.segments)return null;if(s.endList)return xu(s);if(t===null)return null;t=t||0;let n=Cu(s,s.mediaSequence+s.segments.length,t);return e&&(n-=i=typeof i=="number"?i:Eu(null,s)),Math.max(0,n)},Au=function(s){return s.excludeUntil&&s.excludeUntil>Date.now()},fl=function(s){return s.excludeUntil&&s.excludeUntil===1/0},za=function(s){const t=Au(s);return!s.disabled&&!t},Iu=function(s,t){return t.attributes&&t.attributes[s]},gl=(s,t)=>{if(s.playlists.length===1)return!0;const e=t.attributes.BANDWIDTH||Number.MAX_VALUE;return s.playlists.filter(i=>!!za(i)&&(i.attributes.BANDWIDTH||0)<e).length===0},yl=(s,t)=>!(!s&&!t||!s&&t||s&&!t||s!==t&&(!s.id||!t.id||s.id!==t.id)&&(!s.resolvedUri||!t.resolvedUri||s.resolvedUri!==t.resolvedUri)&&(!s.uri||!t.uri||s.uri!==t.uri)),Pu=function(s,t){const e=s&&s.mediaGroups&&s.mediaGroups.AUDIO||{};let i=!1;for(const n in e){for(const r in e[n])if(i=t(e[n][r]),i)break;if(i)break}return!!i},ia=s=>{if(!s||!s.playlists||!s.playlists.length)return Pu(s,t=>t.playlists&&t.playlists.length||t.uri);for(let t=0;t<s.playlists.length;t++){const e=s.playlists[t],i=e.attributes&&e.attributes.CODECS;if((!i||!i.split(",").every(n=>Qt(n)))&&!Pu(s,n=>yl(e,n)))return!1}return!0};var ws={liveEdgeDelay:Eu,duration:xu,seekable:function(s,t,e){const i=t||0;let n=ku(s,t,!0,e);return n===null?fs():(n<i&&(n=i),fs(i,n))},getMediaInfoForTime:function({playlist:s,currentTime:t,startingSegmentIndex:e,startingPartIndex:i,startTime:n,exactManifestTimings:r}){let a=t-n;const c=ml(s);let p=0;for(let v=0;v<c.length;v++){const _=c[v];if(e===_.segmentIndex&&(typeof i!="number"||typeof _.partIndex!="number"||i===_.partIndex)){p=v;break}}if(a<0){if(p>0)for(let v=p-1;v>=0;v--){const _=c[v];if(a+=_.duration,r){if(a<0)continue}else if(a+Ln<=0)continue;return{partIndex:_.partIndex,segmentIndex:_.segmentIndex,startTime:n-ea({defaultDuration:s.targetDuration,durationList:c,startIndex:p,endIndex:v})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:t}}if(p<0){for(let v=p;v<0;v++)if(a-=s.targetDuration,a<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:t};p=0}for(let v=p;v<c.length;v++){const _=c[v];a-=_.duration;const L=_.duration>Ln;if(a!==0&&!(L&&a+Ln>=0)||v===c.length-1){if(r){if(a>0)continue}else if(a-Ln>=0)continue;return{partIndex:_.partIndex,segmentIndex:_.segmentIndex,startTime:n+ea({defaultDuration:s.targetDuration,durationList:c,startIndex:p,endIndex:v})}}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:t}},isEnabled:za,isDisabled:function(s){return s.disabled},isExcluded:Au,isIncompatible:fl,playlistEnd:ku,isAes:function(s){for(let t=0;t<s.segments.length;t++)if(s.segments[t].key)return!0;return!1},hasAttribute:Iu,estimateSegmentRequestTime:function(s,t,e,i=0){return Iu("BANDWIDTH",e)?(s*e.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:gl,isAudioOnly:ia,playlistMatch:yl,segmentDurationWithParts:pl};const{log:Ou}=_t,Ir=(s,t)=>`${s}-${t}`,Lu=(s,t,e)=>`placeholder-uri-${s}-${t}-${e}`,Pr=(s,t)=>{s.mediaGroups&&["AUDIO","SUBTITLES"].forEach(e=>{if(s.mediaGroups[e])for(const i in s.mediaGroups[e])for(const n in s.mediaGroups[e][i]){const r=s.mediaGroups[e][i][n];t(r,e,i,n)}})},Du=({playlist:s,uri:t,id:e})=>{s.id=e,s.playlistErrors_=0,t&&(s.uri=t),s.attributes=s.attributes||{}},Ru=(s,t,e=Lu)=>{s.uri=t;for(let n=0;n<s.playlists.length;n++)if(!s.playlists[n].uri){const r=`placeholder-uri-${n}`;s.playlists[n].uri=r}const i=ia(s);Pr(s,(n,r,a,c)=>{if(!n.playlists||!n.playlists.length){if(i&&r==="AUDIO"&&!n.uri)for(let p=0;p<s.playlists.length;p++){const v=s.playlists[p];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===a)return}n.playlists=[Z({},n)]}n.playlists.forEach(function(p,v){const _=e(r,a,c,p),L=Ir(v,_);p.uri?p.resolvedUri=p.resolvedUri||Ss(s.uri,p.uri):(p.uri=v===0?_:L,p.resolvedUri=p.uri),p.id=p.id||L,p.attributes=p.attributes||{},s.playlists[p.id]=p,s.playlists[p.uri]=p})}),(n=>{let r=n.playlists.length;for(;r--;){const a=n.playlists[r];Du({playlist:a,id:Ir(r,a.uri)}),a.resolvedUri=Ss(n.uri,a.uri),n.playlists[a.id]=a,n.playlists[a.uri]=a,a.attributes.BANDWIDTH||Ou.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(s),(n=>{Pr(n,r=>{r.uri&&(r.resolvedUri=Ss(n.uri,r.uri))})})(s)};class Nu{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(t=[]){if(this.offset_!==null||!t.length)return;const[e]=t;e.programDateTime!==void 0&&(this.offset_=e.programDateTime/1e3)}setPendingDateRanges(t=[]){if(!t.length)return;const[e]=t,i=e.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=t.reduce((n,r)=>(n.set(r.id,r),n),new Map)}processDateRange(t){this.pendingDateRanges_.delete(t.id),this.processedDateRanges_.set(t.id,t)}getDateRangesToProcess(){if(this.offset_===null)return[];const t={},e=[];this.pendingDateRanges_.forEach((i,n)=>{if(!this.processedDateRanges_.has(n)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),e.push(i),i.class))if(t[i.class]){const r=t[i.class].push(i);i.classListIndex=r-1}else t[i.class]=[i],i.classListIndex=0});for(const i of e){const n=t[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&n[i.classListIndex+1]?i.endTime=n[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return e}trimProcessedDateRanges_(t){new Map(this.processedDateRanges_).forEach((e,i)=>{e.startDate.getTime()<t&&this.processedDateRanges_.delete(i)})}}const ar=({requestType:s,request:t,error:e,parseFailure:i})=>{const n=t.status<200||t.status>299,r=t.status>=400&&t.status<=499,a={uri:t.uri,requestType:s},c=n&&!r||i;if(e&&r)a.error=Z({},e),a.errorType=_t.Error.NetworkRequestFailed;else if(t.aborted)a.errorType=_t.Error.NetworkRequestAborted;else if(t.timedout)a.erroType=_t.Error.NetworkRequestTimeout;else if(c){const p=i?_t.Error.NetworkBodyParserFailed:_t.Error.NetworkBadStatus;a.errorType=p,a.status=t.status,a.headers=t.headers}return a},{EventTarget:Yd}=_t,Kd=(s,t)=>{if(!s)return t;const e=_i(s,t);if(s.preloadHints&&!t.preloadHints&&delete e.preloadHints,s.parts&&!t.parts)delete e.parts;else if(s.parts&&t.parts)for(let i=0;i<t.parts.length;i++)s.parts&&s.parts[i]&&(e.parts[i]=_i(s.parts[i],t.parts[i]));return!s.skipped&&t.skipped&&(e.skipped=!1),s.preload&&!t.preload&&(e.preload=!1),e},Mu=(s,t)=>{!s.resolvedUri&&s.uri&&(s.resolvedUri=Ss(t,s.uri)),s.key&&!s.key.resolvedUri&&(s.key.resolvedUri=Ss(t,s.key.uri)),s.map&&!s.map.resolvedUri&&(s.map.resolvedUri=Ss(t,s.map.uri)),s.map&&s.map.key&&!s.map.key.resolvedUri&&(s.map.key.resolvedUri=Ss(t,s.map.key.uri)),s.parts&&s.parts.length&&s.parts.forEach(e=>{e.resolvedUri||(e.resolvedUri=Ss(t,e.uri))}),s.preloadHints&&s.preloadHints.length&&s.preloadHints.forEach(e=>{e.resolvedUri||(e.resolvedUri=Ss(t,e.uri))})},ju=function(s){const t=s.segments||[],e=s.preloadSegment;if(e&&e.parts&&e.parts.length){if(e.preloadHints){for(let i=0;i<e.preloadHints.length;i++)if(e.preloadHints[i].type==="MAP")return t}e.duration=s.targetDuration,e.preload=!0,t.push(e)}return t},Uu=(s,t)=>s===t||s.segments&&t.segments&&s.segments.length===t.segments.length&&s.endList===t.endList&&s.mediaSequence===t.mediaSequence&&s.preloadSegment===t.preloadSegment,_l=(s,t,e=Uu)=>{const i=_i(s,{}),n=i.playlists[t.id];if(!n||e(n,t))return null;t.segments=ju(t);const r=_i(n,t);if(r.preloadSegment&&!t.preloadSegment&&delete r.preloadSegment,n.segments){if(t.skip){t.segments=t.segments||[];for(let a=0;a<t.skip.skippedSegments;a++)t.segments.unshift({skipped:!0})}r.segments=((a,c,p)=>{const v=a.slice(),_=c.slice();p=p||0;const L=[];let k;for(let A=0;A<_.length;A++){const tt=v[A+p],z=_[A];tt?(k=tt.map||k,L.push(Kd(tt,z))):(k&&!z.map&&(z.map=k),L.push(z))}return L})(n.segments,t.segments,t.mediaSequence-n.mediaSequence)}r.segments.forEach(a=>{Mu(a,r.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=r);return i.playlists[t.id]=r,i.playlists[t.uri]=r,Pr(s,(a,c,p,v)=>{if(a.playlists)for(let _=0;_<a.playlists.length;_++)t.id===a.playlists[_].id&&(a.playlists[_]=r)}),i},vl=(s,t)=>{const e=s.segments||[],i=e[e.length-1],n=i&&i.parts&&i.parts[i.parts.length-1],r=n&&n.duration||i&&i.duration;return t&&r?1e3*r:500*(s.partTargetDuration||s.targetDuration||10)},Bu=(s,t,e)=>{if(!s)return;const i=[];return s.forEach(n=>{if(!n.attributes)return;const{BANDWIDTH:r,RESOLUTION:a,CODECS:c}=n.attributes;i.push({id:n.id,bandwidth:r,resolution:a,codecs:c})}),{type:t,isLive:e,renditions:i}};class Or extends Yd{constructor(t,e,i={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=Ws("PlaylistLoader");const{withCredentials:n=!1}=i;this.src=t,this.vhs_=e,this.withCredentials=n,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const r=e.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.dateRangesStorage_=new Nu,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const t=this.media();if(!t)return;this.dateRangesStorage_.setOffset(t.segments),this.dateRangesStorage_.setPendingDateRanges(t.dateRanges);const e=this.dateRangesStorage_.getDateRangesToProcess();e.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(e)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const t=this.media();let e=Ss(this.main.uri,t.uri);this.llhls&&(e=((i,n)=>{if(n.endList||!n.serverControl)return i;const r={};if(n.serverControl.canBlockReload){const{preloadSegment:a}=n;let c=n.mediaSequence+n.segments.length;if(a){const p=a.parts||[],v=wu(n)-1;v>-1&&v!==p.length-1&&(r._HLS_part=v),(v>-1||p.length)&&c--}r._HLS_msn=c}if(n.serverControl&&n.serverControl.canSkipUntil&&(r._HLS_skip=n.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){const a=new(u()).URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(c){r.hasOwnProperty(c)&&a.searchParams.set(c,r[c])}),i=a.toString()}return i})(e,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:e,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,n)=>{if(this.request)return i?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}playlistRequestError(t,e,i){const{uri:n,id:r}=e;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[r],status:t.status,message:`HLS playlist request error at URL: ${n}.`,responseText:t.responseText,code:t.status>=500?4:2,metadata:ar({requestType:t.requestType,request:t,error:t.error})},this.trigger("error")}parseManifest_({url:t,manifestString:e}){try{return(({onwarn:i,oninfo:n,manifestString:r,customTagParsers:a=[],customTagMappers:c=[],llhls:p})=>{const v=new at;i&&v.on("warn",i),n&&v.on("info",n),a.forEach(k=>v.addParser(k)),c.forEach(k=>v.addTagMapper(k)),v.push(r),v.end();const _=v.manifest;if(p||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(k){_.hasOwnProperty(k)&&delete _[k]}),_.segments&&_.segments.forEach(function(k){["parts","preloadHints"].forEach(function(A){k.hasOwnProperty(A)&&delete k[A]})})),!_.targetDuration){let k=10;_.segments&&_.segments.length&&(k=_.segments.reduce((A,tt)=>Math.max(A,tt.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${k}`}),_.targetDuration=k}const L=Su(_);if(L.length&&!_.partTargetDuration){const k=L.reduce((A,tt)=>Math.max(A,tt.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${k}`}),Ou.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),_.partTargetDuration=k}return _})({onwarn:({message:i})=>this.logger_(`m3u8-parser warn for ${t}: ${i}`),oninfo:({message:i})=>this.logger_(`m3u8-parser info for ${t}: ${i}`),manifestString:e,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(i){this.error=i,this.error.metadata={errorType:_t.Error.StreamingHlsPlaylistParserError,error:i}}}haveMetadata({playlistString:t,playlistObject:e,url:i,id:n}){this.request=null,this.state="HAVE_METADATA";const r={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:r});const a=e||this.parseManifest_({url:i,manifestString:t});a.lastRequest=Date.now(),Du({playlist:a,uri:i,id:n});const c=_l(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,c?(this.main=c,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(vl(this.media(),!!c)),r.parsedPlaylist=Bu(this.main.playlists,r.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:r}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),u().clearTimeout(this.mediaUpdateTimeout),u().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new Nu,this.off()}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,e){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(u().clearTimeout(this.finalRenditionTimeout),e){const c=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=u().setTimeout(this.media.bind(this,t,!1),c))}const i=this.state,n=!this.media_||t.id!==this.media_.id,r=this.main.playlists[t.id];if(r&&r.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(n&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(vl(t,!0)),!n)return;if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t;const a={playlistInfo:{type:"media",uri:t.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(c,p)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=Ha(t.resolvedUri,p),c)return this.playlistRequestError(this.request,t,i);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:p.responseText,url:t.uri,id:t.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const e=this.media();if(t){const i=e?(e.partTargetDuration||e.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=u().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i)}else this.started?e&&!e.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=u().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,typeof this.src=="object")return this.src.uri||(this.src.uri=u().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);const t={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(e,i)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:ar({requestType:i.requestType,request:i,error:e})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:t}),this.src=Ha(this.src,i),this.trigger({type:"playlistparsestart",metadata:t});const n=this.parseManifest_({manifestString:i.responseText,url:this.src});t.parsedPlaylist=Bu(n.playlists,t.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:t}),this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists)return this.main=t,Ru(this.main,this.srcUri()),t.playlists.forEach(i=>{i.segments=ju(i),i.segments.forEach(n=>{Mu(n,i.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const e=this.srcUri()||u().location.href;this.main=((i,n)=>{const r=Ir(0,n),a={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:u().location.href,resolvedUri:u().location.href,playlists:[{uri:n,id:r,resolvedUri:n,attributes:{}}]};return a.playlists[r]=a.playlists[0],a.playlists[n]=a.playlists[0],a})(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(t,e){const i=this.main,n=t.ID;let r=i.playlists.length;for(;r--;){const a=i.playlists[r];if(a.attributes["PATHWAY-ID"]===n){const c=a.resolvedUri,p=a.id;if(e){const v=this.createCloneURI_(a.resolvedUri,t),_=Ir(n,v),L=this.createCloneAttributes_(n,a.attributes),k=this.createClonePlaylist_(a,_,t,L);i.playlists[r]=k,i.playlists[_]=k,i.playlists[v]=k}else i.playlists.splice(r,1);delete i.playlists[p],delete i.playlists[c]}}this.updateOrDeleteCloneMedia(t,e)}updateOrDeleteCloneMedia(t,e){const i=this.main,n=t.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(i.mediaGroups[r]&&i.mediaGroups[r][n]){for(const a in i.mediaGroups[r])if(a===n){for(const c in i.mediaGroups[r][a])i.mediaGroups[r][a][c].playlists.forEach((p,v)=>{const _=i.playlists[p.id],L=_.id,k=_.resolvedUri;delete i.playlists[L],delete i.playlists[k]});delete i.mediaGroups[r][a]}}}),e&&this.createClonedMediaGroups_(t)}addClonePathway(t,e={}){const i=this.main,n=i.playlists.length,r=this.createCloneURI_(e.resolvedUri,t),a=Ir(t.ID,r),c=this.createCloneAttributes_(t.ID,e.attributes),p=this.createClonePlaylist_(e,a,t,c);i.playlists[n]=p,i.playlists[a]=p,i.playlists[r]=p,this.createClonedMediaGroups_(t)}createClonedMediaGroups_(t){const e=t.ID,i=t["BASE-ID"],n=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{if(n.mediaGroups[r]&&!n.mediaGroups[r][e]){for(const a in n.mediaGroups[r])if(a===i){n.mediaGroups[r][e]={};for(const c in n.mediaGroups[r][a]){const p=n.mediaGroups[r][a][c];n.mediaGroups[r][e][c]=Z({},p);const v=n.mediaGroups[r][e][c],_=this.createCloneURI_(p.resolvedUri,t);v.resolvedUri=_,v.uri=_,v.playlists=[],p.playlists.forEach((L,k)=>{const A=n.playlists[L.id],tt=Lu(r,e,c),z=Ir(e,tt);if(A&&!n.playlists[z]){const lt=this.createClonePlaylist_(A,z,t),st=lt.resolvedUri;n.playlists[z]=lt,n.playlists[st]=lt}v.playlists[k]=this.createClonePlaylist_(L,z,t)})}}}})}createClonePlaylist_(t,e,i,n){const r=this.createCloneURI_(t.resolvedUri,i),a={resolvedUri:r,uri:r,id:e};return t.segments&&(a.segments=[]),n&&(a.attributes=n),_i(t,a)}createCloneURI_(t,e){const i=new URL(t);i.hostname=e["URI-REPLACEMENT"].HOST;const n=e["URI-REPLACEMENT"].PARAMS;for(const r of Object.keys(n))i.searchParams.set(r,n[r]);return i.href}createCloneAttributes_(t,e){const i={"PATHWAY-ID":t};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{e[n]&&(i[n]=t)}),i}getKeyIdSet(t){if(t.contentProtection){const e=new Set;for(const i in t.contentProtection){const n=t.contentProtection[i].attributes.keyId;n&&e.add(n.toLowerCase())}return e}}}const bl=function(s,t,e,i){const n=s.responseType==="arraybuffer"?s.response:s.responseText;!t&&n&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=n.byteLength||n.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),e.headers&&(s.responseHeaders=e.headers),t&&t.code==="ETIMEDOUT"&&(s.timedout=!0),t||s.aborted||e.statusCode===200||e.statusCode===206||e.statusCode===0||(t=new Error("XHR Failed with a response of: "+(s&&(n||s.responseText)))),i(t,s)},Fu=function(){const s=function t(e,i){e=_i({timeout:45e3},e);const n=t.beforeRequest||_t.Vhs.xhr.beforeRequest,r=t._requestCallbackSet||_t.Vhs.xhr._requestCallbackSet||new Set,a=t._responseCallbackSet||_t.Vhs.xhr._responseCallbackSet;n&&typeof n=="function"&&(_t.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(n));const c=_t.Vhs.xhr.original===!0?_t.xhr:_t.Vhs.xhr,p=((L,k)=>{if(!L||!L.size)return;let A=k;return L.forEach(tt=>{A=tt(A)}),A})(r,e);r.delete(n);const v=c(p||e,function(L,k){return((A,tt,z,lt)=>{A&&A.size&&A.forEach(st=>{st(tt,z,lt)})})(a,v,L,k),bl(v,L,k,i)}),_=v.abort;return v.abort=function(){return v.aborted=!0,_.apply(v,arguments)},v.uri=e.uri,v.requestType=e.requestType,v.requestTime=Date.now(),v};return s.original=!0,s},Tl=function(s){const t={};return s.byterange&&(t.Range=function(e){let i;const n=e.offset;return i=typeof e.offset=="bigint"||typeof e.length=="bigint"?u().BigInt(e.offset)+u().BigInt(e.length)-u().BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+i}(s.byterange)),t},Qd=function(s,t){return s.start(t)+"-"+s.end(t)},Jd=function(s,t){const e=s.toString(16);return"00".substring(0,2-e.length)+e+(t%2?" ":"")},Zd=function(s){return s>=32&&s<126?String.fromCharCode(s):"."},qu=function(s){const t={};return Object.keys(s).forEach(e=>{const i=s[e];Ke(i)?t[e]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[e]=i}),t},Wa=function(s){const t=s.byterange||{length:1/0,offset:0};return[t.length,t.offset,s.resolvedUri].join(",")},$u=function(s){return s.resolvedUri},Hu=s=>{const t=Array.prototype.slice.call(s),e=16;let i,n,r="";for(let a=0;a<t.length/e;a++)i=t.slice(a*e,a*e+e).map(Jd).join(""),n=t.slice(a*e,a*e+e).map(Zd).join(""),r+=i+" "+n+`
`;return r};var tp=Object.freeze({__proto__:null,createTransferableMessage:qu,initSegmentId:Wa,segmentKeyId:$u,hexDump:Hu,tagDump:({bytes:s})=>Hu(s),textRanges:s=>{let t,e="";for(t=0;t<s.length;t++)e+=Qd(s,t)+" ";return e}});const Vu=({programTime:s,playlist:t,retryCount:e=2,seekTo:i,pauseAfterSeek:n=!0,tech:r,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(s===void 0||!t||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!r.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!(L=>{if(!L.segments||L.segments.length===0)return!1;for(let k=0;k<L.segments.length;k++)if(!L.segments[k].dateTimeObject)return!1;return!0})(t))return a({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const c=((L,k)=>{let A;try{A=new Date(L)}catch{return null}if(!k||!k.segments||k.segments.length===0)return null;let tt=k.segments[0];if(A<new Date(tt.dateTimeObject))return null;for(let yt=0;yt<k.segments.length-1&&(tt=k.segments[yt],!(A<new Date(k.segments[yt+1].dateTimeObject)));yt++);const z=k.segments[k.segments.length-1],lt=z.dateTimeObject,st=z.videoTimingInfo?(mt=z.videoTimingInfo).transmuxedPresentationEnd-mt.transmuxedPresentationStart-mt.transmuxerPrependedSeconds:z.duration+.25*z.duration;var mt;return A>new Date(lt.getTime()+1e3*st)?null:(A>new Date(lt)&&(tt=z),{segment:tt,estimatedStart:tt.videoTimingInfo?tt.videoTimingInfo.transmuxedPresentationStart:ws.duration(k,k.mediaSequence+k.segments.indexOf(tt)),type:tt.videoTimingInfo?"accurate":"estimate"})})(s,t);if(!c)return a({message:`${s} was not found in the stream`});const p=c.segment,v=((L,k)=>{let A,tt;try{A=new Date(L),tt=new Date(k)}catch{}const z=A.getTime();return(tt.getTime()-z)/1e3})(p.dateTimeObject,s);if(c.type==="estimate")return e===0?a({message:`${s} is not buffered yet. Try again`}):(i(c.estimatedStart+v),void r.one("seeked",()=>{Vu({programTime:s,playlist:t,retryCount:e-1,seekTo:i,pauseAfterSeek:n,tech:r,callback:a})}));const _=p.start+v;r.one("seeked",()=>a(null,r.currentTime())),n&&r.pause(),i(_)},zu=(s,t)=>{if(s.readyState===4)return t()},{EventTarget:ep}=_t,Wu=function(s,t){if(!Uu(s,t)||s.sidx&&t.sidx&&(s.sidx.offset!==t.sidx.offset||s.sidx.length!==t.sidx.length)||!s.sidx&&t.sidx||s.sidx&&!t.sidx||s.segments&&!t.segments||!s.segments&&t.segments)return!1;if(!s.segments&&!t.segments)return!0;for(let e=0;e<s.segments.length;e++){const i=s.segments[e],n=t.segments[e];if(i.uri!==n.uri)return!1;if(!i.byterange&&!n.byterange)continue;const r=i.byterange,a=n.byterange;if(r&&!a||!r&&a||r.offset!==a.offset||r.length!==a.length)return!1}return!0},ip=(s,t,e,i)=>`placeholder-uri-${s}-${t}-${i.attributes.NAME||e}`,sp=(s,t)=>(!s.map&&!t.map||!!(s.map&&t.map&&s.map.byterange.offset===t.map.byterange.offset&&s.map.byterange.length===t.map.byterange.length))&&s.uri===t.uri&&s.byterange.offset===t.byterange.offset&&s.byterange.length===t.byterange.length,Gu=(s,t)=>{const e={};for(const i in s){const n=s[i].sidx;if(n){const r=Ht(n);if(!t[r])break;const a=t[r].sidxInfo;sp(a,n)&&(e[r]=t[r])}}return e};class Sl extends ep{constructor(t,e,i={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:r=!1}=i;if(this.vhs_=e,this.withCredentials=r,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Ws("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}requestErrored_(t,e,i){return!this.request||(this.request=null,t?(this.error=typeof t!="object"||t instanceof Error?{status:e.status,message:"DASH request error at URL: "+e.uri,response:e.response,code:2,metadata:t.metadata}:t,i&&(this.state=i),this.trigger("error"),!0):void 0)}addSidxSegments_(t,e,i){const n=t.sidx&&Ht(t.sidx);if(!t.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n])return void(this.mediaRequest_=u().setTimeout(()=>i(!1),0));const r=Ha(t.sidx.resolvedUri),a=(c,p)=>{if(this.requestErrored_(c,p,e))return;const v=this.mainPlaylistLoader_.sidxMapping_,{requestType:_}=p;let L;try{L=Yn()(Kt(p.response).subarray(8))}catch(k){return k.metadata=ar({requestType:_,request:p,parseFailure:!0}),void this.requestErrored_(k,p,e)}return v[n]={sidxInfo:t.sidx,sidx:L},$e(t,L,t.sidx.resolvedUri),i(!0)};this.request=((c,p,v,_)=>{let L,k=[],A=!1;const tt=function(mt,yt,Lt,wt){return yt.abort(),A=!0,v(mt,yt,Lt,wt)},z=function(mt,yt){if(A)return;if(mt)return mt.metadata=ar({requestType:_,request:yt,error:mt}),tt(mt,yt,"",k);const Lt=yt.responseText.substring(k&&k.byteLength||0,yt.responseText.length);if(k=function(){for(var ht=arguments.length,St=new Array(ht),qt=0;qt<ht;qt++)St[qt]=arguments[qt];if(St=St.filter(function(xe){return xe&&(xe.byteLength||xe.length)&&typeof xe!="string"}),St.length<=1)return Kt(St[0]);var ve=St.reduce(function(xe,oe,Ze){return xe+(oe.byteLength||oe.length)},0),ye=new Uint8Array(ve),ne=0;return St.forEach(function(xe){xe=Kt(xe),ye.set(xe,ne),ne+=xe.byteLength}),ye}(k,Di(Lt,!0)),L=L||Tn(k),k.length<10||L&&k.length<L+2)return zu(yt,()=>tt(mt,yt,"",k));const wt=Bn(k);return wt==="ts"&&k.length<188||!wt&&k.length<376?zu(yt,()=>tt(mt,yt,"",k)):tt(null,yt,wt,k)},lt={uri:c,beforeSend(mt){mt.overrideMimeType("text/plain; charset=x-user-defined"),mt.addEventListener("progress",function({total:yt,loaded:Lt}){return bl(mt,null,{statusCode:mt.status},z)})}},st=p(lt,function(mt,yt){return bl(st,mt,yt,z)});return st})(r,this.vhs_.xhr,(c,p,v,_)=>{if(c)return a(c,p);if(!v||v!=="mp4"){const A=v||"unknown";return a({status:p.status,message:`Unsupported ${A} container type for sidx segment at URL: ${r}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},p)}const{offset:L,length:k}=t.sidx.byterange;if(_.length>=k+L)return a(c,{response:_.subarray(L,L+k),status:p.status,uri:p.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",requestType:"dash-sidx",headers:Tl({byterange:t.sidx.byterange})},a)},"dash-sidx")}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},u().clearTimeout(this.minimumUpdatePeriodTimeout_),u().clearTimeout(this.mediaRequest_),u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const e=this.state;if(typeof t=="string"){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}const i=!this.media_||t.id!==this.media_.id;if(i&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,e,n=>{this.haveMetadata({startingState:e,playlist:t})}))}haveMetadata({startingState:t,playlist:e}){this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,this.mediaRequest_=null,this.refreshMedia_(e.id),t==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(u().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(t){u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const e=this.media();if(t){const i=e?e.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=u().setTimeout(()=>this.load(),i)}else this.started?e&&!e.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((t,e)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=u().setTimeout(()=>this.haveMain_(),0)}requestMain_(t){const e={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,n)=>{if(i){const{requestType:a}=n;i.metadata=ar({requestType:a,request:n,error:i})}if(this.requestErrored_(i,n))return void(this.state==="HAVE_NOTHING"&&(this.started=!1));this.trigger({type:"manifestrequestcomplete",metadata:e});const r=n.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Ha(this.mainPlaylistLoader_.srcUrl,n),r?(this.handleMain_(),void this.syncClientServerClock_(()=>t(n,r))):t(n,r)})}syncClientServerClock_(t){const e=(i=this.mainPlaylistLoader_.mainXml_,(n=>{const r=Ne(n,"UTCTiming")[0];if(!r)return null;const a=si(r);switch(a.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":a.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":a.method="DIRECT",a.value=Date.parse(a.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return a})(Xn(i)));var i;return e===null?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()):e.method==="DIRECT"?(this.mainPlaylistLoader_.clientOffset_=e.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:Ss(this.mainPlaylistLoader_.srcUrl,e.value),method:e.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(n,r)=>{if(!this.request)return;if(n){const{requestType:c}=r;return this.error.metadata=ar({requestType:c,request:r,error:n}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()}let a;a=e.method==="HEAD"?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):this.mainLoaded_:Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=a-Date.now(),t()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const t=this.mainPlaylistLoader_.main,e={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let i;this.trigger({type:"manifestparsestart",metadata:e});try{i=(({mainXml:r,srcUrl:a,clientOffset:c,sidxMapping:p,previousManifest:v})=>{const _=((L,k={})=>{const A=((z,lt={})=>{const{manifestUri:st="",NOW:mt=Date.now(),clientOffset:yt=0,eventHandler:Lt=function(){}}=lt,wt=Ne(z,"Period");if(!wt.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const ht=Ne(z,"Location"),St=si(z),qt=ts([{baseUrl:st}],Ne(z,"BaseURL")),ve=Ne(z,"ContentSteering");St.type=St.type||"static",St.sourceDuration=St.mediaPresentationDuration||0,St.NOW=mt,St.clientOffset=yt,ht.length&&(St.locations=ht.map(Ri));const ye=[];return wt.forEach((ne,xe)=>{const oe=si(ne),Ze=ye[xe-1];oe.start=(({attributes:ri,priorPeriodAttributes:qe,mpdType:De})=>typeof ri.start=="number"?ri.start:qe&&typeof qe.start=="number"&&typeof qe.duration=="number"?qe.start+qe.duration:qe||De!=="static"?null:0)({attributes:oe,priorPeriodAttributes:Ze?Ze.attributes:null,mpdType:St.type}),ye.push({node:ne,attributes:oe})}),{locations:St.locations,contentSteeringInfo:bn(ve,Lt),representationInfo:ft(ye.map(Cs(St,qt))),eventStream:ft(ye.map(Ys))}})(Xn(L),k),tt=A.representationInfo.map(Ci);return N({dashPlaylists:tt,locations:A.locations,contentSteering:A.contentSteeringInfo,sidxMapping:k.sidxMapping,previousManifest:k.previousManifest,eventStream:A.eventStream})})(r,{manifestUri:a,clientOffset:c,sidxMapping:p,previousManifest:v});return Ru(_,a,ip),_})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t})}catch(r){this.error=r,this.error.metadata={errorType:_t.Error.StreamingDashManifestParserError,error:r},this.trigger("error")}t&&(i=((r,a,c)=>{let p=!0,v=_i(r,{duration:a.duration,minimumUpdatePeriod:a.minimumUpdatePeriod,timelineStarts:a.timelineStarts});for(let _=0;_<a.playlists.length;_++){const L=a.playlists[_];if(L.sidx){const A=Ht(L.sidx);c&&c[A]&&c[A].sidx&&$e(L,c[A].sidx,L.sidx.resolvedUri)}const k=_l(v,L,Wu);k&&(v=k,p=!1)}return Pr(a,(_,L,k,A)=>{if(_.playlists&&_.playlists.length){const tt=_.playlists[0].id,z=_l(v,_.playlists[0],Wu);z&&(v=z,A in v.mediaGroups[L][k]||(v.mediaGroups[L][k][A]=_),v.mediaGroups[L][k][A].playlists[0]=v.playlists[tt],p=!1)}}),((_,L)=>{Pr(_,(k,A,tt,z)=>{z in L.mediaGroups[A][tt]||delete _.mediaGroups[A][tt][z]})})(v,a),a.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(p=!1),p?null:v})(t,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||t;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!t||i&&i.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:r,endList:a}=i,c=[];i.playlists.forEach(v=>{c.push({id:v.id,bandwidth:v.attributes.BANDWIDTH,resolution:v.attributes.RESOLUTION,codecs:v.attributes.CODECS})});const p={duration:r,isLive:!a,renditions:c};e.parsedManifest=p,this.trigger({type:"manifestparsecomplete",metadata:e})}return!!i}updateMinimumUpdatePeriodTimeout_(){const t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(u().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let e=t.main&&t.main.minimumUpdatePeriod;e===0&&(t.media()?e=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof e!="number"||e<=0?e<0&&this.logger_(`found invalid minimumUpdatePeriod of ${e}, not setting a timeout`):this.createMUPTimeout_(e)}createMUPTimeout_(t){const e=this.mainPlaylistLoader_;e.minimumUpdatePeriodTimeout_=u().setTimeout(()=>{e.minimumUpdatePeriodTimeout_=null,e.trigger("minimumUpdatePeriod"),e.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,e)=>{e&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((i,n)=>{let r=Gu(i.playlists,n);return Pr(i,(a,c,p,v)=>{if(a.playlists&&a.playlists.length){const _=a.playlists;r=_i(r,Gu(_,n))}}),r})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const e=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==e[t];if(i?this.media_=e[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const n=()=>{this.media().endList||(this.mediaUpdateTimeout=u().setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},vl(this.media(),!!i)))};n()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(t){if(t&&this.mainPlaylistLoader_.main.eventStream){const e=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",e,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(t){if(t.contentProtection){const e=new Set;for(const i in t.contentProtection){const n=t.contentProtection[i].attributes["cenc:default_KID"];n&&e.add(n.replace(/-/g,"").toLowerCase())}return e}}}var es={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Xu=function(s){return s.on=s.addEventListener,s.off=s.removeEventListener,s},Yu=function(s){return function(){const t=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{const a=new BlobBuilder;return a.append(n),URL.createObjectURL(a.getBlob())}}(s),e=Xu(new Worker(t));e.objURL=t;const i=e.terminate;return e.on=e.addEventListener,e.off=e.removeEventListener,e.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},e}},Ku=function(s){return`var browserWorkerPolyFill = ${Xu.toString()};
browserWorkerPolyFill(self);
`+s},Qu=function(s){return s.toString().replace(/^function.+?{/,"").slice(0,-1)},np=Ku(Qu(function(){var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:l.g!==void 0?l.g:typeof self<"u"?self:{},t=function(){this.init=function(){var o={};this.on=function(h,f){o[h]||(o[h]=[]),o[h]=o[h].concat(f)},this.off=function(h,f){var d;return!!o[h]&&(d=o[h].indexOf(f),o[h]=o[h].slice(),o[h].splice(d,1),d>-1)},this.trigger=function(h){var f,d,S,x;if(f=o[h])if(arguments.length===2)for(S=f.length,d=0;d<S;++d)f[d].call(this,arguments[1]);else{for(x=[],d=arguments.length,d=1;d<arguments.length;++d)x.push(arguments[d]);for(S=f.length,d=0;d<S;++d)f[d].apply(this,x)}},this.dispose=function(){o={}}}};t.prototype.pipe=function(o){return this.on("data",function(h){o.push(h)}),this.on("done",function(h){o.flush(h)}),this.on("partialdone",function(h){o.partialFlush(h)}),this.on("endedtimeline",function(h){o.endTimeline(h)}),this.on("reset",function(h){o.reset(h)}),o},t.prototype.push=function(o){this.trigger("data",o)},t.prototype.flush=function(o){this.trigger("done",o)},t.prototype.partialFlush=function(o){this.trigger("partialdone",o)},t.prototype.endTimeline=function(o){this.trigger("endedtimeline",o)},t.prototype.reset=function(o){this.trigger("reset",o)};var e,i,n,r,a,c,p,v,_,L,k,A,tt,z,lt,st,mt,yt,Lt,wt,ht,St,qt,ve,ye,ne,xe,oe,Ze,ri,qe,De,bi,Qi,fn,sn,js,lr,Gs,Vi,nn=t,Nr=Math.pow(2,32),ls={getUint64:function(o){var h,f=new DataView(o.buffer,o.byteOffset,o.byteLength);return f.getBigUint64?(h=f.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(h):h:f.getUint32(0)*Nr+f.getUint32(4)},MAX_UINT32:Nr},Ja=ls.MAX_UINT32;(function(){var o;if(St={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array<"u"){for(o in St)St.hasOwnProperty(o)&&(St[o]=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)]);qt=new Uint8Array([105,115,111,109]),ye=new Uint8Array([97,118,99,49]),ve=new Uint8Array([0,0,0,1]),ne=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),xe=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oe={video:ne,audio:xe},qe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ri=new Uint8Array([0,0,0,0,0,0,0,0]),De=new Uint8Array([0,0,0,0,0,0,0,0]),bi=De,Qi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),fn=De,Ze=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),e=function(o){var h,f,d=[],S=0;for(h=1;h<arguments.length;h++)d.push(arguments[h]);for(h=d.length;h--;)S+=d[h].byteLength;for(f=new Uint8Array(S+8),new DataView(f.buffer,f.byteOffset,f.byteLength).setUint32(0,f.byteLength),f.set(o,4),h=0,S=8;h<d.length;h++)f.set(d[h],S),S+=d[h].byteLength;return f},i=function(){return e(St.dinf,e(St.dref,qe))},n=function(o){return e(St.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,o.audioobjecttype<<3|o.samplingfrequencyindex>>>1,o.samplingfrequencyindex<<7|o.channelcount<<3,6,1,2]))},lt=function(o){return e(St.hdlr,oe[o])},z=function(o){var h=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,o.duration>>>24&255,o.duration>>>16&255,o.duration>>>8&255,255&o.duration,85,196,0,0]);return o.samplerate&&(h[12]=o.samplerate>>>24&255,h[13]=o.samplerate>>>16&255,h[14]=o.samplerate>>>8&255,h[15]=255&o.samplerate),e(St.mdhd,h)},tt=function(o){return e(St.mdia,z(o),lt(o.type),c(o))},a=function(o){return e(St.mfhd,new Uint8Array([0,0,0,0,(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o]))},c=function(o){return e(St.minf,o.type==="video"?e(St.vmhd,Ze):e(St.smhd,ri),i(),mt(o))},p=function(o,h){for(var f=[],d=h.length;d--;)f[d]=Lt(h[d]);return e.apply(null,[St.moof,a(o)].concat(f))},v=function(o){for(var h=o.length,f=[];h--;)f[h]=k(o[h]);return e.apply(null,[St.moov,L(4294967295)].concat(f).concat(_(o)))},_=function(o){for(var h=o.length,f=[];h--;)f[h]=wt(o[h]);return e.apply(null,[St.mvex].concat(f))},L=function(o){var h=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(St.mvhd,h)},st=function(o){var h,f,d=o.samples||[],S=new Uint8Array(4+d.length);for(f=0;f<d.length;f++)h=d[f].flags,S[f+4]=h.dependsOn<<4|h.isDependedOn<<2|h.hasRedundancy;return e(St.sdtp,S)},mt=function(o){return e(St.stbl,yt(o),e(St.stts,fn),e(St.stsc,bi),e(St.stsz,Qi),e(St.stco,De))},yt=function(o){return e(St.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),o.type==="video"?sn(o):js(o))},sn=function(o){var h,f,d=o.sps||[],S=o.pps||[],x=[],M=[];for(h=0;h<d.length;h++)x.push((65280&d[h].byteLength)>>>8),x.push(255&d[h].byteLength),x=x.concat(Array.prototype.slice.call(d[h]));for(h=0;h<S.length;h++)M.push((65280&S[h].byteLength)>>>8),M.push(255&S[h].byteLength),M=M.concat(Array.prototype.slice.call(S[h]));if(f=[St.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&o.width)>>8,255&o.width,(65280&o.height)>>8,255&o.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(St.avcC,new Uint8Array([1,o.profileIdc,o.profileCompatibility,o.levelIdc,255].concat([d.length],x,[S.length],M))),e(St.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],o.sarRatio){var G=o.sarRatio[0],V=o.sarRatio[1];f.push(e(St.pasp,new Uint8Array([(4278190080&G)>>24,(16711680&G)>>16,(65280&G)>>8,255&G,(4278190080&V)>>24,(16711680&V)>>16,(65280&V)>>8,255&V])))}return e.apply(null,f)},js=function(o){return e(St.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&o.channelcount)>>8,255&o.channelcount,(65280&o.samplesize)>>8,255&o.samplesize,0,0,0,0,(65280&o.samplerate)>>8,255&o.samplerate,0,0]),n(o))},A=function(o){var h=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&o.id)>>24,(16711680&o.id)>>16,(65280&o.id)>>8,255&o.id,0,0,0,0,(4278190080&o.duration)>>24,(16711680&o.duration)>>16,(65280&o.duration)>>8,255&o.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&o.width)>>8,255&o.width,0,0,(65280&o.height)>>8,255&o.height,0,0]);return e(St.tkhd,h)},Lt=function(o){var h,f,d,S,x,M;return h=e(St.tfhd,new Uint8Array([0,0,0,58,(4278190080&o.id)>>24,(16711680&o.id)>>16,(65280&o.id)>>8,255&o.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),x=Math.floor(o.baseMediaDecodeTime/Ja),M=Math.floor(o.baseMediaDecodeTime%Ja),f=e(St.tfdt,new Uint8Array([1,0,0,0,x>>>24&255,x>>>16&255,x>>>8&255,255&x,M>>>24&255,M>>>16&255,M>>>8&255,255&M])),o.type==="audio"?(d=ht(o,92),e(St.traf,h,f,d)):(S=st(o),d=ht(o,S.length+92),e(St.traf,h,f,d,S))},k=function(o){return o.duration=o.duration||4294967295,e(St.trak,A(o),tt(o))},wt=function(o){var h=new Uint8Array([0,0,0,0,(4278190080&o.id)>>24,(16711680&o.id)>>16,(65280&o.id)>>8,255&o.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return o.type!=="video"&&(h[h.length-1]=0),e(St.trex,h)},Vi=function(o,h){var f=0,d=0,S=0,x=0;return o.length&&(o[0].duration!==void 0&&(f=1),o[0].size!==void 0&&(d=2),o[0].flags!==void 0&&(S=4),o[0].compositionTimeOffset!==void 0&&(x=8)),[0,0,f|d|S|x,1,(4278190080&o.length)>>>24,(16711680&o.length)>>>16,(65280&o.length)>>>8,255&o.length,(4278190080&h)>>>24,(16711680&h)>>>16,(65280&h)>>>8,255&h]},Gs=function(o,h){var f,d,S,x,M,G;for(h+=20+16*(x=o.samples||[]).length,S=Vi(x,h),(d=new Uint8Array(S.length+16*x.length)).set(S),f=S.length,G=0;G<x.length;G++)M=x[G],d[f++]=(4278190080&M.duration)>>>24,d[f++]=(16711680&M.duration)>>>16,d[f++]=(65280&M.duration)>>>8,d[f++]=255&M.duration,d[f++]=(4278190080&M.size)>>>24,d[f++]=(16711680&M.size)>>>16,d[f++]=(65280&M.size)>>>8,d[f++]=255&M.size,d[f++]=M.flags.isLeading<<2|M.flags.dependsOn,d[f++]=M.flags.isDependedOn<<6|M.flags.hasRedundancy<<4|M.flags.paddingValue<<1|M.flags.isNonSyncSample,d[f++]=61440&M.flags.degradationPriority,d[f++]=15&M.flags.degradationPriority,d[f++]=(4278190080&M.compositionTimeOffset)>>>24,d[f++]=(16711680&M.compositionTimeOffset)>>>16,d[f++]=(65280&M.compositionTimeOffset)>>>8,d[f++]=255&M.compositionTimeOffset;return e(St.trun,d)},lr=function(o,h){var f,d,S,x,M,G;for(h+=20+8*(x=o.samples||[]).length,S=Vi(x,h),(f=new Uint8Array(S.length+8*x.length)).set(S),d=S.length,G=0;G<x.length;G++)M=x[G],f[d++]=(4278190080&M.duration)>>>24,f[d++]=(16711680&M.duration)>>>16,f[d++]=(65280&M.duration)>>>8,f[d++]=255&M.duration,f[d++]=(4278190080&M.size)>>>24,f[d++]=(16711680&M.size)>>>16,f[d++]=(65280&M.size)>>>8,f[d++]=255&M.size;return e(St.trun,f)},ht=function(o,h){return o.type==="audio"?lr(o,h):Gs(o,h)};var aa,Za,to,oa,eo,io,so,no,ro={ftyp:r=function(){return e(St.ftyp,qt,ve,qt,ye)},mdat:function(o){return e(St.mdat,o)},moof:p,moov:v,initSegment:function(o){var h,f=r(),d=v(o);return(h=new Uint8Array(f.byteLength+d.byteLength)).set(f),h.set(d,f.byteLength),h}},ao=function(o,h){var f={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return f.dataOffset=h,f.compositionTimeOffset=o.pts-o.dts,f.duration=o.duration,f.size=4*o.length,f.size+=o.byteLength,o.keyFrame&&(f.flags.dependsOn=2,f.flags.isNonSyncSample=0),f},la={groupNalsIntoFrames:function(o){var h,f,d=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,d.byteLength=0,h=0;h<o.length;h++)(f=o[h]).nalUnitType==="access_unit_delimiter_rbsp"?(d.length&&(d.duration=f.dts-d.dts,S.byteLength+=d.byteLength,S.nalCount+=d.length,S.duration+=d.duration,S.push(d)),(d=[f]).byteLength=f.data.byteLength,d.pts=f.pts,d.dts=f.dts):(f.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(d.keyFrame=!0),d.duration=f.dts-d.dts,d.byteLength+=f.data.byteLength,d.push(f));return S.length&&(!d.duration||d.duration<=0)&&(d.duration=S[S.length-1].duration),S.byteLength+=d.byteLength,S.nalCount+=d.length,S.duration+=d.duration,S.push(d),S},groupFramesIntoGops:function(o){var h,f,d=[],S=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=o[0].pts,d.dts=o[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=o[0].pts,S.dts=o[0].dts,h=0;h<o.length;h++)(f=o[h]).keyFrame?(d.length&&(S.push(d),S.byteLength+=d.byteLength,S.nalCount+=d.nalCount,S.duration+=d.duration),(d=[f]).nalCount=f.length,d.byteLength=f.byteLength,d.pts=f.pts,d.dts=f.dts,d.duration=f.duration):(d.duration+=f.duration,d.nalCount+=f.length,d.byteLength+=f.byteLength,d.push(f));return S.length&&d.duration<=0&&(d.duration=S[S.length-1].duration),S.byteLength+=d.byteLength,S.nalCount+=d.nalCount,S.duration+=d.duration,S.push(d),S},extendFirstKeyFrame:function(o){var h;return!o[0][0].keyFrame&&o.length>1&&(h=o.shift(),o.byteLength-=h.byteLength,o.nalCount-=h.nalCount,o[0][0].dts=h.dts,o[0][0].pts=h.pts,o[0][0].duration+=h.duration),o},generateSampleTable:function(o,h){var f,d,S,x,M,G=h||0,V=[];for(f=0;f<o.length;f++)for(x=o[f],d=0;d<x.length;d++)M=x[d],G+=(S=ao(M,G)).size,V.push(S);return V},concatenateNalData:function(o){var h,f,d,S,x,M,G=0,V=o.byteLength,nt=o.nalCount,xt=new Uint8Array(V+4*nt),jt=new DataView(xt.buffer);for(h=0;h<o.length;h++)for(S=o[h],f=0;f<S.length;f++)for(x=S[f],d=0;d<x.length;d++)M=x[d],jt.setUint32(G,M.data.byteLength),G+=4,xt.set(M.data,G),G+=M.data.byteLength;return xt},generateSampleTableForFrame:function(o,h){var f,d=[];return f=ao(o,h||0),d.push(f),d},concatenateNalDataForFrame:function(o){var h,f,d=0,S=o.byteLength,x=o.length,M=new Uint8Array(S+4*x),G=new DataView(M.buffer);for(h=0;h<o.length;h++)f=o[h],G.setUint32(d,f.data.byteLength),d+=4,M.set(f.data,d),d+=f.data.byteLength;return M}},gn=[33,16,5,32,164,27],Ll=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ti=function(o){for(var h=[];o--;)h.push(0);return h},Dl=9e4;io=function(o,h){return Za(eo(o,h))},so=function(o,h){return to(oa(o),h)},no=function(o,h,f){return oa(f?o:o-h)};var Li={ONE_SECOND_IN_TS:Dl,secondsToVideoTs:Za=function(o){return o*Dl},secondsToAudioTs:to=function(o,h){return o*h},videoTsToSeconds:oa=function(o){return o/Dl},audioTsToSeconds:eo=function(o,h){return o/h},audioTsToVideoTs:io,videoTsToAudioTs:so,metadataTsToSeconds:no},oo=Li,jp={prefixWithSilence:function(o,h,f,d){var S,x,M,G,V,nt=0,xt=0,jt=0;if(h.length&&(S=oo.audioTsToVideoTs(o.baseMediaDecodeTime,o.samplerate),x=Math.ceil(oo.ONE_SECOND_IN_TS/(o.samplerate/1024)),f&&d&&(nt=S-Math.max(f,d),jt=(xt=Math.floor(nt/x))*x),!(xt<1||jt>oo.ONE_SECOND_IN_TS/2))){for((M=function(){if(!aa){var ie={96e3:[gn,[227,64],Ti(154),[56]],88200:[gn,[231],Ti(170),[56]],64e3:[gn,[248,192],Ti(240),[56]],48e3:[gn,[255,192],Ti(268),[55,148,128],Ti(54),[112]],44100:[gn,[255,192],Ti(268),[55,163,128],Ti(84),[112]],32e3:[gn,[255,192],Ti(268),[55,234],Ti(226),[112]],24e3:[gn,[255,192],Ti(268),[55,255,128],Ti(268),[111,112],Ti(126),[224]],16e3:[gn,[255,192],Ti(268),[55,255,128],Ti(268),[111,255],Ti(269),[223,108],Ti(195),[1,192]],12e3:[Ll,Ti(268),[3,127,248],Ti(268),[6,255,240],Ti(268),[13,255,224],Ti(268),[27,253,128],Ti(259),[56]],11025:[Ll,Ti(268),[3,127,248],Ti(268),[6,255,240],Ti(268),[13,255,224],Ti(268),[27,255,192],Ti(268),[55,175,128],Ti(108),[112]],8e3:[Ll,Ti(268),[3,121,16],Ti(47),[7]]};re=ie,aa=Object.keys(re).reduce(function(ti,ci){return ti[ci]=new Uint8Array(re[ci].reduce(function(li,wi){return li.concat(wi)},[])),ti},{})}var re;return aa}()[o.samplerate])||(M=h[0].data),G=0;G<xt;G++)V=h[0],h.splice(0,0,{data:M,dts:V.dts-x,pts:V.pts-x});return o.baseMediaDecodeTime-=Math.floor(oo.videoTsToAudioTs(jt,o.samplerate)),jt}},trimAdtsFramesByEarliestDts:function(o,h,f){return h.minSegmentDts>=f?o:(h.minSegmentDts=1/0,o.filter(function(d){return d.dts>=f&&(h.minSegmentDts=Math.min(h.minSegmentDts,d.dts),h.minSegmentPts=h.minSegmentDts,!0)}))},generateSampleTable:function(o){var h,f,d=[];for(h=0;h<o.length;h++)f=o[h],d.push({size:f.data.byteLength,duration:1024});return d},concatenateFrameData:function(o){var h,f,d=0,S=new Uint8Array(function(x){var M,G=0;for(M=0;M<x.length;M++)G+=x[M].data.byteLength;return G}(o));for(h=0;h<o.length;h++)f=o[h],S.set(f.data,d),d+=f.data.byteLength;return S}},Up=Li.ONE_SECOND_IN_TS,Bp={clearDtsInfo:function(o){delete o.minSegmentDts,delete o.maxSegmentDts,delete o.minSegmentPts,delete o.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(o,h){var f,d=o.minSegmentDts;return h||(d-=o.timelineStartInfo.dts),f=o.timelineStartInfo.baseMediaDecodeTime,f+=d,f=Math.max(0,f),o.type==="audio"&&(f*=o.samplerate/Up,f=Math.floor(f)),f},collectDtsInfo:function(o,h){typeof h.pts=="number"&&(o.timelineStartInfo.pts===void 0&&(o.timelineStartInfo.pts=h.pts),o.minSegmentPts===void 0?o.minSegmentPts=h.pts:o.minSegmentPts=Math.min(o.minSegmentPts,h.pts),o.maxSegmentPts===void 0?o.maxSegmentPts=h.pts:o.maxSegmentPts=Math.max(o.maxSegmentPts,h.pts)),typeof h.dts=="number"&&(o.timelineStartInfo.dts===void 0&&(o.timelineStartInfo.dts=h.dts),o.minSegmentDts===void 0?o.minSegmentDts=h.dts:o.minSegmentDts=Math.min(o.minSegmentDts,h.dts),o.maxSegmentDts===void 0?o.maxSegmentDts=h.dts:o.maxSegmentDts=Math.max(o.maxSegmentDts,h.dts))}},zh={parseSei:function(o){for(var h=0,f={payloadType:-1,payloadSize:0},d=0,S=0;h<o.byteLength&&o[h]!==128;){for(;o[h]===255;)d+=255,h++;for(d+=o[h++];o[h]===255;)S+=255,h++;if(S+=o[h++],!f.payload&&d===4){if(String.fromCharCode(o[h+3],o[h+4],o[h+5],o[h+6])==="GA94"){f.payloadType=d,f.payloadSize=S,f.payload=o.subarray(h,h+S);break}f.payload=void 0}h+=S,d=0,S=0}return f},parseUserData:function(o){return o.payload[0]!==181||(o.payload[1]<<8|o.payload[2])!=49||String.fromCharCode(o.payload[3],o.payload[4],o.payload[5],o.payload[6])!=="GA94"||o.payload[7]!==3?null:o.payload.subarray(8,o.payload.length-1)},parseCaptionPackets:function(o,h){var f,d,S,x,M=[];if(!(64&h[0]))return M;for(d=31&h[0],f=0;f<d;f++)x={type:3&h[2+(S=3*f)],pts:o},4&h[S+2]&&(x.ccData=h[S+3]<<8|h[S+4],M.push(x));return M},discardEmulationPreventionBytes:function(o){for(var h,f,d=o.byteLength,S=[],x=1;x<d-2;)o[x]===0&&o[x+1]===0&&o[x+2]===3?(S.push(x+2),x+=2):x++;if(S.length===0)return o;h=d-S.length,f=new Uint8Array(h);var M=0;for(x=0;x<h;M++,x++)M===S[0]&&(M++,S.shift()),f[x]=o[M];return f},USER_DATA_REGISTERED_ITU_T_T35:4},Rl=nn,lo=zh,Es=function(o){o=o||{},Es.prototype.init.call(this),this.parse708captions_=typeof o.parse708captions!="boolean"||o.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ji(0,0),new ji(0,1),new ji(1,0),new ji(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ei({captionServices:o.captionServices})),this.reset(),this.ccStreams_.forEach(function(h){h.on("data",this.trigger.bind(this,"data")),h.on("partialdone",this.trigger.bind(this,"partialdone")),h.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Es.prototype=new Rl,Es.prototype.push=function(o){var h,f,d;if(o.nalUnitType==="sei_rbsp"&&(h=lo.parseSei(o.escapedRBSP)).payload&&h.payloadType===lo.USER_DATA_REGISTERED_ITU_T_T35&&(f=lo.parseUserData(h)))if(o.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(o.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=lo.parseCaptionPackets(o.pts,f),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==o.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=o.dts}},Es.prototype.flushCCStreams=function(o){this.ccStreams_.forEach(function(h){return o==="flush"?h.flush():h.partialFlush()},this)},Es.prototype.flushStream=function(o){this.captionPackets_.length?(this.captionPackets_.forEach(function(h,f){h.presortIndex=f}),this.captionPackets_.sort(function(h,f){return h.pts===f.pts?h.presortIndex-f.presortIndex:h.pts-f.pts}),this.captionPackets_.forEach(function(h){h.type<2?this.dispatchCea608Packet(h):this.dispatchCea708Packet(h)},this),this.captionPackets_.length=0,this.flushCCStreams(o)):this.flushCCStreams(o)},Es.prototype.flush=function(){return this.flushStream("flush")},Es.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Es.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(o){o.reset()})},Es.prototype.dispatchCea608Packet=function(o){this.setsTextOrXDSActive(o)?this.activeCea608Channel_[o.type]=null:this.setsChannel1Active(o)?this.activeCea608Channel_[o.type]=0:this.setsChannel2Active(o)&&(this.activeCea608Channel_[o.type]=1),this.activeCea608Channel_[o.type]!==null&&this.ccStreams_[(o.type<<1)+this.activeCea608Channel_[o.type]].push(o)},Es.prototype.setsChannel1Active=function(o){return(30720&o.ccData)==4096},Es.prototype.setsChannel2Active=function(o){return(30720&o.ccData)==6144},Es.prototype.setsTextOrXDSActive=function(o){return(28928&o.ccData)==256||(30974&o.ccData)==4138||(30974&o.ccData)==6186},Es.prototype.dispatchCea708Packet=function(o){this.parse708captions_&&this.cc708Stream_.push(o)};var Fp={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},co=function(o){return 32<=o&&o<=127||160<=o&&o<=255},Nn=function(o){this.windowNum=o,this.reset()};Nn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Nn.prototype.getText=function(){return this.rows.join(`
`)},Nn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Nn.prototype.newLine=function(o){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(o),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Nn.prototype.isEmpty=function(){return this.rows.length===0||this.rows.length===1&&this.rows[0]===""},Nn.prototype.addText=function(o){this.rows[this.rowIdx]+=o},Nn.prototype.backspace=function(){if(!this.isEmpty()){var o=this.rows[this.rowIdx];this.rows[this.rowIdx]=o.substr(0,o.length-1)}};var uo=function(o,h,f){this.serviceNum=o,this.text="",this.currentWindow=new Nn(-1),this.windows=[],this.stream=f,typeof h=="string"&&this.createTextDecoder(h)};uo.prototype.init=function(o,h){this.startPts=o;for(var f=0;f<8;f++)this.windows[f]=new Nn(f),typeof h=="function"&&(this.windows[f].beforeRowOverflow=h)},uo.prototype.setCurrentWindow=function(o){this.currentWindow=this.windows[o]},uo.prototype.createTextDecoder=function(o){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(o)}catch(h){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+o+" encoding. "+h})}};var Ei=function(o){o=o||{},Ei.prototype.init.call(this);var h,f=this,d=o.captionServices||{},S={};Object.keys(d).forEach(x=>{h=d[x],/^SERVICE/.test(x)&&(S[x]=h.encoding)}),this.serviceEncodings=S,this.current708Packet=null,this.services={},this.push=function(x){x.type===3?(f.new708Packet(),f.add708Bytes(x)):(f.current708Packet===null&&f.new708Packet(),f.add708Bytes(x))}};Ei.prototype=new Rl,Ei.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ei.prototype.add708Bytes=function(o){var h=o.ccData,f=h>>>8,d=255&h;this.current708Packet.ptsVals.push(o.pts),this.current708Packet.data.push(f),this.current708Packet.data.push(d)},Ei.prototype.push708Packet=function(){var o=this.current708Packet,h=o.data,f=null,d=null,S=0,x=h[S++];for(o.seq=x>>6,o.sizeCode=63&x;S<h.length;S++)d=31&(x=h[S++]),(f=x>>5)==7&&d>0&&(f=x=h[S++]),this.pushServiceBlock(f,S,d),d>0&&(S+=d-1)},Ei.prototype.pushServiceBlock=function(o,h,f){var d,S=h,x=this.current708Packet.data,M=this.services[o];for(M||(M=this.initService(o,S));S<h+f&&S<x.length;S++)d=x[S],co(d)?S=this.handleText(S,M):d===24?S=this.multiByteCharacter(S,M):d===16?S=this.extendedCommands(S,M):128<=d&&d<=135?S=this.setCurrentWindow(S,M):152<=d&&d<=159?S=this.defineWindow(S,M):d===136?S=this.clearWindows(S,M):d===140?S=this.deleteWindows(S,M):d===137?S=this.displayWindows(S,M):d===138?S=this.hideWindows(S,M):d===139?S=this.toggleWindows(S,M):d===151?S=this.setWindowAttributes(S,M):d===144?S=this.setPenAttributes(S,M):d===145?S=this.setPenColor(S,M):d===146?S=this.setPenLocation(S,M):d===143?M=this.reset(S,M):d===8?M.currentWindow.backspace():d===12?M.currentWindow.clearText():d===13?M.currentWindow.pendingNewLine=!0:d===14?M.currentWindow.clearText():d===141&&S++},Ei.prototype.extendedCommands=function(o,h){var f=this.current708Packet.data[++o];return co(f)&&(o=this.handleText(o,h,{isExtended:!0})),o},Ei.prototype.getPts=function(o){return this.current708Packet.ptsVals[Math.floor(o/2)]},Ei.prototype.initService=function(o,h){var f,d,S=this;return(f="SERVICE"+o)in this.serviceEncodings&&(d=this.serviceEncodings[f]),this.services[o]=new uo(o,d,S),this.services[o].init(this.getPts(h),function(x){S.flushDisplayed(x,S.services[o])}),this.services[o]},Ei.prototype.handleText=function(o,h,f){var d,S,x,M,G=f&&f.isExtended,V=f&&f.isMultiByte,nt=this.current708Packet.data,xt=G?4096:0,jt=nt[o],ie=nt[o+1],re=h.currentWindow;if(V?(S=[jt,ie],o++):S=[jt],h.textDecoder_&&!G)d=h.textDecoder_.decode(new Uint8Array(S));else if(V){const ti=S.map(ci=>("0"+(255&ci).toString(16)).slice(-2)).join("");d=String.fromCharCode(parseInt(ti,16))}else M=Fp[x=xt|jt]||x,d=4096&x&&x===M?"":String.fromCharCode(M);return re.pendingNewLine&&!re.isEmpty()&&re.newLine(this.getPts(o)),re.pendingNewLine=!1,re.addText(d),o},Ei.prototype.multiByteCharacter=function(o,h){var f=this.current708Packet.data,d=f[o+1],S=f[o+2];return co(d)&&co(S)&&(o=this.handleText(++o,h,{isMultiByte:!0})),o},Ei.prototype.setCurrentWindow=function(o,h){var f=7&this.current708Packet.data[o];return h.setCurrentWindow(f),o},Ei.prototype.defineWindow=function(o,h){var f=this.current708Packet.data,d=f[o],S=7&d;h.setCurrentWindow(S);var x=h.currentWindow;return d=f[++o],x.visible=(32&d)>>5,x.rowLock=(16&d)>>4,x.columnLock=(8&d)>>3,x.priority=7&d,d=f[++o],x.relativePositioning=(128&d)>>7,x.anchorVertical=127&d,d=f[++o],x.anchorHorizontal=d,d=f[++o],x.anchorPoint=(240&d)>>4,x.rowCount=15&d,d=f[++o],x.columnCount=63&d,d=f[++o],x.windowStyle=(56&d)>>3,x.penStyle=7&d,x.virtualRowCount=x.rowCount+1,o},Ei.prototype.setWindowAttributes=function(o,h){var f=this.current708Packet.data,d=f[o],S=h.currentWindow.winAttr;return d=f[++o],S.fillOpacity=(192&d)>>6,S.fillRed=(48&d)>>4,S.fillGreen=(12&d)>>2,S.fillBlue=3&d,d=f[++o],S.borderType=(192&d)>>6,S.borderRed=(48&d)>>4,S.borderGreen=(12&d)>>2,S.borderBlue=3&d,d=f[++o],S.borderType+=(128&d)>>5,S.wordWrap=(64&d)>>6,S.printDirection=(48&d)>>4,S.scrollDirection=(12&d)>>2,S.justify=3&d,d=f[++o],S.effectSpeed=(240&d)>>4,S.effectDirection=(12&d)>>2,S.displayEffect=3&d,o},Ei.prototype.flushDisplayed=function(o,h){for(var f=[],d=0;d<8;d++)h.windows[d].visible&&!h.windows[d].isEmpty()&&f.push(h.windows[d].getText());h.endPts=o,h.text=f.join(`

`),this.pushCaption(h),h.startPts=o},Ei.prototype.pushCaption=function(o){o.text!==""&&(this.trigger("data",{startPts:o.startPts,endPts:o.endPts,text:o.text,stream:"cc708_"+o.serviceNum}),o.text="",o.startPts=o.endPts)},Ei.prototype.displayWindows=function(o,h){var f=this.current708Packet.data[++o],d=this.getPts(o);this.flushDisplayed(d,h);for(var S=0;S<8;S++)f&1<<S&&(h.windows[S].visible=1);return o},Ei.prototype.hideWindows=function(o,h){var f=this.current708Packet.data[++o],d=this.getPts(o);this.flushDisplayed(d,h);for(var S=0;S<8;S++)f&1<<S&&(h.windows[S].visible=0);return o},Ei.prototype.toggleWindows=function(o,h){var f=this.current708Packet.data[++o],d=this.getPts(o);this.flushDisplayed(d,h);for(var S=0;S<8;S++)f&1<<S&&(h.windows[S].visible^=1);return o},Ei.prototype.clearWindows=function(o,h){var f=this.current708Packet.data[++o],d=this.getPts(o);this.flushDisplayed(d,h);for(var S=0;S<8;S++)f&1<<S&&h.windows[S].clearText();return o},Ei.prototype.deleteWindows=function(o,h){var f=this.current708Packet.data[++o],d=this.getPts(o);this.flushDisplayed(d,h);for(var S=0;S<8;S++)f&1<<S&&h.windows[S].reset();return o},Ei.prototype.setPenAttributes=function(o,h){var f=this.current708Packet.data,d=f[o],S=h.currentWindow.penAttr;return d=f[++o],S.textTag=(240&d)>>4,S.offset=(12&d)>>2,S.penSize=3&d,d=f[++o],S.italics=(128&d)>>7,S.underline=(64&d)>>6,S.edgeType=(56&d)>>3,S.fontStyle=7&d,o},Ei.prototype.setPenColor=function(o,h){var f=this.current708Packet.data,d=f[o],S=h.currentWindow.penColor;return d=f[++o],S.fgOpacity=(192&d)>>6,S.fgRed=(48&d)>>4,S.fgGreen=(12&d)>>2,S.fgBlue=3&d,d=f[++o],S.bgOpacity=(192&d)>>6,S.bgRed=(48&d)>>4,S.bgGreen=(12&d)>>2,S.bgBlue=3&d,d=f[++o],S.edgeRed=(48&d)>>4,S.edgeGreen=(12&d)>>2,S.edgeBlue=3&d,o},Ei.prototype.setPenLocation=function(o,h){var f=this.current708Packet.data,d=f[o],S=h.currentWindow.penLoc;return h.currentWindow.pendingNewLine=!0,d=f[++o],S.row=15&d,d=f[++o],S.column=63&d,o},Ei.prototype.reset=function(o,h){var f=this.getPts(o);return this.flushDisplayed(f,h),this.initService(h.serviceNum,o)};var qp={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ho=function(o){return o===null?"":(o=qp[o]||o,String.fromCharCode(o))},$p=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],cr=function(){for(var o=[],h=15;h--;)o.push({text:"",indent:0,offset:0});return o},ji=function(o,h){ji.prototype.init.call(this),this.field_=o||0,this.dataChannel_=h||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(f){var d,S,x,M,G;if((d=32639&f.ccData)!==this.lastControlCode_){if((61440&d)==4096?this.lastControlCode_=d:d!==this.PADDING_&&(this.lastControlCode_=null),x=d>>>8,M=255&d,d!==this.PADDING_)if(d===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(d===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(f.pts),this.flushDisplayed(f.pts),S=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=S,this.startPts_=f.pts;else if(d===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(f.pts);else if(d===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(f.pts);else if(d===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(f.pts);else if(d===this.CARRIAGE_RETURN_)this.clearFormatting(f.pts),this.flushDisplayed(f.pts),this.shiftRowsUp_(),this.startPts_=f.pts;else if(d===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(d===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(f.pts),this.displayed_=cr();else if(d===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=cr();else if(d===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(f.pts),this.displayed_=cr()),this.mode_="paintOn",this.startPts_=f.pts;else if(this.isSpecialCharacter(x,M))G=ho((x=(3&x)<<8)|M),this[this.mode_](f.pts,G),this.column_++;else if(this.isExtCharacter(x,M))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),G=ho((x=(3&x)<<8)|M),this[this.mode_](f.pts,G),this.column_++;else if(this.isMidRowCode(x,M))this.clearFormatting(f.pts),this[this.mode_](f.pts," "),this.column_++,14&~M||this.addFormatting(f.pts,["i"]),1&~M||this.addFormatting(f.pts,["u"]);else if(this.isOffsetControlCode(x,M)){const nt=3&M;this.nonDisplayed_[this.row_].offset=nt,this.column_+=nt}else if(this.isPAC(x,M)){var V=$p.indexOf(7968&d);if(this.mode_==="rollUp"&&(V-this.rollUpRows_+1<0&&(V=this.rollUpRows_-1),this.setRollUp(f.pts,V)),V!==this.row_&&V>=0&&V<=14&&(this.clearFormatting(f.pts),this.row_=V),1&M&&this.formatting_.indexOf("u")===-1&&this.addFormatting(f.pts,["u"]),!(16&~d)){const nt=(14&d)>>1;this.column_=4*nt,this.nonDisplayed_[this.row_].indent+=nt}this.isColorPAC(M)&&(14&~M||this.addFormatting(f.pts,["i"]))}else this.isNormalChar(x)&&(M===0&&(M=null),G=ho(x),G+=ho(M),this[this.mode_](f.pts,G),this.column_+=G.length)}else this.lastControlCode_=null}};ji.prototype=new Rl,ji.prototype.flushDisplayed=function(o){const h=d=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+d+"."})},f=[];this.displayed_.forEach((d,S)=>{if(d&&d.text&&d.text.length){try{d.text=d.text.trim()}catch{h(S)}d.text.length&&f.push({text:d.text,line:S+1,position:10+Math.min(70,10*d.indent)+2.5*d.offset})}else d==null&&h(S)}),f.length&&this.trigger("data",{startPts:this.startPts_,endPts:o,content:f,stream:this.name_})},ji.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=cr(),this.nonDisplayed_=cr(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ji.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ji.prototype.isSpecialCharacter=function(o,h){return o===this.EXT_&&h>=48&&h<=63},ji.prototype.isExtCharacter=function(o,h){return(o===this.EXT_+1||o===this.EXT_+2)&&h>=32&&h<=63},ji.prototype.isMidRowCode=function(o,h){return o===this.EXT_&&h>=32&&h<=47},ji.prototype.isOffsetControlCode=function(o,h){return o===this.OFFSET_&&h>=33&&h<=35},ji.prototype.isPAC=function(o,h){return o>=this.BASE_&&o<this.BASE_+8&&h>=64&&h<=127},ji.prototype.isColorPAC=function(o){return o>=64&&o<=79||o>=96&&o<=127},ji.prototype.isNormalChar=function(o){return o>=32&&o<=127},ji.prototype.setRollUp=function(o,h){if(this.mode_!=="rollUp"&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(o),this.nonDisplayed_=cr(),this.displayed_=cr()),h!==void 0&&h!==this.row_)for(var f=0;f<this.rollUpRows_;f++)this.displayed_[h-f]=this.displayed_[this.row_-f],this.displayed_[this.row_-f]={text:"",indent:0,offset:0};h===void 0&&(h=this.row_),this.topRow_=h-this.rollUpRows_+1},ji.prototype.addFormatting=function(o,h){this.formatting_=this.formatting_.concat(h);var f=h.reduce(function(d,S){return d+"<"+S+">"},"");this[this.mode_](o,f)},ji.prototype.clearFormatting=function(o){if(this.formatting_.length){var h=this.formatting_.reverse().reduce(function(f,d){return f+"</"+d+">"},"");this.formatting_=[],this[this.mode_](o,h)}},ji.prototype.popOn=function(o,h){var f=this.nonDisplayed_[this.row_].text;f+=h,this.nonDisplayed_[this.row_].text=f},ji.prototype.rollUp=function(o,h){var f=this.displayed_[this.row_].text;f+=h,this.displayed_[this.row_].text=f},ji.prototype.shiftRowsUp_=function(){var o;for(o=0;o<this.topRow_;o++)this.displayed_[o]={text:"",indent:0,offset:0};for(o=this.row_+1;o<15;o++)this.displayed_[o]={text:"",indent:0,offset:0};for(o=this.topRow_;o<this.row_;o++)this.displayed_[o]=this.displayed_[o+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},ji.prototype.paintOn=function(o,h){var f=this.displayed_[this.row_].text;f+=h,this.displayed_[this.row_].text=f};var Wh={CaptionStream:Es,Cea608Stream:ji,Cea708Stream:Ei},po={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Hp=nn,Gh="shared",Nl=function(o,h){var f=1;for(o>h&&(f=-1);Math.abs(h-o)>4294967296;)o+=8589934592*f;return o},Ml=function(o){var h,f;Ml.prototype.init.call(this),this.type_=o||Gh,this.push=function(d){d.type!=="metadata"?this.type_!==Gh&&d.type!==this.type_||(f===void 0&&(f=d.dts),d.dts=Nl(d.dts,f),d.pts=Nl(d.pts,f),h=d.dts,this.trigger("data",d)):this.trigger("data",d)},this.flush=function(){f=h,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){f=void 0,h=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ml.prototype=new Hp;var jl,Xh={TimestampRolloverStream:Ml,handleRollover:Nl},mo=(o,h,f)=>{if(!o)return-1;for(var d=f;d<o.length;d++)if(o[d]===h)return d;return-1},Yh=function(o,h,f){var d,S="";for(d=h;d<f;d++)S+="%"+("00"+o[d].toString(16)).slice(-2);return S},ca=function(o,h,f){return decodeURIComponent(Yh(o,h,f))},ua=function(o,h,f){return unescape(Yh(o,h,f))},ha=function(o){return o[0]<<21|o[1]<<14|o[2]<<7|o[3]},da={APIC:function(o){var h,f,d=1;o.data[0]===3&&((h=mo(o.data,0,d))<0||(o.mimeType=ua(o.data,d,h),d=h+1,o.pictureType=o.data[d],d++,(f=mo(o.data,0,d))<0||(o.description=ca(o.data,d,f),d=f+1,o.mimeType==="-->"?o.url=ua(o.data,d,o.data.length):o.pictureData=o.data.subarray(d,o.data.length))))},"T*":function(o){o.data[0]===3&&(o.value=ca(o.data,1,o.data.length).replace(/\0*$/,""),o.values=o.value.split("\0"))},TXXX:function(o){var h;o.data[0]===3&&(h=mo(o.data,0,1))!==-1&&(o.description=ca(o.data,1,h),o.value=ca(o.data,h+1,o.data.length).replace(/\0*$/,""),o.data=o.value)},"W*":function(o){o.url=ua(o.data,0,o.data.length).replace(/\0.*$/,"")},WXXX:function(o){var h;o.data[0]===3&&(h=mo(o.data,0,1))!==-1&&(o.description=ca(o.data,1,h),o.url=ua(o.data,h+1,o.data.length).replace(/\0.*$/,""))},PRIV:function(o){var h;for(h=0;h<o.data.length;h++)if(o.data[h]===0){o.owner=ua(o.data,0,h);break}o.privateData=o.data.subarray(h+1),o.data=o.privateData}},Kh={parseId3Frames:function(o){var h,f=10,d=0,S=[];if(!(o.length<10||o[0]!==73||o[1]!==68||o[2]!==51)){d=ha(o.subarray(6,10)),d+=10,64&o[5]&&(f+=4,f+=ha(o.subarray(10,14)),d-=ha(o.subarray(16,20)));do{if((h=ha(o.subarray(f+4,f+8)))<1)break;var x={id:String.fromCharCode(o[f],o[f+1],o[f+2],o[f+3]),data:o.subarray(f+10,f+h+10)};x.key=x.id,da[x.id]?da[x.id](x):x.id[0]==="T"?da["T*"](x):x.id[0]==="W"&&da["W*"](x),S.push(x),f+=10,f+=h}while(f<d);return S}},parseSyncSafeInteger:ha,frameParsers:da},Vp=po,Vn=Kh;(jl=function(o){var h,f={descriptor:o&&o.descriptor},d=0,S=[],x=0;if(jl.prototype.init.call(this),this.dispatchType=Vp.METADATA_STREAM_TYPE.toString(16),f.descriptor)for(h=0;h<f.descriptor.length;h++)this.dispatchType+=("00"+f.descriptor[h].toString(16)).slice(-2);this.push=function(M){var G,V,nt,xt,jt;if(M.type==="timed-metadata"){if(M.dataAlignmentIndicator&&(x=0,S.length=0),S.length===0&&(M.data.length<10||M.data[0]!==73||M.data[1]!==68||M.data[2]!==51))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(S.push(M),x+=M.data.byteLength,S.length===1&&(d=Vn.parseSyncSafeInteger(M.data.subarray(6,10)),d+=10),!(x<d)){for(G={data:new Uint8Array(d),frames:[],pts:S[0].pts,dts:S[0].dts},jt=0;jt<d;)G.data.set(S[0].data.subarray(0,d-jt),jt),jt+=S[0].data.byteLength,x-=S[0].data.byteLength,S.shift();V=10,64&G.data[5]&&(V+=4,V+=Vn.parseSyncSafeInteger(G.data.subarray(10,14)),d-=Vn.parseSyncSafeInteger(G.data.subarray(16,20)));do{if((nt=Vn.parseSyncSafeInteger(G.data.subarray(V+4,V+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((xt={id:String.fromCharCode(G.data[V],G.data[V+1],G.data[V+2],G.data[V+3]),data:G.data.subarray(V+10,V+nt+10)}).key=xt.id,Vn.frameParsers[xt.id]?Vn.frameParsers[xt.id](xt):xt.id[0]==="T"?Vn.frameParsers["T*"](xt):xt.id[0]==="W"&&Vn.frameParsers["W*"](xt),xt.owner==="com.apple.streaming.transportStreamTimestamp"){var ie=xt.data,re=(1&ie[3])<<30|ie[4]<<22|ie[5]<<14|ie[6]<<6|ie[7]>>>2;re*=4,re+=3&ie[7],xt.timeStamp=re,G.pts===void 0&&G.dts===void 0&&(G.pts=xt.timeStamp,G.dts=xt.timeStamp),this.trigger("timestamp",xt)}G.frames.push(xt),V+=10,V+=nt}while(V<d);this.trigger("data",G)}}}}).prototype=new nn;var Ul,fo,go,zp=jl,Bl=nn,Fl=Wh,rn=po,Wp=Xh.TimestampRolloverStream,Mr=188;(Ul=function(){var o=new Uint8Array(Mr),h=0;Ul.prototype.init.call(this),this.push=function(f){var d,S=0,x=Mr;for(h?((d=new Uint8Array(f.byteLength+h)).set(o.subarray(0,h)),d.set(f,h),h=0):d=f;x<d.byteLength;)d[S]!==71||d[x]!==71?(S++,x++):(this.trigger("data",d.subarray(S,x)),S+=Mr,x+=Mr);S<d.byteLength&&(o.set(d.subarray(S),0),h=d.byteLength-S)},this.flush=function(){h===Mr&&o[0]===71&&(this.trigger("data",o),h=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){h=0,this.trigger("reset")}}).prototype=new Bl,(fo=function(){var o,h,f,d;fo.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,o=function(S,x){var M=0;x.payloadUnitStartIndicator&&(M+=S[M]+1),x.type==="pat"?h(S.subarray(M),x):f(S.subarray(M),x)},h=function(S,x){x.section_number=S[7],x.last_section_number=S[8],d.pmtPid=(31&S[10])<<8|S[11],x.pmtPid=d.pmtPid},f=function(S,x){var M,G;if(1&S[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},M=3+((15&S[1])<<8|S[2])-4,G=12+((15&S[10])<<8|S[11]);G<M;){var V=S[G],nt=(31&S[G+1])<<8|S[G+2];V===rn.H264_STREAM_TYPE&&d.programMapTable.video===null?d.programMapTable.video=nt:V===rn.ADTS_STREAM_TYPE&&d.programMapTable.audio===null?d.programMapTable.audio=nt:V===rn.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][nt]=V),G+=5+((15&S[G+3])<<8|S[G+4])}x.programMapTable=d.programMapTable}},this.push=function(S){var x={},M=4;if(x.payloadUnitStartIndicator=!!(64&S[1]),x.pid=31&S[1],x.pid<<=8,x.pid|=S[2],(48&S[3])>>>4>1&&(M+=S[M]+1),x.pid===0)x.type="pat",o(S.subarray(M),x),this.trigger("data",x);else if(x.pid===this.pmtPid)for(x.type="pmt",o(S.subarray(M),x),this.trigger("data",x);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([S,M,x]):this.processPes_(S,M,x)},this.processPes_=function(S,x,M){M.pid===this.programMapTable.video?M.streamType=rn.H264_STREAM_TYPE:M.pid===this.programMapTable.audio?M.streamType=rn.ADTS_STREAM_TYPE:M.streamType=this.programMapTable["timed-metadata"][M.pid],M.type="pes",M.data=S.subarray(x),this.trigger("data",M)}}).prototype=new Bl,fo.STREAM_TYPES={h264:27,adts:15},go=function(){var o,h=this,f=!1,d={data:[],size:0},S={data:[],size:0},x={data:[],size:0},M=function(G,V,nt){var xt,jt,ie=new Uint8Array(G.size),re={type:V},ti=0,ci=0;if(G.data.length&&!(G.size<9)){for(re.trackId=G.data[0].pid,ti=0;ti<G.data.length;ti++)jt=G.data[ti],ie.set(jt.data,ci),ci+=jt.data.byteLength;(function(li,wi){var on;const Br=li[0]<<16|li[1]<<8|li[2];wi.data=new Uint8Array,Br===1&&(wi.packetLength=6+(li[4]<<8|li[5]),wi.dataAlignmentIndicator=!!(4&li[6]),192&(on=li[7])&&(wi.pts=(14&li[9])<<27|(255&li[10])<<20|(254&li[11])<<12|(255&li[12])<<5|(254&li[13])>>>3,wi.pts*=4,wi.pts+=(6&li[13])>>>1,wi.dts=wi.pts,64&on&&(wi.dts=(14&li[14])<<27|(255&li[15])<<20|(254&li[16])<<12|(255&li[17])<<5|(254&li[18])>>>3,wi.dts*=4,wi.dts+=(6&li[18])>>>1)),wi.data=li.subarray(9+li[8]))})(ie,re),xt=V==="video"||re.packetLength<=G.size,(nt||xt)&&(G.size=0,G.data.length=0),xt&&h.trigger("data",re)}};go.prototype.init.call(this),this.push=function(G){({pat:function(){},pes:function(){var V,nt;switch(G.streamType){case rn.H264_STREAM_TYPE:V=d,nt="video";break;case rn.ADTS_STREAM_TYPE:V=S,nt="audio";break;case rn.METADATA_STREAM_TYPE:V=x,nt="timed-metadata";break;default:return}G.payloadUnitStartIndicator&&M(V,nt,!0),V.data.push(G),V.size+=G.data.byteLength},pmt:function(){var V={type:"metadata",tracks:[]};(o=G.programMapTable).video!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+o.video,codec:"avc",type:"video"}),o.audio!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+o.audio,codec:"adts",type:"audio"}),f=!0,h.trigger("data",V)}})[G.type]()},this.reset=function(){d.size=0,d.data.length=0,S.size=0,S.data.length=0,this.trigger("reset")},this.flushStreams_=function(){M(d,"video"),M(S,"audio"),M(x,"timed-metadata")},this.flush=function(){if(!f&&o){var G={type:"metadata",tracks:[]};o.video!==null&&G.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+o.video,codec:"avc",type:"video"}),o.audio!==null&&G.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+o.audio,codec:"adts",type:"audio"}),h.trigger("data",G)}f=!1,this.flushStreams_(),this.trigger("done")}},go.prototype=new Bl;var Qh={PAT_PID:0,MP2T_PACKET_LENGTH:Mr,TransportPacketStream:Ul,TransportParseStream:fo,ElementaryStream:go,TimestampRolloverStream:Wp,CaptionStream:Fl.CaptionStream,Cea608Stream:Fl.Cea608Stream,Cea708Stream:Fl.Cea708Stream,MetadataStream:zp};for(var ql in rn)rn.hasOwnProperty(ql)&&(Qh[ql]=rn[ql]);var $l,Gp=Qh,Xp=Li.ONE_SECOND_IN_TS,Jh=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];($l=function(o){var h,f=0;$l.prototype.init.call(this),this.skipWarn_=function(d,S){this.trigger("log",{level:"warn",message:`adts skiping bytes ${d} to ${S} in frame ${f} outside syncword`})},this.push=function(d){var S,x,M,G,V,nt=0;if(o||(f=0),d.type==="audio"){var xt;for(h&&h.length?(M=h,(h=new Uint8Array(M.byteLength+d.data.byteLength)).set(M),h.set(d.data,M.byteLength)):h=d.data;nt+7<h.length;)if(h[nt]===255&&(246&h[nt+1])==240){if(typeof xt=="number"&&(this.skipWarn_(xt,nt),xt=null),x=2*(1&~h[nt+1]),S=(3&h[nt+3])<<11|h[nt+4]<<3|(224&h[nt+5])>>5,V=(G=1024*(1+(3&h[nt+6])))*Xp/Jh[(60&h[nt+2])>>>2],h.byteLength-nt<S)break;this.trigger("data",{pts:d.pts+f*V,dts:d.dts+f*V,sampleCount:G,audioobjecttype:1+(h[nt+2]>>>6&3),channelcount:(1&h[nt+2])<<2|(192&h[nt+3])>>>6,samplerate:Jh[(60&h[nt+2])>>>2],samplingfrequencyindex:(60&h[nt+2])>>>2,samplesize:16,data:h.subarray(nt+7+x,nt+S)}),f++,nt+=S}else typeof xt!="number"&&(xt=nt),nt++;typeof xt=="number"&&(this.skipWarn_(xt,nt),xt=null),h=h.subarray(nt)}},this.flush=function(){f=0,this.trigger("done")},this.reset=function(){h=void 0,this.trigger("reset")},this.endTimeline=function(){h=void 0,this.trigger("endedtimeline")}}).prototype=new nn;var yo,_o,Zh,Yp=$l,td=nn,Kp=function(o){var h=o.byteLength,f=0,d=0;this.length=function(){return 8*h},this.bitsAvailable=function(){return 8*h+d},this.loadWord=function(){var S=o.byteLength-h,x=new Uint8Array(4),M=Math.min(4,h);if(M===0)throw new Error("no bytes available");x.set(o.subarray(S,S+M)),f=new DataView(x.buffer).getUint32(0),d=8*M,h-=M},this.skipBits=function(S){var x;d>S?(f<<=S,d-=S):(S-=d,S-=8*(x=Math.floor(S/8)),h-=x,this.loadWord(),f<<=S,d-=S)},this.readBits=function(S){var x=Math.min(d,S),M=f>>>32-x;return(d-=x)>0?f<<=x:h>0&&this.loadWord(),(x=S-x)>0?M<<x|this.readBits(x):M},this.skipLeadingZeros=function(){var S;for(S=0;S<d;++S)if(f&2147483648>>>S)return f<<=S,d-=S,S;return this.loadWord(),S+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var S=this.skipLeadingZeros();return this.readBits(S+1)-1},this.readExpGolomb=function(){var S=this.readUnsignedExpGolomb();return 1&S?1+S>>>1:-1*(S>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(_o=function(){var o,h,f=0;_o.prototype.init.call(this),this.push=function(d){var S;h?((S=new Uint8Array(h.byteLength+d.data.byteLength)).set(h),S.set(d.data,h.byteLength),h=S):h=d.data;for(var x=h.byteLength;f<x-3;f++)if(h[f+2]===1){o=f+5;break}for(;o<x;)switch(h[o]){case 0:if(h[o-1]!==0){o+=2;break}if(h[o-2]!==0){o++;break}f+3!==o-2&&this.trigger("data",h.subarray(f+3,o-2));do o++;while(h[o]!==1&&o<x);f=o-2,o+=3;break;case 1:if(h[o-1]!==0||h[o-2]!==0){o+=3;break}this.trigger("data",h.subarray(f+3,o-2)),f=o-2,o+=3;break;default:o+=3}h=h.subarray(f),o-=f,f=0},this.reset=function(){h=null,f=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(f+3)),h=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new td,Zh={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},yo=function(){var o,h,f,d,S,x,M,G=new _o;yo.prototype.init.call(this),o=this,this.push=function(V){V.type==="video"&&(h=V.trackId,f=V.pts,d=V.dts,G.push(V))},G.on("data",function(V){var nt={trackId:h,pts:f,dts:d,data:V,nalUnitTypeCode:31&V[0]};switch(nt.nalUnitTypeCode){case 5:nt.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:nt.nalUnitType="sei_rbsp",nt.escapedRBSP=S(V.subarray(1));break;case 7:nt.nalUnitType="seq_parameter_set_rbsp",nt.escapedRBSP=S(V.subarray(1)),nt.config=x(nt.escapedRBSP);break;case 8:nt.nalUnitType="pic_parameter_set_rbsp";break;case 9:nt.nalUnitType="access_unit_delimiter_rbsp"}o.trigger("data",nt)}),G.on("done",function(){o.trigger("done")}),G.on("partialdone",function(){o.trigger("partialdone")}),G.on("reset",function(){o.trigger("reset")}),G.on("endedtimeline",function(){o.trigger("endedtimeline")}),this.flush=function(){G.flush()},this.partialFlush=function(){G.partialFlush()},this.reset=function(){G.reset()},this.endTimeline=function(){G.endTimeline()},M=function(V,nt){var xt,jt=8,ie=8;for(xt=0;xt<V;xt++)ie!==0&&(ie=(jt+nt.readExpGolomb()+256)%256),jt=ie===0?jt:ie},S=function(V){for(var nt,xt,jt=V.byteLength,ie=[],re=1;re<jt-2;)V[re]===0&&V[re+1]===0&&V[re+2]===3?(ie.push(re+2),re+=2):re++;if(ie.length===0)return V;nt=jt-ie.length,xt=new Uint8Array(nt);var ti=0;for(re=0;re<nt;ti++,re++)ti===ie[0]&&(ti++,ie.shift()),xt[re]=V[ti];return xt},x=function(V){var nt,xt,jt,ie,re,ti,ci,li,wi,on,Br,ys,_a=0,dr=0,pr=0,zn=0,qi=[1,1];if(xt=(nt=new Kp(V)).readUnsignedByte(),ie=nt.readUnsignedByte(),jt=nt.readUnsignedByte(),nt.skipUnsignedExpGolomb(),Zh[xt]&&((re=nt.readUnsignedExpGolomb())===3&&nt.skipBits(1),nt.skipUnsignedExpGolomb(),nt.skipUnsignedExpGolomb(),nt.skipBits(1),nt.readBoolean()))for(Br=re!==3?8:12,ys=0;ys<Br;ys++)nt.readBoolean()&&M(ys<6?16:64,nt);if(nt.skipUnsignedExpGolomb(),(ti=nt.readUnsignedExpGolomb())===0)nt.readUnsignedExpGolomb();else if(ti===1)for(nt.skipBits(1),nt.skipExpGolomb(),nt.skipExpGolomb(),ci=nt.readUnsignedExpGolomb(),ys=0;ys<ci;ys++)nt.skipExpGolomb();if(nt.skipUnsignedExpGolomb(),nt.skipBits(1),li=nt.readUnsignedExpGolomb(),wi=nt.readUnsignedExpGolomb(),(on=nt.readBits(1))===0&&nt.skipBits(1),nt.skipBits(1),nt.readBoolean()&&(_a=nt.readUnsignedExpGolomb(),dr=nt.readUnsignedExpGolomb(),pr=nt.readUnsignedExpGolomb(),zn=nt.readUnsignedExpGolomb()),nt.readBoolean()&&nt.readBoolean()){switch(nt.readUnsignedByte()){case 1:qi=[1,1];break;case 2:qi=[12,11];break;case 3:qi=[10,11];break;case 4:qi=[16,11];break;case 5:qi=[40,33];break;case 6:qi=[24,11];break;case 7:qi=[20,11];break;case 8:qi=[32,11];break;case 9:qi=[80,33];break;case 10:qi=[18,11];break;case 11:qi=[15,11];break;case 12:qi=[64,33];break;case 13:qi=[160,99];break;case 14:qi=[4,3];break;case 15:qi=[3,2];break;case 16:qi=[2,1];break;case 255:qi=[nt.readUnsignedByte()<<8|nt.readUnsignedByte(),nt.readUnsignedByte()<<8|nt.readUnsignedByte()]}qi&&(qi[0],qi[1])}return{profileIdc:xt,levelIdc:jt,profileCompatibility:ie,width:16*(li+1)-2*_a-2*dr,height:(2-on)*(wi+1)*16-2*pr-2*zn,sarRatio:qi}}},yo.prototype=new td;var Hl,Qp={H264Stream:yo,NalByteStream:_o},Jp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ed=function(o,h){var f=o[h+6]<<21|o[h+7]<<14|o[h+8]<<7|o[h+9];return f=f>=0?f:0,(16&o[h+5])>>4?f+20:f+10},id=function(o,h){return o.length-h<10||o[h]!==73||o[h+1]!==68||o[h+2]!==51?h:(h+=ed(o,h),id(o,h))},sd=function(o){return o[0]<<21|o[1]<<14|o[2]<<7|o[3]},Vl={isLikelyAacData:function(o){var h=id(o,0);return o.length>=h+2&&!(255&~o[h])&&!(240&~o[h+1])&&(22&o[h+1])==16},parseId3TagSize:ed,parseAdtsSize:function(o,h){var f=(224&o[h+5])>>5,d=o[h+4]<<3;return 6144&o[h+3]|d|f},parseType:function(o,h){return o[h]===73&&o[h+1]===68&&o[h+2]===51?"timed-metadata":!0&o[h]&&!(240&~o[h+1])?"audio":null},parseSampleRate:function(o){for(var h=0;h+5<o.length;){if(o[h]===255&&(246&o[h+1])==240)return Jp[(60&o[h+2])>>>2];h++}return null},parseAacTimestamp:function(o){var h,f,d;h=10,64&o[5]&&(h+=4,h+=sd(o.subarray(10,14)));do{if((f=sd(o.subarray(h+4,h+8)))<1)return null;if(String.fromCharCode(o[h],o[h+1],o[h+2],o[h+3])==="PRIV"){d=o.subarray(h+10,h+f+10);for(var S=0;S<d.byteLength;S++)if(d[S]===0){var x=unescape(function(V,nt,xt){var jt,ie="";for(jt=0;jt<xt;jt++)ie+="%"+("00"+V[jt].toString(16)).slice(-2);return ie}(d,0,S));if(x==="com.apple.streaming.transportStreamTimestamp"){var M=d.subarray(S+1),G=(1&M[3])<<30|M[4]<<22|M[5]<<14|M[6]<<6|M[7]>>>2;return(G*=4)+(3&M[7])}break}}h+=10,h+=f}while(h<o.byteLength);return null}},nd=Vl;(Hl=function(){var o=new Uint8Array,h=0;Hl.prototype.init.call(this),this.setTimestamp=function(f){h=f},this.push=function(f){var d,S,x,M,G=0,V=0;for(o.length?(M=o.length,(o=new Uint8Array(f.byteLength+M)).set(o.subarray(0,M)),o.set(f,M)):o=f;o.length-V>=3;)if(o[V]!==73||o[V+1]!==68||o[V+2]!==51)if(255&~o[V]||240&~o[V+1])V++;else{if(o.length-V<7||V+(G=nd.parseAdtsSize(o,V))>o.length)break;x={type:"audio",data:o.subarray(V,V+G),pts:h,dts:h},this.trigger("data",x),V+=G}else{if(o.length-V<10||V+(G=nd.parseId3TagSize(o,V))>o.length)break;S={type:"timed-metadata",data:o.subarray(V,V+G)},this.trigger("data",S),V+=G}d=o.length-V,o=d>0?o.subarray(V):new Uint8Array},this.reset=function(){o=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){o=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new nn;var pa,jr,zl,ur,vo=nn,ma=ro,fa=la,bo=jp,an=Bp,Mn=Gp,To=Li,rd=Yp,Zp=Qp.H264Stream,tm=Hl,em=Vl.isLikelyAacData,im=Li.ONE_SECOND_IN_TS,Wl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Gl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],sm=function(o,h){h.stream=o,this.trigger("log",h)},ad=function(o,h){for(var f=Object.keys(h),d=0;d<f.length;d++){var S=f[d];S!=="headOfPipeline"&&h[S].on&&h[S].on("log",sm.bind(o,S))}},od=function(o,h){var f;if(o.length!==h.length)return!1;for(f=0;f<o.length;f++)if(o[f]!==h[f])return!1;return!0},Xl=function(o,h,f,d,S,x){return{start:{dts:o,pts:o+(f-h)},end:{dts:o+(d-h),pts:o+(S-f)},prependedContentDuration:x,baseMediaDecodeTime:o}};jr=function(o,h){var f,d=[],S=0,x=0,M=1/0;f=(h=h||{}).firstSequenceNumber||0,jr.prototype.init.call(this),this.push=function(G){an.collectDtsInfo(o,G),o&&Wl.forEach(function(V){o[V]=G[V]}),d.push(G)},this.setEarliestDts=function(G){S=G},this.setVideoBaseMediaDecodeTime=function(G){M=G},this.setAudioAppendStart=function(G){x=G},this.flush=function(){var G,V,nt,xt,jt,ie,re;d.length!==0?(G=bo.trimAdtsFramesByEarliestDts(d,o,S),o.baseMediaDecodeTime=an.calculateTrackBaseMediaDecodeTime(o,h.keepOriginalTimestamps),re=bo.prefixWithSilence(o,G,x,M),o.samples=bo.generateSampleTable(G),nt=ma.mdat(bo.concatenateFrameData(G)),d=[],V=ma.moof(f,[o]),xt=new Uint8Array(V.byteLength+nt.byteLength),f++,xt.set(V),xt.set(nt,V.byteLength),an.clearDtsInfo(o),jt=Math.ceil(1024*im/o.samplerate),G.length&&(ie=G.length*jt,this.trigger("segmentTimingInfo",Xl(To.audioTsToVideoTs(o.baseMediaDecodeTime,o.samplerate),G[0].dts,G[0].pts,G[0].dts+ie,G[0].pts+ie,re||0)),this.trigger("timingInfo",{start:G[0].pts,end:G[0].pts+ie})),this.trigger("data",{track:o,boxes:xt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){an.clearDtsInfo(o),d=[],this.trigger("reset")}},jr.prototype=new vo,pa=function(o,h){var f,d,S,x=[],M=[];f=(h=h||{}).firstSequenceNumber||0,pa.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(G){an.collectDtsInfo(o,G),G.nalUnitType!=="seq_parameter_set_rbsp"||d||(d=G.config,o.sps=[G.data],Gl.forEach(function(V){o[V]=d[V]},this)),G.nalUnitType!=="pic_parameter_set_rbsp"||S||(S=G.data,o.pps=[G.data]),x.push(G)},this.flush=function(){for(var G,V,nt,xt,jt,ie,re,ti,ci=0;x.length&&x[0].nalUnitType!=="access_unit_delimiter_rbsp";)x.shift();if(x.length===0)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(G=fa.groupNalsIntoFrames(x),(nt=fa.groupFramesIntoGops(G))[0][0].keyFrame||((V=this.getGopForFusion_(x[0],o))?(ci=V.duration,nt.unshift(V),nt.byteLength+=V.byteLength,nt.nalCount+=V.nalCount,nt.pts=V.pts,nt.dts=V.dts,nt.duration+=V.duration):nt=fa.extendFirstKeyFrame(nt)),M.length){var li;if(!(li=h.alignGopsAtEnd?this.alignGopsAtEnd_(nt):this.alignGopsAtStart_(nt)))return this.gopCache_.unshift({gop:nt.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");an.clearDtsInfo(o),nt=li}an.collectDtsInfo(o,nt),o.samples=fa.generateSampleTable(nt),jt=ma.mdat(fa.concatenateNalData(nt)),o.baseMediaDecodeTime=an.calculateTrackBaseMediaDecodeTime(o,h.keepOriginalTimestamps),this.trigger("processedGopsInfo",nt.map(function(wi){return{pts:wi.pts,dts:wi.dts,byteLength:wi.byteLength}})),re=nt[0],ti=nt[nt.length-1],this.trigger("segmentTimingInfo",Xl(o.baseMediaDecodeTime,re.dts,re.pts,ti.dts+ti.duration,ti.pts+ti.duration,ci)),this.trigger("timingInfo",{start:nt[0].pts,end:nt[nt.length-1].pts+nt[nt.length-1].duration}),this.gopCache_.unshift({gop:nt.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),xt=ma.moof(f,[o]),ie=new Uint8Array(xt.byteLength+jt.byteLength),f++,ie.set(xt),ie.set(jt,xt.byteLength),this.trigger("data",{track:o,boxes:ie}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),x=[],this.gopCache_.length=0,M.length=0,this.trigger("reset")},this.resetStream_=function(){an.clearDtsInfo(o),d=void 0,S=void 0},this.getGopForFusion_=function(G){var V,nt,xt,jt,ie,re=1/0;for(ie=0;ie<this.gopCache_.length;ie++)xt=(jt=this.gopCache_[ie]).gop,o.pps&&od(o.pps[0],jt.pps[0])&&o.sps&&od(o.sps[0],jt.sps[0])&&(xt.dts<o.timelineStartInfo.dts||(V=G.dts-xt.dts-xt.duration)>=-1e4&&V<=45e3&&(!nt||re>V)&&(nt=jt,re=V));return nt?nt.gop:null},this.alignGopsAtStart_=function(G){var V,nt,xt,jt,ie,re,ti,ci;for(ie=G.byteLength,re=G.nalCount,ti=G.duration,V=nt=0;V<M.length&&nt<G.length&&(xt=M[V],jt=G[nt],xt.pts!==jt.pts);)jt.pts>xt.pts?V++:(nt++,ie-=jt.byteLength,re-=jt.nalCount,ti-=jt.duration);return nt===0?G:nt===G.length?null:((ci=G.slice(nt)).byteLength=ie,ci.duration=ti,ci.nalCount=re,ci.pts=ci[0].pts,ci.dts=ci[0].dts,ci)},this.alignGopsAtEnd_=function(G){var V,nt,xt,jt,ie,re,ti;for(V=M.length-1,nt=G.length-1,ie=null,re=!1;V>=0&&nt>=0;){if(xt=M[V],jt=G[nt],xt.pts===jt.pts){re=!0;break}xt.pts>jt.pts?V--:(V===M.length-1&&(ie=nt),nt--)}if(!re&&ie===null)return null;if((ti=re?nt:ie)===0)return G;var ci=G.slice(ti),li=ci.reduce(function(wi,on){return wi.byteLength+=on.byteLength,wi.duration+=on.duration,wi.nalCount+=on.nalCount,wi},{byteLength:0,duration:0,nalCount:0});return ci.byteLength=li.byteLength,ci.duration=li.duration,ci.nalCount=li.nalCount,ci.pts=ci[0].pts,ci.dts=ci[0].dts,ci},this.alignGopsWith=function(G){M=G}},pa.prototype=new vo,ur=function(o,h){this.numberOfTracks=0,this.metadataStream=h,(o=o||{}).remux!==void 0?this.remuxTracks=!!o.remux:this.remuxTracks=!0,typeof o.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=o.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ur.prototype.init.call(this),this.push=function(f){return f.content||f.text?this.pendingCaptions.push(f):f.frames?this.pendingMetadata.push(f):(this.pendingTracks.push(f.track),this.pendingBytes+=f.boxes.byteLength,f.track.type==="video"&&(this.videoTrack=f.track,this.pendingBoxes.push(f.boxes)),void(f.track.type==="audio"&&(this.audioTrack=f.track,this.pendingBoxes.unshift(f.boxes))))}},ur.prototype=new vo,ur.prototype.flush=function(o){var h,f,d,S,x=0,M={captions:[],captionStreams:{},metadata:[],info:{}},G=0;if(this.pendingTracks.length<this.numberOfTracks){if(o!=="VideoSegmentStream"&&o!=="AudioSegmentStream"||this.remuxTracks)return;if(this.pendingTracks.length===0)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(G=this.videoTrack.timelineStartInfo.pts,Gl.forEach(function(V){M.info[V]=this.videoTrack[V]},this)):this.audioTrack&&(G=this.audioTrack.timelineStartInfo.pts,Wl.forEach(function(V){M.info[V]=this.audioTrack[V]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?M.type=this.pendingTracks[0].type:M.type="combined",this.emittedTracks+=this.pendingTracks.length,d=ma.initSegment(this.pendingTracks),M.initSegment=new Uint8Array(d.byteLength),M.initSegment.set(d),M.data=new Uint8Array(this.pendingBytes),S=0;S<this.pendingBoxes.length;S++)M.data.set(this.pendingBoxes[S],x),x+=this.pendingBoxes[S].byteLength;for(S=0;S<this.pendingCaptions.length;S++)(h=this.pendingCaptions[S]).startTime=To.metadataTsToSeconds(h.startPts,G,this.keepOriginalTimestamps),h.endTime=To.metadataTsToSeconds(h.endPts,G,this.keepOriginalTimestamps),M.captionStreams[h.stream]=!0,M.captions.push(h);for(S=0;S<this.pendingMetadata.length;S++)(f=this.pendingMetadata[S]).cueTime=To.metadataTsToSeconds(f.pts,G,this.keepOriginalTimestamps),M.metadata.push(f);for(M.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",M),S=0;S<M.captions.length;S++)h=M.captions[S],this.trigger("caption",h);for(S=0;S<M.metadata.length;S++)f=M.metadata[S],this.trigger("id3Frame",f)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ur.prototype.setRemux=function(o){this.remuxTracks=o},(zl=function(o){var h,f,d=this,S=!0;zl.prototype.init.call(this),o=o||{},this.baseMediaDecodeTime=o.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var x={};this.transmuxPipeline_=x,x.type="aac",x.metadataStream=new Mn.MetadataStream,x.aacStream=new tm,x.audioTimestampRolloverStream=new Mn.TimestampRolloverStream("audio"),x.timedMetadataTimestampRolloverStream=new Mn.TimestampRolloverStream("timed-metadata"),x.adtsStream=new rd,x.coalesceStream=new ur(o,x.metadataStream),x.headOfPipeline=x.aacStream,x.aacStream.pipe(x.audioTimestampRolloverStream).pipe(x.adtsStream),x.aacStream.pipe(x.timedMetadataTimestampRolloverStream).pipe(x.metadataStream).pipe(x.coalesceStream),x.metadataStream.on("timestamp",function(M){x.aacStream.setTimestamp(M.timeStamp)}),x.aacStream.on("data",function(M){M.type!=="timed-metadata"&&M.type!=="audio"||x.audioSegmentStream||(f=f||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new jr(f,o),x.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream),d.trigger("trackinfo",{hasAudio:!!f,hasVideo:!!h}))}),x.coalesceStream.on("data",this.trigger.bind(this,"data")),x.coalesceStream.on("done",this.trigger.bind(this,"done")),ad(this,x)},this.setupTsPipeline=function(){var x={};this.transmuxPipeline_=x,x.type="ts",x.metadataStream=new Mn.MetadataStream,x.packetStream=new Mn.TransportPacketStream,x.parseStream=new Mn.TransportParseStream,x.elementaryStream=new Mn.ElementaryStream,x.timestampRolloverStream=new Mn.TimestampRolloverStream,x.adtsStream=new rd,x.h264Stream=new Zp,x.captionStream=new Mn.CaptionStream(o),x.coalesceStream=new ur(o,x.metadataStream),x.headOfPipeline=x.packetStream,x.packetStream.pipe(x.parseStream).pipe(x.elementaryStream).pipe(x.timestampRolloverStream),x.timestampRolloverStream.pipe(x.h264Stream),x.timestampRolloverStream.pipe(x.adtsStream),x.timestampRolloverStream.pipe(x.metadataStream).pipe(x.coalesceStream),x.h264Stream.pipe(x.captionStream).pipe(x.coalesceStream),x.elementaryStream.on("data",function(M){var G;if(M.type==="metadata"){for(G=M.tracks.length;G--;)h||M.tracks[G].type!=="video"?f||M.tracks[G].type!=="audio"||((f=M.tracks[G]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(h=M.tracks[G]).timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime;h&&!x.videoSegmentStream&&(x.coalesceStream.numberOfTracks++,x.videoSegmentStream=new pa(h,o),x.videoSegmentStream.on("log",d.getLogTrigger_("videoSegmentStream")),x.videoSegmentStream.on("timelineStartInfo",function(V){f&&!o.keepOriginalTimestamps&&(f.timelineStartInfo=V,x.audioSegmentStream.setEarliestDts(V.dts-d.baseMediaDecodeTime))}),x.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),x.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),x.videoSegmentStream.on("baseMediaDecodeTime",function(V){f&&x.audioSegmentStream.setVideoBaseMediaDecodeTime(V)}),x.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),x.h264Stream.pipe(x.videoSegmentStream).pipe(x.coalesceStream)),f&&!x.audioSegmentStream&&(x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new jr(f,o),x.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),x.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!f,hasVideo:!!h})}}),x.coalesceStream.on("data",this.trigger.bind(this,"data")),x.coalesceStream.on("id3Frame",function(M){M.dispatchType=x.metadataStream.dispatchType,d.trigger("id3Frame",M)}),x.coalesceStream.on("caption",this.trigger.bind(this,"caption")),x.coalesceStream.on("done",this.trigger.bind(this,"done")),ad(this,x)},this.setBaseMediaDecodeTime=function(x){var M=this.transmuxPipeline_;o.keepOriginalTimestamps||(this.baseMediaDecodeTime=x),f&&(f.timelineStartInfo.dts=void 0,f.timelineStartInfo.pts=void 0,an.clearDtsInfo(f),M.audioTimestampRolloverStream&&M.audioTimestampRolloverStream.discontinuity()),h&&(M.videoSegmentStream&&(M.videoSegmentStream.gopCache_=[]),h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,an.clearDtsInfo(h),M.captionStream.reset()),M.timestampRolloverStream&&M.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(x){f&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(x)},this.setRemux=function(x){var M=this.transmuxPipeline_;o.remux=x,M&&M.coalesceStream&&M.coalesceStream.setRemux(x)},this.alignGopsWith=function(x){h&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(x)},this.getLogTrigger_=function(x){var M=this;return function(G){G.stream=x,M.trigger("log",G)}},this.push=function(x){if(S){var M=em(x);M&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():M||this.transmuxPipeline_.type==="ts"||this.setupTsPipeline(),S=!1}this.transmuxPipeline_.headOfPipeline.push(x)},this.flush=function(){S=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new vo;var Yl,ld,cd,ud,nm={Transmuxer:zl,VideoSegmentStream:pa,AudioSegmentStream:jr,AUDIO_PROPERTIES:Wl,VIDEO_PROPERTIES:Gl,generateSegmentTimingInfo:Xl},Kl=function(o){return o>>>0},hd=function(o){var h="";return h+=String.fromCharCode(o[0]),h+=String.fromCharCode(o[1]),(h+=String.fromCharCode(o[2]))+String.fromCharCode(o[3])},rm=Kl,am=hd,Ql=function(o,h){var f,d,S,x,M,G=[];if(!h.length)return null;for(f=0;f<o.byteLength;)d=rm(o[f]<<24|o[f+1]<<16|o[f+2]<<8|o[f+3]),S=am(o.subarray(f+4,f+8)),x=d>1?f+d:o.byteLength,S===h[0]&&(h.length===1?G.push(o.subarray(f+8,x)):(M=Ql(o.subarray(f+8,x),h.slice(1))).length&&(G=G.concat(M))),f=x;return G},om=Kl,lm=ls.getUint64,cm=function(o){var h={version:o[0],flags:new Uint8Array(o.subarray(1,4))};return h.version===1?h.baseMediaDecodeTime=lm(o.subarray(4)):h.baseMediaDecodeTime=om(o[4]<<24|o[5]<<16|o[6]<<8|o[7]),h},dd=function(o){return{isLeading:(12&o[0])>>>2,dependsOn:3&o[0],isDependedOn:(192&o[1])>>>6,hasRedundancy:(48&o[1])>>>4,paddingValue:(14&o[1])>>>1,isNonSyncSample:1&o[1],degradationPriority:o[2]<<8|o[3]}},um=function(o){var h,f={version:o[0],flags:new Uint8Array(o.subarray(1,4)),samples:[]},d=new DataView(o.buffer,o.byteOffset,o.byteLength),S=1&f.flags[2],x=4&f.flags[2],M=1&f.flags[1],G=2&f.flags[1],V=4&f.flags[1],nt=8&f.flags[1],xt=d.getUint32(4),jt=8;for(S&&(f.dataOffset=d.getInt32(jt),jt+=4),x&&xt&&(h={flags:dd(o.subarray(jt,jt+4))},jt+=4,M&&(h.duration=d.getUint32(jt),jt+=4),G&&(h.size=d.getUint32(jt),jt+=4),nt&&(f.version===1?h.compositionTimeOffset=d.getInt32(jt):h.compositionTimeOffset=d.getUint32(jt),jt+=4),f.samples.push(h),xt--);xt--;)h={},M&&(h.duration=d.getUint32(jt),jt+=4),G&&(h.size=d.getUint32(jt),jt+=4),V&&(h.flags=dd(o.subarray(jt,jt+4)),jt+=4),nt&&(f.version===1?h.compositionTimeOffset=d.getInt32(jt):h.compositionTimeOffset=d.getUint32(jt),jt+=4),f.samples.push(h);return f},hm=function(o){var h,f=new DataView(o.buffer,o.byteOffset,o.byteLength),d={version:o[0],flags:new Uint8Array(o.subarray(1,4)),trackId:f.getUint32(4)},S=1&d.flags[2],x=2&d.flags[2],M=8&d.flags[2],G=16&d.flags[2],V=32&d.flags[2],nt=65536&d.flags[0],xt=131072&d.flags[0];return h=8,S&&(h+=4,d.baseDataOffset=f.getUint32(12),h+=4),x&&(d.sampleDescriptionIndex=f.getUint32(h),h+=4),M&&(d.defaultSampleDuration=f.getUint32(h),h+=4),G&&(d.defaultSampleSize=f.getUint32(h),h+=4),V&&(d.defaultSampleFlags=f.getUint32(h)),nt&&(d.durationIsEmpty=!0),!S&&xt&&(d.baseDataOffsetIsMoof=!0),d},dm=(Yl=typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:{},zh.discardEmulationPreventionBytes),pm=Wh.CaptionStream,ga=Ql,mm=cm,fm=um,gm=hm,pd=Yl,ym=function(o,h){for(var f=o,d=0;d<h.length;d++){var S=h[d];if(f<S.size)return S;f-=S.size}return null},_m=function(){var o,h,f,d,S,x,M=!1;this.isInitialized=function(){return M},this.init=function(G){o=new pm,M=!0,x=!!G&&G.isPartial,o.on("data",function(V){V.startTime=V.startPts/d,V.endTime=V.endPts/d,S.captions.push(V),S.captionStreams[V.stream]=!0}),o.on("log",function(V){S.logs.push(V)})},this.isNewInit=function(G,V){return!(G&&G.length===0||V&&typeof V=="object"&&Object.keys(V).length===0||f===G[0]&&d===V[f])},this.parse=function(G,V,nt){var xt;if(!this.isInitialized()||!V||!nt)return null;if(this.isNewInit(V,nt))f=V[0],d=nt[f];else if(f===null||!d)return h.push(G),null;for(;h.length>0;){var jt=h.shift();this.parse(jt,V,nt)}return xt=function(ie,re,ti){if(re===null)return null;var ci=function(li,wi){var on=ga(li,["moof","traf"]),Br=ga(li,["mdat"]),ys={},_a=[];return Br.forEach(function(dr,pr){var zn=on[pr];_a.push({mdat:dr,traf:zn})}),_a.forEach(function(dr){var pr,zn,qi=dr.mdat,ec=dr.traf,Om=ga(ec,["tfhd"]),vd=gm(Om[0]),Wn=vd.trackId,bd=ga(ec,["tfdt"]),Lm=bd.length>0?mm(bd[0]).baseMediaDecodeTime:0,Td=ga(ec,["trun"]);wi===Wn&&Td.length>0&&(pr=function(Gn,ic,Fr){var Us=ic,Xs=Fr.defaultSampleDuration||0,mr=Fr.defaultSampleSize||0,qr=Fr.trackId,va=[];return Gn.forEach(function(ba){var Ta=fm(ba).samples;Ta.forEach(function(Zi){Zi.duration===void 0&&(Zi.duration=Xs),Zi.size===void 0&&(Zi.size=mr),Zi.trackId=qr,Zi.dts=Us,Zi.compositionTimeOffset===void 0&&(Zi.compositionTimeOffset=0),typeof Us=="bigint"?(Zi.pts=Us+pd.BigInt(Zi.compositionTimeOffset),Us+=pd.BigInt(Zi.duration)):(Zi.pts=Us+Zi.compositionTimeOffset,Us+=Zi.duration)}),va=va.concat(Ta)}),va}(Td,Lm,vd),zn=function(Gn,ic,Fr){var Us,Xs,mr,qr,va=new DataView(Gn.buffer,Gn.byteOffset,Gn.byteLength),ba={logs:[],seiNals:[]};for(Xs=0;Xs+4<Gn.length;Xs+=mr)if(mr=va.getUint32(Xs),Xs+=4,!(mr<=0))switch(31&Gn[Xs]){case 6:var Ta=Gn.subarray(Xs+1,Xs+1+mr),Zi=ym(Xs,ic);if(Us={nalUnitType:"sei_rbsp",size:mr,data:Ta,escapedRBSP:dm(Ta),trackId:Fr},Zi)Us.pts=Zi.pts,Us.dts=Zi.dts,qr=Zi;else{if(!qr){ba.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Xs+" for trackId "+Fr+". See mux.js#223."});break}Us.pts=qr.pts,Us.dts=qr.dts}ba.seiNals.push(Us)}return ba}(qi,pr,Wn),ys[Wn]||(ys[Wn]={seiNals:[],logs:[]}),ys[Wn].seiNals=ys[Wn].seiNals.concat(zn.seiNals),ys[Wn].logs=ys[Wn].logs.concat(zn.logs))}),ys}(ie,re)[re]||{};return{seiNals:ci.seiNals,logs:ci.logs,timescale:ti}}(G,f,d),xt&&xt.logs&&(S.logs=S.logs.concat(xt.logs)),xt!==null&&xt.seiNals?(this.pushNals(xt.seiNals),this.flushStream(),S):S.logs.length?{logs:S.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(G){if(!this.isInitialized()||!G||G.length===0)return null;G.forEach(function(V){o.push(V)})},this.flushStream=function(){if(!this.isInitialized())return null;x?o.partialFlush():o.flush()},this.clearParsedCaptions=function(){S.captions=[],S.captionStreams={},S.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;o.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],f=null,d=null,S?this.clearParsedCaptions():S={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},So=function(o){for(var h=0,f=String.fromCharCode(o[h]),d="";f!=="\0";)d+=f,h++,f=String.fromCharCode(o[h]);return d+f},vm=ls.getUint64,md=function(o){return o!==void 0||o!==null},bm={parseEmsgBox:function(o){var h,f,d,S,x,M,G,V=4,nt=o[0];if(nt===0)V+=(h=So(o.subarray(V))).length,V+=(f=So(o.subarray(V))).length,d=(xt=new DataView(o.buffer)).getUint32(V),V+=4,x=xt.getUint32(V),V+=4,M=xt.getUint32(V),V+=4,G=xt.getUint32(V),V+=4;else if(nt===1){var xt;d=(xt=new DataView(o.buffer)).getUint32(V),V+=4,S=vm(o.subarray(V)),V+=8,M=xt.getUint32(V),V+=4,G=xt.getUint32(V),V+=4,V+=(h=So(o.subarray(V))).length,V+=(f=So(o.subarray(V))).length}var jt={scheme_id_uri:h,value:f,timescale:d||1,presentation_time:S,presentation_time_delta:x,event_duration:M,id:G,message_data:new Uint8Array(o.subarray(V,o.byteLength))};return function(ie,re){var ti=re.scheme_id_uri!=="\0",ci=ie===0&&md(re.presentation_time_delta)&&ti,li=ie===1&&md(re.presentation_time)&&ti;return!(ie>1)&&ci||li}(nt,jt)?jt:void 0},scaleTime:function(o,h,f,d){return o||o===0?o/h:d+f/h}},fd=Kl,ya=function(o){return("00"+o.toString(16)).slice(-2)},yn=Ql,wo=hd,Jl=bm,Tm=ls.getUint64,Sm=Yl,wm=Kh.parseId3Frames;ld=function(o,h){var f=yn(h,["moof","traf"]).reduce(function(d,S){var x,M=yn(S,["tfhd"])[0],G=fd(M[4]<<24|M[5]<<16|M[6]<<8|M[7]),V=o[G]||9e4,nt=yn(S,["tfdt"])[0],xt=new DataView(nt.buffer,nt.byteOffset,nt.byteLength);let jt;return typeof(x=nt[0]===1?Tm(nt.subarray(4,12)):xt.getUint32(4))=="bigint"?jt=x/Sm.BigInt(V):typeof x!="number"||isNaN(x)||(jt=x/V),jt<Number.MAX_SAFE_INTEGER&&(jt=Number(jt)),jt<d&&(d=jt),d},1/0);return typeof f=="bigint"||isFinite(f)?f:0},ud=function(o){var h=o[0]===0?12:20;return fd(o[h]<<24|o[h+1]<<16|o[h+2]<<8|o[h+3])},cd=function(o){var h=yn(o,["moov","trak"]),f=[];return h.forEach(function(d){var S,x,M={},G=yn(d,["tkhd"])[0];G&&(x=(S=new DataView(G.buffer,G.byteOffset,G.byteLength)).getUint8(0),M.id=x===0?S.getUint32(12):S.getUint32(20));var V=yn(d,["mdia","hdlr"])[0];if(V){var nt=wo(V.subarray(8,12));M.type=nt==="vide"?"video":nt==="soun"?"audio":nt}var xt=yn(d,["mdia","minf","stbl","stsd"])[0];if(xt){var jt=xt.subarray(8);M.codec=wo(jt.subarray(4,8));var ie,re=yn(jt,[M.codec])[0];re&&(/^[asm]vc[1-9]$/i.test(M.codec)?(ie=re.subarray(78),wo(ie.subarray(4,8))==="avcC"&&ie.length>11?(M.codec+=".",M.codec+=ya(ie[9]),M.codec+=ya(ie[10]),M.codec+=ya(ie[11])):M.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(M.codec)?(ie=re.subarray(28),wo(ie.subarray(4,8))==="esds"&&ie.length>20&&ie[19]!==0?(M.codec+="."+ya(ie[19]),M.codec+="."+ya(ie[20]>>>2&63).replace(/^0/,"")):M.codec="mp4a.40.2"):M.codec=M.codec.toLowerCase())}var ti=yn(d,["mdia","mdhd"])[0];ti&&(M.timescale=ud(ti)),f.push(M)}),f};var Em=ld,Cm=cd,xm=function(o,h=0){return yn(o,["emsg"]).map(f=>{var d=Jl.parseEmsgBox(new Uint8Array(f)),S=wm(d.message_data);return{cueTime:Jl.scaleTime(d.presentation_time,d.timescale,d.presentation_time_delta,h),duration:Jl.scaleTime(d.event_duration,d.timescale),frames:S}})},Zl=po,gd=function(o){var h=31&o[1];return(h<<=8)|o[2]},Eo=function(o){return!!(64&o[1])},Co=function(o){var h=0;return(48&o[3])>>>4>1&&(h+=o[4]+1),h},tc=function(o){switch(o){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},km={parseType:function(o,h){var f=gd(o);return f===0?"pat":f===h?"pmt":h?"pes":null},parsePat:function(o){var h=Eo(o),f=4+Co(o);return h&&(f+=o[f]+1),(31&o[f+10])<<8|o[f+11]},parsePmt:function(o){var h={},f=Eo(o),d=4+Co(o);if(f&&(d+=o[d]+1),1&o[d+5]){var S;S=3+((15&o[d+1])<<8|o[d+2])-4;for(var x=12+((15&o[d+10])<<8|o[d+11]);x<S;){var M=d+x;h[(31&o[M+1])<<8|o[M+2]]=o[M],x+=5+((15&o[M+3])<<8|o[M+4])}return h}},parsePayloadUnitStartIndicator:Eo,parsePesType:function(o,h){switch(h[gd(o)]){case Zl.H264_STREAM_TYPE:return"video";case Zl.ADTS_STREAM_TYPE:return"audio";case Zl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(o){if(!Eo(o))return null;var h=4+Co(o);if(h>=o.byteLength)return null;var f,d=null;return 192&(f=o[h+7])&&((d={}).pts=(14&o[h+9])<<27|(255&o[h+10])<<20|(254&o[h+11])<<12|(255&o[h+12])<<5|(254&o[h+13])>>>3,d.pts*=4,d.pts+=(6&o[h+13])>>>1,d.dts=d.pts,64&f&&(d.dts=(14&o[h+14])<<27|(255&o[h+15])<<20|(254&o[h+16])<<12|(255&o[h+17])<<5|(254&o[h+18])>>>3,d.dts*=4,d.dts+=(6&o[h+18])>>>1)),d},videoPacketContainsKeyFrame:function(o){for(var h=4+Co(o),f=o.subarray(h),d=0,S=0,x=!1;S<f.byteLength-3;S++)if(f[S+2]===1){d=S+5;break}for(;d<f.byteLength;)switch(f[d]){case 0:if(f[d-1]!==0){d+=2;break}if(f[d-2]!==0){d++;break}S+3!==d-2&&tc(31&f[S+3])==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0);do d++;while(f[d]!==1&&d<f.length);S=d-2,d+=3;break;case 1:if(f[d-1]!==0||f[d-2]!==0){d+=3;break}tc(31&f[S+3])==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0),S=d-2,d+=3;break;default:d+=3}return f=f.subarray(S),d-=S,S=0,f&&f.byteLength>3&&tc(31&f[S+3])==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0),x}},yd=po,Ur=Xh.handleRollover,Si={};Si.ts=km,Si.aac=Vl;var hr=Li.ONE_SECOND_IN_TS,gs=188,_n=71,Am=function(o,h,f){for(var d,S,x,M,G=0,V=gs,nt=!1;V<=o.byteLength;)if(o[G]!==_n||o[V]!==_n&&V!==o.byteLength)G++,V++;else{if(d=o.subarray(G,V),Si.ts.parseType(d,h.pid)==="pes"&&(S=Si.ts.parsePesType(d,h.table),x=Si.ts.parsePayloadUnitStartIndicator(d),S==="audio"&&x&&(M=Si.ts.parsePesTime(d))&&(M.type="audio",f.audio.push(M),nt=!0)),nt)break;G+=gs,V+=gs}for(G=(V=o.byteLength)-gs,nt=!1;G>=0;)if(o[G]!==_n||o[V]!==_n&&V!==o.byteLength)G--,V--;else{if(d=o.subarray(G,V),Si.ts.parseType(d,h.pid)==="pes"&&(S=Si.ts.parsePesType(d,h.table),x=Si.ts.parsePayloadUnitStartIndicator(d),S==="audio"&&x&&(M=Si.ts.parsePesTime(d))&&(M.type="audio",f.audio.push(M),nt=!0)),nt)break;G-=gs,V-=gs}},Im=function(o,h,f){for(var d,S,x,M,G,V,nt,xt=0,jt=gs,ie=!1,re={data:[],size:0};jt<o.byteLength;)if(o[xt]!==_n||o[jt]!==_n)xt++,jt++;else{if(d=o.subarray(xt,jt),Si.ts.parseType(d,h.pid)==="pes"&&(S=Si.ts.parsePesType(d,h.table),x=Si.ts.parsePayloadUnitStartIndicator(d),S==="video"&&(x&&!ie&&(M=Si.ts.parsePesTime(d))&&(M.type="video",f.video.push(M),ie=!0),!f.firstKeyFrame))){if(x&&re.size!==0){for(G=new Uint8Array(re.size),V=0;re.data.length;)nt=re.data.shift(),G.set(nt,V),V+=nt.byteLength;if(Si.ts.videoPacketContainsKeyFrame(G)){var ti=Si.ts.parsePesTime(G);ti?(f.firstKeyFrame=ti,f.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}re.size=0}re.data.push(d),re.size+=d.byteLength}if(ie&&f.firstKeyFrame)break;xt+=gs,jt+=gs}for(xt=(jt=o.byteLength)-gs,ie=!1;xt>=0;)if(o[xt]!==_n||o[jt]!==_n)xt--,jt--;else{if(d=o.subarray(xt,jt),Si.ts.parseType(d,h.pid)==="pes"&&(S=Si.ts.parsePesType(d,h.table),x=Si.ts.parsePayloadUnitStartIndicator(d),S==="video"&&x&&(M=Si.ts.parsePesTime(d))&&(M.type="video",f.video.push(M),ie=!0)),ie)break;xt-=gs,jt-=gs}},Pm=function(o,h){var f;return f=Si.aac.isLikelyAacData(o)?function(d){for(var S,x=!1,M=0,G=null,V=null,nt=0,xt=0;d.length-xt>=3;){switch(Si.aac.parseType(d,xt)){case"timed-metadata":if(d.length-xt<10){x=!0;break}if((nt=Si.aac.parseId3TagSize(d,xt))>d.length){x=!0;break}V===null&&(S=d.subarray(xt,xt+nt),V=Si.aac.parseAacTimestamp(S)),xt+=nt;break;case"audio":if(d.length-xt<7){x=!0;break}if((nt=Si.aac.parseAdtsSize(d,xt))>d.length){x=!0;break}G===null&&(S=d.subarray(xt,xt+nt),G=Si.aac.parseSampleRate(S)),M++,xt+=nt;break;default:xt++}if(x)return null}if(G===null||V===null)return null;var jt=hr/G;return{audio:[{type:"audio",dts:V,pts:V},{type:"audio",dts:V+1024*M*jt,pts:V+1024*M*jt}]}}(o):function(d){var S={pid:null,table:null},x={};for(var M in function(G,V){for(var nt,xt=0,jt=gs;jt<G.byteLength;)if(G[xt]!==_n||G[jt]!==_n)xt++,jt++;else{switch(nt=G.subarray(xt,jt),Si.ts.parseType(nt,V.pid)){case"pat":V.pid=Si.ts.parsePat(nt);break;case"pmt":var ie=Si.ts.parsePmt(nt);V.table=V.table||{},Object.keys(ie).forEach(function(re){V.table[re]=ie[re]})}xt+=gs,jt+=gs}}(d,S),S.table)if(S.table.hasOwnProperty(M))switch(S.table[M]){case yd.H264_STREAM_TYPE:x.video=[],Im(d,S,x),x.video.length===0&&delete x.video;break;case yd.ADTS_STREAM_TYPE:x.audio=[],Am(d,S,x),x.audio.length===0&&delete x.audio}return x}(o),f&&(f.audio||f.video)?(function(d,S){if(d.audio&&d.audio.length){var x=S;(x===void 0||isNaN(x))&&(x=d.audio[0].dts),d.audio.forEach(function(V){V.dts=Ur(V.dts,x),V.pts=Ur(V.pts,x),V.dtsTime=V.dts/hr,V.ptsTime=V.pts/hr})}if(d.video&&d.video.length){var M=S;if((M===void 0||isNaN(M))&&(M=d.video[0].dts),d.video.forEach(function(V){V.dts=Ur(V.dts,M),V.pts=Ur(V.pts,M),V.dtsTime=V.dts/hr,V.ptsTime=V.pts/hr}),d.firstKeyFrame){var G=d.firstKeyFrame;G.dts=Ur(G.dts,M),G.pts=Ur(G.pts,M),G.dtsTime=G.dts/hr,G.ptsTime=G.pts/hr}}}(f,h),f):null};class _d{constructor(h,f){this.options=f||{},this.self=h,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new nm.Transmuxer(this.options),function(h,f){f.on("data",function(d){const S=d.initSegment;d.initSegment={data:S.buffer,byteOffset:S.byteOffset,byteLength:S.byteLength};const x=d.data;d.data=x.buffer,h.postMessage({action:"data",segment:d,byteOffset:x.byteOffset,byteLength:x.byteLength},[d.data])}),f.on("done",function(d){h.postMessage({action:"done"})}),f.on("gopInfo",function(d){h.postMessage({action:"gopInfo",gopInfo:d})}),f.on("videoSegmentTimingInfo",function(d){const S={start:{decode:Li.videoTsToSeconds(d.start.dts),presentation:Li.videoTsToSeconds(d.start.pts)},end:{decode:Li.videoTsToSeconds(d.end.dts),presentation:Li.videoTsToSeconds(d.end.pts)},baseMediaDecodeTime:Li.videoTsToSeconds(d.baseMediaDecodeTime)};d.prependedContentDuration&&(S.prependedContentDuration=Li.videoTsToSeconds(d.prependedContentDuration)),h.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:S})}),f.on("audioSegmentTimingInfo",function(d){const S={start:{decode:Li.videoTsToSeconds(d.start.dts),presentation:Li.videoTsToSeconds(d.start.pts)},end:{decode:Li.videoTsToSeconds(d.end.dts),presentation:Li.videoTsToSeconds(d.end.pts)},baseMediaDecodeTime:Li.videoTsToSeconds(d.baseMediaDecodeTime)};d.prependedContentDuration&&(S.prependedContentDuration=Li.videoTsToSeconds(d.prependedContentDuration)),h.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:S})}),f.on("id3Frame",function(d){h.postMessage({action:"id3Frame",id3Frame:d})}),f.on("caption",function(d){h.postMessage({action:"caption",caption:d})}),f.on("trackinfo",function(d){h.postMessage({action:"trackinfo",trackInfo:d})}),f.on("audioTimingInfo",function(d){h.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Li.videoTsToSeconds(d.start),end:Li.videoTsToSeconds(d.end)}})}),f.on("videoTimingInfo",function(d){h.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Li.videoTsToSeconds(d.start),end:Li.videoTsToSeconds(d.end)}})}),f.on("log",function(d){h.postMessage({action:"log",log:d})})}(this.self,this.transmuxer)}pushMp4Captions(h){this.captionParser||(this.captionParser=new _m,this.captionParser.init());const f=new Uint8Array(h.data,h.byteOffset,h.byteLength),d=this.captionParser.parse(f,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:d&&d.captions||[],logs:d&&d.logs||[],data:f.buffer},[f.buffer])}probeMp4StartTime({timescales:h,data:f}){const d=Em(h,f);this.self.postMessage({action:"probeMp4StartTime",startTime:d,data:f},[f.buffer])}probeMp4Tracks({data:h}){const f=Cm(h);this.self.postMessage({action:"probeMp4Tracks",tracks:f,data:h},[h.buffer])}probeEmsgID3({data:h,offset:f}){const d=xm(h,f);this.self.postMessage({action:"probeEmsgID3",id3Frames:d,emsgData:h},[h.buffer])}probeTs({data:h,baseStartTime:f}){const d=typeof f!="number"||isNaN(f)?void 0:f*Li.ONE_SECOND_IN_TS,S=Pm(h,d);let x=null;S&&(x={hasVideo:S.video&&S.video.length===2||!1,hasAudio:S.audio&&S.audio.length===2||!1},x.hasVideo&&(x.videoStart=S.video[0].ptsTime),x.hasAudio&&(x.audioStart=S.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:x,data:h},[h.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(h){const f=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(f)}reset(){this.transmuxer.reset()}setTimestampOffset(h){const f=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Li.secondsToVideoTs(f)))}setAudioAppendStart(h){this.transmuxer.setAudioAppendStart(Math.ceil(Li.secondsToVideoTs(h.appendStart)))}setRemux(h){this.transmuxer.setRemux(h.remux)}flush(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())}}self.onmessage=function(o){o.data.action==="init"&&o.data.options?this.messageHandlers=new _d(self,o.data.options):(this.messageHandlers||(this.messageHandlers=new _d(self)),o.data&&o.data.action&&o.data.action!=="init"&&this.messageHandlers[o.data.action]&&this.messageHandlers[o.data.action](o.data))}}));var rp=Yu(np);const Ju=s=>{const{transmuxer:t,bytes:e,audioAppendStart:i,gopsToAlignWith:n,remux:r,onData:a,onTrackInfo:c,onAudioTimingInfo:p,onVideoTimingInfo:v,onVideoSegmentTimingInfo:_,onAudioSegmentTimingInfo:L,onId3:k,onCaptions:A,onDone:tt,onEndedTimeline:z,onTransmuxerLog:lt,isEndOfTimeline:st,segment:mt,triggerSegmentEventFn:yt}=s,Lt={buffer:[]};let wt=st;if(t.onmessage=ht=>{t.currentTransmux===s&&(ht.data.action==="data"&&((St,qt,ve)=>{const{type:ye,initSegment:ne,captions:xe,captionStreams:oe,metadata:Ze,videoFrameDtsTime:ri,videoFramePtsTime:qe}=St.data.segment;qt.buffer.push({captions:xe,captionStreams:oe,metadata:Ze});const De=St.data.segment.boxes||{data:St.data.segment.data},bi={type:ye,data:new Uint8Array(De.data,De.data.byteOffset,De.data.byteLength),initSegment:new Uint8Array(ne.data,ne.byteOffset,ne.byteLength)};ri!==void 0&&(bi.videoFrameDtsTime=ri),qe!==void 0&&(bi.videoFramePtsTime=qe),ve(bi)})(ht,Lt,a),ht.data.action==="trackinfo"&&c(ht.data.trackInfo),ht.data.action==="gopInfo"&&((St,qt)=>{qt.gopInfo=St.data.gopInfo})(ht,Lt),ht.data.action==="audioTimingInfo"&&p(ht.data.audioTimingInfo),ht.data.action==="videoTimingInfo"&&v(ht.data.videoTimingInfo),ht.data.action==="videoSegmentTimingInfo"&&_(ht.data.videoSegmentTimingInfo),ht.data.action==="audioSegmentTimingInfo"&&L(ht.data.audioSegmentTimingInfo),ht.data.action==="id3Frame"&&k([ht.data.id3Frame],ht.data.id3Frame.dispatchType),ht.data.action==="caption"&&A(ht.data.caption),ht.data.action==="endedtimeline"&&(wt=!1,z()),ht.data.action==="log"&&lt(ht.data.log),ht.data.type==="transmuxed"&&(wt||(t.onmessage=null,(({transmuxedData:St,callback:qt})=>{St.buffer=[],qt(St)})({transmuxedData:Lt,callback:tt}),Zu(t))))},t.onerror=()=>{const ht={message:"Received an error message from the transmuxer worker",metadata:{errorType:_t.Error.StreamingFailedToTransmuxSegment,segmentInfo:or({segment:mt})}};tt(null,ht)},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(n)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),r!==void 0&&t.postMessage({action:"setRemux",remux:r}),e.byteLength){const ht=e instanceof ArrayBuffer?e:e.buffer,St=e instanceof ArrayBuffer?0:e.byteOffset;yt({type:"segmenttransmuxingstart",segment:mt}),t.postMessage({action:"push",data:ht,byteOffset:St,byteLength:e.byteLength},[ht])}st&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Zu=s=>{s.currentTransmux=null,s.transmuxQueue.length&&(s.currentTransmux=s.transmuxQueue.shift(),typeof s.currentTransmux=="function"?s.currentTransmux():Ju(s.currentTransmux))},th=(s,t)=>{s.postMessage({action:t}),Zu(s)};var eh=s=>{((t,e)=>{if(!e.currentTransmux)return e.currentTransmux=t,void th(e,t);e.transmuxQueue.push(th.bind(null,e,t))})("reset",s)};const sa=function(s){const t=s.transmuxer,e=s.endAction||s.action,i=s.callback,n=Z({},s,{endAction:null,transmuxer:null,callback:null}),r=a=>{a.data.action===e&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,s.byteOffset||0,s.byteLength||a.data.data.byteLength),s.data&&(s.data=a.data.data)),i(a.data))};if(t.addEventListener("message",r),s.data){const a=s.data instanceof ArrayBuffer;n.byteOffset=a?0:s.data.byteOffset,n.byteLength=s.data.byteLength;const c=[a?s.data:s.data.buffer];t.postMessage(n,c)}else t.postMessage(n)},wl=-101,El=-102,Cl=s=>{s.forEach(t=>{t.abort()})},xl=(s,t)=>{const{requestType:e}=t,i=ar({requestType:e,request:t,error:s});return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:wl,xhr:t,metadata:i}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:El,xhr:t,metadata:i}:s?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t,metadata:i}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t,metadata:i}:null},ih=(s,t,e,i)=>(n,r)=>{const a=r.response,c=xl(n,r);if(c)return e(c,s);if(a.byteLength!==16)return e({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},s);const p=new DataView(a),v=new Uint32Array([p.getUint32(0),p.getUint32(4),p.getUint32(8),p.getUint32(12)]);for(let L=0;L<t.length;L++)t[L].bytes=v;const _={uri:r.uri};return i({type:"segmentkeyloadcomplete",segment:s,keyInfo:_}),e(null,s)},sh=(s,t)=>{const e=Bn(s.map.bytes);if(e!=="mp4"){const i=s.map.resolvedUri||s.map.uri,n=e||"unknown";return t({internal:!0,message:`Found unsupported ${n} container for initialization segment at URL: ${i}`,code:2,metadata:{mediaType:n}})}sa({action:"probeMp4Tracks",data:s.map.bytes,transmuxer:s.transmuxer,callback:({tracks:i,data:n})=>(s.map.bytes=n,i.forEach(function(r){s.map.tracks=s.map.tracks||{},s.map.tracks[r.type]||(s.map.tracks[r.type]=r,typeof r.id=="number"&&r.timescale&&(s.map.timescales=s.map.timescales||{},s.map.timescales[r.id]=r.timescale))}),t(null))})},ap=({segment:s,bytes:t,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:c,isEndOfTimeline:p,endedTimelineFn:v,dataFn:_,doneFn:L,onTransmuxerLog:k,triggerSegmentEventFn:A})=>{const tt=s.map&&s.map.tracks||{},z=!!(tt.audio&&tt.video);let lt=i.bind(null,s,"audio","start");const st=i.bind(null,s,"audio","end");let mt=i.bind(null,s,"video","start");const yt=i.bind(null,s,"video","end");sa({action:"probeTs",transmuxer:s.transmuxer,data:t,baseStartTime:s.baseStartTime,callback:Lt=>{s.bytes=t=Lt.data;const wt=Lt.result;wt&&(e(s,{hasAudio:wt.hasAudio,hasVideo:wt.hasVideo,isMuxed:z}),e=null),(ht=>{if(!ht.transmuxer.currentTransmux)return ht.transmuxer.currentTransmux=ht,void Ju(ht);ht.transmuxer.transmuxQueue.push(ht)})({bytes:t,transmuxer:s.transmuxer,audioAppendStart:s.audioAppendStart,gopsToAlignWith:s.gopsToAlignWith,remux:z,onData:ht=>{ht.type=ht.type==="combined"?"video":ht.type,_(s,ht)},onTrackInfo:ht=>{e&&(z&&(ht.isMuxed=!0),e(s,ht))},onAudioTimingInfo:ht=>{lt&&ht.start!==void 0&&(lt(ht.start),lt=null),st&&ht.end!==void 0&&st(ht.end)},onVideoTimingInfo:ht=>{mt&&ht.start!==void 0&&(mt(ht.start),mt=null),yt&&ht.end!==void 0&&yt(ht.end)},onVideoSegmentTimingInfo:ht=>{const St={pts:{start:ht.start.presentation,end:ht.end.presentation},dts:{start:ht.start.decode,end:ht.end.decode}};A({type:"segmenttransmuxingtiminginfoavailable",segment:s,timingInfo:St}),n(ht)},onAudioSegmentTimingInfo:ht=>{const St={pts:{start:ht.start.pts,end:ht.end.pts},dts:{start:ht.start.dts,end:ht.end.dts}};A({type:"segmenttransmuxingtiminginfoavailable",segment:s,timingInfo:St}),r(ht)},onId3:(ht,St)=>{a(s,ht,St)},onCaptions:ht=>{c(s,[ht])},isEndOfTimeline:p,onEndedTimeline:()=>{v()},onTransmuxerLog:k,onDone:(ht,St)=>{L&&(ht.type=ht.type==="combined"?"video":ht.type,A({type:"segmenttransmuxingcomplete",segment:s}),L(St,s,ht))},segment:s,triggerSegmentEventFn:A})}})},nh=({segment:s,bytes:t,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:c,isEndOfTimeline:p,endedTimelineFn:v,dataFn:_,doneFn:L,onTransmuxerLog:k,triggerSegmentEventFn:A})=>{let tt=new Uint8Array(t);if(function(z){return _s(z,["moof"]).length>0}(tt)){s.isFmp4=!0;const{tracks:z}=s.map,lt={isFmp4:!0,hasVideo:!!z.video,hasAudio:!!z.audio};z.audio&&z.audio.codec&&z.audio.codec!=="enca"&&(lt.audioCodec=z.audio.codec),z.video&&z.video.codec&&z.video.codec!=="encv"&&(lt.videoCodec=z.video.codec),z.video&&z.audio&&(lt.isMuxed=!0),e(s,lt);const st=(mt,yt)=>{_(s,{data:tt,type:lt.hasAudio&&!lt.isMuxed?"audio":"video"}),yt&&yt.length&&a(s,yt),mt&&mt.length&&c(s,mt),L(null,s,{})};sa({action:"probeMp4StartTime",timescales:s.map.timescales,data:tt,transmuxer:s.transmuxer,callback:({data:mt,startTime:yt})=>{t=mt.buffer,s.bytes=tt=mt,lt.hasAudio&&!lt.isMuxed&&i(s,"audio","start",yt),lt.hasVideo&&i(s,"video","start",yt),sa({action:"probeEmsgID3",data:tt,transmuxer:s.transmuxer,offset:yt,callback:({emsgData:Lt,id3Frames:wt})=>{t=Lt.buffer,s.bytes=tt=Lt,z.video&&Lt.byteLength&&s.transmuxer?sa({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:s.transmuxer,data:tt,timescales:s.map.timescales,trackIds:[z.video.id],callback:ht=>{t=ht.data.buffer,s.bytes=tt=ht.data,ht.logs.forEach(function(St){k(_i(St,{stream:"mp4CaptionParser"}))}),st(ht.captions,wt)}}):st(void 0,wt)}})}})}else if(s.transmuxer){if(s.container===void 0&&(s.container=Bn(tt)),s.container!=="ts"&&s.container!=="aac")return e(s,{hasAudio:!1,hasVideo:!1}),void L(null,s,{});ap({segment:s,bytes:t,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:r,id3Fn:a,captionsFn:c,isEndOfTimeline:p,endedTimelineFn:v,dataFn:_,doneFn:L,onTransmuxerLog:k,triggerSegmentEventFn:A})}else L(null,s,{})},rh=function({id:s,key:t,encryptedBytes:e,decryptionWorker:i,segment:n,doneFn:r},a){const c=v=>{if(v.data.source===s){i.removeEventListener("message",c);const _=v.data.decrypted;a(new Uint8Array(_.bytes,_.byteOffset,_.byteLength))}};let p;i.onerror=()=>{const v="An error occurred in the decryption worker",_=or({segment:n}),L={message:v,metadata:{error:new Error(v),errorType:_t.Error.StreamingFailedToDecryptSegment,segmentInfo:_,keyInfo:{uri:n.key.resolvedUri||n.map.key.resolvedUri}}};r(L,n)},i.addEventListener("message",c),p=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),i.postMessage(qu({source:s,encrypted:e,key:p,iv:t.iv}),[e.buffer,p.buffer])},op=({xhr:s,xhrOptions:t,decryptionWorker:e,segment:i,abortFn:n,progressFn:r,trackInfoFn:a,timingInfoFn:c,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:v,id3Fn:_,captionsFn:L,isEndOfTimeline:k,endedTimelineFn:A,dataFn:tt,doneFn:z,onTransmuxerLog:lt,triggerSegmentEventFn:st})=>{const mt=[],yt=(({activeXhrs:qt,decryptionWorker:ve,trackInfoFn:ye,timingInfoFn:ne,videoSegmentTimingInfoFn:xe,audioSegmentTimingInfoFn:oe,id3Fn:Ze,captionsFn:ri,isEndOfTimeline:qe,endedTimelineFn:De,dataFn:bi,doneFn:Qi,onTransmuxerLog:fn,triggerSegmentEventFn:sn})=>{let js=0,lr=!1;return(Gs,Vi)=>{if(!lr){if(Gs)return lr=!0,Cl(qt),Qi(Gs,Vi);if(js+=1,js===qt.length){const nn=function(){if(Vi.encryptedBytes)return(({decryptionWorker:Nr,segment:ls,trackInfoFn:Ja,timingInfoFn:aa,videoSegmentTimingInfoFn:Za,audioSegmentTimingInfoFn:to,id3Fn:oa,captionsFn:eo,isEndOfTimeline:io,endedTimelineFn:so,dataFn:no,doneFn:ro,onTransmuxerLog:ao,triggerSegmentEventFn:la})=>{la({type:"segmentdecryptionstart"}),rh({id:ls.requestId,key:ls.key,encryptedBytes:ls.encryptedBytes,decryptionWorker:Nr,segment:ls,doneFn:ro},gn=>{ls.bytes=gn,la({type:"segmentdecryptioncomplete",segment:ls}),nh({segment:ls,bytes:ls.bytes,trackInfoFn:Ja,timingInfoFn:aa,videoSegmentTimingInfoFn:Za,audioSegmentTimingInfoFn:to,id3Fn:oa,captionsFn:eo,isEndOfTimeline:io,endedTimelineFn:so,dataFn:no,doneFn:ro,onTransmuxerLog:ao,triggerSegmentEventFn:la})})})({decryptionWorker:ve,segment:Vi,trackInfoFn:ye,timingInfoFn:ne,videoSegmentTimingInfoFn:xe,audioSegmentTimingInfoFn:oe,id3Fn:Ze,captionsFn:ri,isEndOfTimeline:qe,endedTimelineFn:De,dataFn:bi,doneFn:Qi,onTransmuxerLog:fn,triggerSegmentEventFn:sn});nh({segment:Vi,bytes:Vi.bytes,trackInfoFn:ye,timingInfoFn:ne,videoSegmentTimingInfoFn:xe,audioSegmentTimingInfoFn:oe,id3Fn:Ze,captionsFn:ri,isEndOfTimeline:qe,endedTimelineFn:De,dataFn:bi,doneFn:Qi,onTransmuxerLog:fn,triggerSegmentEventFn:sn})};if(Vi.endOfAllRequests=Date.now(),Vi.map&&Vi.map.encryptedBytes&&!Vi.map.bytes)return sn({type:"segmentdecryptionstart",segment:Vi}),rh({decryptionWorker:ve,id:Vi.requestId+"-init",encryptedBytes:Vi.map.encryptedBytes,key:Vi.map.key,segment:Vi,doneFn:Qi},Nr=>{Vi.map.bytes=Nr,sn({type:"segmentdecryptioncomplete",segment:Vi}),sh(Vi,ls=>{if(ls)return Cl(qt),Qi(ls,Vi);nn()})});nn()}}}})({activeXhrs:mt,decryptionWorker:e,trackInfoFn:a,timingInfoFn:c,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:v,id3Fn:_,captionsFn:L,isEndOfTimeline:k,endedTimelineFn:A,dataFn:tt,doneFn:z,onTransmuxerLog:lt,triggerSegmentEventFn:st});if(i.key&&!i.key.bytes){const qt=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&qt.push(i.map.key);const ve=_i(t,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),ye=ih(i,qt,yt,st);st({type:"segmentkeyloadstart",segment:i,keyInfo:{uri:i.key.resolvedUri}});const ne=s(ve,ye);mt.push(ne)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const ne=_i(t,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),xe=ih(i,[i.map.key],yt,st);st({type:"segmentkeyloadstart",segment:i,keyInfo:{uri:i.map.key.resolvedUri}});const oe=s(ne,xe);mt.push(oe)}const qt=_i(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Tl(i.map),requestType:"segment-media-initialization"}),ve=(({segment:ne,finishProcessingFn:xe,triggerSegmentEventFn:oe})=>(Ze,ri)=>{const qe=xl(Ze,ri);if(qe)return xe(qe,ne);const De=new Uint8Array(ri.response);if(oe({type:"segmentloaded",segment:ne}),ne.map.key)return ne.map.encryptedBytes=De,xe(null,ne);ne.map.bytes=De,sh(ne,function(bi){if(bi)return bi.xhr=ri,bi.status=ri.status,xe(bi,ne);xe(null,ne)})})({segment:i,finishProcessingFn:yt,triggerSegmentEventFn:st});st({type:"segmentloadstart",segment:i});const ye=s(qt,ve);mt.push(ye)}const Lt=_i(t,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Tl(i),requestType:"segment"}),wt=(({segment:qt,finishProcessingFn:ve,responseType:ye,triggerSegmentEventFn:ne})=>(xe,oe)=>{const Ze=xl(xe,oe);if(Ze)return ve(Ze,qt);ne({type:"segmentloaded",segment:qt});const ri=ye!=="arraybuffer"&&oe.responseText?(qe=>{const De=new Uint8Array(new ArrayBuffer(qe.length));for(let bi=0;bi<qe.length;bi++)De[bi]=qe.charCodeAt(bi);return De.buffer})(oe.responseText.substring(qt.lastReachedChar||0)):oe.response;return qt.stats=(qe=>({bandwidth:qe.bandwidth,bytesReceived:qe.bytesReceived||0,roundTripTime:qe.roundTripTime||0}))(oe),qt.key?qt.encryptedBytes=new Uint8Array(ri):qt.bytes=new Uint8Array(ri),ve(null,qt)})({segment:i,finishProcessingFn:yt,responseType:Lt.responseType,triggerSegmentEventFn:st});st({type:"segmentloadstart",segment:i});const ht=s(Lt,wt);ht.addEventListener("progress",(({segment:qt,progressFn:ve,trackInfoFn:ye,timingInfoFn:ne,videoSegmentTimingInfoFn:xe,audioSegmentTimingInfoFn:oe,id3Fn:Ze,captionsFn:ri,isEndOfTimeline:qe,endedTimelineFn:De,dataFn:bi})=>Qi=>{if(!Qi.target.aborted)return qt.stats=_i(qt.stats,(fn=>{const sn=fn.target,js={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-sn.requestTime||0};return js.bytesReceived=fn.loaded,js.bandwidth=Math.floor(js.bytesReceived/js.roundTripTime*8*1e3),js})(Qi)),!qt.stats.firstBytesReceivedAt&&qt.stats.bytesReceived&&(qt.stats.firstBytesReceivedAt=Date.now()),ve(Qi,qt)})({segment:i,progressFn:r,trackInfoFn:a,timingInfoFn:c,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:v,id3Fn:_,captionsFn:L,isEndOfTimeline:k,endedTimelineFn:A,dataFn:tt})),mt.push(ht);const St={};return mt.forEach(qt=>{qt.addEventListener("loadend",(({loadendState:ve,abortFn:ye})=>ne=>{ne.target.aborted&&ye&&!ve.calledAbortFn&&(ye(),ve.calledAbortFn=!0)})({loadendState:St,abortFn:n}))}),()=>Cl(mt)},lp=Ws("CodecUtils"),ah=(s,t)=>{const e=t.attributes||{};return s&&s.mediaGroups&&s.mediaGroups.AUDIO&&e.AUDIO&&s.mediaGroups.AUDIO[e.AUDIO]},Ga=function(s){const t={};return s.forEach(({mediaType:e,type:i,details:n})=>{t[e]=t[e]||[],t[e].push(Et(`${i}${n}`))}),Object.keys(t).forEach(function(e){if(t[e].length>1)return lp(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]}),t},oh=function(s){let t=0;return s.audio&&t++,s.video&&t++,t},na=function(s,t){const e=t.attributes||{},i=Ga(function(n){const r=n.attributes||{};if(r.CODECS)return Bt(r.CODECS)}(t)||[]);if(ah(s,t)&&!i.audio&&!((n,r)=>{if(!ah(n,r))return!0;const a=r.attributes||{},c=n.mediaGroups.AUDIO[a.AUDIO];for(const p in c)if(!c[p].uri&&!c[p].playlists)return!0;return!1})(s,t)){const n=Ga(function(r,a){if(!r.mediaGroups.AUDIO||!a)return null;var c=r.mediaGroups.AUDIO[a];if(!c)return null;for(var p in c){var v=c[p];if(v.default&&v.playlists)return Bt(v.playlists[0].attributes.CODECS)}return null}(s,e.AUDIO)||[]);n.audio&&(i.audio=n.audio)}return i},Xa=Ws("PlaylistSelector"),lh=function(s){if(!s||!s.playlist)return;const t=s.playlist;return JSON.stringify({id:t.id,bandwidth:s.bandwidth,width:s.width,height:s.height,codecs:t.attributes&&t.attributes.CODECS||""})},Ya=function(s,t){if(!s)return"";const e=u().getComputedStyle(s);return e?e[t]:""},Lr=function(s,t){const e=s.slice();s.sort(function(i,n){const r=t(i,n);return r===0?e.indexOf(i)-e.indexOf(n):r})},kl=function(s,t){let e,i;return s.attributes.BANDWIDTH&&(e=s.attributes.BANDWIDTH),e=e||u().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||u().Number.MAX_VALUE,e-i};let ch=function(s,t,e,i,n,r){if(!s)return;const a={bandwidth:t,width:e,height:i,limitRenditionByPlayerDimensions:n};let c=s.playlists;ws.isAudioOnly(s)&&(c=r.getAudioTrackPlaylists_(),a.audioOnly=!0);let p=c.map(wt=>{let ht;const St=wt.attributes&&wt.attributes.RESOLUTION&&wt.attributes.RESOLUTION.width,qt=wt.attributes&&wt.attributes.RESOLUTION&&wt.attributes.RESOLUTION.height;return ht=wt.attributes&&wt.attributes.BANDWIDTH,ht=ht||u().Number.MAX_VALUE,{bandwidth:ht,width:St,height:qt,playlist:wt}});Lr(p,(wt,ht)=>wt.bandwidth-ht.bandwidth),p=p.filter(wt=>!ws.isIncompatible(wt.playlist));let v=p.filter(wt=>ws.isEnabled(wt.playlist));v.length||(v=p.filter(wt=>!ws.isDisabled(wt.playlist)));const _=v.filter(wt=>wt.bandwidth*es.BANDWIDTH_VARIANCE<t);let L=_[_.length-1];const k=_.filter(wt=>wt.bandwidth===L.bandwidth)[0];if(n===!1){const wt=k||v[0]||p[0];if(wt&&wt.playlist){let ht="sortedPlaylistReps";return k&&(ht="bandwidthBestRep"),v[0]&&(ht="enabledPlaylistReps"),Xa(`choosing ${lh(wt)} using ${ht} with options`,a),wt.playlist}return Xa("could not choose a playlist with options",a),null}const A=_.filter(wt=>wt.width&&wt.height);Lr(A,(wt,ht)=>wt.width-ht.width);const tt=A.filter(wt=>wt.width===e&&wt.height===i);L=tt[tt.length-1];const z=tt.filter(wt=>wt.bandwidth===L.bandwidth)[0];let lt,st,mt,yt;if(z||(lt=A.filter(wt=>wt.width>e||wt.height>i),st=lt.filter(wt=>wt.width===lt[0].width&&wt.height===lt[0].height),L=st[st.length-1],mt=st.filter(wt=>wt.bandwidth===L.bandwidth)[0]),r.leastPixelDiffSelector){const wt=A.map(ht=>(ht.pixelDiff=Math.abs(ht.width-e)+Math.abs(ht.height-i),ht));Lr(wt,(ht,St)=>ht.pixelDiff===St.pixelDiff?St.bandwidth-ht.bandwidth:ht.pixelDiff-St.pixelDiff),yt=wt[0]}const Lt=yt||mt||z||k||v[0]||p[0];if(Lt&&Lt.playlist){let wt="sortedPlaylistReps";return yt?wt="leastPixelDiffRep":mt?wt="resolutionPlusOneRep":z?wt="resolutionBestRep":k?wt="bandwidthBestRep":v[0]&&(wt="enabledPlaylistReps"),Xa(`choosing ${lh(Lt)} using ${wt} with options`,a),Lt.playlist}return Xa("could not choose a playlist with options",a),null};const uh=function(){let s=this.useDevicePixelRatio&&u().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),ch(this.playlists.main,this.systemBandwidth,parseInt(Ya(this.tech_.el(),"width"),10)*s,parseInt(Ya(this.tech_.el(),"height"),10)*s,this.limitRenditionByPlayerDimensions,this.playlistController_)};function hh(s){try{return new URL(s).pathname.split("/").slice(-2).join("/")}catch{return""}}const cp={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},up=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),dh=(s,t,e)=>{s.metadataTrack_||(s.metadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,_t.browser.IS_ANY_SAFARI||(s.metadataTrack_.inBandMetadataTrackDispatchType=t))},ra=function(s,t,e){let i,n;if(e&&e.cues)for(i=e.cues.length;i--;)n=e.cues[i],n.startTime>=s&&n.endTime<=t&&e.removeCue(n)},ph=s=>typeof s=="number"&&isFinite(s),mh=1/60,Dr=s=>{const{startOfSegment:t,duration:e,segment:i,part:n,playlist:{mediaSequence:r,id:a,segments:c=[]},mediaIndex:p,partIndex:v,timeline:_}=s,L=c.length-1;let k="mediaIndex/partIndex increment";s.getMediaInfoForTime?k=`getMediaInfoForTime (${s.getMediaInfoForTime})`:s.isSyncRequest&&(k="getSyncSegmentCandidate (isSyncRequest)"),s.independent&&(k+=` with independent ${s.independent}`);const A=typeof v=="number",tt=s.segment.uri?"segment":"pre-segment",z=A?wu({preloadSegment:i})-1:0;return`${tt} [${r+p}/${r+L}]`+(A?` part [${v}/${z}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(A?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${t}] duration [${e}] timeline [${_}] selected by [${k}] playlist [${a}]`},fh=s=>`${s}TimingInfo`,gh=({timelineChangeController:s,currentTimeline:t,segmentTimeline:e,loaderType:i,audioDisabled:n})=>{if(t===e)return!1;if(i==="audio"){const r=s.lastTimelineChange({type:"main"});return!r||r.to!==e}if(i==="main"&&n){const r=s.pendingTimelineChange({type:"audio"});return!r||r.to!==e}return!1},yh=({segmentDuration:s,maxDuration:t})=>!!s&&Math.round(s)>t+Ln,or=({type:s,segment:t})=>{if(!t)return;const e=!!(t.key||t.map&&t.map.ke),i=!!(t.map&&!t.map.bytes),n=t.startOfSegment===void 0?t.start:t.startOfSegment;return{type:s||t.type,uri:t.resolvedUri||t.uri,start:n,duration:t.duration,isEncrypted:e,isMediaInitialization:i}};class Al extends _t.EventTarget{constructor(t,e={}){if(super(),!t)throw new TypeError("Initialization settings are required");if(typeof t.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.addMetadataToTextTrack=t.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Ws(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(Z({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(Z({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return(t=>{const e=new rp;e.currentTransmux=null,e.transmuxQueue=[];const i=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,i.call(e)),e.postMessage({action:"init",options:t}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&u().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){this.state==="WAITING"?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,u().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return this.state!=="APPENDING"||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)}error(t){return t!==void 0&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&eh(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return fs();if(this.loaderType_==="main"){const{hasAudio:e,hasVideo:i,isMuxed:n}=t;if(i&&e&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,e=!1){if(!t)return null;const i=Wa(t);let n=this.initSegments_[i];return e&&!n&&t.bytes&&(this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),n||t}segmentKey(t,e=!1){if(!t)return null;const i=$u(t);let n=this.keyCache_[i];this.cacheEncryptionKeys_&&e&&!n&&t.bytes&&(this.keyCache_[i]=n={resolvedUri:t.resolvedUri,bytes:t.bytes});const r={resolvedUri:(n||t).resolvedUri};return n&&(r.bytes=n.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return this.state==="INIT"&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,e={}){if(!t)return;const i=this.playlist_,n=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=e,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));let r=null;if(i&&(i.id?r=i.id:i.uri&&(r=i.uri)),this.logger_(`playlist update [${r} => ${t.id||t.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(t,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${hl(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==t.uri)return this.mediaIndex!==null&&(t.endList||typeof t.partTargetDuration!="number"?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const a=t.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){const p=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=p}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=t.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,t)}pause(){this.checkBufferTimeout_&&(u().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&eh(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const t=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!t&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,e,i=()=>{},n=!1){if(e===1/0&&(e=this.duration_()),e<=t)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const a=()=>{r--,r===0&&i()};!n&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(t,e,a)),(n||this.loaderType_==="main")&&(this.gopBuffer_=((c,p,v,_)=>{const L=Math.ceil((p-_)*vs.ONE_SECOND_IN_TS),k=Math.ceil((v-_)*vs.ONE_SECOND_IN_TS),A=c.slice();let tt=c.length;for(;tt--&&!(c[tt].pts<=k););if(tt===-1)return A;let z=tt+1;for(;z--&&!(c[z].pts<=L););return z=Math.max(z,0),A.splice(z,tt-z+1),A})(this.gopBuffer_,t,e,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(t,e,a));for(const c in this.inbandTextTracks_)ra(t,e,this.inbandTextTracks_[c]);ra(t,e,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&u().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=u().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&u().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=u().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const t=this.chooseNextRequest_();if(!t)return;const e={segmentInfo:or({type:this.loaderType_,segment:t})};this.trigger({type:"segmentselected",metadata:e}),typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t)}isEndOfStream_(t=this.mediaIndex,e=this.playlist_,i=this.partIndex){if(!e||!this.mediaSource_)return!1;const n=typeof t=="number"&&e.segments[t],r=t+1===e.segments.length,a=!n||!n.parts||i+1===n.parts.length;return e.endList&&this.mediaSource_.readyState==="open"&&r&&a}chooseNextRequest_(){const t=this.buffered_(),e=hl(t)||0,i=dl(t,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,r=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||n||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(c.isSyncRequest)c.mediaIndex=function(k,A,tt){A=A||[];const z=[];let lt=0;for(let st=0;st<A.length;st++){const mt=A[st];if(k===mt.timeline&&(z.push(st),lt+=mt.duration,lt>tt))return st}return z.length===0?0:z[z.length-1]}(this.currentTimeline_,a,e),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${c.mediaIndex}`);else if(this.mediaIndex!==null){const k=a[this.mediaIndex],A=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=k.end?k.end:e,k.parts&&k.parts[A+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=A+1):c.mediaIndex=this.mediaIndex+1}else{let k,A,tt;const z=this.fetchAtBuffer_?e:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${z}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${e}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const lt=this.getSyncInfoFromMediaSequenceSync_(z);if(!lt){const st="No sync info found while using media sequence sync";return this.error({message:st,metadata:{errorType:_t.Error.StreamingFailedToSelectNextSegment,error:new Error(st)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${lt.start} --> ${lt.end})`),k=lt.segmentIndex,A=lt.partIndex,tt=lt.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const lt=ws.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:z,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});k=lt.segmentIndex,A=lt.partIndex,tt=lt.startTime}c.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${z}`:`currentTime ${z}`,c.mediaIndex=k,c.startOfSegment=tt,c.partIndex=A,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${c.mediaIndex} `)}const p=a[c.mediaIndex];let v=p&&typeof c.partIndex=="number"&&p.parts&&p.parts[c.partIndex];if(!p||typeof c.partIndex=="number"&&!v)return null;typeof c.partIndex!="number"&&p.parts&&(c.partIndex=0,v=p.parts[0]);const _=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&v&&!_&&!v.independent)if(c.partIndex===0){const k=a[c.mediaIndex-1],A=k.parts&&k.parts.length&&k.parts[k.parts.length-1];A&&A.independent&&(c.mediaIndex-=1,c.partIndex=k.parts.length-1,c.independent="previous segment")}else p.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");const L=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=a.length-1&&L&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,c.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(c))}getSyncInfoFromMediaSequenceSync_(t){if(!this.mediaSequenceSync_)return null;const e=Math.max(t,this.mediaSequenceSync_.start);t!==e&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${t} to ${e}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(e);if(!i)return null;if(!i.isAppended)return i;const n=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return n?(n.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),n):null}generateSegmentInfo_(t){const{independent:e,playlist:i,mediaIndex:n,startOfSegment:r,isSyncRequest:a,partIndex:c,forceTimestampOffset:p,getMediaInfoForTime:v}=t,_=i.segments[n],L=typeof c=="number"&&_.parts[c],k={requestId:"segment-loader-"+Math.random(),uri:L&&L.resolvedUri||_.resolvedUri,mediaIndex:n,partIndex:L?c:null,isSyncRequest:a,startOfSegment:r,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:_.timeline,duration:L&&L.duration||_.duration,segment:_,part:L,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:e},A=p!==void 0?p:this.isPendingTimestampOffset_;k.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:_.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:A});const tt=hl(this.sourceUpdater_.audioBuffered());return typeof tt=="number"&&(k.audioAppendStart=tt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(k.gopsToAlignWith=((z,lt,st)=>{if(lt==null||!z.length)return[];const mt=Math.ceil((lt-st+3)*vs.ONE_SECOND_IN_TS);let yt;for(yt=0;yt<z.length&&!(z[yt].pts>mt);yt++);return z.slice(yt)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),k}timestampOffsetForSegment_(t){return(({segmentTimeline:e,currentTimeline:i,startOfSegment:n,buffered:r,overrideCheck:a})=>a||e!==i?e<i?n:r.length?r.end(r.length-1):n:null)(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;const e=this.currentTime_(),i=t.bandwidth,n=this.pendingSegment_.duration,r=ws.estimateSegmentRequestTime(n,i,this.playlist_,t.bytesReceived),a=function(_,L,k=1){return((_.length?_.end(_.length-1):0)-L)/k}(this.buffered_(),e,this.vhs_.tech_.playbackRate())-1;if(r<=a)return;const c=function(_){const{main:L,currentTime:k,bandwidth:A,duration:tt,segmentDuration:z,timeUntilRebuffer:lt,currentTimeline:st,syncController:mt}=_,yt=L.playlists.filter(St=>!ws.isIncompatible(St));let Lt=yt.filter(ws.isEnabled);Lt.length||(Lt=yt.filter(St=>!ws.isDisabled(St)));const wt=Lt.filter(ws.hasAttribute.bind(null,"BANDWIDTH")).map(St=>{const qt=mt.getSyncPoint(St,tt,st,k)?1:2;return{playlist:St,rebufferingImpact:ws.estimateSegmentRequestTime(z,A,St)*qt-lt}}),ht=wt.filter(St=>St.rebufferingImpact<=0);return Lr(ht,(St,qt)=>kl(qt.playlist,St.playlist)),ht.length?ht[0]:(Lr(wt,(St,qt)=>St.rebufferingImpact-qt.rebufferingImpact),wt[0]||null)}({main:this.vhs_.playlists.main,currentTime:e,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!c)return;const p=r-a-c.rebufferingImpact;let v=.5;a<=Ln&&(v=1),!c.playlist||c.playlist.uri===this.playlist_.uri||p<v||(this.bandwidth=c.playlist.attributes.BANDWIDTH*es.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${Dr(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,e){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.trigger("progress")}handleTrackInfo_(t,e){const{hasAudio:i,hasVideo:n}=e,r={segmentInfo:or({type:this.loaderType_,segment:t}),trackInfo:{hasAudio:i,hasVideo:n}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:r}),this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(e)||(e=e||{},function(a,c){if(!a&&!c||!a&&c||a&&!c)return!1;if(a===c)return!0;const p=Object.keys(a).sort(),v=Object.keys(c).sort();if(p.length!==v.length)return!1;for(let _=0;_<p.length;_++){const L=p[_];if(L!==v[_]||a[L]!==c[L])return!1}return!0}(this.currentMediaInfo_,e)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=e,this.currentMediaInfo_=e,this.logger_("trackinfo update",e),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=e,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(t,e,i,n){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;const r=this.pendingSegment_,a=fh(e);r[a]=r[a]||{},r[a][i]=n,this.logger_(`timinginfo: ${e} - ${i} - ${n}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(t,e){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(e.length===0)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,e));const i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),n={};e.forEach(r=>{n[r.stream]=n[r.stream]||{startTime:1/0,captions:[],endTime:0};const a=n[r.stream];a.startTime=Math.min(a.startTime,r.startTime+i),a.endTime=Math.max(a.endTime,r.endTime+i),a.captions.push(r)}),Object.keys(n).forEach(r=>{const{startTime:a,endTime:c,captions:p}=n[r],v=this.inbandTextTracks_;this.logger_(`adding cues from ${a} -> ${c} for ${r}`),function(_,L,k){if(!_[k]){L.trigger({type:"usage",name:"vhs-608"});let A=k;/^cc708_/.test(k)&&(A="SERVICE"+k.split("_")[1]);const tt=L.textTracks().getTrackById(A);if(tt)_[k]=tt;else{let z=k,lt=k,st=!1;const mt=(L.options_.vhs&&L.options_.vhs.captionServices||{})[A];mt&&(z=mt.label,lt=mt.language,st=mt.default),_[k]=L.addRemoteTextTrack({kind:"captions",id:A,default:st,label:z,language:lt},!1).track}}}(v,this.vhs_.tech_,r),ra(a,c,v[r]),function({inbandTextTracks:_,captionArray:L,timestampOffset:k}){if(!L)return;const A=u().WebKitDataCue||u().VTTCue;L.forEach(tt=>{const z=tt.stream;tt.content?tt.content.forEach(lt=>{const st=new A(tt.startTime+k,tt.endTime+k,lt.text);st.line=lt.line,st.align="left",st.position=lt.position,st.positionAlign="line-left",_[z].addCue(st)}):_[z].addCue(new A(tt.startTime+k,tt.endTime+k,tt.text))})}({captionArray:p,inbandTextTracks:v,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,e,i){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(i,e,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,e,i)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const t=this.callQueue_;this.callQueue_=[],t.forEach(e=>e())}processLoadQueue_(){const t=this.loadQueue_;this.loadQueue_=[],t.forEach(e=>e())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&gh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const t=this.pendingSegment_,e=this.getCurrentMediaInfo_();if(!t||!e)return!1;const{hasAudio:i,hasVideo:n,isMuxed:r}=e;return!(n&&!t.videoTimingInfo||i&&!this.audioDisabled_&&!r&&!t.audioTimingInfo||gh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,e){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,e));const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),i.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),i.isFmp4=t.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[fh(e.type)].start;else{const n=this.getCurrentMediaInfo_(),r=this.loaderType_==="main"&&n&&n.hasVideo;let a;r&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,e.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=this.chooseNextRequest_();if(n.mediaIndex!==i.mediaIndex||n.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,e)}}updateAppendInitSegmentStatus(t,e){this.loaderType_!=="main"||typeof t.timestampOffset!="number"||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[e]!==t.playlist&&(this.appendInitSegment_[e]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:e,map:i,playlist:n}){if(i){const r=Wa(i);if(this.activeInitSegmentId_===r)return null;e=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=r}return e&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=n,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,e):null}handleQuotaExceededError_({segmentInfo:t,type:e,bytes:i},n){const r=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+rr(r).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+rr(a).join(", "));const c=r.length?r.start(0):0,p=r.length?r.end(r.length-1):0,v=a.length?a.start(0):0,_=a.length?a.end(a.length-1):0;if(p-c<=1&&_-v<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${rr(r).join(", ")}, video buffer: ${rr(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:e,bytes:i}));const L=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${L}`),this.remove(0,L,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=u().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:t,type:e,bytes:i},n){n&&(n.code!==22?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error({message:`${e} append of ${i.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`,metadata:{errorType:_t.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:t,type:e,bytes:i}))}appendToSourceBuffer_({segmentInfo:t,type:e,initSegment:i,data:n,bytes:r}){if(!r){const c=[n];let p=n.byteLength;i&&(c.unshift(i),p+=i.byteLength),r=(v=>{let _,L=0;return v.bytes&&(_=new Uint8Array(v.bytes),v.segments.forEach(k=>{_.set(k,L),L+=k.byteLength})),_})({bytes:p,segments:c})}const a={segmentInfo:or({type:this.loaderType_,segment:t})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:t,type:e,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:t,type:e,bytes:r}))}handleSegmentTimingInfo_(t,e,i){if(!this.pendingSegment_||e!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,r=`${t}TimingInfo`;n[r]||(n[r]={}),n[r].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[r].transmuxedPresentationStart=i.start.presentation,n[r].transmuxedDecodeStart=i.start.decode,n[r].transmuxedPresentationEnd=i.end.presentation,n[r].transmuxedDecodeEnd=i.end.decode,n[r].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(t,e){const{type:i,data:n}=e;if(!n||!n.byteLength||i==="audio"&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:i,initSegment:e.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:r,data:n})}loadSegment_(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(()=>{const e=Z({},t,{forceTimestampOffset:!0});Z(t,this.generateSegmentInfo_(e)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)})}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));const e=this.createSimplifiedSegmentObj_(t),i=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),n=this.mediaIndex!==null,r=t.timeline!==this.currentTimeline_&&t.timeline>0,a=i||n&&r;this.logger_(`Requesting
${hh(t.uri)}
${Dr(t)}`),e.map&&!e.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=op({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:e,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:c,level:p,stream:v})=>{this.logger_(`${Dr(t)} logged from transmuxer stream ${v} as a ${p}: ${c}`)},triggerSegmentEventFn:({type:c,segment:p,keyInfo:v,trackInfo:_,timingInfo:L})=>{const k={segmentInfo:or({segment:p})};v&&(k.keyInfo=v),_&&(k.trackInfo=_),L&&(k.timingInfo=L),this.trigger({type:c,metadata:k})}})}trimBackBuffer_(t){const e=((i,n,r)=>{let a=n-es.BACK_BUFFER_LENGTH;i.length&&(a=Math.max(a,i.start(0)));const c=n-r;return Math.min(c,a)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)}createSimplifiedSegmentObj_(t){const e=t.segment,i=t.part,n=t.segment.key||t.segment.map&&t.segment.map.key,r=t.segment.map&&!t.segment.map.bytes,a={resolvedUri:i?i.resolvedUri:e.resolvedUri,byterange:i?i.byterange:e.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part,type:this.loaderType_,start:t.startOfSegment,duration:t.duration,isEncrypted:n,isMediaInitialization:r},c=t.playlist.segments[t.mediaIndex-1];if(c&&c.timeline===e.timeline&&(c.videoTimingInfo?a.baseStartTime=c.videoTimingInfo.transmuxedDecodeEnd:c.audioTimingInfo&&(a.baseStartTime=c.audioTimingInfo.transmuxedDecodeEnd)),e.key){const p=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);a.key=this.segmentKey(e.key),a.key.iv=p}return e.map&&(a.map=this.initSegmentForMap(e.map)),a}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,e){if(this.pendingSegment_.byteLength=e.bytesReceived,t<mh)return void this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record 0.016666666666666666`);const i={bandwidthInfo:{from:this.bandwidth,to:e.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,e,i){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,e,i));if(this.saveTransferStats_(e.stats),!this.pendingSegment_||e.requestId!==this.pendingSegment_.requestId)return;if(t)return this.pendingSegment_=null,this.state="READY",t.code===El?void 0:(this.pause(),t.code===wl?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,e.stats),n.endOfAllRequests=e.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=((r,a,c)=>{if(!a.length)return r;if(c)return a.slice();const p=a[0].pts;let v=0;for(;v<r.length&&!(r[v].pts>=p);v++);return r.slice(0,v).concat(a)})(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(t){const e=this.syncController_.mappingForTimeline(t);e!==null&&(this.timeMapping_=e)}updateMediaSecondsLoaded_(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return t!==null&&(this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:t,playlist:e,mediaIndex:i,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:r,useVideoTimingInfo:a,videoTimingInfo:c,audioTimingInfo:p}){if(t!==void 0)return t;if(!a)return p.start;const v=e.segments[i-1];return i!==0&&v&&v.start!==void 0&&v.end===n+r?c.start:n}waitForAppendsToComplete_(t){const e=this.getCurrentMediaInfo_(t);if(!e)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:i,hasVideo:n,isMuxed:r}=e,a=this.loaderType_==="main"&&n,c=!this.audioDisabled_&&i&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||typeof t.timestampOffset!="number"||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);a&&t.waitingOnAppends++,c&&t.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){const e=((i,n,r)=>i==="main"&&n&&r?r.hasAudio||r.hasVideo?n.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!e&&(this.error({message:e,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(t){if(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")return;let e=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),e=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),e=!0),e&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:e,timingInfo:i}){return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};const e=this.getMediaInfo_(),i=this.loaderType_==="main"&&e&&e.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;i&&(t.timingInfo.end=typeof i.end=="number"?i.end:i.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_){const c={segmentInfo:or({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:c})}if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const t=this.pendingSegment_;t.part&&t.part.syncInfo?t.part.syncInfo.markAppended():t.segment.syncInfo&&t.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});const e=((c,p)=>{if(p!=="hls")return null;const v=(tt=>{let z=0;return["video","audio"].forEach(function(lt){const st=tt[`${lt}TimingInfo`];if(!st)return;const{start:mt,end:yt}=st;let Lt;typeof mt=="bigint"||typeof yt=="bigint"?Lt=u().BigInt(yt)-u().BigInt(mt):typeof mt=="number"&&typeof yt=="number"&&(Lt=yt-mt),Lt!==void 0&&Lt>z&&(z=Lt)}),typeof z=="bigint"&&z<Number.MAX_SAFE_INTEGER&&(z=Number(z)),z})({audioTimingInfo:c.audioTimingInfo,videoTimingInfo:c.videoTimingInfo});if(!v)return null;const _=c.playlist.targetDuration,L=yh({segmentDuration:v,maxDuration:2*_}),k=yh({segmentDuration:v,maxDuration:_}),A=`Segment with index ${c.mediaIndex} from playlist ${c.playlist.id} has a duration of ${v} when the reported duration is ${c.duration} and the target duration is ${_}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return L||k?{severity:L?"warn":"info",message:A}:null})(t,this.sourceType_);if(e&&(e.severity==="warn"?_t.log.warn(e.message):this.logger_(e.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Dr(t)}`);this.logger_(`Appended ${Dr(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_!=="main"||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");const i=t.segment,n=t.part,r=i.end&&this.currentTime_()-i.end>3*t.playlist.targetDuration,a=n&&n.end&&this.currentTime_()-n.end>3*t.playlist.partTargetDuration;if(r||a)return this.logger_(`bad ${r?"segment":"part"} ${Dr(t)}`),void this.resetEverything();this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<mh)return void this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record 0.016666666666666666`);const e=this.throughput.rate,i=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/i*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;const e=t.segment,i=e.start,n=e.end;if(!ph(i)||!ph(n))return;ra(i,n,this.segmentMetadataTrack_);const r=u().WebKitDataCue||u().VTTCue,a={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,programDateTime:e.programDateTime,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:i,end:n},c=new r(i,n,JSON.stringify(a));c.value=a,this.segmentMetadataTrack_.addCue(c)}}function Dn(){}const _h=function(s){return typeof s!="string"?s:s.replace(/./,t=>t.toUpperCase())},hp=["video","audio"],Il=(s,t)=>{const e=t[`${s}Buffer`];return e&&e.updating||t.queuePending[s]},Rr=(s,t)=>{if(t.queue.length===0)return;let e=0,i=t.queue[e];if(i.type!=="mediaSource"){if(s!=="mediaSource"&&t.ready()&&t.mediaSource.readyState!=="closed"&&!Il(s,t)){if(i.type!==s){if(e=((n,r)=>{for(let a=0;a<r.length;a++){const c=r[a];if(c.type==="mediaSource")return null;if(c.type===n)return a}return null})(s,t.queue),e===null)return;i=t.queue[e]}return t.queue.splice(e,1),t.queuePending[s]=i,i.action(s,t),i.doneFn?void 0:(t.queuePending[s]=null,void Rr(s,t))}}else t.updating()||t.mediaSource.readyState==="closed"||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),Rr("audio",t),Rr("video",t))},vh=(s,t)=>{const e=t[`${s}Buffer`],i=_h(s);e&&(e.removeEventListener("updateend",t[`on${i}UpdateEnd_`]),e.removeEventListener("error",t[`on${i}Error_`]),t.codecs[s]=null,t[`${s}Buffer`]=null)},mn=(s,t)=>s&&t&&Array.prototype.indexOf.call(s.sourceBuffers,t)!==-1,dp=(s,t,e)=>(i,n)=>{const r=n[`${i}Buffer`];if(mn(n.mediaSource,r)){n.logger_(`Appending segment ${t.mediaIndex}'s ${s.length} bytes to ${i}Buffer`);try{r.appendBuffer(s)}catch(a){n.logger_(`Error with code ${a.code} `+(a.code===22?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${i}Buffer`),n.queuePending[i]=null,e(a)}}},bh=(s,t)=>(e,i)=>{const n=i[`${e}Buffer`];if(mn(i.mediaSource,n)){i.logger_(`Removing ${s} to ${t} from ${e}Buffer`);try{n.remove(s,t)}catch{i.logger_(`Remove ${s} to ${t} from ${e}Buffer failed`)}}},Th=s=>(t,e)=>{const i=e[`${t}Buffer`];mn(e.mediaSource,i)&&(e.logger_(`Setting ${t}timestampOffset to ${s}`),i.timestampOffset=s)},Sh=s=>(t,e)=>{s()},pp=s=>t=>{if(t.mediaSource.readyState==="open"){t.logger_(`Calling mediaSource endOfStream(${s||""})`);try{t.mediaSource.endOfStream(s)}catch(e){_t.log.warn("Failed to call media source endOfStream",e)}}},mp=s=>t=>{t.logger_(`Setting mediaSource duration to ${s}`);try{t.mediaSource.duration=s}catch(e){_t.log.warn("Failed to set media source duration",e)}},fp=(s,t)=>e=>{const i=_h(s),n=he(t);e.logger_(`Adding ${s}Buffer with codec ${t} to mediaSource`);const r=e.mediaSource.addSourceBuffer(n);r.addEventListener("updateend",e[`on${i}UpdateEnd_`]),r.addEventListener("error",e[`on${i}Error_`]),e.codecs[s]=t,e[`${s}Buffer`]=r},gp=s=>t=>{const e=t[`${s}Buffer`];if(vh(s,t),mn(t.mediaSource,e)){t.logger_(`Removing ${s}Buffer with codec ${t.codecs[s]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(e)}catch(i){_t.log.warn(`Failed to removeSourceBuffer ${s}Buffer`,i)}}},yp=s=>(t,e)=>{const i=e[`${t}Buffer`],n=he(s);if(!mn(e.mediaSource,i))return;const r=s.substring(0,s.indexOf(".")),a=e.codecs[t];if(a.substring(0,a.indexOf("."))===r)return;const c={codecsChangeInfo:{from:a,to:s}};e.trigger({type:"codecschange",metadata:c}),e.logger_(`changing ${t}Buffer codec from ${a} to ${s}`);try{i.changeType(n),e.codecs[t]=s}catch(p){c.errorType=_t.Error.StreamingCodecsChangeError,c.error=p,p.metadata=c,e.error_=p,e.trigger("error"),_t.log.warn(`Failed to changeType on ${t}Buffer`,p)}},Ms=({type:s,sourceUpdater:t,action:e,doneFn:i,name:n})=>{t.queue.push({type:s,action:e,doneFn:i,name:n}),Rr(s,t)},wh=(s,t)=>e=>{const i=function(n){if(n.length===0)return"Buffered Ranges are empty";let r=`Buffered Ranges: 
`;for(let a=0;a<n.length;a++){const c=n.start(a),p=n.end(a);r+=`${c} --> ${p}. Duration (${p-c})
`}return r}(t[`${s}Buffered`]());if(t.logger_(`received "updateend" event for ${s} Source Buffer: `,i),t.queuePending[s]){const n=t.queuePending[s].doneFn;t.queuePending[s]=null,n&&n(t[`${s}Error_`])}Rr(s,t)};class Eh extends _t.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>Rr("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Ws("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=wh("video",this),this.onAudioUpdateEnd_=wh("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,e){Ms({type:"mediaSource",sourceUpdater:this,action:fp(t,e),name:"addSourceBuffer"})}abort(t){Ms({type:t,sourceUpdater:this,action:(e,i)=>{if(i.mediaSource.readyState!=="open")return;const n=i[`${e}Buffer`];if(mn(i.mediaSource,n)){i.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(r){_t.log.warn(`Failed to abort on ${e}Buffer`,r)}}},name:"abort"})}removeSourceBuffer(t){this.canRemoveSourceBuffer()?Ms({type:"mediaSource",sourceUpdater:this,action:gp(t),name:"removeSourceBuffer"}):_t.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!_t.browser.IS_FIREFOX&&u().MediaSource&&u().MediaSource.prototype&&typeof u().MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return u().SourceBuffer&&u().SourceBuffer.prototype&&typeof u().SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(t,e){this.canChangeType()?Ms({type:t,sourceUpdater:this,action:yp(e),name:"changeType"}):_t.log.error("changeType is not supported!")}addOrChangeSourceBuffers(t){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(e=>{const i=t[e];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(e,i);this.canChangeType()&&this.changeType(e,i)})}appendBuffer(t,e){const{segmentInfo:i,type:n,bytes:r}=t;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,e]),void this.logger_(`delayed audio append of ${r.length} until video append`);if(Ms({type:n,sourceUpdater:this,action:dp(r,i||{mediaIndex:-1},e),doneFn:e,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const a=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${a.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,a.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return mn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:fs()}videoBuffered(){return mn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:fs()}buffered(){const t=mn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,e=mn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return e&&!t?this.audioBuffered():t&&!e?this.videoBuffered():function(i,n){let r=null,a=null,c=0;const p=[],v=[];if(!(i&&i.length&&n&&n.length))return fs();let _=i.length;for(;_--;)p.push({time:i.start(_),type:"start"}),p.push({time:i.end(_),type:"end"});for(_=n.length;_--;)p.push({time:n.start(_),type:"start"}),p.push({time:n.end(_),type:"end"});for(p.sort(function(L,k){return L.time-k.time}),_=0;_<p.length;_++)p[_].type==="start"?(c++,c===2&&(r=p[_].time)):p[_].type==="end"&&(c--,c===1&&(a=p[_].time)),r!==null&&a!==null&&(v.push([r,a]),r=null,a=null);return fs(v)}(this.audioBuffered(),this.videoBuffered())}setDuration(t,e=Dn){Ms({type:"mediaSource",sourceUpdater:this,action:mp(t),name:"duration",doneFn:e})}endOfStream(t=null,e=Dn){typeof t!="string"&&(t=void 0),Ms({type:"mediaSource",sourceUpdater:this,action:pp(t),name:"endOfStream",doneFn:e})}removeAudio(t,e,i=Dn){this.audioBuffered().length&&this.audioBuffered().end(0)!==0?Ms({type:"audio",sourceUpdater:this,action:bh(t,e),doneFn:i,name:"remove"}):i()}removeVideo(t,e,i=Dn){this.videoBuffered().length&&this.videoBuffered().end(0)!==0?Ms({type:"video",sourceUpdater:this,action:bh(t,e),doneFn:i,name:"remove"}):i()}updating(){return!(!Il("audio",this)&&!Il("video",this))}audioTimestampOffset(t){return t!==void 0&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Ms({type:"audio",sourceUpdater:this,action:Th(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return t!==void 0&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Ms({type:"video",sourceUpdater:this,action:Th(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&Ms({type:"audio",sourceUpdater:this,action:Sh(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&Ms({type:"video",sourceUpdater:this,action:Sh(t),name:"callback"})}dispose(){this.trigger("dispose"),hp.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`](()=>vh(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Ch=s=>decodeURIComponent(escape(String.fromCharCode.apply(null,s))),xh=new Uint8Array(`

`.split("").map(s=>s.charCodeAt(0)));class _p extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class vp extends Al{constructor(t,e={}){super(t,e),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return fs();const t=this.subtitlesTrack_.cues;return fs([[t[0].startTime,t[t.length-1].startTime]])}initSegmentForMap(t,e=!1){if(!t)return null;const i=Wa(t);let n=this.initSegments_[i];if(e&&!n&&t.bytes){const r=xh.byteLength+t.bytes.byteLength,a=new Uint8Array(r);a.set(t.bytes),a.set(xh,t.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:a}}return n||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return t===void 0||(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(t,e){ra(t,e,this.subtitlesTrack_)}fillBuffer_(){const t=this.chooseNextRequest_();if(t){if(this.syncController_.timestampOffsetForTimeline(t.timeline)===null){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,e,i){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===wl&&this.handleTimeout_(),t.code===El?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,e.stats),e.key&&this.segmentKey(e.key,!0),this.state="APPENDING",this.trigger("appending");const r=n.segment;if(r.map&&(r.map.bytes=e.map.bytes),n.bytes=e.bytes,typeof u().WebVTT!="function"&&typeof this.loadVttJs=="function")return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(t,e,i),()=>this.stopForError({message:"Error loading vtt.js"}));r.requested=!0;try{this.parseVTTCues_(n)}catch(a){return void this.stopForError({message:a.message,metadata:{errorType:_t.Error.StreamingVttParserError,error:a}})}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,n.cues.forEach(a=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(u()).VTTCue(a.startTime,a.endTime,a.text):a)}),function(a){const c=a.cues;if(!c)return;const p={};for(let v=c.length-1;v>=0;v--){const _=c[v],L=`${_.startTime}-${_.endTime}-${_.text}`;p[L]?a.removeCue(_):p[L]=_}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(t){let e,i=!1;if(typeof u().WebVTT!="function")throw new _p;typeof u().TextDecoder=="function"?e=new(u()).TextDecoder("utf8"):(e=u().WebVTT.StringDecoder(),i=!0);const n=new(u()).WebVTT.Parser(u(),u().vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=a=>{t.timestampmap=a},n.onparsingerror=a=>{_t.log.warn("Error encountered when parsing cues: "+a.message)},t.segment.map){let a=t.segment.map.bytes;i&&(a=Ch(a)),n.parse(a)}let r=t.bytes;i&&(r=Ch(r)),n.parse(r),n.flush()}updateTimeMapping_(t,e,i){const n=t.segment;if(!e)return;if(!t.cues.length)return void(n.empty=!0);const{MPEGTS:r,LOCAL:a}=t.timestampmap,c=r/vs.ONE_SECOND_IN_TS-a+e.mapping;if(t.cues.forEach(p=>{const v=p.endTime-p.startTime,_=r===0?p.startTime+c:this.handleRollover_(p.startTime+c,e.time);p.startTime=Math.max(_,0),p.endTime=Math.max(_+v,0)}),!i.syncInfo){const p=t.cues[0].startTime,v=t.cues[t.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+t.mediaIndex,time:Math.min(p,v-n.duration)}}}handleRollover_(t,e){if(e===null)return t;let i=t*vs.ONE_SECOND_IN_TS;const n=e*vs.ONE_SECOND_IN_TS;let r;for(r=n<i?-8589934592:8589934592;Math.abs(i-n)>4294967296;)i+=r;return i/vs.ONE_SECOND_IN_TS}}const bp=function(s,t){const e=s.cues;for(let i=0;i<e.length;i++){const n=e[i];if(t>=n.adStartTime&&t<=n.adEndTime)return n}return null};class kh{constructor({start:t,end:e,segmentIndex:i,partIndex:n=null,appended:r=!1}){this.start_=t,this.end_=e,this.segmentIndex_=i,this.partIndex_=n,this.appended_=r}isInRange(t){return t>=this.start&&t<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Tp{constructor(t,e=[]){this.segmentSyncInfo_=t,this.partsSyncInfo_=e}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(t=>t.resetAppendedStatus())}}class Ah{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(t=>t.resetAppendStatus())}update(t,e){const{mediaSequence:i,segments:n}=t;if(this.isReliable_=this.isReliablePlaylist_(i,n),this.isReliable_)return this.updateStorage_(n,i,this.calculateBaseTime_(i,e))}getSyncInfoForTime(t){for(const{segmentSyncInfo:e,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const n of i)if(n.isInRange(t))return n}else if(e.isInRange(t))return e;return null}getSyncInfoForMediaSequence(t){return this.storage_.get(t)}updateStorage_(t,e,i){const n=new Map;let r=`
`,a=i,c=e;this.start_=a,t.forEach((p,v)=>{const _=this.storage_.get(c),L=a,k=L+p.duration,A=!!(_&&_.segmentSyncInfo&&_.segmentSyncInfo.isAppended),tt=new kh({start:L,end:k,appended:A,segmentIndex:v});p.syncInfo=tt;let z=a;const lt=(p.parts||[]).map((st,mt)=>{const yt=z,Lt=z+st.duration,wt=!!(_&&_.partsSyncInfo&&_.partsSyncInfo[mt]&&_.partsSyncInfo[mt].isAppended),ht=new kh({start:yt,end:Lt,appended:wt,segmentIndex:v,partIndex:mt});return z=Lt,r+=`Media Sequence: ${c}.${mt} | Range: ${yt} --> ${Lt} | Appended: ${wt}
`,st.syncInfo=ht,ht});n.set(c,new Tp(tt,lt)),r+=`${hh(p.resolvedUri)} | Media Sequence: ${c} | Range: ${L} --> ${k} | Appended: ${A}
`,c++,a=k}),this.end_=a,this.storage_=n,this.diagnostics_=r}calculateBaseTime_(t,e){return this.storage_.size?this.storage_.has(t)?this.storage_.get(t).segmentSyncInfo.start:e:0}isReliablePlaylist_(t,e){return t!=null&&Array.isArray(e)&&e.length}}class Ih extends Ah{constructor(t){super(),this.parent_=t}calculateBaseTime_(t,e){if(!this.storage_.size){const i=this.parent_.getSyncInfoForMediaSequence(t);return i?i.segmentSyncInfo.start:0}return super.calculateBaseTime_(t,e)}}const Pl=[{name:"VOD",run:(s,t,e,i,n)=>e!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(s,t,e,i,n,r)=>{const a=s.getMediaSequenceSync(r);if(!a||!a.isReliable)return null;const c=a.getSyncInfoForTime(n);return c?{time:c.start,partIndex:c.partIndex,segmentIndex:c.segmentIndex}:null}},{name:"ProgramDateTime",run:(s,t,e,i,n)=>{if(!Object.keys(s.timelineToDatetimeMappings).length)return null;let r=null,a=null;const c=ml(t);n=n||0;for(let p=0;p<c.length;p++){const v=c[t.endList||n===0?p:c.length-(p+1)],_=v.segment,L=s.timelineToDatetimeMappings[_.timeline];if(!L||!_.dateTimeObject)continue;let k=_.dateTimeObject.getTime()/1e3+L;if(_.parts&&typeof v.partIndex=="number")for(let tt=0;tt<v.partIndex;tt++)k+=_.parts[tt].duration;const A=Math.abs(n-k);if(a!==null&&(A===0||a<A))break;a=A,r={time:k,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}return r}},{name:"Segment",run:(s,t,e,i,n)=>{let r=null,a=null;n=n||0;const c=ml(t);for(let p=0;p<c.length;p++){const v=c[t.endList||n===0?p:c.length-(p+1)],_=v.segment,L=v.part&&v.part.start||_&&_.start;if(_.timeline===i&&L!==void 0){const k=Math.abs(n-L);if(a!==null&&a<k)break;(!r||a===null||a>=k)&&(a=k,r={time:L,segmentIndex:v.segmentIndex,partIndex:v.partIndex})}}return r}},{name:"Discontinuity",run:(s,t,e,i,n)=>{let r=null;if(n=n||0,t.discontinuityStarts&&t.discontinuityStarts.length){let a=null;for(let c=0;c<t.discontinuityStarts.length;c++){const p=t.discontinuityStarts[c],v=t.discontinuitySequence+c+1,_=s.discontinuities[v];if(_){const L=Math.abs(n-_.time);if(a!==null&&a<L)break;(!r||a===null||a>=L)&&(a=L,r={time:_.time,segmentIndex:p,partIndex:null})}}}return r}},{name:"Playlist",run:(s,t,e,i,n)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class Sp extends _t.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const e=new Ah,i=new Ih(e),n=new Ih(e);this.mediaSequenceStorage_={main:e,audio:i,vtt:n},this.logger_=Ws("SyncController")}getMediaSequenceSync(t){return this.mediaSequenceStorage_[t]||null}getSyncPoint(t,e,i,n,r){if(e!==1/0)return Pl.find(({name:c})=>c==="VOD").run(this,t,e);const a=this.runStrategies_(t,e,i,n,r);if(!a.length)return null;for(const c of a){const{syncPoint:p,strategy:v}=c,{segmentIndex:_,time:L}=p;if(_<0)continue;const k=L,A=k+t.segments[_].duration;if(this.logger_(`Strategy: ${v}. Current time: ${n}. selected segment: ${_}. Time: [${k} -> ${A}]}`),n>=k&&n<A)return this.logger_("Found sync point with exact match: ",p),p}return this.selectSyncPoint_(a,{key:"time",value:n})}getExpiredTime(t,e){if(!t||!t.segments)return null;const i=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!i.length)return null;const n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+ea({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(t,e,i,n,r){const a=[];for(let c=0;c<Pl.length;c++){const p=Pl[c],v=p.run(this,t,e,i,n,r);v&&(v.strategy=p.name,a.push({strategy:p.name,syncPoint:v}))}return a}selectSyncPoint_(t,e){let i=t[0].syncPoint,n=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy;for(let a=1;a<t.length;a++){const c=Math.abs(t[a].syncPoint[e.key]-e.value);c<n&&(n=c,i=t[a].syncPoint,r=t[a].strategy)}return this.logger_(`syncPoint for [${e.key}: ${e.value}] chosen with strategy [${r}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(t,e){const i=e.mediaSequence-t.mediaSequence;if(i>86400)_t.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);else for(let n=i-1;n>=0;n--){const r=t.segments[n];if(r&&r.start!==void 0){e.syncInfo={mediaSequence:t.mediaSequence+n,time:r.start},this.logger_(`playlist refresh sync: [time:${e.syncInfo.time}, mediaSequence: ${e.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){const e=t.segments[0],i=e.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[e.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:e}){const i=this.calculateSegmentTimeMapping_(t,t.timingInfo,e),n=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:n.start}));const r=n.dateTimeObject;n.discontinuity&&e&&r&&(this.timelineToDatetimeMappings[n.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(t){return this.timelines[t]===void 0?null:this.timelines[t].time}mappingForTimeline(t){return this.timelines[t]===void 0?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,e,i){const n=t.segment,r=t.part;let a,c,p=this.timelines[t.timeline];if(typeof t.timestampOffset=="number")p={time:t.startOfSegment,mapping:t.startOfSegment-e.start},i&&(this.timelines[t.timeline]=p,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${p.time}] [mapping: ${p.mapping}]`)),a=t.startOfSegment,c=e.end+p.mapping;else{if(!p)return!1;a=e.start+p.mapping,c=e.end+p.mapping}return r&&(r.start=a,r.end=c),(!n.start||a<n.start)&&(n.start=a),n.end=c,!0}saveDiscontinuitySyncInfo_(t){const e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(let n=0;n<e.discontinuityStarts.length;n++){const r=e.discontinuityStarts[n],a=e.discontinuitySequence+n+1,c=r-t.mediaIndex,p=Math.abs(c);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>p){let v;v=c<0?i.start-ea({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex,endIndex:r}):i.end+ea({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:v,accuracy:p}}}}dispose(){this.trigger("dispose"),this.off()}}class wp extends _t.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:e,to:i}){return typeof e=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:e,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:e,to:i}){if(typeof e=="number"&&typeof i=="number"){this.lastTimelineChanges_[t]={type:t,from:e,to:i},delete this.pendingTimelineChanges_[t];const n={timelineChangeInfo:{from:e,to:i}};this.trigger({type:"timelinechange",metadata:n})}return this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Ep=Ku(Qu(function(){var s=function(){function p(){this.listeners={}}var v=p.prototype;return v.on=function(_,L){this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push(L)},v.off=function(_,L){if(!this.listeners[_])return!1;var k=this.listeners[_].indexOf(L);return this.listeners[_]=this.listeners[_].slice(0),this.listeners[_].splice(k,1),k>-1},v.trigger=function(_){var L=this.listeners[_];if(L)if(arguments.length===2)for(var k=L.length,A=0;A<k;++A)L[A].call(this,arguments[1]);else for(var tt=Array.prototype.slice.call(arguments,1),z=L.length,lt=0;lt<z;++lt)L[lt].apply(this,tt)},v.dispose=function(){this.listeners={}},v.pipe=function(_){this.on("data",function(L){_.push(L)})},p}();let t=null;class e{constructor(v){let _,L,k;t||(t=function(){const yt=[[[],[],[],[],[]],[[],[],[],[],[]]],Lt=yt[0],wt=yt[1],ht=Lt[4],St=wt[4];let qt,ve,ye;const ne=[],xe=[];let oe,Ze,ri,qe,De,bi;for(qt=0;qt<256;qt++)xe[(ne[qt]=qt<<1^283*(qt>>7))^qt]=qt;for(ve=ye=0;!ht[ve];ve^=oe||1,ye=xe[ye]||1)for(qe=ye^ye<<1^ye<<2^ye<<3^ye<<4,qe=qe>>8^255&qe^99,ht[ve]=qe,St[qe]=ve,ri=ne[Ze=ne[oe=ne[ve]]],bi=16843009*ri^65537*Ze^257*oe^16843008*ve,De=257*ne[qe]^16843008*qe,qt=0;qt<4;qt++)Lt[qt][ve]=De=De<<24^De>>>8,wt[qt][qe]=bi=bi<<24^bi>>>8;for(qt=0;qt<5;qt++)Lt[qt]=Lt[qt].slice(0),wt[qt]=wt[qt].slice(0);return yt}()),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];const A=this._tables[0][4],tt=this._tables[1],z=v.length;let lt=1;if(z!==4&&z!==6&&z!==8)throw new Error("Invalid aes key size");const st=v.slice(0),mt=[];for(this._key=[st,mt],_=z;_<4*z+28;_++)k=st[_-1],(_%z==0||z===8&&_%z==4)&&(k=A[k>>>24]<<24^A[k>>16&255]<<16^A[k>>8&255]<<8^A[255&k],_%z==0&&(k=k<<8^k>>>24^lt<<24,lt=lt<<1^283*(lt>>7))),st[_]=st[_-z]^k;for(L=0;_;L++,_--)k=st[3&L?_:_-4],mt[L]=_<=4||L<4?k:tt[0][A[k>>>24]]^tt[1][A[k>>16&255]]^tt[2][A[k>>8&255]]^tt[3][A[255&k]]}decrypt(v,_,L,k,A,tt){const z=this._key[1];let lt,st,mt,yt=v^z[0],Lt=k^z[1],wt=L^z[2],ht=_^z[3];const St=z.length/4-2;let qt,ve=4;const ye=this._tables[1],ne=ye[0],xe=ye[1],oe=ye[2],Ze=ye[3],ri=ye[4];for(qt=0;qt<St;qt++)lt=ne[yt>>>24]^xe[Lt>>16&255]^oe[wt>>8&255]^Ze[255&ht]^z[ve],st=ne[Lt>>>24]^xe[wt>>16&255]^oe[ht>>8&255]^Ze[255&yt]^z[ve+1],mt=ne[wt>>>24]^xe[ht>>16&255]^oe[yt>>8&255]^Ze[255&Lt]^z[ve+2],ht=ne[ht>>>24]^xe[yt>>16&255]^oe[Lt>>8&255]^Ze[255&wt]^z[ve+3],ve+=4,yt=lt,Lt=st,wt=mt;for(qt=0;qt<4;qt++)A[(3&-qt)+tt]=ri[yt>>>24]<<24^ri[Lt>>16&255]<<16^ri[wt>>8&255]<<8^ri[255&ht]^z[ve++],lt=yt,yt=Lt,Lt=wt,wt=ht,ht=lt}}class i extends s{constructor(){super(s),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(v){this.jobs.push(v),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const n=function(p){return p<<24|(65280&p)<<8|(16711680&p)>>8|p>>>24};class r{constructor(v,_,L,k){const A=r.STEP,tt=new Int32Array(v.buffer),z=new Uint8Array(v.byteLength);let lt=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(tt.subarray(lt,lt+A),_,L,z)),lt=A;lt<tt.length;lt+=A)L=new Uint32Array([n(tt[lt-4]),n(tt[lt-3]),n(tt[lt-2]),n(tt[lt-1])]),this.asyncStream_.push(this.decryptChunk_(tt.subarray(lt,lt+A),_,L,z));this.asyncStream_.push(function(){var st;k(null,(st=z).subarray(0,st.byteLength-st[st.byteLength-1]))})}static get STEP(){return 32e3}decryptChunk_(v,_,L,k){return function(){const A=function(tt,z,lt){const st=new Int32Array(tt.buffer,tt.byteOffset,tt.byteLength>>2),mt=new e(Array.prototype.slice.call(z)),yt=new Uint8Array(tt.byteLength),Lt=new Int32Array(yt.buffer);let wt,ht,St,qt,ve,ye,ne,xe,oe;for(wt=lt[0],ht=lt[1],St=lt[2],qt=lt[3],oe=0;oe<st.length;oe+=4)ve=n(st[oe]),ye=n(st[oe+1]),ne=n(st[oe+2]),xe=n(st[oe+3]),mt.decrypt(ve,ye,ne,xe,Lt,oe),Lt[oe]=n(Lt[oe]^wt),Lt[oe+1]=n(Lt[oe+1]^ht),Lt[oe+2]=n(Lt[oe+2]^St),Lt[oe+3]=n(Lt[oe+3]^qt),wt=ve,ht=ye,St=ne,qt=xe;return yt}(v,_,L);k.set(A,v.byteOffset)}}}var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:l.g!==void 0?l.g:typeof self<"u"?self:{},c=(typeof window<"u"?window:a!==void 0?a:typeof self<"u"?self:{}).BigInt||Number;c("0x1"),c("0x100"),c("0x10000"),c("0x1000000"),c("0x100000000"),c("0x10000000000"),c("0x1000000000000"),c("0x100000000000000"),c("0x10000000000000000"),function(){var p=new Uint16Array([65484]),v=new Uint8Array(p.buffer,p.byteOffset,p.byteLength);v[0]===255||v[0]}(),self.onmessage=function(p){const v=p.data,_=new Uint8Array(v.encrypted.bytes,v.encrypted.byteOffset,v.encrypted.byteLength),L=new Uint32Array(v.key.bytes,v.key.byteOffset,v.key.byteLength/4),k=new Uint32Array(v.iv.bytes,v.iv.byteOffset,v.iv.byteLength/4);new r(_,L,k,function(A,tt){self.postMessage(function(z){const lt={};return Object.keys(z).forEach(st=>{const mt=z[st];var yt;yt=mt,(ArrayBuffer.isView==="function"?ArrayBuffer.isView(yt):yt&&yt.buffer instanceof ArrayBuffer)?lt[st]={bytes:mt.buffer,byteOffset:mt.byteOffset,byteLength:mt.byteLength}:lt[st]=mt}),lt}({source:v.source,decrypted:tt}),[tt.buffer])})}}));var Cp=Yu(Ep);const xp=s=>{let t=s.default?"main":"alternative";return s.characteristics&&s.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Ph=(s,t)=>{s.abort(),s.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Ol=(s,t)=>{t.activePlaylistLoader=s,s.load()},Ka={AUDIO:(s,t)=>()=>{const{mediaTypes:{[s]:e},excludePlaylist:i}=t,n=e.activeTrack(),r=e.activeGroup(),a=(r.filter(p=>p.default)[0]||r[0]).id,c=e.tracks[a];if(n!==c){_t.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const p in e.tracks)e.tracks[p].enabled=e.tracks[p]===c;e.onTrackChanged()}else i({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(s,t)=>()=>{const{mediaTypes:{[s]:e}}=t;_t.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=e.activeTrack();i&&(i.mode="disabled"),e.onTrackChanged()}},Oh={AUDIO:(s,t,e)=>{if(!t)return;const{tech:i,requestOptions:n,segmentLoaders:{[s]:r}}=e;t.on("loadedmetadata",()=>{const a=t.media();r.playlist(a,n),(!i.paused()||a.endList&&i.preload()!=="none")&&r.load()}),t.on("loadedplaylist",()=>{r.playlist(t.media(),n),i.paused()||r.load()}),t.on("error",Ka[s](s,e))},SUBTITLES:(s,t,e)=>{const{tech:i,requestOptions:n,segmentLoaders:{[s]:r},mediaTypes:{[s]:a}}=e;t.on("loadedmetadata",()=>{const c=t.media();r.playlist(c,n),r.track(a.activeTrack()),(!i.paused()||c.endList&&i.preload()!=="none")&&r.load()}),t.on("loadedplaylist",()=>{r.playlist(t.media(),n),i.paused()||r.load()}),t.on("error",Ka[s](s,e))}},kp={AUDIO:(s,t)=>{const{vhs:e,sourceType:i,segmentLoaders:{[s]:n},requestOptions:r,main:{mediaGroups:a},mediaTypes:{[s]:{groups:c,tracks:p,logger_:v}},mainPlaylistLoader:_}=t,L=ia(_.main);a[s]&&Object.keys(a[s]).length!==0||(a[s]={main:{default:{default:!0}}},L&&(a[s].main.default.playlists=_.main.playlists));for(const k in a[s]){c[k]||(c[k]=[]);for(const A in a[s][k]){let tt,z=a[s][k][A];if(L?(v(`AUDIO group '${k}' label '${A}' is a main playlist`),z.isMainPlaylist=!0,tt=null):tt=i==="vhs-json"&&z.playlists?new Or(z.playlists[0],e,r):z.resolvedUri?new Or(z.resolvedUri,e,r):z.playlists&&i==="dash"?new Sl(z.playlists[0],e,r,_):null,z=_i({id:A,playlistLoader:tt},z),Oh[s](s,z.playlistLoader,t),c[k].push(z),p[A]===void 0){const lt=new _t.AudioTrack({id:A,kind:xp(z),enabled:!1,language:z.language,default:z.default,label:A});p[A]=lt}}}n.on("error",Ka[s](s,t))},SUBTITLES:(s,t)=>{const{tech:e,vhs:i,sourceType:n,segmentLoaders:{[s]:r},requestOptions:a,main:{mediaGroups:c},mediaTypes:{[s]:{groups:p,tracks:v}},mainPlaylistLoader:_}=t;for(const L in c[s]){p[L]||(p[L]=[]);for(const k in c[s][L]){if(!i.options_.useForcedSubtitles&&c[s][L][k].forced)continue;let A,tt=c[s][L][k];if(n==="hls")A=new Or(tt.resolvedUri,i,a);else if(n==="dash"){if(!tt.playlists.filter(z=>z.excludeUntil!==1/0).length)return;A=new Sl(tt.playlists[0],i,a,_)}else n==="vhs-json"&&(A=new Or(tt.playlists?tt.playlists[0]:tt.resolvedUri,i,a));if(tt=_i({id:k,playlistLoader:A},tt),Oh[s](s,tt.playlistLoader,t),p[L].push(tt),v[k]===void 0){const z=e.addRemoteTextTrack({id:k,kind:"subtitles",default:tt.default&&tt.autoselect,language:tt.language,label:k},!1).track;v[k]=z}}}r.on("error",Ka[s](s,t))},"CLOSED-CAPTIONS":(s,t)=>{const{tech:e,main:{mediaGroups:i},mediaTypes:{[s]:{groups:n,tracks:r}}}=t;for(const a in i[s]){n[a]||(n[a]=[]);for(const c in i[s][a]){const p=i[s][a][c];if(!/^(?:CC|SERVICE)/.test(p.instreamId))continue;const v=e.options_.vhs&&e.options_.vhs.captionServices||{};let _={label:c,language:p.language,instreamId:p.instreamId,default:p.default&&p.autoselect};if(v[_.instreamId]&&(_=_i(_,v[_.instreamId])),_.default===void 0&&delete _.default,n[a].push(_i({id:c},p)),r[c]===void 0){const L=e.addRemoteTextTrack({id:_.instreamId,kind:"captions",default:_.default,language:_.language,label:_.label},!1).track;r[c]=L}}}}},Lh=(s,t)=>{for(let e=0;e<s.length;e++)if(yl(t,s[e])||s[e].playlists&&Lh(s[e].playlists,t))return!0;return!1},Ap={AUDIO:(s,t)=>()=>{const{mediaTypes:{[s]:{tracks:e}}}=t;for(const i in e)if(e[i].enabled)return e[i];return null},SUBTITLES:(s,t)=>()=>{const{mediaTypes:{[s]:{tracks:e}}}=t;for(const i in e)if(e[i].mode==="showing"||e[i].mode==="hidden")return e[i];return null}};class Dh{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(t){t===1&&(this.version_=t)}set ttl(t){this.ttl_=t||300}set reloadUri(t){t&&(this.reloadUri_=Ss(this.reloadUri_,t))}set priority(t){t&&t.length&&(this.priority_=t)}set pathwayClones(t){t&&t.length&&(this.pathwayClones_=new Map(t.map(e=>[e.ID,e])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Ip extends _t.EventTarget{constructor(t,e){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new Dh,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Ws("Content Steering"),this.xhr_=t,this.getBandwidth_=e}assignTagProperties(t,e){this.manifestType_=e.serverUri?"HLS":"DASH";const i=e.serverUri||e.serverURL;if(!i)return this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),void this.trigger("error");i.startsWith("data:")?this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1)):(this.steeringManifest.reloadUri=Ss(t,i),this.defaultPathway=e.pathwayId||e.defaultServiceLocation,this.queryBeforeStart=e.queryBeforeStart,this.proxyServerUrl_=e.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(t){const e=this.steeringManifest.reloadUri;if(!e)return;const i=t?e:this.getRequestURI(e);if(!i)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();const n={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:n}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(r,a)=>{if(r){if(a.status===410)return this.logger_(`manifest request 410 ${r}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),void this.excludedSteeringManifestURLs.add(i);if(a.status===429){const v=a.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${r}.`),this.logger_(`content steering will retry in ${v} seconds.`),void this.startTTLTimeout_(parseInt(v,10))}return this.logger_(`manifest failed to load ${r}.`),void this.startTTLTimeout_()}let c;this.trigger({type:"contentsteeringloadcomplete",metadata:n});try{c=JSON.parse(this.request_.responseText)}catch(v){const _={errorType:_t.Error.StreamingContentSteeringParserError,error:v};this.trigger({type:"error",metadata:_})}this.assignSteeringProperties_(c);const p={contentSteeringInfo:n.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:p}),this.startTTLTimeout_()})}setProxyServerUrl_(t){const e=new(u()).URL(t),i=new(u()).URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(e.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(t){const e=JSON.parse(u().atob(t));this.assignSteeringProperties_(e)}setSteeringParams_(t){const e=new(u()).URL(t),i=this.getPathway(),n=this.getBandwidth_();if(i){const r=`_${this.manifestType_}_pathway`;e.searchParams.set(r,i)}if(n){const r=`_${this.manifestType_}_throughput`;e.searchParams.set(r,n)}return e.toString()}assignSteeringProperties_(t){if(this.steeringManifest.version=t.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${t.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=t.TTL,this.steeringManifest.reloadUri=t["RELOAD-URI"],this.steeringManifest.priority=t["PATHWAY-PRIORITY"]||t["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=t["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const e=(i=>{for(const n of i)if(this.availablePathways_.has(n))return n;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==e&&(this.currentPathway=e,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(t){if(!t)return null;const e=n=>this.excludedSteeringManifestURLs.has(n);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(t);if(!e(n))return n}const i=this.setSteeringParams_(t);return e(i)?null:i}startTTLTimeout_(t=this.steeringManifest.ttl){const e=1e3*t;this.ttlTimeout_=u().setTimeout(()=>{this.requestSteeringManifest()},e)}clearTTLTimeout_(){u().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new Dh}addAvailablePathway(t){t&&this.availablePathways_.add(t)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(t){return this.availablePathways_.delete(t)}didDASHTagChange(t,e){return!e&&this.steeringManifest.reloadUri||e&&(Ss(t,e.serverURL)!==this.steeringManifest.reloadUri||e.defaultServiceLocation!==this.defaultPathway||e.queryBeforeStart!==this.queryBeforeStart||e.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let Rn;const Pp=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Op=function(s){return this.audioSegmentLoader_[s]+this.mainSegmentLoader_[s]};class Lp extends _t.EventTarget{constructor(t){super();const{src:e,withCredentials:i,tech:n,bandwidth:r,externVhs:a,useCueTags:c,playlistExclusionDuration:p,enableLowInitialPlaylist:v,sourceType:_,cacheEncryptionKeys:L,bufferBasedABR:k,leastPixelDiffSelector:A,captionServices:tt}=t;if(!e)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:z}=t;z==null&&(z=1/0),Rn=a,this.bufferBasedABR=!!k,this.leastPixelDiffSelector=!!A,this.withCredentials=i,this.tech_=n,this.vhs_=n.vhs,this.player_=t.player_,this.sourceType_=_,this.useCueTags_=c,this.playlistExclusionDuration=p,this.maxPlaylistRetries=z,this.enableLowInitialPlaylist=v,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:z,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const mt={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(yt=>{mt[yt]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Dn,activeTrack:Dn,getActiveGroup:Dn,onGroupChanged:Dn,onTrackChanged:Dn,lastTrack_:null,logger_:Ws(`MediaGroups[${yt}]`)}}),mt})(),this.mediaSource=new(u()).MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=fs(),this.hasPlayed_=!1,this.syncController_=new Sp(t),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Cp,this.sourceUpdater_=new Eh(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new wp,this.keyStatusMap_=new Map;const lt={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:tt,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:L,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Sl(e,this.vhs_,_i(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Or(e,this.vhs_,_i(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Al(_i(lt,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new Al(_i(lt,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new vp(_i(lt,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((mt,yt)=>{function Lt(){n.off("vttjserror",wt),mt()}function wt(){n.off("vttjsloaded",Lt),yt()}n.one("vttjsloaded",Lt),n.one("vttjserror",wt),n.addWebVttScript_()})}),t),this.contentSteeringController_=new Ip(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Pp.forEach(mt=>{this[mt+"_"]=Op.bind(this,mt)}),this.logger_=Ws("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const st=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(st,()=>{const mt=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-mt,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const t=this.mainAppendsToLoadedData_(),e=this.audioAppendsToLoadedData_();return t===-1||e===-1?-1:t+e}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){const e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,t)}switchMedia_(t,e,i){const n=this.media(),r=n&&(n.id||n.uri),a=t&&(t.id||t.uri);if(r&&r!==a){this.logger_(`switch media ${r} -> ${a} from ${e}`);const c={renditionInfo:{id:a,bandwidth:t.attributes.BANDWIDTH,resolution:t.attributes.RESOLUTION,codecs:t.attributes.CODECS},cause:e};this.trigger({type:"renditionselected",metadata:c}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${e}`})}this.mainPlaylistLoader_.media(t,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{const e=this.mediaTypes_[t],i=e?e.activeGroup():null,n=this.contentSteeringController_.getPathway();if(i&&n){const r=(i.length?i[0].playlists:i.playlists).filter(a=>a.attributes.serviceLocation===n);r.length&&this.mediaTypes_[t].activePlaylistLoader.media(r[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=u().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(u().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const t=this.main(),e=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return e;const i=t.mediaGroups.AUDIO,n=Object.keys(i);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const c=i.main||n.length&&i[n[0]];for(const p in c)if(c[p].default){r={label:p};break}}if(!r)return e;const a=[];for(const c in i)if(i[c][r.label]){const p=i[c][r.label];if(p.playlists&&p.playlists.length)a.push.apply(a,p.playlists);else if(p.uri)a.push(p);else if(t.playlists.length)for(let v=0;v<t.playlists.length;v++){const _=t.playlists[v];_.attributes&&_.attributes.AUDIO&&_.attributes.AUDIO===c&&a.push(_)}}return a.length?a:e}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;gl(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=e,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),(i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(k=>{kp[k](k,i)});const{mediaTypes:n,mainPlaylistLoader:r,tech:a,vhs:c,segmentLoaders:{AUDIO:p,main:v}}=i;["AUDIO","SUBTITLES"].forEach(k=>{n[k].activeGroup=((A,tt)=>z=>{const{mainPlaylistLoader:lt,mediaTypes:{[A]:{groups:st}}}=tt,mt=lt.media();if(!mt)return null;let yt=null;mt.attributes[A]&&(yt=st[mt.attributes[A]]);const Lt=Object.keys(st);if(!yt)if(A==="AUDIO"&&Lt.length>1&&ia(tt.main))for(let wt=0;wt<Lt.length;wt++){const ht=st[Lt[wt]];if(Lh(ht,mt)){yt=ht;break}}else st.main?yt=st.main:Lt.length===1&&(yt=st[Lt[0]]);return z===void 0?yt:z!==null&&yt&&yt.filter(wt=>wt.id===z.id)[0]||null})(k,i),n[k].activeTrack=Ap[k](k,i),n[k].onGroupChanged=((A,tt)=>()=>{const{segmentLoaders:{[A]:z,main:lt},mediaTypes:{[A]:st}}=tt,mt=st.activeTrack(),yt=st.getActiveGroup(),Lt=st.activePlaylistLoader,wt=st.lastGroup_;yt&&wt&&yt.id===wt.id||(st.lastGroup_=yt,st.lastTrack_=mt,Ph(z,st),yt&&!yt.isMainPlaylist&&(yt.playlistLoader?(z.resyncLoader(),Ol(yt.playlistLoader,st)):Lt&&lt.resetEverything()))})(k,i),n[k].onGroupChanging=((A,tt)=>()=>{const{segmentLoaders:{[A]:z},mediaTypes:{[A]:lt}}=tt;lt.lastGroup_=null,z.abort(),z.pause()})(k,i),n[k].onTrackChanged=((A,tt)=>()=>{const{mainPlaylistLoader:z,segmentLoaders:{[A]:lt,main:st},mediaTypes:{[A]:mt}}=tt,yt=mt.activeTrack(),Lt=mt.getActiveGroup(),wt=mt.activePlaylistLoader,ht=mt.lastTrack_;if((!ht||!yt||ht.id!==yt.id)&&(mt.lastGroup_=Lt,mt.lastTrack_=yt,Ph(lt,mt),Lt)){if(Lt.isMainPlaylist){if(!yt||!ht||yt.id===ht.id)return;const St=tt.vhs.playlistController_,qt=St.selectPlaylist();return St.media()===qt?void 0:(mt.logger_(`track change. Switching main audio from ${ht.id} to ${yt.id}`),z.pause(),st.resetEverything(),void St.fastQualityChange_(qt))}if(A==="AUDIO"){if(!Lt.playlistLoader)return st.setAudio(!0),void st.resetEverything();lt.setAudio(!0),st.setAudio(!1)}wt!==Lt.playlistLoader&&(lt.track&&lt.track(yt),lt.resetEverything()),Ol(Lt.playlistLoader,mt)}})(k,i),n[k].getActiveGroup=((A,{mediaTypes:tt})=>()=>{const z=tt[A].activeTrack();return z?tt[A].activeGroup(z):null})(k,i)});const _=n.AUDIO.activeGroup();if(_){const k=(_.filter(A=>A.default)[0]||_[0]).id;n.AUDIO.tracks[k].enabled=!0,n.AUDIO.onGroupChanged(),n.AUDIO.onTrackChanged(),n.AUDIO.getActiveGroup().playlistLoader?(v.setAudio(!1),p.setAudio(!0)):v.setAudio(!0)}r.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(k=>n[k].onGroupChanged())}),r.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(k=>n[k].onGroupChanging())});const L=()=>{n.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"vhs-audio-change"})};a.audioTracks().addEventListener("change",L),a.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),c.on("dispose",()=>{a.audioTracks().removeEventListener("change",L),a.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),a.clearTracks("audio");for(const k in n.AUDIO.tracks)a.audioTracks().addTrack(n.AUDIO.tracks[k])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){let e;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(e=this.selectInitialPlaylist()),e||(e=this.selectPlaylist()),!e||!this.shouldSwitchToMedia_(e)||(this.initialMedia_=e,this.switchMedia_(this.initialMedia_,"initial"),this.sourceType_!=="vhs-json"||!this.initialMedia_.segments))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),e=1.5*t.targetDuration*1e3;gl(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=e,this.sourceType_==="dash"&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();t.lastExcludeReason_!=="playlist-unchanged"&&this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,e=>{this.player_.trigger(Z({},e))})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,e){const i=t.mediaGroups||{};let n=!0;const r=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const c in i.AUDIO[a])i.AUDIO[a][c].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Rn.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(i.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){const e=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function({currentPlaylist:a,buffered:c,currentTime:p,nextPlaylist:v,bufferLowWaterLine:_,bufferHighWaterLine:L,duration:k,bufferBasedABR:A,log:tt}){if(!v)return _t.log.warn("We received no playlist to switch to. Please check your stream."),!1;const z=`allowing switch ${a&&a.id||"null"} -> ${v.id}`;if(!a)return tt(`${z} as current playlist is not set`),!0;if(v.id===a.id)return!1;const lt=!!Ar(c,p).length;if(!a.endList)return lt||typeof a.partTargetDuration!="number"?(tt(`${z} as current playlist is live`),!0):(tt(`not ${z} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const st=dl(c,p),mt=A?es.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:es.MAX_BUFFER_LOW_WATER_LINE;if(k<mt)return tt(`${z} as duration < max low water line (${k} < ${mt})`),!0;const yt=v.attributes.BANDWIDTH,Lt=a.attributes.BANDWIDTH;if(yt<Lt&&(!A||st<L)){let wt=`${z} as next bandwidth < current bandwidth (${yt} < ${Lt})`;return A&&(wt+=` and forwardBuffer < bufferHighWaterLine (${st} < ${L})`),tt(wt),!0}if((!A||yt>Lt)&&st>=_){let wt=`${z} as forwardBuffer >= bufferLowWaterLine (${st} >= ${_})`;return A&&(wt+=` and next bandwidth > current bandwidth (${yt} > ${Lt})`),tt(wt),!0}return tt(`not ${z} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:i,currentPlaylist:e,nextPlaylist:t,bufferLowWaterLine:n,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(e=>{this.mainSegmentLoader_.on(e,i=>{this.player_.trigger(Z({},i))}),this.audioSegmentLoader_.on(e,i=>{this.player_.trigger(Z({},i))}),this.subtitleSegmentLoader_.on(e,i=>{this.player_.trigger(Z({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(t=this.selectPlaylist()){t&&t===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(t,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}setupFirstPlay(){const t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList||t.start){const e=this.seekable();if(!e.length)return!1;const i=e.end(0);let n=i;if(t.start){const r=t.start.timeOffset;n=r<0?Math.max(i+r,e.start(0)):Math.min(i,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(n)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const t=this.tech_.play();t!==void 0&&typeof t.then=="function"&&t.then(null,e=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;const e=this.duration();t[t.length-1].endTime=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const e=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!e||e.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;const e=this.syncController_.getExpiredTime(t,this.duration());if(e===null)return!1;const i=Rn.Playlist.playlistEnd(t,e),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=pn;const a=r.end(r.length-1);return a-n<=pn&&i-a<=pn}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:e={},playlistExclusionDuration:i}){if(t=t||this.mainPlaylistLoader_.media(),i=i||e.playlistExclusionDuration||this.playlistExclusionDuration,!t)return this.error=e,void(this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));t.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,r=n.filter(za),a=r.length===1&&r[0]===t;if(n.length===1&&i!==1/0)return _t.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const tt=this.pathwayAttribute_(t),z=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(tt),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(tt)},z)}let A=!1;n.forEach(tt=>{if(tt===t)return;const z=tt.excludeUntil;z!==void 0&&z!==1/0&&(A=!0,delete tt.excludeUntil)}),A&&(_t.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let c;c=t.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*i,t.excludeUntil=c,e.reason&&(t.lastExcludeReason_=e.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const p=this.selectPlaylist();if(!p)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const v=e.internal?this.logger_:_t.log.warn,_=e.message?" "+e.message:"";v(`${e.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${_} Switching to playlist ${p.id}.`),p.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),p.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const L=p.targetDuration/2*1e3||5e3,k=typeof p.lastRequest=="number"&&Date.now()-p.lastRequest<=L;return this.switchMedia_(p,"exclude",a||k)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,e){const i=[],n=t==="all";(n||t==="main")&&i.push(this.mainPlaylistLoader_);const r=[];(n||t==="audio")&&r.push("AUDIO"),(n||t==="subtitle")&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach(a=>{const c=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;c&&i.push(c)}),["main","audio","subtitle"].forEach(a=>{const c=this[`${a}SegmentLoader_`];!c||t!==a&&t!=="all"||i.push(c)}),i.forEach(a=>e.forEach(c=>{typeof a[c]=="function"&&a[c]()}))}setCurrentTime(t){const e=Ar(this.tech_.buffered(),t);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Rn.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let t;if(!this.mainPlaylistLoader_)return;let e=this.mainPlaylistLoader_.media();if(!e)return;let i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return;const n=this.mainPlaylistLoader_.main,r=Rn.Playlist.seekable(e,i,Rn.Playlist.liveEdgeDelay(n,e));if(r.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(e,this.duration()),i===null||(t=Rn.Playlist.seekable(e,i,Rn.Playlist.liveEdgeDelay(n,e)),t.length===0)))return;let a,c;if(this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),c=this.seekable_.start(0)),t?t.start(0)>r.end(0)||r.start(0)>t.end(0)?this.seekable_=r:this.seekable_=fs([[t.start(0)>r.start(0)?t.start(0):r.start(0),t.end(0)<r.end(0)?t.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===c)return;this.logger_(`seekable updated [${Tu(this.seekable_)}]`);const p={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:p}),this.tech_.trigger("seekablechanged")}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open")return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){const n=this.seekable();return n.length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1))):void 0}const e=this.tech_.buffered();let i=Rn.Playlist.duration(this.mainPlaylistLoader_.media());e.length>0&&(i=Math.max(i,e.end(e.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{const e=this.mediaTypes_[t].groups;for(const i in e)e[i].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,e=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!e||!i)}getCodecsOrExclude_(){const t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},e=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;const i=na(this.main(),e),n={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=i.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(n.video+=`,${i.audio||t.main.audioCodec||ae}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(n.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||ae,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!n.audio&&!n.video)return void this.excludePlaylist({playlistToExclude:e,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const a={};let c;if(["video","audio"].forEach(function(p){if(n.hasOwnProperty(p)&&(v=t[p].isFmp4,_=n[p],!(v?Zt(_):ge(_)))){const L=t[p].isFmp4?"browser":"muxer";a[L]=a[L]||[],a[L].push(n[p]),p==="audio"&&(c=L)}var v,_}),r&&c&&e.attributes.AUDIO){const p=e.attributes.AUDIO;this.main().playlists.forEach(v=>{(v.attributes&&v.attributes.AUDIO)===p&&v!==e&&(v.excludeUntil=1/0)}),this.logger_(`excluding audio group ${p} as ${c} does not support codec(s): "${n.audio}"`)}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const p=[];if(["video","audio"].forEach(v=>{const _=(Bt(this.sourceUpdater_.codecs[v]||"")[0]||{}).type,L=(Bt(n[v]||"")[0]||{}).type;_&&L&&_.toLowerCase()!==L.toLowerCase()&&p.push(`"${this.sourceUpdater_.codecs[v]}" -> "${n[v]}"`)}),p.length)return void this.excludePlaylist({playlistToExclude:e,error:{message:`Codec switching not supported: ${p.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return n}{const p=Object.keys(a).reduce((v,_)=>(v&&(v+=", "),v+`${_} does not support codec(s): "${a[_].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:e,error:{internal:!0,message:p},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);const e=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(e)}excludeUnsupportedVariants_(){const t=this.main().playlists,e=[];Object.keys(t).forEach(i=>{const n=t[i];if(e.indexOf(n.id)!==-1)return;e.push(n.id);const r=na(this.main,n),a=[];!r.audio||ge(r.audio)||Zt(r.audio)||a.push(`audio codec ${r.audio}`),!r.video||ge(r.video)||Zt(r.video)||a.push(`video codec ${r.video}`),r.text&&r.text==="stpp.ttml.im1t"&&a.push(`text codec ${r.text}`),a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(t){const e=[],i=this.main().playlists,n=Ga(Bt(t)),r=oh(n),a=n.video&&Bt(n.video)[0]||null,c=n.audio&&Bt(n.audio)[0]||null;Object.keys(i).forEach(p=>{const v=i[p];if(e.indexOf(v.id)!==-1||v.excludeUntil===1/0)return;e.push(v.id);const _=[],L=na(this.mainPlaylistLoader_.main,v),k=oh(L);if(L.audio||L.video){if(k!==r&&_.push(`codec count "${k}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const A=L.video&&Bt(L.video)[0]||null,tt=L.audio&&Bt(L.audio)[0]||null;A&&a&&A.type.toLowerCase()!==a.type.toLowerCase()&&_.push(`video codec "${A.type}" !== "${a.type}"`),tt&&c&&tt.type.toLowerCase()!==c.type.toLowerCase()&&_.push(`audio codec "${tt.type}" !== "${c.type}"`)}_.length&&(v.excludeUntil=1/0,this.logger_(`excluding ${v.id}: ${_.join(" && ")}`))}})}updateAdCues_(t){let e=0;const i=this.seekable();i.length&&(e=i.start(0)),function(n,r,a=0){if(!n.segments)return;let c,p=a;for(let v=0;v<n.segments.length;v++){const _=n.segments[v];if(c||(c=bp(r,p+_.duration/2)),c){if("cueIn"in _){c.endTime=p,c.adEndTime=p,p+=_.duration,c=null;continue}if(p<c.endTime){p+=_.duration;continue}c.endTime+=_.duration}else if("cueOut"in _&&(c=new(u()).VTTCue(p,p+_.duration,_.cueOut),c.adStartTime=p,c.adEndTime=p+parseFloat(_.cueOut),r.addCue(c)),"cueOutCont"in _){const[L,k]=_.cueOutCont.split("/").map(parseFloat);c=new(u()).VTTCue(p,p+_.duration,""),c.adStartTime=p-L,c.adEndTime=c.adStartTime+k,r.addCue(c)}p+=_.duration}}(t,this.cueTagsTrack_,e)}goalBufferLength(){const t=this.tech_.currentTime(),e=es.GOAL_BUFFER_LENGTH,i=es.GOAL_BUFFER_LENGTH_RATE,n=Math.max(e,es.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*i,n)}bufferLowWaterLine(){const t=this.tech_.currentTime(),e=es.BUFFER_LOW_WATER_LINE,i=es.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(e,es.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(e,es.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*i,this.bufferBasedABR?r:n)}bufferHighWaterLine(){return es.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(t){dh(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:e,dateRanges:i})=>{const n=e.metadataTrack_;if(!n)return;const r=u().WebKitDataCue||u().VTTCue;i.forEach(a=>{for(const c of Object.keys(a)){if(up.has(c))continue;const p=new r(a.startTime,a.endTime,"");p.id=a.id,p.type="com.apple.quicktime.HLS",p.value={key:cp[c],data:a[c]},c!=="scte35Out"&&c!=="scte35In"||(p.value.data=new Uint8Array(p.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(p)}a.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:t})}addMetadataToTextTrack(t,e,i){const n=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();dh(this.inbandTextTracks_,t,this.tech_),(({inbandTextTracks:r,metadataArray:a,timestampOffset:c,videoDuration:p})=>{if(!a)return;const v=u().WebKitDataCue||u().VTTCue,_=r.metadataTrack_;if(!_||(a.forEach(z=>{const lt=z.cueTime+c;!(typeof lt!="number"||u().isNaN(lt)||lt<0)&&lt<1/0&&z.frames&&z.frames.length&&z.frames.forEach(st=>{const mt=new v(lt,lt,st.value||st.url||st.data||"");mt.frame=st,mt.value=st,function(yt){Object.defineProperties(yt.frame,{id:{get:()=>(_t.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),yt.value.key)},value:{get:()=>(_t.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),yt.value.data)},privateData:{get:()=>(_t.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),yt.value.data)}})}(mt),_.addCue(mt)})}),!_.cues||!_.cues.length))return;const L=_.cues,k=[];for(let z=0;z<L.length;z++)L[z]&&k.push(L[z]);const A=k.reduce((z,lt)=>{const st=z[lt.startTime]||[];return st.push(lt),z[lt.startTime]=st,z},{}),tt=Object.keys(A).sort((z,lt)=>Number(z)-Number(lt));tt.forEach((z,lt)=>{const st=A[z],mt=isFinite(p)?p:z,yt=Number(tt[lt+1])||mt;st.forEach(Lt=>{Lt.endTime=yt})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:e,timestampOffset:n,videoDuration:i})}pathwayAttribute_(t){return t.attributes["PATHWAY-ID"]||t.attributes.serviceLocation}initContentSteeringController_(){const t=this.main();if(t.contentSteering){for(const e of t.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(e));this.contentSteeringController_.assignTagProperties(t.uri,t.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,e=>{this.trigger(Z({},e))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const e=this.contentSteeringController_.getAvailablePathways(),i=[];for(const n of t.playlists){const r=n.attributes.serviceLocation;if(r&&(i.push(r),!e.has(r)))return!0}return!(i.length||!e.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const t=this.contentSteeringController_.getPathway();if(!t)return;this.handlePathwayClones_();const e=this.main().playlists,i=new Set;let n=!1;Object.keys(e).forEach(r=>{const a=e[r],c=this.pathwayAttribute_(a),p=c&&t!==c;a.excludeUntil===1/0&&a.lastExcludeReason_==="content-steering"&&!p&&(delete a.excludeUntil,delete a.lastExcludeReason_,n=!0);const v=!a.excludeUntil&&a.excludeUntil!==1/0;!i.has(a.id)&&p&&v&&(i.add(a.id),a.excludeUntil=1/0,a.lastExcludeReason_="content-steering",this.logger_(`excluding ${a.id} for ${a.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(r=>{const a=this.mediaTypes_[r];if(a.activePlaylistLoader){const c=a.activePlaylistLoader.media_;c&&c.attributes.serviceLocation!==t&&(n=!0)}}),n&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,e=this.contentSteeringController_.currentPathwayClones,i=this.contentSteeringController_.nextPathwayClones;if(e&&e.size||i&&i.size){for(const[n,r]of e.entries())i.get(n)||(this.mainPlaylistLoader_.updateOrDeleteClone(r),this.contentSteeringController_.excludePathway(n));for(const[n,r]of i.entries()){const a=e.get(n);a?this.equalPathwayClones_(a,r)||(this.mainPlaylistLoader_.updateOrDeleteClone(r,!0),this.contentSteeringController_.addAvailablePathway(n)):(t.filter(c=>c.attributes["PATHWAY-ID"]===r["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(r,c)}),this.contentSteeringController_.addAvailablePathway(n))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...i])))}}equalPathwayClones_(t,e){if(t["BASE-ID"]!==e["BASE-ID"]||t.ID!==e.ID||t["URI-REPLACEMENT"].HOST!==e["URI-REPLACEMENT"].HOST)return!1;const i=t["URI-REPLACEMENT"].PARAMS,n=e["URI-REPLACEMENT"].PARAMS;for(const r in i)if(i[r]!==n[r])return!1;for(const r in n)if(i[r]!==n[r])return!1;return!0}changeSegmentPathway_(){const t=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(t,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let t=0;const e="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const n=this.mainPlaylistLoader_.getKeyIdSet(i);n&&n.size&&n.forEach(r=>{const a="usable",c=this.keyStatusMap_.has(r)&&this.keyStatusMap_.get(r)===a,p=i.lastExcludeReason_===e&&i.excludeUntil===1/0;c?c&&p&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${r} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==e&&(i.excludeUntil=1/0,i.lastExcludeReason_=e,this.logger_(`excluding playlist ${i.id} because the key ID ${r} doesn't exist in the keyStatusMap or is not ${a}`)),t++)})}),t>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const n=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,r=i.excludeUntil===1/0&&i.lastExcludeReason_===e;n&&r&&(delete i.excludeUntil,_t.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${e} key IDs`))})}addKeyStatus_(t,e){const i=(typeof t=="string"?t:(n=>{const r=new Uint8Array(n);return Array.from(r).map(a=>a.toString(16).padStart(2,"0")).join("")})(t)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${e}' with key ID ${i} added to the keyStatusMap`),this.keyStatusMap_.set(i,e)}updatePlaylistByKeyStatus(t,e){this.addKeyStatus_(t,e),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class Dp{constructor(t,e,i){const{playlistController_:n}=t,r=n.fastQualityChange_.bind(n);if(e.attributes){const v=e.attributes.RESOLUTION;this.width=v&&v.width,this.height=v&&v.height,this.bandwidth=e.attributes.BANDWIDTH,this.frameRate=e.attributes["FRAME-RATE"]}var a,c,p;this.codecs=na(n.main(),e),this.playlist=e,this.id=i,this.enabled=(a=t.playlists,c=e.id,p=r,v=>{const _=a.main.playlists[c],L=fl(_),k=za(_);if(v===void 0)return k;v?delete _.disabled:_.disabled=!0;const A={renditionInfo:{id:c,bandwidth:_.attributes.BANDWIDTH,resolution:_.attributes.RESOLUTION,codecs:_.attributes.CODECS},cause:"fast-quality"};return v===k||L||(p(_),v?a.trigger({type:"renditionenabled",metadata:A}):a.trigger({type:"renditiondisabled",metadata:A})),v})}}const Rh=["seeking","seeked","pause","playing","error"];class Rp extends _t.EventTarget{constructor(t){super(),this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ws("PlaybackWatcher"),this.logger_("initialize");const e=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),a=this.playlistController_,c=["main","subtitle","audio"],p={};c.forEach(_=>{p[_]={reset:()=>this.resetSegmentDownloads_(_),updateend:()=>this.checkSegmentDownloads_(_)},a[`${_}SegmentLoader_`].on("appendsdone",p[_].updateend),a[`${_}SegmentLoader_`].on("playlistupdate",p[_].reset),this.tech_.on(["seeked","seeking"],p[_].reset)});const v=_=>{["main","audio"].forEach(L=>{a[`${L}SegmentLoader_`][_]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=()=>v("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(Rh,r),this.tech_.on("canplay",i),this.tech_.one("play",e),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(Rh,r),this.tech_.off("canplay",i),this.tech_.off("play",e),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),c.forEach(_=>{a[`${_}SegmentLoader_`].off("appendsdone",p[_].updateend),a[`${_}SegmentLoader_`].off("playlistupdate",p[_].reset),this.tech_.off(["seeked","seeking"],p[_].reset)}),this.checkCurrentTimeTimeout_&&u().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&u().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=u().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){const e=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=e.buffered_()}checkSegmentDownloads_(t){const e=this.playlistController_,i=e[`${t}SegmentLoader_`],n=i.buffered_(),r=function(a,c){if(a===c)return!1;if(!a&&c||!c&&a||a.length!==c.length)return!0;for(let p=0;p<a.length;p++)if(a.start(p)!==c.start(p)||a.end(p)!==c.end(p))return!0;return!1}(this[`${t}Buffered_`],n);if(this[`${t}Buffered_`]=n,r){const a={bufferedRanges:n};return e.trigger({type:"bufferedrangeschanged",metadata:a}),void this.resetSegmentDownloads_(t)}this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:rr(n)}),this[`${t}StalledDownloads_`]<10||(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),t!=="subtitle"&&e.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+pn>=e.end(e.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(t===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(fs([this.lastRecordedTime,t]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=t}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),e=this.tech_.currentTime();let i;if(this.afterSeekableWindow_(t,e,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=t.end(t.length-1)),this.beforeSeekableWindow_(t,e)){const k=t.start(0);i=k+(k===t.end(0)?0:pn)}if(i!==void 0)return this.logger_(`Trying to seek outside of seekable at time ${e} with seekable range ${Tu(t)}. Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0;const n=this.playlistController_.sourceUpdater_,r=this.tech_.buffered(),a=n.audioBuffer?n.audioBuffered():null,c=n.videoBuffer?n.videoBuffered():null,p=this.media(),v=p.partTargetDuration?p.partTargetDuration:2*(p.targetDuration-Ln),_=[a,c];for(let k=0;k<_.length;k++)if(_[k]&&dl(_[k],e)<v)return!1;const L=Va(r,e);return L.length!==0&&(i=L.start(0)+pn,this.logger_(`Buffered region starts (${L.start(0)})  just beyond seek point (${e}). Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0)}waiting_(){if(this.techWaiting_())return;const t=this.tech_.currentTime(),e=this.tech_.buffered(),i=Ar(e,t);return i.length&&t+3<=i.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,e)){const a=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${e}. Seeking to live point (seekable end) ${a}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:e}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const r=Va(n,e);return r.length>0&&(this.logger_(`Stopped at ${e} and seeking to ${r.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(e),!0)}afterSeekableWindow_(t,e,i,n=!1){if(!t.length)return!1;let r=t.end(t.length-1)+pn;const a=!i.endList,c=typeof i.partTargetDuration=="number";return a&&(c||n)&&(r=t.end(t.length-1)+3*i.targetDuration),e>r}beforeSeekableWindow_(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:e,currentTime:i}){if(!t)return;let n;if(t.length&&e.length){const r=Ar(t,i-3),a=Ar(t,i),c=Ar(e,i);c.length&&!a.length&&r.length&&(n={start:r.end(0),end:c.end(0)})}else Va(t,i).length||(n=this.gapFromVideoUnderflow_(t,i));return!!n&&(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${i}`),!0)}skipTheGap_(t){const e=this.tech_.buffered(),i=this.tech_.currentTime(),n=Va(e,i);if(this.resetTimeUpdate_(),n.length===0||i!==t)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+Ln);const r={gapInfo:{from:i,to:n.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:r}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(t,e){const i=function(n){if(n.length<2)return fs();const r=[];for(let a=1;a<n.length;a++){const c=n.end(a-1),p=n.start(a);r.push([c,p])}return fs(r)}(t);for(let n=0;n<i.length;n++){const r=i.start(n),a=i.end(n);if(e-r<4&&e-r>2)return{start:r,end:a}}return null}}const Np={errorInterval:30,getSource(s){return s(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Nh=function(s,t){let e=0,i=0;const n=_i(Np,t);s.ready(()=>{s.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const r=function(){i&&s.currentTime(i)},a=function(v){v!=null&&(i=s.duration()!==1/0&&s.currentTime()||0,s.one("loadedmetadata",r),s.src(v),s.trigger({type:"usage",name:"vhs-error-reload"}),s.play())},c=function(){if(Date.now()-e<1e3*n.errorInterval)s.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(n.getSource&&typeof n.getSource=="function")return e=Date.now(),n.getSource.call(s,a);_t.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},p=function(){s.off("loadedmetadata",r),s.off("error",c),s.off("dispose",p)};s.on("error",c),s.on("dispose",p),s.reloadSourceOnError=function(v){p(),Nh(s,v)}};var Mh="3.13.1";const Fi={PlaylistLoader:Or,Playlist:ws,utils:tp,STANDARD_PLAYLIST_SELECTOR:uh,INITIAL_PLAYLIST_SELECTOR:function(){const s=this.playlists.main.playlists.filter(ws.isEnabled);return Lr(s,(t,e)=>kl(t,e)),s.filter(t=>!!na(this.playlists.main,t).video)[0]||null},lastBandwidthSelector:uh,movingAverageBandwidthSelector:function(s){let t=-1,e=-1;if(s<0||s>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&u().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),t<0&&(t=this.systemBandwidth,e=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==e&&(t=s*this.systemBandwidth+(1-s)*t,e=this.systemBandwidth),ch(this.playlists.main,t,parseInt(Ya(this.tech_.el(),"width"),10)*i,parseInt(Ya(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:kl,comparePlaylistResolution:function(s,t){let e,i;return s.attributes.RESOLUTION&&s.attributes.RESOLUTION.width&&(e=s.attributes.RESOLUTION.width),e=e||u().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||u().Number.MAX_VALUE,e===i&&s.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?s.attributes.BANDWIDTH-t.attributes.BANDWIDTH:e-i},xhr:Fu()};Object.keys(es).forEach(s=>{Object.defineProperty(Fi,s,{get:()=>(_t.log.warn(`using Vhs.${s} is UNSAFE be sure you know what you are doing`),es[s]),set(t){_t.log.warn(`using Vhs.${s} is UNSAFE be sure you know what you are doing`),typeof t!="number"||t<0?_t.log.warn(`value of Vhs.${s} must be greater than or equal to 0`):es[s]=t}})});const jh="videojs-vhs",Uh=function(s,t){const e=t.media();let i=-1;for(let n=0;n<s.length;n++)if(s[n].id===e.id){i=n;break}s.selectedIndex_=i,s.trigger({selectedIndex:i,type:"change"})};Fi.canPlaySource=function(){return _t.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Bh=()=>{if(!u().localStorage)return null;const s=u().localStorage.getItem(jh);if(!s)return null;try{return JSON.parse(s)}catch{return null}},Fh=(s,t)=>{s._requestCallbackSet||(s._requestCallbackSet=new Set),s._requestCallbackSet.add(t)},qh=(s,t)=>{s._responseCallbackSet||(s._responseCallbackSet=new Set),s._responseCallbackSet.add(t)},$h=(s,t)=>{s._requestCallbackSet&&(s._requestCallbackSet.delete(t),s._requestCallbackSet.size||delete s._requestCallbackSet)},Hh=(s,t)=>{s._responseCallbackSet&&(s._responseCallbackSet.delete(t),s._responseCallbackSet.size||delete s._responseCallbackSet)};Fi.supportsNativeHls=function(){if(!m()||!m().createElement)return!1;const s=m().createElement("video");return!!_t.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(s.canPlayType(t))})}(),Fi.supportsNativeDash=!!(m()&&m().createElement&&_t.getTech("Html5").isSupported())&&/maybe|probably/i.test(m().createElement("video").canPlayType("application/dash+xml")),Fi.supportsTypeNatively=s=>s==="hls"?Fi.supportsNativeHls:s==="dash"&&Fi.supportsNativeDash,Fi.isSupported=function(){return _t.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},Fi.xhr.onRequest=function(s){Fh(Fi.xhr,s)},Fi.xhr.onResponse=function(s){qh(Fi.xhr,s)},Fi.xhr.offRequest=function(s){$h(Fi.xhr,s)},Fi.xhr.offResponse=function(s){Hh(Fi.xhr,s)};const Mp=_t.getComponent("Component");class Vh extends Mp{constructor(t,e,i){if(super(e,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=Ws("VhsHandler"),e.options_&&e.options_.playerId){const n=_t.getPlayer(e.options_.playerId);this.player_=n}if(this.tech_=e,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(m(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{const r=m().fullscreenElement||m().webkitFullscreenElement||m().mozFullScreenElement||m().msFullscreenElement;r&&r.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(t={}){if(this.options_=_i(this.options_,t),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=this.source_.useBandwidthFromLocalStorage!==void 0?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=Bh();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=es.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===es.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{this.source_[i]!==void 0&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const e=this.options_.customPixelRatio;typeof e=="number"&&e>=0&&(this.customPixelRatio=e)}setOptions(t={}){this.setOptions_(t)}src(t,e){if(!t)return;var i;this.setOptions_(),this.options_.src=(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=Fi,this.options_.sourceType=Ie(e),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.options_.player_=this.player_,this.playlistController_=new Lp(this.options_);const n=_i({liveRangeSafeTimeDelta:pn},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Rp(n),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const a=_t.players[this.tech_.options_.playerId];let c=this.playlistController_.error;typeof c!="object"||c.code?typeof c=="string"&&(c={message:c,code:3}):c.code=3,a.error(c)});const r=this.options_.bufferBasedABR?Fi.movingAverageBandwidthSelector(.55):Fi.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=Fi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth;const c=u().navigator.connection||u().navigator.mozConnection||u().navigator.webkitConnection,p=1e7;if(this.options_.useNetworkInformationApi&&c){const v=1e3*c.downlink*1e3;a=v>=p&&a>=p?Math.max(a,v):v}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const a=1/(this.bandwidth||1);let c;return c=this.throughput>0?1/this.throughput:0,Math.floor(1/(a+c))},set(){_t.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>rr(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>rr(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(a=>{if(!u().localStorage)return!1;let c=Bh();c=c?_i(c,a):a;try{u().localStorage.setItem(jh,JSON.stringify(c))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{var a;(a=this).representations=()=>{const c=a.playlistController_.main(),p=ia(c)?a.playlistController_.getAudioTrackPlaylists_():c.playlists;return p?p.filter(v=>!fl(v)).map((v,_)=>new Dp(a,v,v.id)):[]}}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=u().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:e,sourceKeySystems:i,audioMedia:n,mainPlaylists:r})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const a=(v=n?r.concat([n]):r,_=Object.keys(i),v.reduce((L,k)=>{if(!k.contentProtection)return L;const A=_.reduce((tt,z)=>{const lt=k.contentProtection[z];return lt&&lt.pssh&&(tt[z]={pssh:lt.pssh}),tt},{});return Object.keys(A).length&&L.push(A),L},[])),c=[],p=[];var v,_;return a.forEach(L=>{p.push(new Promise((k,A)=>{e.tech_.one("keysessioncreated",k)})),c.push(new Promise((k,A)=>{e.eme.initializeMediaKeys({keySystems:L},tt=>{tt?A(tt):k()})}))}),Promise.race([Promise.all(c),Promise.race(p)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,e=(({player:i,sourceKeySystems:n,media:r,audioMedia:a})=>{const c=((p,v,_)=>{if(!p)return p;let L={};v&&v.attributes&&v.attributes.CODECS&&(L=Ga(Bt(v.attributes.CODECS))),_&&_.attributes&&_.attributes.CODECS&&(L.audio=_.attributes.CODECS);const k=he(L.video),A=he(L.audio),tt={};for(const z in p)tt[z]={},A&&(tt[z].audioContentType=A),k&&(tt[z].videoContentType=k),v.contentProtection&&v.contentProtection[z]&&v.contentProtection[z].pssh&&(tt[z].pssh=v.contentProtection[z].pssh),typeof p[z]=="string"&&(tt[z].url=p[z]);return _i(p,tt)})(n,r,a);return!(!c||(i.currentSource().keySystems=c,c&&!i.eme&&(_t.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),e?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const t=_t.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{(function(e,i){i.representations().forEach(n=>{e.addQualityLevel(n)}),Uh(e,i.playlists)})(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Uh(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Mh,"mux.js":"7.0.3","mpd-parser":"1.3.0","m3u8-parser":"7.1.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return Eh.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&u().URL.revokeObjectURL&&(u().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,e){return(({playlist:i,time:n,callback:r})=>{if(!r)throw new Error("getProgramTime: callback must be provided");if(!i||n===void 0)return r({message:"getProgramTime: playlist and time must be provided"});const a=((v,_)=>{if(!_||!_.segments||_.segments.length===0)return null;let L,k=0;for(let tt=0;tt<_.segments.length&&(L=_.segments[tt],k=L.videoTimingInfo?L.videoTimingInfo.transmuxedPresentationEnd:k+L.duration,!(v<=k));tt++);const A=_.segments[_.segments.length-1];if(A.videoTimingInfo&&A.videoTimingInfo.transmuxedPresentationEnd<v)return null;if(v>k){if(v>k+.25*A.duration)return null;L=A}return{segment:L,estimatedStart:L.videoTimingInfo?L.videoTimingInfo.transmuxedPresentationStart:k-L.duration,type:L.videoTimingInfo?"accurate":"estimate"}})(n,i);if(!a)return r({message:"valid programTime was not found"});if(a.type==="estimate")return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});const c={mediaSeconds:n},p=((v,_)=>{if(!_.dateTimeObject)return null;const L=_.videoTimingInfo.transmuxerPrependedSeconds,k=v-(_.videoTimingInfo.transmuxedPresentationStart+L);return new Date(_.dateTimeObject.getTime()+1e3*k)})(n,a.segment);return p&&(c.programDateTime=p.toISOString()),r(null,c)})({playlist:this.playlistController_.media(),time:t,callback:e})}seekToProgramTime(t,e,i=!0,n=2){return Vu({programTime:t,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})}setupXhrHooks_(){this.xhr.onRequest=t=>{Fh(this.xhr,t)},this.xhr.onResponse=t=>{qh(this.xhr,t)},this.xhr.offRequest=t=>{$h(this.xhr,t)},this.xhr.offResponse=t=>{Hh(this.xhr,t)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.playlistController_.on(t,e=>{this.player_.trigger(Z({},e))})}),["gapjumped","playedrangeschanged"].forEach(t=>{this.playbackWatcher_.on(t,e=>{this.player_.trigger(Z({},e))})})}}const Qa={name:"videojs-http-streaming",VERSION:Mh,canHandleSource(s,t={}){const e=_i(_t.options,t);return Qa.canPlayType(s.type,e)},handleSource(s,t,e={}){const i=_i(_t.options,e);return t.vhs=new Vh(s,t,i),t.vhs.xhr=Fu(),t.vhs.setupXhrHooks_(),t.vhs.src(s.src,s.type),t.vhs},canPlayType(s,t){const e=Ie(s);if(!e)return"";const i=Qa.getOverrideNative(t);return!Fi.supportsTypeNatively(e)||i?"maybe":""},getOverrideNative(s={}){const{vhs:t={}}=s,e=!(_t.browser.IS_ANY_SAFARI||_t.browser.IS_IOS),{overrideNative:i=e}=t;return i}};Zt("avc1.4d400d,mp4a.40.2")&&_t.getTech("Html5").registerSourceHandler(Qa,0),_t.VhsHandler=Vh,_t.VhsSourceHandler=Qa,_t.Vhs=Fi,_t.use||_t.registerComponent("Vhs",Fi),_t.options.vhs=_t.options.vhs||{},_t.getPlugin&&_t.getPlugin("reloadSourceOnError")||_t.registerPlugin("reloadSourceOnError",function(s){Nh(this,s)})},2579:(T,C,l)=>{var g=l(5204);T.exports=function(u,y){return y===void 0&&(y=!1),function(m,E,I){if(m)u(m);else if(E.statusCode>=400&&E.statusCode<=599){var F=I;if(y)if(g.TextDecoder){var D=((X=E.headers&&E.headers["content-type"])===void 0&&(X=""),X.toLowerCase().split(";").reduce(function(R,Z){var dt=Z.split("="),Dt=dt[0],rt=dt[1];return Dt.trim()==="charset"?rt.trim():R},"utf-8"));try{F=new TextDecoder(D).decode(I)}catch{}}else F=String.fromCharCode.apply(null,new Uint8Array(I));u({cause:F})}else u(null,I);var X}}},8496:(T,C,l)=>{var g=l(5204),u=l(8304),y=l(8716),m=l(8677),E=l(6527);D.httpHandler=l(3432),D.requestInterceptorsStorage=new m,D.responseInterceptorsStorage=new m,D.retryManager=new E;var I=function(R){var Z={};return R&&R.trim().split(`
`).forEach(function(dt){var Dt=dt.indexOf(":"),rt=dt.slice(0,Dt).trim().toLowerCase(),pt=dt.slice(Dt+1).trim();Z[rt]===void 0?Z[rt]=pt:Array.isArray(Z[rt])?Z[rt].push(pt):Z[rt]=[Z[rt],pt]}),Z};function F(R,Z,dt){var Dt=R;return y(Z)?(dt=Z,typeof R=="string"&&(Dt={uri:R})):Dt=u({},Z,{uri:R}),Dt.callback=dt,Dt}function D(R,Z,dt){return X(Z=F(R,Z,dt))}function X(R){if(R.callback===void 0)throw new Error("callback argument missing");if(R.requestType&&D.requestInterceptorsStorage.getIsEnabled()){var Z={uri:R.uri||R.url,headers:R.headers||{},body:R.body,metadata:R.metadata||{},retry:R.retry,timeout:R.timeout},dt=D.requestInterceptorsStorage.execute(R.requestType,Z);R.uri=dt.uri,R.headers=dt.headers,R.body=dt.body,R.metadata=dt.metadata,R.retry=dt.retry,R.timeout=dt.timeout}var Dt=!1,rt=function(Rt,Et,Bt){Dt||(Dt=!0,R.callback(Rt,Et,Bt))};function pt(){var Rt=void 0;if(Rt=K.response?K.response:K.responseText||function(Et){try{if(Et.responseType==="document")return Et.responseXML;var Bt=Et.responseXML&&Et.responseXML.documentElement.nodeName==="parsererror";if(Et.responseType===""&&!Bt)return Et.responseXML}catch{}return null}(K),vt)try{Rt=JSON.parse(Rt)}catch{}return Rt}function $(Rt){if(clearTimeout(Mt),clearTimeout(R.retryTimeout),Rt instanceof Error||(Rt=new Error(""+(Rt||"Unknown XMLHttpRequest Error"))),Rt.statusCode=0,ct||!D.retryManager.getIsEnabled()||!R.retry||!R.retry.shouldRetry()){if(R.requestType&&D.responseInterceptorsStorage.getIsEnabled()){var Et={headers:It.headers||{},body:It.body,responseUrl:K.responseURL,responseType:K.responseType},Bt=D.responseInterceptorsStorage.execute(R.requestType,Et);It.body=Bt.body,It.headers=Bt.headers}return rt(Rt,It)}R.retryTimeout=setTimeout(function(){R.retry.moveToNextAttempt(),R.xhr=K,X(R)},R.retry.getCurrentFuzzedDelay())}function et(){if(!ct){var Rt;clearTimeout(Mt),clearTimeout(R.retryTimeout),Rt=R.useXDR&&K.status===void 0?200:K.status===1223?204:K.status;var Et=It,Bt=null;if(Rt!==0?(Et={body:pt(),statusCode:Rt,method:W,headers:{},url:B,rawRequest:K},K.getAllResponseHeaders&&(Et.headers=I(K.getAllResponseHeaders()))):Bt=new Error("Internal XMLHttpRequest Error"),R.requestType&&D.responseInterceptorsStorage.getIsEnabled()){var Qt={headers:Et.headers||{},body:Et.body,responseUrl:K.responseURL,responseType:K.responseType},he=D.responseInterceptorsStorage.execute(R.requestType,Qt);Et.body=he.body,Et.headers=he.headers}return rt(Bt,Et,Et.body)}}var Q,ct,K=R.xhr||null;K||(K=R.cors||R.useXDR?new D.XDomainRequest:new D.XMLHttpRequest);var Mt,B=K.url=R.uri||R.url,W=K.method=R.method||"GET",at=R.body||R.data,At=K.headers=R.headers||{},Ot=!!R.sync,vt=!1,It={body:void 0,headers:{},statusCode:0,method:W,url:B,rawRequest:K};if("json"in R&&R.json!==!1&&(vt=!0,At.accept||At.Accept||(At.Accept="application/json"),W!=="GET"&&W!=="HEAD"&&(At["content-type"]||At["Content-Type"]||(At["Content-Type"]="application/json"),at=JSON.stringify(R.json===!0?at:R.json))),K.onreadystatechange=function(){K.readyState!==4||D.responseInterceptorsStorage.getIsEnabled()||setTimeout(et,0)},K.onload=et,K.onerror=$,K.onprogress=function(){},K.onabort=function(){ct=!0,clearTimeout(R.retryTimeout)},K.ontimeout=$,K.open(W,B,!Ot,R.username,R.password),Ot||(K.withCredentials=!!R.withCredentials),!Ot&&R.timeout>0&&(Mt=setTimeout(function(){if(!ct){ct=!0,K.abort("timeout");var Rt=new Error("XMLHttpRequest timeout");Rt.code="ETIMEDOUT",$(Rt)}},R.timeout)),K.setRequestHeader)for(Q in At)At.hasOwnProperty(Q)&&K.setRequestHeader(Q,At[Q]);else if(R.headers&&!function(Rt){for(var Et in Rt)if(Rt.hasOwnProperty(Et))return!1;return!0}(R.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in R&&(K.responseType=R.responseType),"beforeSend"in R&&typeof R.beforeSend=="function"&&R.beforeSend(K),K.send(at||null),K}T.exports=D,T.exports.default=D,D.XMLHttpRequest=g.XMLHttpRequest||function(){},D.XDomainRequest="withCredentials"in new D.XMLHttpRequest?D.XMLHttpRequest:g.XDomainRequest,function(R,Z){for(var dt=0;dt<R.length;dt++)Z(R[dt])}(["get","put","post","patch","head","delete"],function(R){D[R==="delete"?"del":R]=function(Z,dt,Dt){return(dt=F(Z,dt,Dt)).method=R.toUpperCase(),X(dt)}})},6342:T=>{function C(g,u){(u==null||u>g.length)&&(u=g.length);for(var y=0,m=new Array(u);y<u;y++)m[y]=g[y];return m}var l=function(){function g(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var u=g.prototype;return u.getIsEnabled=function(){return this.enabled_},u.enable=function(){this.enabled_=!0},u.disable=function(){this.enabled_=!1},u.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},u.addInterceptor=function(y,m){this.typeToInterceptorsMap_.has(y)||this.typeToInterceptorsMap_.set(y,new Set);var E=this.typeToInterceptorsMap_.get(y);return!E.has(m)&&(E.add(m),!0)},u.removeInterceptor=function(y,m){var E=this.typeToInterceptorsMap_.get(y);return!(!E||!E.has(m)||(E.delete(m),0))},u.clearInterceptorsByType=function(y){return!!this.typeToInterceptorsMap_.get(y)&&(this.typeToInterceptorsMap_.delete(y),this.typeToInterceptorsMap_.set(y,new Set),!0)},u.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},u.getForType=function(y){return this.typeToInterceptorsMap_.get(y)||new Set},u.execute=function(y,m){for(var E,I=function(D,X){var R=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(R)return(R=R.call(D)).next.bind(R);if(Array.isArray(D)||(R=function(dt,Dt){if(dt){if(typeof dt=="string")return C(dt,Dt);var rt=Object.prototype.toString.call(dt).slice(8,-1);return rt==="Object"&&dt.constructor&&(rt=dt.constructor.name),rt==="Map"||rt==="Set"?Array.from(dt):rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt)?C(dt,Dt):void 0}}(D))||X){R&&(D=R);var Z=0;return function(){return Z>=D.length?{done:!0}:{done:!1,value:D[Z++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(this.getForType(y));!(E=I()).done;){var F=E.value;try{m=F(m)}catch{}}return m},g}();T.exports=l},4378:T=>{var C=function(){function g(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var u=g.prototype;return u.getIsEnabled=function(){return this.enabled_},u.enable=function(){this.enabled_=!0},u.disable=function(){this.enabled_=!1},u.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},u.getMaxAttempts=function(){return this.maxAttempts_},u.setMaxAttempts=function(y){this.maxAttempts_=y},u.getDelayFactor=function(){return this.delayFactor_},u.setDelayFactor=function(y){this.delayFactor_=y},u.getFuzzFactor=function(){return this.fuzzFactor_},u.setFuzzFactor=function(y){this.fuzzFactor_=y},u.getInitialDelay=function(){return this.initialDelay_},u.setInitialDelay=function(y){this.initialDelay_=y},u.createRetry=function(y){var m=y===void 0?{}:y,E=m.maxAttempts,I=m.delayFactor,F=m.fuzzFactor,D=m.initialDelay;return new l({maxAttempts:E||this.maxAttempts_,delayFactor:I||this.delayFactor_,fuzzFactor:F||this.fuzzFactor_,initialDelay:D||this.initialDelay_})},g}(),l=function(){function g(y){this.maxAttempts_=y.maxAttempts,this.delayFactor_=y.delayFactor,this.fuzzFactor_=y.fuzzFactor,this.currentDelay_=y.initialDelay,this.currentAttempt_=1}var u=g.prototype;return u.moveToNextAttempt=function(){this.currentAttempt_++;var y=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+y},u.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},u.getCurrentDelay=function(){return this.currentDelay_},u.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},u.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},u.getCurrentFuzzedDelay=function(){var y=this.getCurrentMinPossibleDelay(),m=this.getCurrentMaxPossibleDelay();return y+Math.random()*(m-y)},g}();T.exports=C},52:(T,C,l)=>{var g=l(5204),u=T.exports={WebVTT:l(5483),VTTCue:l(2980),VTTRegion:l(6791)};g.vttjs=u,g.WebVTT=u.WebVTT;var y=u.VTTCue,m=u.VTTRegion,E=g.VTTCue,I=g.VTTRegion;u.shim=function(){g.VTTCue=y,g.VTTRegion=m},u.restore=function(){g.VTTCue=E,g.VTTRegion=I},g.VTTCue||u.shim()},5483:(T,C,l)=>{var g=l(7509),u=Object.create||function(){function B(){}return function(W){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return B.prototype=W,new B}}();function y(B,W){this.name="ParsingError",this.code=B.code,this.message=W||B.message}function m(B){function W(At,Ot,vt,It){return 3600*(0|At)+60*(0|Ot)+(0|vt)+(0|It)/1e3}var at=B.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return at?at[3]?W(at[1],at[2],at[3].replace(":",""),at[4]):at[1]>59?W(at[1],at[2],0,at[4]):W(0,at[1],at[2],at[4]):null}function E(){this.values=u(null)}function I(B,W,at,At){var Ot=At?B.split(At):[B];for(var vt in Ot)if(typeof Ot[vt]=="string"){var It=Ot[vt].split(at);It.length===2&&W(It[0].trim(),It[1].trim())}}function F(B,W,at){var At=B;function Ot(){var It=m(B);if(It===null)throw new y(y.Errors.BadTimeStamp,"Malformed timestamp: "+At);return B=B.replace(/^[^\sa-zA-Z-]+/,""),It}function vt(){B=B.replace(/^\s+/,"")}if(vt(),W.startTime=Ot(),vt(),B.substr(0,3)!=="-->")throw new y(y.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+At);B=B.substr(3),vt(),W.endTime=Ot(),vt(),function(It,Rt){var Et=new E;I(It,function(Bt,Qt){switch(Bt){case"region":for(var he=at.length-1;he>=0;he--)if(at[he].id===Qt){Et.set(Bt,at[he].region);break}break;case"vertical":Et.alt(Bt,Qt,["rl","lr"]);break;case"line":var Zt=Qt.split(","),ge=Zt[0];Et.integer(Bt,ge),Et.percent(Bt,ge)&&Et.set("snapToLines",!1),Et.alt(Bt,ge,["auto"]),Zt.length===2&&Et.alt("lineAlign",Zt[1],["start","center","end"]);break;case"position":Zt=Qt.split(","),Et.percent(Bt,Zt[0]),Zt.length===2&&Et.alt("positionAlign",Zt[1],["start","center","end"]);break;case"size":Et.percent(Bt,Qt);break;case"align":Et.alt(Bt,Qt,["start","center","end","left","right"])}},/:/,/\s/),Rt.region=Et.get("region",null),Rt.vertical=Et.get("vertical","");try{Rt.line=Et.get("line","auto")}catch{}Rt.lineAlign=Et.get("lineAlign","start"),Rt.snapToLines=Et.get("snapToLines",!0),Rt.size=Et.get("size",100);try{Rt.align=Et.get("align","center")}catch{Rt.align=Et.get("align","middle")}try{Rt.position=Et.get("position","auto")}catch{Rt.position=Et.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Rt.align)}Rt.positionAlign=Et.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Rt.align)}(B,W)}y.prototype=u(Error.prototype),y.prototype.constructor=y,y.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},E.prototype={set:function(B,W){this.get(B)||W===""||(this.values[B]=W)},get:function(B,W,at){return at?this.has(B)?this.values[B]:W[at]:this.has(B)?this.values[B]:W},has:function(B){return B in this.values},alt:function(B,W,at){for(var At=0;At<at.length;++At)if(W===at[At]){this.set(B,W);break}},integer:function(B,W){/^-?\d+$/.test(W)&&this.set(B,parseInt(W,10))},percent:function(B,W){return!!(W.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(W=parseFloat(W))>=0&&W<=100)&&(this.set(B,W),!0)}};var D=g.createElement&&g.createElement("textarea"),X={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},R={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Z={v:"title",lang:"lang"},dt={rt:"ruby"};function Dt(B,W){function at(){if(!W)return null;var ae,Te=W.match(/^([^<]*)(<[^>]*>?)?/);return ae=Te[1]?Te[1]:Te[2],W=W.substr(ae.length),ae}function At(ae,Te){return!dt[Te.localName]||dt[Te.localName]===ae.localName}function Ot(ae,Te){var Ae=X[ae];if(!Ae)return null;var Ie=B.document.createElement(Ae),Ke=Z[ae];return Ke&&Te&&(Ie[Ke]=Te.trim()),Ie}for(var vt,It,Rt=B.document.createElement("div"),Et=Rt,Bt=[];(vt=at())!==null;)if(vt[0]!=="<")Et.appendChild(B.document.createTextNode((It=vt,D.innerHTML=It,It=D.textContent,D.textContent="",It)));else{if(vt[1]==="/"){Bt.length&&Bt[Bt.length-1]===vt.substr(2).replace(">","")&&(Bt.pop(),Et=Et.parentNode);continue}var Qt,he=m(vt.substr(1,vt.length-2));if(he){Qt=B.document.createProcessingInstruction("timestamp",he),Et.appendChild(Qt);continue}var Zt=vt.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Zt||!(Qt=Ot(Zt[1],Zt[3]))||!At(Et,Qt))continue;if(Zt[2]){var ge=Zt[2].split(".");ge.forEach(function(ae){var Te=/^bg_/.test(ae),Ae=Te?ae.slice(3):ae;if(R.hasOwnProperty(Ae)){var Ie=Te?"background-color":"color",Ke=R[Ae];Qt.style[Ie]=Ke}}),Qt.className=ge.join(" ")}Bt.push(Zt[1]),Et.appendChild(Qt),Et=Qt}return Rt}var rt=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function pt(B){for(var W=0;W<rt.length;W++){var at=rt[W];if(B>=at[0]&&B<=at[1])return!0}return!1}function $(B){var W=[],at="";if(!B||!B.childNodes)return"ltr";function At(It,Rt){for(var Et=Rt.childNodes.length-1;Et>=0;Et--)It.push(Rt.childNodes[Et])}function Ot(It){if(!It||!It.length)return null;var Rt=It.pop(),Et=Rt.textContent||Rt.innerText;if(Et){var Bt=Et.match(/^.*(\n|\r)/);return Bt?(It.length=0,Bt[0]):Et}return Rt.tagName==="ruby"?Ot(It):Rt.childNodes?(At(It,Rt),Ot(It)):void 0}for(At(W,B);at=Ot(W);)for(var vt=0;vt<at.length;vt++)if(pt(at.charCodeAt(vt)))return"rtl";return"ltr"}function et(){}function Q(B,W,at){et.call(this),this.cue=W,this.cueDiv=Dt(B,W.text);var At={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:W.vertical===""?"horizontal-tb":W.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(At,this.cueDiv),this.div=B.document.createElement("div"),At={direction:$(this.cueDiv),writingMode:W.vertical===""?"horizontal-tb":W.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:W.align==="middle"?"center":W.align,font:at.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(At),this.div.appendChild(this.cueDiv);var Ot=0;switch(W.positionAlign){case"start":case"line-left":Ot=W.position;break;case"center":Ot=W.position-W.size/2;break;case"end":case"line-right":Ot=W.position-W.size}W.vertical===""?this.applyStyles({left:this.formatStyle(Ot,"%"),width:this.formatStyle(W.size,"%")}):this.applyStyles({top:this.formatStyle(Ot,"%"),height:this.formatStyle(W.size,"%")}),this.move=function(vt){this.applyStyles({top:this.formatStyle(vt.top,"px"),bottom:this.formatStyle(vt.bottom,"px"),left:this.formatStyle(vt.left,"px"),right:this.formatStyle(vt.right,"px"),height:this.formatStyle(vt.height,"px"),width:this.formatStyle(vt.width,"px")})}}function ct(B){var W,at,At,Ot;if(B.div){at=B.div.offsetHeight,At=B.div.offsetWidth,Ot=B.div.offsetTop;var vt=(vt=B.div.childNodes)&&(vt=vt[0])&&vt.getClientRects&&vt.getClientRects();B=B.div.getBoundingClientRect(),W=vt?Math.max(vt[0]&&vt[0].height||0,B.height/vt.length):0}this.left=B.left,this.right=B.right,this.top=B.top||Ot,this.height=B.height||at,this.bottom=B.bottom||Ot+(B.height||at),this.width=B.width||At,this.lineHeight=W!==void 0?W:B.lineHeight}function K(B,W,at,At){var Ot=new ct(W),vt=W.cue,It=function(Te){if(typeof Te.line=="number"&&(Te.snapToLines||Te.line>=0&&Te.line<=100))return Te.line;if(!Te.track||!Te.track.textTrackList||!Te.track.textTrackList.mediaElement)return-1;for(var Ae=Te.track,Ie=Ae.textTrackList,Ke=0,Kt=0;Kt<Ie.length&&Ie[Kt]!==Ae;Kt++)Ie[Kt].mode==="showing"&&Ke++;return-1*++Ke}(vt),Rt=[];if(vt.snapToLines){var Et;switch(vt.vertical){case"":Rt=["+y","-y"],Et="height";break;case"rl":Rt=["+x","-x"],Et="width";break;case"lr":Rt=["-x","+x"],Et="width"}var Bt=Ot.lineHeight,Qt=Bt*Math.round(It),he=at[Et]+Bt,Zt=Rt[0];Math.abs(Qt)>he&&(Qt=Qt<0?-1:1,Qt*=Math.ceil(he/Bt)*Bt),It<0&&(Qt+=vt.vertical===""?at.height:at.width,Rt=Rt.reverse()),Ot.move(Zt,Qt)}else{var ge=Ot.lineHeight/at.height*100;switch(vt.lineAlign){case"center":It-=ge/2;break;case"end":It-=ge}switch(vt.vertical){case"":W.applyStyles({top:W.formatStyle(It,"%")});break;case"rl":W.applyStyles({left:W.formatStyle(It,"%")});break;case"lr":W.applyStyles({right:W.formatStyle(It,"%")})}Rt=["+y","-x","+x","-y"],Ot=new ct(W)}var ae=function(Te,Ae){for(var Ie,Ke=new ct(Te),Kt=1,ze=0;ze<Ae.length;ze++){for(;Te.overlapsOppositeAxis(at,Ae[ze])||Te.within(at)&&Te.overlapsAny(At);)Te.move(Ae[ze]);if(Te.within(at))return Te;var ei=Te.intersectPercentage(at);Kt>ei&&(Ie=new ct(Te),Kt=ei),Te=new ct(Ke)}return Ie||Ke}(Ot,Rt);W.move(ae.toCSSCompatValues(at))}function Mt(){}et.prototype.applyStyles=function(B,W){for(var at in W=W||this.div,B)B.hasOwnProperty(at)&&(W.style[at]=B[at])},et.prototype.formatStyle=function(B,W){return B===0?0:B+W},Q.prototype=u(et.prototype),Q.prototype.constructor=Q,ct.prototype.move=function(B,W){switch(W=W!==void 0?W:this.lineHeight,B){case"+x":this.left+=W,this.right+=W;break;case"-x":this.left-=W,this.right-=W;break;case"+y":this.top+=W,this.bottom+=W;break;case"-y":this.top-=W,this.bottom-=W}},ct.prototype.overlaps=function(B){return this.left<B.right&&this.right>B.left&&this.top<B.bottom&&this.bottom>B.top},ct.prototype.overlapsAny=function(B){for(var W=0;W<B.length;W++)if(this.overlaps(B[W]))return!0;return!1},ct.prototype.within=function(B){return this.top>=B.top&&this.bottom<=B.bottom&&this.left>=B.left&&this.right<=B.right},ct.prototype.overlapsOppositeAxis=function(B,W){switch(W){case"+x":return this.left<B.left;case"-x":return this.right>B.right;case"+y":return this.top<B.top;case"-y":return this.bottom>B.bottom}},ct.prototype.intersectPercentage=function(B){return Math.max(0,Math.min(this.right,B.right)-Math.max(this.left,B.left))*Math.max(0,Math.min(this.bottom,B.bottom)-Math.max(this.top,B.top))/(this.height*this.width)},ct.prototype.toCSSCompatValues=function(B){return{top:this.top-B.top,bottom:B.bottom-this.bottom,left:this.left-B.left,right:B.right-this.right,height:this.height,width:this.width}},ct.getSimpleBoxPosition=function(B){var W=B.div?B.div.offsetHeight:B.tagName?B.offsetHeight:0,at=B.div?B.div.offsetWidth:B.tagName?B.offsetWidth:0,At=B.div?B.div.offsetTop:B.tagName?B.offsetTop:0;return{left:(B=B.div?B.div.getBoundingClientRect():B.tagName?B.getBoundingClientRect():B).left,right:B.right,top:B.top||At,height:B.height||W,bottom:B.bottom||At+(B.height||W),width:B.width||at}},Mt.StringDecoder=function(){return{decode:function(B){if(!B)return"";if(typeof B!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(B))}}},Mt.convertCueToDOMTree=function(B,W){return B&&W?Dt(B,W):null},Mt.processCues=function(B,W,at){if(!B||!W||!at)return null;for(;at.firstChild;)at.removeChild(at.firstChild);var At=B.document.createElement("div");if(At.style.position="absolute",At.style.left="0",At.style.right="0",At.style.top="0",At.style.bottom="0",At.style.margin="1.5%",at.appendChild(At),function(Et){for(var Bt=0;Bt<Et.length;Bt++)if(Et[Bt].hasBeenReset||!Et[Bt].displayState)return!0;return!1}(W)){var Ot=[],vt=ct.getSimpleBoxPosition(At),It={font:Math.round(.05*vt.height*100)/100+"px sans-serif"};(function(){for(var Et,Bt,Qt=0;Qt<W.length;Qt++)Bt=W[Qt],Et=new Q(B,Bt,It),At.appendChild(Et.div),K(0,Et,vt,Ot),Bt.displayState=Et.div,Ot.push(ct.getSimpleBoxPosition(Et))})()}else for(var Rt=0;Rt<W.length;Rt++)At.appendChild(W[Rt].displayState)},Mt.Parser=function(B,W,at){at||(at=W,W={}),W||(W={}),this.window=B,this.vttjs=W,this.state="INITIAL",this.buffer="",this.decoder=at||new TextDecoder("utf8"),this.regionList=[]},Mt.Parser.prototype={reportOrThrowError:function(B){if(!(B instanceof y))throw B;this.onparsingerror&&this.onparsingerror(B)},parse:function(B){var W,at=this;function At(){for(var Et=at.buffer,Bt=0;Bt<Et.length&&Et[Bt]!=="\r"&&Et[Bt]!==`
`;)++Bt;var Qt=Et.substr(0,Bt);return Et[Bt]==="\r"&&++Bt,Et[Bt]===`
`&&++Bt,at.buffer=Et.substr(Bt),Qt}B&&(at.buffer+=at.decoder.decode(B,{stream:!0}));try{var Ot;if(at.state==="INITIAL"){if(!/\r\n|\n/.test(at.buffer))return this;var vt=(Ot=At()).match(/^WEBVTT([ \t].*)?$/);if(!vt||!vt[0])throw new y(y.Errors.BadSignature);at.state="HEADER"}for(var It=!1;at.buffer;){if(!/\r\n|\n/.test(at.buffer))return this;switch(It?It=!1:Ot=At(),at.state){case"HEADER":/:/.test(Ot)?(W=Ot).match(/X-TIMESTAMP-MAP/)?I(W,function(Et,Bt){Et==="X-TIMESTAMP-MAP"&&function(Qt){var he=new E;I(Qt,function(Zt,ge){switch(Zt){case"MPEGT":he.integer(Zt+"S",ge);break;case"LOCA":he.set(Zt+"L",m(ge))}},/[^\d]:/,/,/),at.ontimestampmap&&at.ontimestampmap({MPEGTS:he.get("MPEGTS"),LOCAL:he.get("LOCAL")})}(Bt)},/=/):I(W,function(Et,Bt){Et==="Region"&&function(Qt){var he=new E;if(I(Qt,function(ge,ae){switch(ge){case"id":he.set(ge,ae);break;case"width":he.percent(ge,ae);break;case"lines":he.integer(ge,ae);break;case"regionanchor":case"viewportanchor":var Te=ae.split(",");if(Te.length!==2)break;var Ae=new E;if(Ae.percent("x",Te[0]),Ae.percent("y",Te[1]),!Ae.has("x")||!Ae.has("y"))break;he.set(ge+"X",Ae.get("x")),he.set(ge+"Y",Ae.get("y"));break;case"scroll":he.alt(ge,ae,["up"])}},/=/,/\s/),he.has("id")){var Zt=new(at.vttjs.VTTRegion||at.window.VTTRegion);Zt.width=he.get("width",100),Zt.lines=he.get("lines",3),Zt.regionAnchorX=he.get("regionanchorX",0),Zt.regionAnchorY=he.get("regionanchorY",100),Zt.viewportAnchorX=he.get("viewportanchorX",0),Zt.viewportAnchorY=he.get("viewportanchorY",100),Zt.scroll=he.get("scroll",""),at.onregion&&at.onregion(Zt),at.regionList.push({id:he.get("id"),region:Zt})}}(Bt)},/:/):Ot||(at.state="ID");continue;case"NOTE":Ot||(at.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Ot)){at.state="NOTE";break}if(!Ot)continue;at.cue=new(at.vttjs.VTTCue||at.window.VTTCue)(0,0,"");try{at.cue.align="center"}catch{at.cue.align="middle"}if(at.state="CUE",Ot.indexOf("-->")===-1){at.cue.id=Ot;continue}case"CUE":try{F(Ot,at.cue,at.regionList)}catch(Et){at.reportOrThrowError(Et),at.cue=null,at.state="BADCUE";continue}at.state="CUETEXT";continue;case"CUETEXT":var Rt=Ot.indexOf("-->")!==-1;if(!Ot||Rt&&(It=!0)){at.oncue&&at.oncue(at.cue),at.cue=null,at.state="ID";continue}at.cue.text&&(at.cue.text+=`
`),at.cue.text+=Ot.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":Ot||(at.state="ID");continue}}}catch(Et){at.reportOrThrowError(Et),at.state==="CUETEXT"&&at.cue&&at.oncue&&at.oncue(at.cue),at.cue=null,at.state=at.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var B=this;try{if(B.buffer+=B.decoder.decode(),(B.cue||B.state==="HEADER")&&(B.buffer+=`

`,B.parse()),B.state==="INITIAL")throw new y(y.Errors.BadSignature)}catch(W){B.reportOrThrowError(W)}return B.onflush&&B.onflush(),this}},T.exports=Mt},2980:T=>{var C={"":1,lr:1,rl:1},l={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function g(y){return typeof y=="string"&&!!l[y.toLowerCase()]&&y.toLowerCase()}function u(y,m,E){this.hasBeenReset=!1;var I="",F=!1,D=y,X=m,R=E,Z=null,dt="",Dt=!0,rt="auto",pt="start",$="auto",et="auto",Q=100,ct="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return I},set:function(K){I=""+K}},pauseOnExit:{enumerable:!0,get:function(){return F},set:function(K){F=!!K}},startTime:{enumerable:!0,get:function(){return D},set:function(K){if(typeof K!="number")throw new TypeError("Start time must be set to a number.");D=K,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return X},set:function(K){if(typeof K!="number")throw new TypeError("End time must be set to a number.");X=K,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return R},set:function(K){R=""+K,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Z},set:function(K){Z=K,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return dt},set:function(K){var Mt=function(B){return typeof B=="string"&&!!C[B.toLowerCase()]&&B.toLowerCase()}(K);if(Mt===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");dt=Mt,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Dt},set:function(K){Dt=!!K,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return rt},set:function(K){if(typeof K!="number"&&K!=="auto")throw new SyntaxError("Line: an invalid number or illegal string was specified.");rt=K,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return pt},set:function(K){var Mt=g(K);Mt?(pt=Mt,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return $},set:function(K){if(K<0||K>100)throw new Error("Position must be between 0 and 100.");$=K,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return et},set:function(K){var Mt=g(K);Mt?(et=Mt,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Q},set:function(K){if(K<0||K>100)throw new Error("Size must be between 0 and 100.");Q=K,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return ct},set:function(K){var Mt=g(K);if(!Mt)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");ct=Mt,this.hasBeenReset=!0}}}),this.displayState=void 0}u.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},T.exports=u},6791:T=>{var C={"":!0,up:!0};function l(g){return typeof g=="number"&&g>=0&&g<=100}T.exports=function(){var g=100,u=3,y=0,m=100,E=0,I=100,F="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return g},set:function(D){if(!l(D))throw new Error("Width must be between 0 and 100.");g=D}},lines:{enumerable:!0,get:function(){return u},set:function(D){if(typeof D!="number")throw new TypeError("Lines must be set to a number.");u=D}},regionAnchorY:{enumerable:!0,get:function(){return m},set:function(D){if(!l(D))throw new Error("RegionAnchorX must be between 0 and 100.");m=D}},regionAnchorX:{enumerable:!0,get:function(){return y},set:function(D){if(!l(D))throw new Error("RegionAnchorY must be between 0 and 100.");y=D}},viewportAnchorY:{enumerable:!0,get:function(){return I},set:function(D){if(!l(D))throw new Error("ViewportAnchorY must be between 0 and 100.");I=D}},viewportAnchorX:{enumerable:!0,get:function(){return E},set:function(D){if(!l(D))throw new Error("ViewportAnchorX must be between 0 and 100.");E=D}},scroll:{enumerable:!0,get:function(){return F},set:function(D){var X=function(R){return typeof R=="string"&&!!C[R.toLowerCase()]&&R.toLowerCase()}(D);X===!1?console.warn("Scroll: an invalid or illegal string was specified."):F=X}}})}},5303:(T,C,l)=>{var g;(function(){function u(Y,ot,Ut){return Y.call.apply(Y.bind,arguments)}function y(Y,ot,Ut){if(!Y)throw Error();if(2<arguments.length){var $t=Array.prototype.slice.call(arguments,2);return function(){var Ht=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ht,$t),Y.apply(ot,Ht)}}return function(){return Y.apply(ot,arguments)}}function m(Y,ot,Ut){return(m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:y).apply(null,arguments)}var E=Date.now||function(){return+new Date};function I(Y,ot){this.a=Y,this.o=ot||Y,this.c=this.o.document}var F=!!window.FontFace;function D(Y,ot,Ut,$t){if(ot=Y.c.createElement(ot),Ut)for(var Ht in Ut)Ut.hasOwnProperty(Ht)&&(Ht=="style"?ot.style.cssText=Ut[Ht]:ot.setAttribute(Ht,Ut[Ht]));return $t&&ot.appendChild(Y.c.createTextNode($t)),ot}function X(Y,ot,Ut){(Y=Y.c.getElementsByTagName(ot)[0])||(Y=document.documentElement),Y.insertBefore(Ut,Y.lastChild)}function R(Y){Y.parentNode&&Y.parentNode.removeChild(Y)}function Z(Y,ot,Ut){ot=ot||[],Ut=Ut||[];for(var $t=Y.className.split(/\s+/),Ht=0;Ht<ot.length;Ht+=1){for(var ke=!1,le=0;le<$t.length;le+=1)if(ot[Ht]===$t[le]){ke=!0;break}ke||$t.push(ot[Ht])}for(ot=[],Ht=0;Ht<$t.length;Ht+=1){for(ke=!1,le=0;le<Ut.length;le+=1)if($t[Ht]===Ut[le]){ke=!0;break}ke||ot.push($t[Ht])}Y.className=ot.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function dt(Y,ot){for(var Ut=Y.className.split(/\s+/),$t=0,Ht=Ut.length;$t<Ht;$t++)if(Ut[$t]==ot)return!0;return!1}function Dt(Y,ot,Ut){function $t(){se&&Ht&&ke&&(se(le),se=null)}ot=D(Y,"link",{rel:"stylesheet",href:ot,media:"all"});var Ht=!1,ke=!0,le=null,se=Ut||null;F?(ot.onload=function(){Ht=!0,$t()},ot.onerror=function(){Ht=!0,le=Error("Stylesheet failed to load"),$t()}):setTimeout(function(){Ht=!0,$t()},0),X(Y,"head",ot)}function rt(Y,ot,Ut,$t){var Ht=Y.c.getElementsByTagName("head")[0];if(Ht){var ke=D(Y,"script",{src:ot}),le=!1;return ke.onload=ke.onreadystatechange=function(){le||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(le=!0,Ut&&Ut(null),ke.onload=ke.onreadystatechange=null,ke.parentNode.tagName=="HEAD"&&Ht.removeChild(ke))},Ht.appendChild(ke),setTimeout(function(){le||(le=!0,Ut&&Ut(Error("Script load timeout")))},$t||5e3),ke}return null}function pt(){this.a=0,this.c=null}function $(Y){return Y.a++,function(){Y.a--,Q(Y)}}function et(Y,ot){Y.c=ot,Q(Y)}function Q(Y){Y.a==0&&Y.c&&(Y.c(),Y.c=null)}function ct(Y){this.a=Y||"-"}function K(Y,ot){this.c=Y,this.f=4,this.a="n";var Ut=(ot||"n4").match(/^([nio])([1-9])$/i);Ut&&(this.a=Ut[1],this.f=parseInt(Ut[2],10))}function Mt(Y){var ot=[];Y=Y.split(/,\s*/);for(var Ut=0;Ut<Y.length;Ut++){var $t=Y[Ut].replace(/['"]/g,"");$t.indexOf(" ")!=-1||/^\d/.test($t)?ot.push("'"+$t+"'"):ot.push($t)}return ot.join(",")}function B(Y){return Y.a+Y.f}function W(Y){var ot="normal";return Y.a==="o"?ot="oblique":Y.a==="i"&&(ot="italic"),ot}function at(Y){var ot=4,Ut="n",$t=null;return Y&&(($t=Y.match(/(normal|oblique|italic)/i))&&$t[1]&&(Ut=$t[1].substr(0,1).toLowerCase()),($t=Y.match(/([1-9]00|normal|bold)/i))&&$t[1]&&(/bold/i.test($t[1])?ot=7:/[1-9]00/.test($t[1])&&(ot=parseInt($t[1].substr(0,1),10)))),Ut+ot}function At(Y,ot){this.c=Y,this.f=Y.o.document.documentElement,this.h=ot,this.a=new ct("-"),this.j=ot.events!==!1,this.g=ot.classes!==!1}function Ot(Y){if(Y.g){var ot=dt(Y.f,Y.a.c("wf","active")),Ut=[],$t=[Y.a.c("wf","loading")];ot||Ut.push(Y.a.c("wf","inactive")),Z(Y.f,Ut,$t)}vt(Y,"inactive")}function vt(Y,ot,Ut){Y.j&&Y.h[ot]&&(Ut?Y.h[ot](Ut.c,B(Ut)):Y.h[ot]())}function It(){this.c={}}function Rt(Y,ot){this.c=Y,this.f=ot,this.a=D(this.c,"span",{"aria-hidden":"true"},this.f)}function Et(Y){X(Y.c,"body",Y.a)}function Bt(Y){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+Mt(Y.c)+";font-style:"+W(Y)+";font-weight:"+Y.f+"00;"}function Qt(Y,ot,Ut,$t,Ht,ke){this.g=Y,this.j=ot,this.a=$t,this.c=Ut,this.f=Ht||3e3,this.h=ke||void 0}function he(Y,ot,Ut,$t,Ht,ke,le){this.v=Y,this.B=ot,this.c=Ut,this.a=$t,this.s=le||"BESbswy",this.f={},this.w=Ht||3e3,this.u=ke||null,this.m=this.j=this.h=this.g=null,this.g=new Rt(this.c,this.s),this.h=new Rt(this.c,this.s),this.j=new Rt(this.c,this.s),this.m=new Rt(this.c,this.s),Y=Bt(Y=new K(this.a.c+",serif",B(this.a))),this.g.a.style.cssText=Y,Y=Bt(Y=new K(this.a.c+",sans-serif",B(this.a))),this.h.a.style.cssText=Y,Y=Bt(Y=new K("serif",B(this.a))),this.j.a.style.cssText=Y,Y=Bt(Y=new K("sans-serif",B(this.a))),this.m.a.style.cssText=Y,Et(this.g),Et(this.h),Et(this.j),Et(this.m)}ct.prototype.c=function(Y){for(var ot=[],Ut=0;Ut<arguments.length;Ut++)ot.push(arguments[Ut].replace(/[\W_]+/g,"").toLowerCase());return ot.join(this.a)},Qt.prototype.start=function(){var Y=this.c.o.document,ot=this,Ut=E(),$t=new Promise(function(le,se){(function Oe(){E()-Ut>=ot.f?se():Y.fonts.load(function(_e){return W(_e)+" "+_e.f+"00 300px "+Mt(_e.c)}(ot.a),ot.h).then(function(_e){1<=_e.length?le():setTimeout(Oe,25)},function(){se()})})()}),Ht=null,ke=new Promise(function(le,se){Ht=setTimeout(se,ot.f)});Promise.race([ke,$t]).then(function(){Ht&&(clearTimeout(Ht),Ht=null),ot.g(ot.a)},function(){ot.j(ot.a)})};var Zt={D:"serif",C:"sans-serif"},ge=null;function ae(){if(ge===null){var Y=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ge=!!Y&&(536>parseInt(Y[1],10)||parseInt(Y[1],10)===536&&11>=parseInt(Y[2],10))}return ge}function Te(Y,ot,Ut){for(var $t in Zt)if(Zt.hasOwnProperty($t)&&ot===Y.f[Zt[$t]]&&Ut===Y.f[Zt[$t]])return!0;return!1}function Ae(Y){var ot,Ut=Y.g.a.offsetWidth,$t=Y.h.a.offsetWidth;(ot=Ut===Y.f.serif&&$t===Y.f["sans-serif"])||(ot=ae()&&Te(Y,Ut,$t)),ot?E()-Y.A>=Y.w?ae()&&Te(Y,Ut,$t)&&(Y.u===null||Y.u.hasOwnProperty(Y.a.c))?Ie(Y,Y.v):Ie(Y,Y.B):function(Ht){setTimeout(m(function(){Ae(this)},Ht),50)}(Y):Ie(Y,Y.v)}function Ie(Y,ot){setTimeout(m(function(){R(this.g.a),R(this.h.a),R(this.j.a),R(this.m.a),ot(this.a)},Y),0)}function Ke(Y,ot,Ut){this.c=Y,this.a=ot,this.f=0,this.m=this.j=!1,this.s=Ut}he.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=E(),Ae(this)};var Kt=null;function ze(Y){--Y.f==0&&Y.j&&(Y.m?((Y=Y.a).g&&Z(Y.f,[Y.a.c("wf","active")],[Y.a.c("wf","loading"),Y.a.c("wf","inactive")]),vt(Y,"active")):Ot(Y.a))}function ei(Y){this.j=Y,this.a=new It,this.h=0,this.f=this.g=!0}function We(Y,ot,Ut,$t,Ht){var ke=--Y.h==0;(Y.f||Y.g)&&setTimeout(function(){var le=Ht||null,se=$t||{};if(Ut.length===0&&ke)Ot(ot.a);else{ot.f+=Ut.length,ke&&(ot.j=ke);var Oe,_e=[];for(Oe=0;Oe<Ut.length;Oe++){var pi=Ut[Oe],Ji=se[pi.c],P=ot.a,N=pi;if(P.g&&Z(P.f,[P.a.c("wf",N.c,B(N).toString(),"loading")]),vt(P,"fontloading",N),P=null,Kt===null)if(window.FontFace){N=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var J=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);Kt=N?42<parseInt(N[1],10):!J}else Kt=!1;P=Kt?new Qt(m(ot.g,ot),m(ot.h,ot),ot.c,pi,ot.s,Ji):new he(m(ot.g,ot),m(ot.h,ot),ot.c,pi,ot.s,le,Ji),_e.push(P)}for(Oe=0;Oe<_e.length;Oe++)_e[Oe].start()}},0)}function Di(Y,ot){this.c=Y,this.a=ot}function Qe(Y,ot){this.c=Y,this.a=ot}function Pt(Y,ot){this.c=Y||Ct,this.a=[],this.f=[],this.g=ot||""}Ke.prototype.g=function(Y){var ot=this.a;ot.g&&Z(ot.f,[ot.a.c("wf",Y.c,B(Y).toString(),"active")],[ot.a.c("wf",Y.c,B(Y).toString(),"loading"),ot.a.c("wf",Y.c,B(Y).toString(),"inactive")]),vt(ot,"fontactive",Y),this.m=!0,ze(this)},Ke.prototype.h=function(Y){var ot=this.a;if(ot.g){var Ut=dt(ot.f,ot.a.c("wf",Y.c,B(Y).toString(),"active")),$t=[],Ht=[ot.a.c("wf",Y.c,B(Y).toString(),"loading")];Ut||$t.push(ot.a.c("wf",Y.c,B(Y).toString(),"inactive")),Z(ot.f,$t,Ht)}vt(ot,"fontinactive",Y),ze(this)},ei.prototype.load=function(Y){this.c=new I(this.j,Y.context||this.j),this.g=Y.events!==!1,this.f=Y.classes!==!1,function(ot,Ut,$t){var Ht=[],ke=$t.timeout;(function(se){se.g&&Z(se.f,[se.a.c("wf","loading")]),vt(se,"loading")})(Ut),Ht=function(se,Oe,_e){var pi,Ji=[];for(pi in Oe)if(Oe.hasOwnProperty(pi)){var P=se.c[pi];P&&Ji.push(P(Oe[pi],_e))}return Ji}(ot.a,$t,ot.c);var le=new Ke(ot.c,Ut,ke);for(ot.h=Ht.length,Ut=0,$t=Ht.length;Ut<$t;Ut++)Ht[Ut].load(function(se,Oe,_e){We(ot,le,se,Oe,_e)})}(this,new At(this.c,Y),Y)},Di.prototype.load=function(Y){function ot(){if(ke["__mti_fntLst"+$t]){var le,se=ke["__mti_fntLst"+$t](),Oe=[];if(se)for(var _e=0;_e<se.length;_e++){var pi=se[_e].fontfamily;se[_e].fontStyle!=null&&se[_e].fontWeight!=null?(le=se[_e].fontStyle+se[_e].fontWeight,Oe.push(new K(pi,le))):Oe.push(new K(pi))}Y(Oe)}else setTimeout(function(){ot()},50)}var Ut=this,$t=Ut.a.projectId,Ht=Ut.a.version;if($t){var ke=Ut.c.o;rt(this.c,(Ut.a.api||"https://fast.fonts.net/jsapi")+"/"+$t+".js"+(Ht?"?v="+Ht:""),function(le){le?Y([]):(ke["__MonotypeConfiguration__"+$t]=function(){return Ut.a},ot())}).id="__MonotypeAPIScript__"+$t}else Y([])},Qe.prototype.load=function(Y){var ot,Ut,$t=this.a.urls||[],Ht=this.a.families||[],ke=this.a.testStrings||{},le=new pt;for(ot=0,Ut=$t.length;ot<Ut;ot++)Dt(this.c,$t[ot],$(le));var se=[];for(ot=0,Ut=Ht.length;ot<Ut;ot++)if(($t=Ht[ot].split(":"))[1])for(var Oe=$t[1].split(","),_e=0;_e<Oe.length;_e+=1)se.push(new K($t[0],Oe[_e]));else se.push(new K($t[0]));et(le,function(){Y(se,ke)})};var Ct="https://fonts.googleapis.com/css";function Nt(Y){this.f=Y,this.a=[],this.c={}}var Ft={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ft={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ce={i:"i",italic:"i",n:"n",normal:"n"},oi=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function di(Y,ot){this.c=Y,this.a=ot}var ii={Arimo:!0,Cousine:!0,Tinos:!0};function fi(Y,ot){this.c=Y,this.a=ot}function Ge(Y,ot){this.c=Y,this.f=ot,this.a=[]}di.prototype.load=function(Y){var ot=new pt,Ut=this.c,$t=new Pt(this.a.api,this.a.text),Ht=this.a.families;(function(le,se){for(var Oe=se.length,_e=0;_e<Oe;_e++){var pi=se[_e].split(":");pi.length==3&&le.f.push(pi.pop());var Ji="";pi.length==2&&pi[1]!=""&&(Ji=":"),le.a.push(pi.join(Ji))}})($t,Ht);var ke=new Nt(Ht);(function(le){for(var se=le.f.length,Oe=0;Oe<se;Oe++){var _e=le.f[Oe].split(":"),pi=_e[0].replace(/\+/g," "),Ji=["n4"];if(2<=_e.length){var P;if(P=[],N=_e[1])for(var N,J=(N=N.split(",")).length,bt=0;bt<J;bt++){var zt;if((zt=N[bt]).match(/^[\w-]+$/))if((fe=oi.exec(zt.toLowerCase()))==null)zt="";else{if(zt=(zt=fe[2])==null||zt==""?"n":ce[zt],(fe=fe[1])==null||fe=="")fe="4";else var fe=ft[fe]||(isNaN(fe)?"4":fe.substr(0,1));zt=[zt,fe].join("")}else zt="";zt&&P.push(zt)}0<P.length&&(Ji=P),_e.length==3&&(P=[],0<(_e=(_e=_e[2])?_e.split(","):P).length&&(_e=Ft[_e[0]])&&(le.c[pi]=_e))}for(le.c[pi]||(_e=Ft[pi])&&(le.c[pi]=_e),_e=0;_e<Ji.length;_e+=1)le.a.push(new K(pi,Ji[_e]))}})(ke),Dt(Ut,function(le){if(le.a.length==0)throw Error("No fonts to load!");if(le.c.indexOf("kit=")!=-1)return le.c;for(var se=le.a.length,Oe=[],_e=0;_e<se;_e++)Oe.push(le.a[_e].replace(/ /g,"+"));return se=le.c+"?family="+Oe.join("%7C"),0<le.f.length&&(se+="&subset="+le.f.join(",")),0<le.g.length&&(se+="&text="+encodeURIComponent(le.g)),se}($t),$(ot)),et(ot,function(){Y(ke.a,ke.c,ii)})},fi.prototype.load=function(Y){var ot=this.a.id,Ut=this.c.o;ot?rt(this.c,(this.a.api||"https://use.typekit.net")+"/"+ot+".js",function($t){if($t)Y([]);else if(Ut.Typekit&&Ut.Typekit.config&&Ut.Typekit.config.fn){$t=Ut.Typekit.config.fn;for(var Ht=[],ke=0;ke<$t.length;ke+=2)for(var le=$t[ke],se=$t[ke+1],Oe=0;Oe<se.length;Oe++)Ht.push(new K(le,se[Oe]));try{Ut.Typekit.load({events:!1,classes:!1,async:!0})}catch{}Y(Ht)}},2e3):Y([])},Ge.prototype.load=function(Y){var ot=this.f.id,Ut=this.c.o,$t=this;ot?(Ut.__webfontfontdeckmodule__||(Ut.__webfontfontdeckmodule__={}),Ut.__webfontfontdeckmodule__[ot]=function(Ht,ke){for(var le=0,se=ke.fonts.length;le<se;++le){var Oe=ke.fonts[le];$t.a.push(new K(Oe.name,at("font-weight:"+Oe.weight+";font-style:"+Oe.style)))}Y($t.a)},rt(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(Ht){return Ht.o.location.hostname||Ht.a.location.hostname}(this.c)+"/"+ot+".js",function(Ht){Ht&&Y([])})):Y([])};var $e=new ei(window);$e.a.c.custom=function(Y,ot){return new Qe(ot,Y)},$e.a.c.fontdeck=function(Y,ot){return new Ge(ot,Y)},$e.a.c.monotype=function(Y,ot){return new Di(ot,Y)},$e.a.c.typekit=function(Y,ot){return new fi(ot,Y)},$e.a.c.google=function(Y,ot){return new di(ot,Y)};var He={load:m($e.load,$e)};(g=function(){return He}.call(C,l,C,T))===void 0||(T.exports=g)})()},4626:()=>{},8304:T=>{function C(){return T.exports=C=Object.assign?Object.assign.bind():function(l){for(var g=1;g<arguments.length;g++){var u=arguments[g];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},T.exports.__esModule=!0,T.exports.default=T.exports,C.apply(this,arguments)}T.exports=C,T.exports.__esModule=!0,T.exports.default=T.exports},6606:(T,C)=>{var l={607:function(E,I,F){var D=this&&this.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(I,"__esModule",{value:!0}),I.defaultProfiles=I.cldAdaptiveStreamProfile=I.cldLoopingProfile=I.cldDefaultProfile=void 0;const X=D(F(704)),R=D(F(83)),Z=D(F(832));I.cldDefaultProfile={name:"cld-default",isDefault:!0,config:X.default},I.cldLoopingProfile={name:"cld-looping",isDefault:!0,config:R.default},I.cldAdaptiveStreamProfile={name:"cld-adaptive-stream",isDefault:!0,config:Z.default},I.defaultProfiles=[I.cldDefaultProfile,I.cldLoopingProfile,I.cldAdaptiveStreamProfile]},832:E=>{E.exports=JSON.parse('{"playerOptions":{"fluid":true,"controls":true,"controlBar":{"fullscreenToggle":false},"showJumpControls":true,"hideContextMenu":false,"floatingWhenNotVisible":"none"},"sourceOptions":{"chapters":true,"sourceTypes":["hls"],"transformation":[{"effect":["volume:auto"]}]}}')},704:E=>{E.exports=JSON.parse('{"playerOptions":{},"sourceOptions":{}}')},83:E=>{E.exports=JSON.parse('{"playerOptions":{"fluid":true,"controls":false,"muted":true,"floatingWhenNotVisible":"none","hideContextMenu":false,"autoplay":true,"loop":true},"sourceOptions":{}}')}},g={},u=function E(I){var F=g[I];if(F!==void 0)return F.exports;var D=g[I]={exports:{}};return l[I].call(D.exports,D,D.exports,E),D.exports}(607),y=C;for(var m in u)y[m]=u[m];u.__esModule&&Object.defineProperty(y,"__esModule",{value:!0})},4728:(T,C,l)=>{l.d(C,{Bu:()=>D,K9:()=>F,Z2:()=>u,gJ:()=>y,qw:()=>I,vo:()=>g,wL:()=>m});const g={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},u="cloudinary-a.akamaihd.net",y="res.cloudinary.com",m={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialHeight:"ih",initialWidth:"iw",initial_duration:"idu",initialDuration:"idu",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},E="(([0-9]*)\\.([0-9]+)|([0-9]+))([%pP])?",I=RegExp(`^${E}$`),F=RegExp(`(${E})\\.\\.(${E})`),D={font_weight:"normal",font_style:"normal",text_decoration:"none",text_align:"",stroke:"none"}},4870:(T,C,l)=>{l.d(C,{D:()=>u});var g=l(4728);function u(y,m,E,I,F,D,X,R){let Z;if(m.indexOf("/")===0)return"/res"+m;let dt=!E;return X?(R!=null&&R!==g.Z2||(R=E?m+"-res.cloudinary.com":g.gJ),dt==null&&(dt=R===g.gJ),Z="https://"+R):Z=D?"http://"+D:"http://"+[E?m+"-":"","res",".cloudinary.com"].join(""),dt&&(Z+="/"+m),Z}}},Sd={};function ai(T){var C=Sd[T];if(C!==void 0)return C.exports;var l=Sd[T]={id:T,loaded:!1,exports:{}};return wd[T].call(l.exports,l,l.exports,ai),l.loaded=!0,l.exports}ai.m=wd,jn=[],ai.O=(T,C,l,g)=>{if(!C){var u=1/0;for(I=0;I<jn.length;I++){for(var[C,l,g]=jn[I],y=!0,m=0;m<C.length;m++)(!1&g||u>=g)&&Object.keys(ai.O).every(R=>ai.O[R](C[m]))?C.splice(m--,1):(y=!1,g<u&&(u=g));if(y){jn.splice(I--,1);var E=l();E!==void 0&&(T=E)}}return T}g=g||0;for(var I=jn.length;I>0&&jn[I-1][2]>g;I--)jn[I]=jn[I-1];jn[I]=[C,l,g]},ai.n=T=>{var C=T&&T.__esModule?()=>T.default:()=>T;return ai.d(C,{a:C}),C},ai.d=(T,C)=>{for(var l in C)ai.o(C,l)&&!ai.o(T,l)&&Object.defineProperty(T,l,{enumerable:!0,get:C[l]})},ai.f={},ai.e=T=>Promise.all(Object.keys(ai.f).reduce((C,l)=>(ai.f[l](T,C),C),[])),ai.u=T=>({33:"playlist",40:"debug",330:"ima",367:"dash",404:"interaction-areas",410:"recommendations-overlay",525:"shoppable",625:"chapters"})[T]+".js",ai.miniCssF=T=>{},ai.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ai.o=(T,C)=>Object.prototype.hasOwnProperty.call(T,C),$r={},ai.l=(T,C,l,g)=>{if($r[T])$r[T].push(C);else{var u,y;if(l!==void 0)for(var m=document.getElementsByTagName("script"),E=0;E<m.length;E++){var I=m[E];if(I.getAttribute("src")==T){u=I;break}}u||(y=!0,(u=document.createElement("script")).type="module",u.charset="utf-8",u.timeout=120,ai.nc&&u.setAttribute("nonce",ai.nc),u.src=T),$r[T]=[C];var F=(X,R)=>{u.onerror=u.onload=null,clearTimeout(D);var Z=$r[T];if(delete $r[T],u.parentNode&&u.parentNode.removeChild(u),Z&&Z.forEach(dt=>dt(R)),X)return X(R)},D=setTimeout(F.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=F.bind(null,u.onerror),u.onload=F.bind(null,u.onload),y&&document.head.appendChild(u)}},ai.r=T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})},ai.nmd=T=>(T.paths=[],T.children||(T.children=[]),T),ai.p="",(()=>{var T={278:0,869:0};ai.f.j=(g,u)=>{var y=ai.o(T,g)?T[g]:void 0;if(y!==0)if(y)u.push(y[2]);else if(g!=869){var m=new Promise((F,D)=>y=T[g]=[F,D]);u.push(y[2]=m);var E=ai.p+ai.u(g),I=new Error;ai.l(E,F=>{if(ai.o(T,g)&&((y=T[g])!==0&&(T[g]=void 0),y)){var D=F&&(F.type==="load"?"missing":F.type),X=F&&F.target&&F.target.src;I.message="Loading chunk "+g+` failed.
(`+D+": "+X+")",I.name="ChunkLoadError",I.type=D,I.request=X,y[1](I)}},"chunk-"+g,g)}else T[g]=0},ai.O.j=g=>T[g]===0;var C=(g,u)=>{var y,m,[E,I,F]=u,D=0;if(E.some(R=>T[R]!==0)){for(y in I)ai.o(I,y)&&(ai.m[y]=I[y]);if(F)var X=F(ai)}for(g&&g(u);D<E.length;D++)m=E[D],ai.o(T,m)&&T[m]&&T[m][0](),T[m]=0;return ai.O(X)},l=self.cloudinaryVideoPlayerChunkLoading=self.cloudinaryVideoPlayerChunkLoading||[];l.forEach(C.bind(null,0)),l.push=C.bind(null,l.push.bind(l))})();var Ea=ai.O(void 0,[869],()=>ai(3978));(Ea=ai.O(Ea)).Ay;Ea.OC;Ea.xY;Ea.Iy;document.addEventListener("DOMContentLoaded",T=>{const C="ABCDEFGHIJKLMNOPQRSTUVWXYZ",l=document.querySelector("#changing_text"),g=["Pharmacometricians","Clinical Pharmacologists","Quantitative System Pharmacologists","Data Scientists"];let u=0,y=!1,m,E=Date.now();const I=10,F=()=>{y=!0;let D=0;const X=g[u],R=()=>{let Z=Date.now(),dt=Z-E;dt>I&&(l.innerText=X.split("").map((Dt,rt)=>rt<D?X[rt]:Dt==" "?" ":C[Math.floor(Math.random()*22)]).join(""),D+=1/3,E=Z-dt%I),D<l.innerText.length&&y&&(m=requestAnimationFrame(R))};m=requestAnimationFrame(R)};F(),setInterval(()=>{u=(u+1)%g.length,document.hidden||F()},4e3),document.addEventListener("visibilitychange",function(){document.hidden?(y=!1,cancelAnimationFrame(m)):F()})})});export default Rm();
